{"version":3,"file":"index-BnT6hrY5.js","sources":["../../node_modules/@kurkle/color/dist/color.esm.js","../../node_modules/chart.js/dist/chunks/helpers.dataset.js","../../node_modules/chart.js/dist/chart.js","../../src/ui/domUtils.ts","../../node_modules/decimal.js/decimal.mjs","../../src/relativity_lib.ts","../../node_modules/seedrandom/lib/alea.js","../../node_modules/seedrandom/lib/xor128.js","../../node_modules/seedrandom/lib/xorwow.js","../../node_modules/seedrandom/lib/xorshift7.js","../../node_modules/seedrandom/lib/xor4096.js","../../node_modules/seedrandom/lib/tychei.js","../../__vite-browser-external","../../node_modules/seedrandom/seedrandom.js","../../node_modules/seedrandom/index.js","../../src/extra_lib.ts","../../src/charts/dataGeneration.ts","../../src/charts/charts.ts","../../src/ui/eventHandlers.ts","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/sourceEvent.js","../../node_modules/d3-selection/src/pointer.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-transition/src/selection/index.js","../../src/charts/minkowski-colors.ts","../../src/charts/minkowski-core.ts","../../src/charts/minkowski.ts","../../src/charts/minkowski-twins.ts","../../src/charts/simultaneityState.ts","../../src/urlState.ts","../../src/charts/simultaneity.ts","../../src/main.ts"],"sourcesContent":["/*!\n * @kurkle/color v0.3.4\n * https://github.com/kurkle/color#readme\n * (c) 2024 Jukka Kurkela\n * Released under the MIT License\n */\nfunction round(v) {\n  return v + 0.5 | 0;\n}\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\nfunction p2b(v) {\n  return lim(round(v * 2.55), 0, 255);\n}\nfunction b2p(v) {\n  return lim(round(v / 2.55), 0, 100);\n}\nfunction n2b(v) {\n  return lim(round(v * 255), 0, 255);\n}\nfunction b2n(v) {\n  return lim(round(v / 2.55) / 100, 0, 1);\n}\nfunction n2p(v) {\n  return lim(round(v * 100), 0, 100);\n}\n\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\nconst hex = [...'0123456789ABCDEF'];\nconst h1 = b => hex[b & 0xF];\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\nfunction hexParse(str) {\n  var len = str.length;\n  var ret;\n  if (str[0] === '#') {\n    if (len === 4 || len === 5) {\n      ret = {\n        r: 255 & map$1[str[1]] * 17,\n        g: 255 & map$1[str[2]] * 17,\n        b: 255 & map$1[str[3]] * 17,\n        a: len === 5 ? map$1[str[4]] * 17 : 255\n      };\n    } else if (len === 7 || len === 9) {\n      ret = {\n        r: map$1[str[1]] << 4 | map$1[str[2]],\n        g: map$1[str[3]] << 4 | map$1[str[4]],\n        b: map$1[str[5]] << 4 | map$1[str[6]],\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\n      };\n    }\n  }\n  return ret;\n}\nconst alpha = (a, f) => a < 255 ? f(a) : '';\nfunction hexString(v) {\n  var f = isShort(v) ? h1 : h2;\n  return v\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\n    : undefined;\n}\n\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction hsl2rgbn(h, s, l) {\n  const a = s * Math.min(l, 1 - l);\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\nfunction hsv2rgbn(h, s, v) {\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  return [f(5), f(3), f(1)];\n}\nfunction hwb2rgbn(h, w, b) {\n  const rgb = hsl2rgbn(h, 1, 0.5);\n  let i;\n  if (w + b > 1) {\n    i = 1 / (w + b);\n    w *= i;\n    b *= i;\n  }\n  for (i = 0; i < 3; i++) {\n    rgb[i] *= 1 - w - b;\n    rgb[i] += w;\n  }\n  return rgb;\n}\nfunction hueValue(r, g, b, d, max) {\n  if (r === max) {\n    return ((g - b) / d) + (g < b ? 6 : 0);\n  }\n  if (g === max) {\n    return (b - r) / d + 2;\n  }\n  return (r - g) / d + 4;\n}\nfunction rgb2hsl(v) {\n  const range = 255;\n  const r = v.r / range;\n  const g = v.g / range;\n  const b = v.b / range;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  let h, s, d;\n  if (max !== min) {\n    d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    h = hueValue(r, g, b, d, max);\n    h = h * 60 + 0.5;\n  }\n  return [h | 0, s || 0, l];\n}\nfunction calln(f, a, b, c) {\n  return (\n    Array.isArray(a)\n      ? f(a[0], a[1], a[2])\n      : f(a, b, c)\n  ).map(n2b);\n}\nfunction hsl2rgb(h, s, l) {\n  return calln(hsl2rgbn, h, s, l);\n}\nfunction hwb2rgb(h, w, b) {\n  return calln(hwb2rgbn, h, w, b);\n}\nfunction hsv2rgb(h, s, v) {\n  return calln(hsv2rgbn, h, s, v);\n}\nfunction hue(h) {\n  return (h % 360 + 360) % 360;\n}\nfunction hueParse(str) {\n  const m = HUE_RE.exec(str);\n  let a = 255;\n  let v;\n  if (!m) {\n    return;\n  }\n  if (m[5] !== v) {\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\n  }\n  const h = hue(+m[2]);\n  const p1 = +m[3] / 100;\n  const p2 = +m[4] / 100;\n  if (m[1] === 'hwb') {\n    v = hwb2rgb(h, p1, p2);\n  } else if (m[1] === 'hsv') {\n    v = hsv2rgb(h, p1, p2);\n  } else {\n    v = hsl2rgb(h, p1, p2);\n  }\n  return {\n    r: v[0],\n    g: v[1],\n    b: v[2],\n    a: a\n  };\n}\nfunction rotate(v, deg) {\n  var h = rgb2hsl(v);\n  h[0] = hue(h[0] + deg);\n  h = hsl2rgb(h);\n  v.r = h[0];\n  v.g = h[1];\n  v.b = h[2];\n}\nfunction hslString(v) {\n  if (!v) {\n    return;\n  }\n  const a = rgb2hsl(v);\n  const h = a[0];\n  const s = n2p(a[1]);\n  const l = n2p(a[2]);\n  return v.a < 255\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\n\nconst map = {\n\tx: 'dark',\n\tZ: 'light',\n\tY: 're',\n\tX: 'blu',\n\tW: 'gr',\n\tV: 'medium',\n\tU: 'slate',\n\tA: 'ee',\n\tT: 'ol',\n\tS: 'or',\n\tB: 'ra',\n\tC: 'lateg',\n\tD: 'ights',\n\tR: 'in',\n\tQ: 'turquois',\n\tE: 'hi',\n\tP: 'ro',\n\tO: 'al',\n\tN: 'le',\n\tM: 'de',\n\tL: 'yello',\n\tF: 'en',\n\tK: 'ch',\n\tG: 'arks',\n\tH: 'ea',\n\tI: 'ightg',\n\tJ: 'wh'\n};\nconst names$1 = {\n\tOiceXe: 'f0f8ff',\n\tantiquewEte: 'faebd7',\n\taqua: 'ffff',\n\taquamarRe: '7fffd4',\n\tazuY: 'f0ffff',\n\tbeige: 'f5f5dc',\n\tbisque: 'ffe4c4',\n\tblack: '0',\n\tblanKedOmond: 'ffebcd',\n\tXe: 'ff',\n\tXeviTet: '8a2be2',\n\tbPwn: 'a52a2a',\n\tburlywood: 'deb887',\n\tcaMtXe: '5f9ea0',\n\tKartYuse: '7fff00',\n\tKocTate: 'd2691e',\n\tcSO: 'ff7f50',\n\tcSnflowerXe: '6495ed',\n\tcSnsilk: 'fff8dc',\n\tcrimson: 'dc143c',\n\tcyan: 'ffff',\n\txXe: '8b',\n\txcyan: '8b8b',\n\txgTMnPd: 'b8860b',\n\txWay: 'a9a9a9',\n\txgYF: '6400',\n\txgYy: 'a9a9a9',\n\txkhaki: 'bdb76b',\n\txmagFta: '8b008b',\n\txTivegYF: '556b2f',\n\txSange: 'ff8c00',\n\txScEd: '9932cc',\n\txYd: '8b0000',\n\txsOmon: 'e9967a',\n\txsHgYF: '8fbc8f',\n\txUXe: '483d8b',\n\txUWay: '2f4f4f',\n\txUgYy: '2f4f4f',\n\txQe: 'ced1',\n\txviTet: '9400d3',\n\tdAppRk: 'ff1493',\n\tdApskyXe: 'bfff',\n\tdimWay: '696969',\n\tdimgYy: '696969',\n\tdodgerXe: '1e90ff',\n\tfiYbrick: 'b22222',\n\tflSOwEte: 'fffaf0',\n\tfoYstWAn: '228b22',\n\tfuKsia: 'ff00ff',\n\tgaRsbSo: 'dcdcdc',\n\tghostwEte: 'f8f8ff',\n\tgTd: 'ffd700',\n\tgTMnPd: 'daa520',\n\tWay: '808080',\n\tgYF: '8000',\n\tgYFLw: 'adff2f',\n\tgYy: '808080',\n\thoneyMw: 'f0fff0',\n\thotpRk: 'ff69b4',\n\tRdianYd: 'cd5c5c',\n\tRdigo: '4b0082',\n\tivSy: 'fffff0',\n\tkhaki: 'f0e68c',\n\tlavFMr: 'e6e6fa',\n\tlavFMrXsh: 'fff0f5',\n\tlawngYF: '7cfc00',\n\tNmoncEffon: 'fffacd',\n\tZXe: 'add8e6',\n\tZcSO: 'f08080',\n\tZcyan: 'e0ffff',\n\tZgTMnPdLw: 'fafad2',\n\tZWay: 'd3d3d3',\n\tZgYF: '90ee90',\n\tZgYy: 'd3d3d3',\n\tZpRk: 'ffb6c1',\n\tZsOmon: 'ffa07a',\n\tZsHgYF: '20b2aa',\n\tZskyXe: '87cefa',\n\tZUWay: '778899',\n\tZUgYy: '778899',\n\tZstAlXe: 'b0c4de',\n\tZLw: 'ffffe0',\n\tlime: 'ff00',\n\tlimegYF: '32cd32',\n\tlRF: 'faf0e6',\n\tmagFta: 'ff00ff',\n\tmaPon: '800000',\n\tVaquamarRe: '66cdaa',\n\tVXe: 'cd',\n\tVScEd: 'ba55d3',\n\tVpurpN: '9370db',\n\tVsHgYF: '3cb371',\n\tVUXe: '7b68ee',\n\tVsprRggYF: 'fa9a',\n\tVQe: '48d1cc',\n\tVviTetYd: 'c71585',\n\tmidnightXe: '191970',\n\tmRtcYam: 'f5fffa',\n\tmistyPse: 'ffe4e1',\n\tmoccasR: 'ffe4b5',\n\tnavajowEte: 'ffdead',\n\tnavy: '80',\n\tTdlace: 'fdf5e6',\n\tTive: '808000',\n\tTivedBb: '6b8e23',\n\tSange: 'ffa500',\n\tSangeYd: 'ff4500',\n\tScEd: 'da70d6',\n\tpOegTMnPd: 'eee8aa',\n\tpOegYF: '98fb98',\n\tpOeQe: 'afeeee',\n\tpOeviTetYd: 'db7093',\n\tpapayawEp: 'ffefd5',\n\tpHKpuff: 'ffdab9',\n\tperu: 'cd853f',\n\tpRk: 'ffc0cb',\n\tplum: 'dda0dd',\n\tpowMrXe: 'b0e0e6',\n\tpurpN: '800080',\n\tYbeccapurpN: '663399',\n\tYd: 'ff0000',\n\tPsybrown: 'bc8f8f',\n\tPyOXe: '4169e1',\n\tsaddNbPwn: '8b4513',\n\tsOmon: 'fa8072',\n\tsandybPwn: 'f4a460',\n\tsHgYF: '2e8b57',\n\tsHshell: 'fff5ee',\n\tsiFna: 'a0522d',\n\tsilver: 'c0c0c0',\n\tskyXe: '87ceeb',\n\tUXe: '6a5acd',\n\tUWay: '708090',\n\tUgYy: '708090',\n\tsnow: 'fffafa',\n\tsprRggYF: 'ff7f',\n\tstAlXe: '4682b4',\n\ttan: 'd2b48c',\n\tteO: '8080',\n\ttEstN: 'd8bfd8',\n\ttomato: 'ff6347',\n\tQe: '40e0d0',\n\tviTet: 'ee82ee',\n\tJHt: 'f5deb3',\n\twEte: 'ffffff',\n\twEtesmoke: 'f5f5f5',\n\tLw: 'ffff00',\n\tLwgYF: '9acd32'\n};\nfunction unpack() {\n  const unpacked = {};\n  const keys = Object.keys(names$1);\n  const tkeys = Object.keys(map);\n  let i, j, k, ok, nk;\n  for (i = 0; i < keys.length; i++) {\n    ok = nk = keys[i];\n    for (j = 0; j < tkeys.length; j++) {\n      k = tkeys[j];\n      nk = nk.replace(k, map[k]);\n    }\n    k = parseInt(names$1[ok], 16);\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\n  }\n  return unpacked;\n}\n\nlet names;\nfunction nameParse(str) {\n  if (!names) {\n    names = unpack();\n    names.transparent = [0, 0, 0, 0];\n  }\n  const a = names[str.toLowerCase()];\n  return a && {\n    r: a[0],\n    g: a[1],\n    b: a[2],\n    a: a.length === 4 ? a[3] : 255\n  };\n}\n\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction rgbParse(str) {\n  const m = RGB_RE.exec(str);\n  let a = 255;\n  let r, g, b;\n  if (!m) {\n    return;\n  }\n  if (m[7] !== r) {\n    const v = +m[7];\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\n  }\n  r = +m[1];\n  g = +m[3];\n  b = +m[5];\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nfunction rgbString(v) {\n  return v && (\n    v.a < 255\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\n  );\n}\n\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\nfunction interpolate(rgb1, rgb2, t) {\n  const r = from(b2n(rgb1.r));\n  const g = from(b2n(rgb1.g));\n  const b = from(b2n(rgb1.b));\n  return {\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\n  };\n}\n\nfunction modHSL(v, i, ratio) {\n  if (v) {\n    let tmp = rgb2hsl(v);\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\n    tmp = hsl2rgb(tmp);\n    v.r = tmp[0];\n    v.g = tmp[1];\n    v.b = tmp[2];\n  }\n}\nfunction clone(v, proto) {\n  return v ? Object.assign(proto || {}, v) : v;\n}\nfunction fromObject(input) {\n  var v = {r: 0, g: 0, b: 0, a: 255};\n  if (Array.isArray(input)) {\n    if (input.length >= 3) {\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\n      if (input.length > 3) {\n        v.a = n2b(input[3]);\n      }\n    }\n  } else {\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\n    v.a = n2b(v.a);\n  }\n  return v;\n}\nfunction functionParse(str) {\n  if (str.charAt(0) === 'r') {\n    return rgbParse(str);\n  }\n  return hueParse(str);\n}\nclass Color {\n  constructor(input) {\n    if (input instanceof Color) {\n      return input;\n    }\n    const type = typeof input;\n    let v;\n    if (type === 'object') {\n      v = fromObject(input);\n    } else if (type === 'string') {\n      v = hexParse(input) || nameParse(input) || functionParse(input);\n    }\n    this._rgb = v;\n    this._valid = !!v;\n  }\n  get valid() {\n    return this._valid;\n  }\n  get rgb() {\n    var v = clone(this._rgb);\n    if (v) {\n      v.a = b2n(v.a);\n    }\n    return v;\n  }\n  set rgb(obj) {\n    this._rgb = fromObject(obj);\n  }\n  rgbString() {\n    return this._valid ? rgbString(this._rgb) : undefined;\n  }\n  hexString() {\n    return this._valid ? hexString(this._rgb) : undefined;\n  }\n  hslString() {\n    return this._valid ? hslString(this._rgb) : undefined;\n  }\n  mix(color, weight) {\n    if (color) {\n      const c1 = this.rgb;\n      const c2 = color.rgb;\n      let w2;\n      const p = weight === w2 ? 0.5 : weight;\n      const w = 2 * p - 1;\n      const a = c1.a - c2.a;\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n      w2 = 1 - w1;\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\n      c1.a = p * c1.a + (1 - p) * c2.a;\n      this.rgb = c1;\n    }\n    return this;\n  }\n  interpolate(color, t) {\n    if (color) {\n      this._rgb = interpolate(this._rgb, color._rgb, t);\n    }\n    return this;\n  }\n  clone() {\n    return new Color(this.rgb);\n  }\n  alpha(a) {\n    this._rgb.a = n2b(a);\n    return this;\n  }\n  clearer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 - ratio;\n    return this;\n  }\n  greyscale() {\n    const rgb = this._rgb;\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\n    rgb.r = rgb.g = rgb.b = val;\n    return this;\n  }\n  opaquer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 + ratio;\n    return this;\n  }\n  negate() {\n    const v = this._rgb;\n    v.r = 255 - v.r;\n    v.g = 255 - v.g;\n    v.b = 255 - v.b;\n    return this;\n  }\n  lighten(ratio) {\n    modHSL(this._rgb, 2, ratio);\n    return this;\n  }\n  darken(ratio) {\n    modHSL(this._rgb, 2, -ratio);\n    return this;\n  }\n  saturate(ratio) {\n    modHSL(this._rgb, 1, ratio);\n    return this;\n  }\n  desaturate(ratio) {\n    modHSL(this._rgb, 1, -ratio);\n    return this;\n  }\n  rotate(deg) {\n    rotate(this._rgb, deg);\n    return this;\n  }\n}\n\nfunction index_esm(input) {\n  return new Color(input);\n}\n\nexport { Color, b2n, b2p, index_esm as default, hexParse, hexString, hsl2rgb, hslString, hsv2rgb, hueParse, hwb2rgb, lim, n2b, n2p, nameParse, p2b, rgb2hsl, rgbParse, rgbString, rotate, round };\n","/*!\n * Chart.js v4.5.1\n * https://www.chartjs.org\n * (c) 2025 Chart.js Contributors\n * Released under the MIT License\n */\nimport { Color } from '@kurkle/color';\n\n/**\n * @namespace Chart.helpers\n */ /**\n * An empty function that can be used, for example, for optional callback.\n */ function noop() {\n/* noop */ }\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */ const uid = (()=>{\n    let id = 0;\n    return ()=>id++;\n})();\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */ function isNullOrUndef(value) {\n    return value === null || value === undefined;\n}\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */ function isArray(value) {\n    if (Array.isArray && Array.isArray(value)) {\n        return true;\n    }\n    const type = Object.prototype.toString.call(value);\n    if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n        return true;\n    }\n    return false;\n}\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */ function isObject(value) {\n    return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */ function isNumberFinite(value) {\n    return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */ function finiteOrDefault(value, defaultValue) {\n    return isNumberFinite(value) ? value : defaultValue;\n}\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */ function valueOrDefault(value, defaultValue) {\n    return typeof value === 'undefined' ? defaultValue : value;\n}\nconst toPercentage = (value, dimension)=>typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 : +value / dimension;\nconst toDimension = (value, dimension)=>typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 * dimension : +value;\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */ function callback(fn, args, thisArg) {\n    if (fn && typeof fn.call === 'function') {\n        return fn.apply(thisArg, args);\n    }\n}\nfunction each(loopable, fn, thisArg, reverse) {\n    let i, len, keys;\n    if (isArray(loopable)) {\n        len = loopable.length;\n        if (reverse) {\n            for(i = len - 1; i >= 0; i--){\n                fn.call(thisArg, loopable[i], i);\n            }\n        } else {\n            for(i = 0; i < len; i++){\n                fn.call(thisArg, loopable[i], i);\n            }\n        }\n    } else if (isObject(loopable)) {\n        keys = Object.keys(loopable);\n        len = keys.length;\n        for(i = 0; i < len; i++){\n            fn.call(thisArg, loopable[keys[i]], keys[i]);\n        }\n    }\n}\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */ function _elementsEqual(a0, a1) {\n    let i, ilen, v0, v1;\n    if (!a0 || !a1 || a0.length !== a1.length) {\n        return false;\n    }\n    for(i = 0, ilen = a0.length; i < ilen; ++i){\n        v0 = a0[i];\n        v1 = a1[i];\n        if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */ function clone(source) {\n    if (isArray(source)) {\n        return source.map(clone);\n    }\n    if (isObject(source)) {\n        const target = Object.create(null);\n        const keys = Object.keys(source);\n        const klen = keys.length;\n        let k = 0;\n        for(; k < klen; ++k){\n            target[keys[k]] = clone(source[keys[k]]);\n        }\n        return target;\n    }\n    return source;\n}\nfunction isValidKey(key) {\n    return [\n        '__proto__',\n        'prototype',\n        'constructor'\n    ].indexOf(key) === -1;\n}\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */ function _merger(key, target, source, options) {\n    if (!isValidKey(key)) {\n        return;\n    }\n    const tval = target[key];\n    const sval = source[key];\n    if (isObject(tval) && isObject(sval)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        merge(tval, sval, options);\n    } else {\n        target[key] = clone(sval);\n    }\n}\nfunction merge(target, source, options) {\n    const sources = isArray(source) ? source : [\n        source\n    ];\n    const ilen = sources.length;\n    if (!isObject(target)) {\n        return target;\n    }\n    options = options || {};\n    const merger = options.merger || _merger;\n    let current;\n    for(let i = 0; i < ilen; ++i){\n        current = sources[i];\n        if (!isObject(current)) {\n            continue;\n        }\n        const keys = Object.keys(current);\n        for(let k = 0, klen = keys.length; k < klen; ++k){\n            merger(keys[k], target, current, options);\n        }\n    }\n    return target;\n}\nfunction mergeIf(target, source) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return merge(target, source, {\n        merger: _mergerIf\n    });\n}\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */ function _mergerIf(key, target, source) {\n    if (!isValidKey(key)) {\n        return;\n    }\n    const tval = target[key];\n    const sval = source[key];\n    if (isObject(tval) && isObject(sval)) {\n        mergeIf(tval, sval);\n    } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n        target[key] = clone(sval);\n    }\n}\n/**\n * @private\n */ function _deprecated(scope, value, previous, current) {\n    if (value !== undefined) {\n        console.warn(scope + ': \"' + previous + '\" is deprecated. Please use \"' + current + '\" instead');\n    }\n}\n// resolveObjectKey resolver cache\nconst keyResolvers = {\n    // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n    '': (v)=>v,\n    // default resolvers\n    x: (o)=>o.x,\n    y: (o)=>o.y\n};\n/**\n * @private\n */ function _splitKey(key) {\n    const parts = key.split('.');\n    const keys = [];\n    let tmp = '';\n    for (const part of parts){\n        tmp += part;\n        if (tmp.endsWith('\\\\')) {\n            tmp = tmp.slice(0, -1) + '.';\n        } else {\n            keys.push(tmp);\n            tmp = '';\n        }\n    }\n    return keys;\n}\nfunction _getKeyResolver(key) {\n    const keys = _splitKey(key);\n    return (obj)=>{\n        for (const k of keys){\n            if (k === '') {\n                break;\n            }\n            obj = obj && obj[k];\n        }\n        return obj;\n    };\n}\nfunction resolveObjectKey(obj, key) {\n    const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n    return resolver(obj);\n}\n/**\n * @private\n */ function _capitalize(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nconst defined = (value)=>typeof value !== 'undefined';\nconst isFunction = (value)=>typeof value === 'function';\n// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\nconst setsEqual = (a, b)=>{\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const item of a){\n        if (!b.has(item)) {\n            return false;\n        }\n    }\n    return true;\n};\n/**\n * @param e - The event\n * @private\n */ function _isClickEvent(e) {\n    return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n\n/**\n * @alias Chart.helpers.math\n * @namespace\n */ const PI = Math.PI;\nconst TAU = 2 * PI;\nconst PITAU = TAU + PI;\nconst INFINITY = Number.POSITIVE_INFINITY;\nconst RAD_PER_DEG = PI / 180;\nconst HALF_PI = PI / 2;\nconst QUARTER_PI = PI / 4;\nconst TWO_THIRDS_PI = PI * 2 / 3;\nconst log10 = Math.log10;\nconst sign = Math.sign;\nfunction almostEquals(x, y, epsilon) {\n    return Math.abs(x - y) < epsilon;\n}\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */ function niceNum(range) {\n    const roundedRange = Math.round(range);\n    range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n    const niceRange = Math.pow(10, Math.floor(log10(range)));\n    const fraction = range / niceRange;\n    const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n    return niceFraction * niceRange;\n}\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */ function _factorize(value) {\n    const result = [];\n    const sqrt = Math.sqrt(value);\n    let i;\n    for(i = 1; i < sqrt; i++){\n        if (value % i === 0) {\n            result.push(i);\n            result.push(value / i);\n        }\n    }\n    if (sqrt === (sqrt | 0)) {\n        result.push(sqrt);\n    }\n    result.sort((a, b)=>a - b).pop();\n    return result;\n}\n/**\n * Verifies that attempting to coerce n to string or number won't throw a TypeError.\n */ function isNonPrimitive(n) {\n    return typeof n === 'symbol' || typeof n === 'object' && n !== null && !(Symbol.toPrimitive in n || 'toString' in n || 'valueOf' in n);\n}\nfunction isNumber(n) {\n    return !isNonPrimitive(n) && !isNaN(parseFloat(n)) && isFinite(n);\n}\nfunction almostWhole(x, epsilon) {\n    const rounded = Math.round(x);\n    return rounded - epsilon <= x && rounded + epsilon >= x;\n}\n/**\n * @private\n */ function _setMinAndMaxByKey(array, target, property) {\n    let i, ilen, value;\n    for(i = 0, ilen = array.length; i < ilen; i++){\n        value = array[i][property];\n        if (!isNaN(value)) {\n            target.min = Math.min(target.min, value);\n            target.max = Math.max(target.max, value);\n        }\n    }\n}\nfunction toRadians(degrees) {\n    return degrees * (PI / 180);\n}\nfunction toDegrees(radians) {\n    return radians * (180 / PI);\n}\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */ function _decimalPlaces(x) {\n    if (!isNumberFinite(x)) {\n        return;\n    }\n    let e = 1;\n    let p = 0;\n    while(Math.round(x * e) / e !== x){\n        e *= 10;\n        p++;\n    }\n    return p;\n}\n// Gets the angle from vertical upright to the point about a centre.\nfunction getAngleFromPoint(centrePoint, anglePoint) {\n    const distanceFromXCenter = anglePoint.x - centrePoint.x;\n    const distanceFromYCenter = anglePoint.y - centrePoint.y;\n    const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n    let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n    if (angle < -0.5 * PI) {\n        angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n    }\n    return {\n        angle,\n        distance: radialDistanceFromCenter\n    };\n}\nfunction distanceBetweenPoints(pt1, pt2) {\n    return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */ function _angleDiff(a, b) {\n    return (a - b + PITAU) % TAU - PI;\n}\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */ function _normalizeAngle(a) {\n    return (a % TAU + TAU) % TAU;\n}\n/**\n * @private\n */ function _angleBetween(angle, start, end, sameAngleIsFullCircle) {\n    const a = _normalizeAngle(angle);\n    const s = _normalizeAngle(start);\n    const e = _normalizeAngle(end);\n    const angleToStart = _normalizeAngle(s - a);\n    const angleToEnd = _normalizeAngle(e - a);\n    const startToAngle = _normalizeAngle(a - s);\n    const endToAngle = _normalizeAngle(a - e);\n    return a === s || a === e || sameAngleIsFullCircle && s === e || angleToStart > angleToEnd && startToAngle < endToAngle;\n}\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */ function _limitValue(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n/**\n * @param {number} value\n * @private\n */ function _int16Range(value) {\n    return _limitValue(value, -32768, 32767);\n}\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */ function _isBetween(value, start, end, epsilon = 1e-6) {\n    return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n\nfunction _lookup(table, value, cmp) {\n    cmp = cmp || ((index)=>table[index] < value);\n    let hi = table.length - 1;\n    let lo = 0;\n    let mid;\n    while(hi - lo > 1){\n        mid = lo + hi >> 1;\n        if (cmp(mid)) {\n            lo = mid;\n        } else {\n            hi = mid;\n        }\n    }\n    return {\n        lo,\n        hi\n    };\n}\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */ const _lookupByKey = (table, key, value, last)=>_lookup(table, value, last ? (index)=>{\n        const ti = table[index][key];\n        return ti < value || ti === value && table[index + 1][key] === value;\n    } : (index)=>table[index][key] < value);\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */ const _rlookupByKey = (table, key, value)=>_lookup(table, value, (index)=>table[index][key] >= value);\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */ function _filterBetween(values, min, max) {\n    let start = 0;\n    let end = values.length;\n    while(start < end && values[start] < min){\n        start++;\n    }\n    while(end > start && values[end - 1] > max){\n        end--;\n    }\n    return start > 0 || end < values.length ? values.slice(start, end) : values;\n}\nconst arrayEvents = [\n    'push',\n    'pop',\n    'shift',\n    'splice',\n    'unshift'\n];\nfunction listenArrayEvents(array, listener) {\n    if (array._chartjs) {\n        array._chartjs.listeners.push(listener);\n        return;\n    }\n    Object.defineProperty(array, '_chartjs', {\n        configurable: true,\n        enumerable: false,\n        value: {\n            listeners: [\n                listener\n            ]\n        }\n    });\n    arrayEvents.forEach((key)=>{\n        const method = '_onData' + _capitalize(key);\n        const base = array[key];\n        Object.defineProperty(array, key, {\n            configurable: true,\n            enumerable: false,\n            value (...args) {\n                const res = base.apply(this, args);\n                array._chartjs.listeners.forEach((object)=>{\n                    if (typeof object[method] === 'function') {\n                        object[method](...args);\n                    }\n                });\n                return res;\n            }\n        });\n    });\n}\nfunction unlistenArrayEvents(array, listener) {\n    const stub = array._chartjs;\n    if (!stub) {\n        return;\n    }\n    const listeners = stub.listeners;\n    const index = listeners.indexOf(listener);\n    if (index !== -1) {\n        listeners.splice(index, 1);\n    }\n    if (listeners.length > 0) {\n        return;\n    }\n    arrayEvents.forEach((key)=>{\n        delete array[key];\n    });\n    delete array._chartjs;\n}\n/**\n * @param items\n */ function _arrayUnique(items) {\n    const set = new Set(items);\n    if (set.size === items.length) {\n        return items;\n    }\n    return Array.from(set);\n}\n\nfunction fontString(pixelSize, fontStyle, fontFamily) {\n    return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n/**\n* Request animation polyfill\n*/ const requestAnimFrame = function() {\n    if (typeof window === 'undefined') {\n        return function(callback) {\n            return callback();\n        };\n    }\n    return window.requestAnimationFrame;\n}();\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */ function throttled(fn, thisArg) {\n    let argsToUse = [];\n    let ticking = false;\n    return function(...args) {\n        // Save the args for use later\n        argsToUse = args;\n        if (!ticking) {\n            ticking = true;\n            requestAnimFrame.call(window, ()=>{\n                ticking = false;\n                fn.apply(thisArg, argsToUse);\n            });\n        }\n    };\n}\n/**\n * Debounces calling `fn` for `delay` ms\n */ function debounce(fn, delay) {\n    let timeout;\n    return function(...args) {\n        if (delay) {\n            clearTimeout(timeout);\n            timeout = setTimeout(fn, delay, args);\n        } else {\n            fn.apply(this, args);\n        }\n        return delay;\n    };\n}\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */ const _toLeftRightCenter = (align)=>align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */ const _alignStartEnd = (align, start, end)=>align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */ const _textX = (align, left, right, rtl)=>{\n    const check = rtl ? 'left' : 'right';\n    return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n/**\n * Return start and count of visible points.\n * @private\n */ function _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled) {\n    const pointCount = points.length;\n    let start = 0;\n    let count = pointCount;\n    if (meta._sorted) {\n        const { iScale , vScale , _parsed  } = meta;\n        const spanGaps = meta.dataset ? meta.dataset.options ? meta.dataset.options.spanGaps : null : null;\n        const axis = iScale.axis;\n        const { min , max , minDefined , maxDefined  } = iScale.getUserBounds();\n        if (minDefined) {\n            start = Math.min(// @ts-expect-error Need to type _parsed\n            _lookupByKey(_parsed, axis, min).lo, // @ts-expect-error Need to fix types on _lookupByKey\n            animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo);\n            if (spanGaps) {\n                const distanceToDefinedLo = _parsed.slice(0, start + 1).reverse().findIndex((point)=>!isNullOrUndef(point[vScale.axis]));\n                start -= Math.max(0, distanceToDefinedLo);\n            }\n            start = _limitValue(start, 0, pointCount - 1);\n        }\n        if (maxDefined) {\n            let end = Math.max(// @ts-expect-error Need to type _parsed\n            _lookupByKey(_parsed, iScale.axis, max, true).hi + 1, // @ts-expect-error Need to fix types on _lookupByKey\n            animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1);\n            if (spanGaps) {\n                const distanceToDefinedHi = _parsed.slice(end - 1).findIndex((point)=>!isNullOrUndef(point[vScale.axis]));\n                end += Math.max(0, distanceToDefinedHi);\n            }\n            count = _limitValue(end, start, pointCount) - start;\n        } else {\n            count = pointCount - start;\n        }\n    }\n    return {\n        start,\n        count\n    };\n}\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */ function _scaleRangesChanged(meta) {\n    const { xScale , yScale , _scaleRanges  } = meta;\n    const newRanges = {\n        xmin: xScale.min,\n        xmax: xScale.max,\n        ymin: yScale.min,\n        ymax: yScale.max\n    };\n    if (!_scaleRanges) {\n        meta._scaleRanges = newRanges;\n        return true;\n    }\n    const changed = _scaleRanges.xmin !== xScale.min || _scaleRanges.xmax !== xScale.max || _scaleRanges.ymin !== yScale.min || _scaleRanges.ymax !== yScale.max;\n    Object.assign(_scaleRanges, newRanges);\n    return changed;\n}\n\nconst atEdge = (t)=>t === 0 || t === 1;\nconst elasticIn = (t, s, p)=>-(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t, s, p)=>Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */ const effects = {\n    linear: (t)=>t,\n    easeInQuad: (t)=>t * t,\n    easeOutQuad: (t)=>-t * (t - 2),\n    easeInOutQuad: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t : -0.5 * (--t * (t - 2) - 1),\n    easeInCubic: (t)=>t * t * t,\n    easeOutCubic: (t)=>(t -= 1) * t * t + 1,\n    easeInOutCubic: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t : 0.5 * ((t -= 2) * t * t + 2),\n    easeInQuart: (t)=>t * t * t * t,\n    easeOutQuart: (t)=>-((t -= 1) * t * t * t - 1),\n    easeInOutQuart: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2),\n    easeInQuint: (t)=>t * t * t * t * t,\n    easeOutQuint: (t)=>(t -= 1) * t * t * t * t + 1,\n    easeInOutQuint: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t * t * t : 0.5 * ((t -= 2) * t * t * t * t + 2),\n    easeInSine: (t)=>-Math.cos(t * HALF_PI) + 1,\n    easeOutSine: (t)=>Math.sin(t * HALF_PI),\n    easeInOutSine: (t)=>-0.5 * (Math.cos(PI * t) - 1),\n    easeInExpo: (t)=>t === 0 ? 0 : Math.pow(2, 10 * (t - 1)),\n    easeOutExpo: (t)=>t === 1 ? 1 : -Math.pow(2, -10 * t) + 1,\n    easeInOutExpo: (t)=>atEdge(t) ? t : t < 0.5 ? 0.5 * Math.pow(2, 10 * (t * 2 - 1)) : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n    easeInCirc: (t)=>t >= 1 ? t : -(Math.sqrt(1 - t * t) - 1),\n    easeOutCirc: (t)=>Math.sqrt(1 - (t -= 1) * t),\n    easeInOutCirc: (t)=>(t /= 0.5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n    easeInElastic: (t)=>atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n    easeOutElastic: (t)=>atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n    easeInOutElastic (t) {\n        const s = 0.1125;\n        const p = 0.45;\n        return atEdge(t) ? t : t < 0.5 ? 0.5 * elasticIn(t * 2, s, p) : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n    },\n    easeInBack (t) {\n        const s = 1.70158;\n        return t * t * ((s + 1) * t - s);\n    },\n    easeOutBack (t) {\n        const s = 1.70158;\n        return (t -= 1) * t * ((s + 1) * t + s) + 1;\n    },\n    easeInOutBack (t) {\n        let s = 1.70158;\n        if ((t /= 0.5) < 1) {\n            return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));\n        }\n        return 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);\n    },\n    easeInBounce: (t)=>1 - effects.easeOutBounce(1 - t),\n    easeOutBounce (t) {\n        const m = 7.5625;\n        const d = 2.75;\n        if (t < 1 / d) {\n            return m * t * t;\n        }\n        if (t < 2 / d) {\n            return m * (t -= 1.5 / d) * t + 0.75;\n        }\n        if (t < 2.5 / d) {\n            return m * (t -= 2.25 / d) * t + 0.9375;\n        }\n        return m * (t -= 2.625 / d) * t + 0.984375;\n    },\n    easeInOutBounce: (t)=>t < 0.5 ? effects.easeInBounce(t * 2) * 0.5 : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5\n};\n\nfunction isPatternOrGradient(value) {\n    if (value && typeof value === 'object') {\n        const type = value.toString();\n        return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n    }\n    return false;\n}\nfunction color(value) {\n    return isPatternOrGradient(value) ? value : new Color(value);\n}\nfunction getHoverColor(value) {\n    return isPatternOrGradient(value) ? value : new Color(value).saturate(0.5).darken(0.1).hexString();\n}\n\nconst numbers = [\n    'x',\n    'y',\n    'borderWidth',\n    'radius',\n    'tension'\n];\nconst colors = [\n    'color',\n    'borderColor',\n    'backgroundColor'\n];\nfunction applyAnimationsDefaults(defaults) {\n    defaults.set('animation', {\n        delay: undefined,\n        duration: 1000,\n        easing: 'easeOutQuart',\n        fn: undefined,\n        from: undefined,\n        loop: undefined,\n        to: undefined,\n        type: undefined\n    });\n    defaults.describe('animation', {\n        _fallback: false,\n        _indexable: false,\n        _scriptable: (name)=>name !== 'onProgress' && name !== 'onComplete' && name !== 'fn'\n    });\n    defaults.set('animations', {\n        colors: {\n            type: 'color',\n            properties: colors\n        },\n        numbers: {\n            type: 'number',\n            properties: numbers\n        }\n    });\n    defaults.describe('animations', {\n        _fallback: 'animation'\n    });\n    defaults.set('transitions', {\n        active: {\n            animation: {\n                duration: 400\n            }\n        },\n        resize: {\n            animation: {\n                duration: 0\n            }\n        },\n        show: {\n            animations: {\n                colors: {\n                    from: 'transparent'\n                },\n                visible: {\n                    type: 'boolean',\n                    duration: 0\n                }\n            }\n        },\n        hide: {\n            animations: {\n                colors: {\n                    to: 'transparent'\n                },\n                visible: {\n                    type: 'boolean',\n                    easing: 'linear',\n                    fn: (v)=>v | 0\n                }\n            }\n        }\n    });\n}\n\nfunction applyLayoutsDefaults(defaults) {\n    defaults.set('layout', {\n        autoPadding: true,\n        padding: {\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0\n        }\n    });\n}\n\nconst intlCache = new Map();\nfunction getNumberFormat(locale, options) {\n    options = options || {};\n    const cacheKey = locale + JSON.stringify(options);\n    let formatter = intlCache.get(cacheKey);\n    if (!formatter) {\n        formatter = new Intl.NumberFormat(locale, options);\n        intlCache.set(cacheKey, formatter);\n    }\n    return formatter;\n}\nfunction formatNumber(num, locale, options) {\n    return getNumberFormat(locale, options).format(num);\n}\n\nconst formatters = {\n values (value) {\n        return isArray(value) ?  value : '' + value;\n    },\n numeric (tickValue, index, ticks) {\n        if (tickValue === 0) {\n            return '0';\n        }\n        const locale = this.chart.options.locale;\n        let notation;\n        let delta = tickValue;\n        if (ticks.length > 1) {\n            const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n            if (maxTick < 1e-4 || maxTick > 1e+15) {\n                notation = 'scientific';\n            }\n            delta = calculateDelta(tickValue, ticks);\n        }\n        const logDelta = log10(Math.abs(delta));\n        const numDecimal = isNaN(logDelta) ? 1 : Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\n        const options = {\n            notation,\n            minimumFractionDigits: numDecimal,\n            maximumFractionDigits: numDecimal\n        };\n        Object.assign(options, this.options.ticks.format);\n        return formatNumber(tickValue, locale, options);\n    },\n logarithmic (tickValue, index, ticks) {\n        if (tickValue === 0) {\n            return '0';\n        }\n        const remain = ticks[index].significand || tickValue / Math.pow(10, Math.floor(log10(tickValue)));\n        if ([\n            1,\n            2,\n            3,\n            5,\n            10,\n            15\n        ].includes(remain) || index > 0.8 * ticks.length) {\n            return formatters.numeric.call(this, tickValue, index, ticks);\n        }\n        return '';\n    }\n};\nfunction calculateDelta(tickValue, ticks) {\n    let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n    if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n        delta = tickValue - Math.floor(tickValue);\n    }\n    return delta;\n}\n var Ticks = {\n    formatters\n};\n\nfunction applyScaleDefaults(defaults) {\n    defaults.set('scale', {\n        display: true,\n        offset: false,\n        reverse: false,\n        beginAtZero: false,\n bounds: 'ticks',\n        clip: true,\n grace: 0,\n        grid: {\n            display: true,\n            lineWidth: 1,\n            drawOnChartArea: true,\n            drawTicks: true,\n            tickLength: 8,\n            tickWidth: (_ctx, options)=>options.lineWidth,\n            tickColor: (_ctx, options)=>options.color,\n            offset: false\n        },\n        border: {\n            display: true,\n            dash: [],\n            dashOffset: 0.0,\n            width: 1\n        },\n        title: {\n            display: false,\n            text: '',\n            padding: {\n                top: 4,\n                bottom: 4\n            }\n        },\n        ticks: {\n            minRotation: 0,\n            maxRotation: 50,\n            mirror: false,\n            textStrokeWidth: 0,\n            textStrokeColor: '',\n            padding: 3,\n            display: true,\n            autoSkip: true,\n            autoSkipPadding: 3,\n            labelOffset: 0,\n            callback: Ticks.formatters.values,\n            minor: {},\n            major: {},\n            align: 'center',\n            crossAlign: 'near',\n            showLabelBackdrop: false,\n            backdropColor: 'rgba(255, 255, 255, 0.75)',\n            backdropPadding: 2\n        }\n    });\n    defaults.route('scale.ticks', 'color', '', 'color');\n    defaults.route('scale.grid', 'color', '', 'borderColor');\n    defaults.route('scale.border', 'color', '', 'borderColor');\n    defaults.route('scale.title', 'color', '', 'color');\n    defaults.describe('scale', {\n        _fallback: false,\n        _scriptable: (name)=>!name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n        _indexable: (name)=>name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash'\n    });\n    defaults.describe('scales', {\n        _fallback: 'scale'\n    });\n    defaults.describe('scale.ticks', {\n        _scriptable: (name)=>name !== 'backdropPadding' && name !== 'callback',\n        _indexable: (name)=>name !== 'backdropPadding'\n    });\n}\n\nconst overrides = Object.create(null);\nconst descriptors = Object.create(null);\n function getScope$1(node, key) {\n    if (!key) {\n        return node;\n    }\n    const keys = key.split('.');\n    for(let i = 0, n = keys.length; i < n; ++i){\n        const k = keys[i];\n        node = node[k] || (node[k] = Object.create(null));\n    }\n    return node;\n}\nfunction set(root, scope, values) {\n    if (typeof scope === 'string') {\n        return merge(getScope$1(root, scope), values);\n    }\n    return merge(getScope$1(root, ''), scope);\n}\n class Defaults {\n    constructor(_descriptors, _appliers){\n        this.animation = undefined;\n        this.backgroundColor = 'rgba(0,0,0,0.1)';\n        this.borderColor = 'rgba(0,0,0,0.1)';\n        this.color = '#666';\n        this.datasets = {};\n        this.devicePixelRatio = (context)=>context.chart.platform.getDevicePixelRatio();\n        this.elements = {};\n        this.events = [\n            'mousemove',\n            'mouseout',\n            'click',\n            'touchstart',\n            'touchmove'\n        ];\n        this.font = {\n            family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n            size: 12,\n            style: 'normal',\n            lineHeight: 1.2,\n            weight: null\n        };\n        this.hover = {};\n        this.hoverBackgroundColor = (ctx, options)=>getHoverColor(options.backgroundColor);\n        this.hoverBorderColor = (ctx, options)=>getHoverColor(options.borderColor);\n        this.hoverColor = (ctx, options)=>getHoverColor(options.color);\n        this.indexAxis = 'x';\n        this.interaction = {\n            mode: 'nearest',\n            intersect: true,\n            includeInvisible: false\n        };\n        this.maintainAspectRatio = true;\n        this.onHover = null;\n        this.onClick = null;\n        this.parsing = true;\n        this.plugins = {};\n        this.responsive = true;\n        this.scale = undefined;\n        this.scales = {};\n        this.showLine = true;\n        this.drawActiveElementsOnTop = true;\n        this.describe(_descriptors);\n        this.apply(_appliers);\n    }\n set(scope, values) {\n        return set(this, scope, values);\n    }\n get(scope) {\n        return getScope$1(this, scope);\n    }\n describe(scope, values) {\n        return set(descriptors, scope, values);\n    }\n    override(scope, values) {\n        return set(overrides, scope, values);\n    }\n route(scope, name, targetScope, targetName) {\n        const scopeObject = getScope$1(this, scope);\n        const targetScopeObject = getScope$1(this, targetScope);\n        const privateName = '_' + name;\n        Object.defineProperties(scopeObject, {\n            [privateName]: {\n                value: scopeObject[name],\n                writable: true\n            },\n            [name]: {\n                enumerable: true,\n                get () {\n                    const local = this[privateName];\n                    const target = targetScopeObject[targetName];\n                    if (isObject(local)) {\n                        return Object.assign({}, target, local);\n                    }\n                    return valueOrDefault(local, target);\n                },\n                set (value) {\n                    this[privateName] = value;\n                }\n            }\n        });\n    }\n    apply(appliers) {\n        appliers.forEach((apply)=>apply(this));\n    }\n}\nvar defaults = /* #__PURE__ */ new Defaults({\n    _scriptable: (name)=>!name.startsWith('on'),\n    _indexable: (name)=>name !== 'events',\n    hover: {\n        _fallback: 'interaction'\n    },\n    interaction: {\n        _scriptable: false,\n        _indexable: false\n    }\n}, [\n    applyAnimationsDefaults,\n    applyLayoutsDefaults,\n    applyScaleDefaults\n]);\n\n/**\n * Converts the given font object into a CSS font string.\n * @param font - A font object.\n * @return The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\n * @private\n */ function toFontString(font) {\n    if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n        return null;\n    }\n    return (font.style ? font.style + ' ' : '') + (font.weight ? font.weight + ' ' : '') + font.size + 'px ' + font.family;\n}\n/**\n * @private\n */ function _measureText(ctx, data, gc, longest, string) {\n    let textWidth = data[string];\n    if (!textWidth) {\n        textWidth = data[string] = ctx.measureText(string).width;\n        gc.push(string);\n    }\n    if (textWidth > longest) {\n        longest = textWidth;\n    }\n    return longest;\n}\n/**\n * @private\n */ // eslint-disable-next-line complexity\nfunction _longestText(ctx, font, arrayOfThings, cache) {\n    cache = cache || {};\n    let data = cache.data = cache.data || {};\n    let gc = cache.garbageCollect = cache.garbageCollect || [];\n    if (cache.font !== font) {\n        data = cache.data = {};\n        gc = cache.garbageCollect = [];\n        cache.font = font;\n    }\n    ctx.save();\n    ctx.font = font;\n    let longest = 0;\n    const ilen = arrayOfThings.length;\n    let i, j, jlen, thing, nestedThing;\n    for(i = 0; i < ilen; i++){\n        thing = arrayOfThings[i];\n        // Undefined strings and arrays should not be measured\n        if (thing !== undefined && thing !== null && !isArray(thing)) {\n            longest = _measureText(ctx, data, gc, longest, thing);\n        } else if (isArray(thing)) {\n            // if it is an array lets measure each element\n            // to do maybe simplify this function a bit so we can do this more recursively?\n            for(j = 0, jlen = thing.length; j < jlen; j++){\n                nestedThing = thing[j];\n                // Undefined strings and arrays should not be measured\n                if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n                    longest = _measureText(ctx, data, gc, longest, nestedThing);\n                }\n            }\n        }\n    }\n    ctx.restore();\n    const gcLen = gc.length / 2;\n    if (gcLen > arrayOfThings.length) {\n        for(i = 0; i < gcLen; i++){\n            delete data[gc[i]];\n        }\n        gc.splice(0, gcLen);\n    }\n    return longest;\n}\n/**\n * Returns the aligned pixel value to avoid anti-aliasing blur\n * @param chart - The chart instance.\n * @param pixel - A pixel value.\n * @param width - The width of the element.\n * @returns The aligned pixel value.\n * @private\n */ function _alignPixel(chart, pixel, width) {\n    const devicePixelRatio = chart.currentDevicePixelRatio;\n    const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n    return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n/**\n * Clears the entire canvas.\n */ function clearCanvas(canvas, ctx) {\n    if (!ctx && !canvas) {\n        return;\n    }\n    ctx = ctx || canvas.getContext('2d');\n    ctx.save();\n    // canvas.width and canvas.height do not consider the canvas transform,\n    // while clearRect does\n    ctx.resetTransform();\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.restore();\n}\nfunction drawPoint(ctx, options, x, y) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    drawPointLegend(ctx, options, x, y, null);\n}\n// eslint-disable-next-line complexity\nfunction drawPointLegend(ctx, options, x, y, w) {\n    let type, xOffset, yOffset, size, cornerRadius, width, xOffsetW, yOffsetW;\n    const style = options.pointStyle;\n    const rotation = options.rotation;\n    const radius = options.radius;\n    let rad = (rotation || 0) * RAD_PER_DEG;\n    if (style && typeof style === 'object') {\n        type = style.toString();\n        if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n            ctx.save();\n            ctx.translate(x, y);\n            ctx.rotate(rad);\n            ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n            ctx.restore();\n            return;\n        }\n    }\n    if (isNaN(radius) || radius <= 0) {\n        return;\n    }\n    ctx.beginPath();\n    switch(style){\n        // Default includes circle\n        default:\n            if (w) {\n                ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n            } else {\n                ctx.arc(x, y, radius, 0, TAU);\n            }\n            ctx.closePath();\n            break;\n        case 'triangle':\n            width = w ? w / 2 : radius;\n            ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            rad += TWO_THIRDS_PI;\n            ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            rad += TWO_THIRDS_PI;\n            ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            ctx.closePath();\n            break;\n        case 'rectRounded':\n            // NOTE: the rounded rect implementation changed to use `arc` instead of\n            // `quadraticCurveTo` since it generates better results when rect is\n            // almost a circle. 0.516 (instead of 0.5) produces results with visually\n            // closer proportion to the previous impl and it is inscribed in the\n            // circle with `radius`. For more details, see the following PRs:\n            // https://github.com/chartjs/Chart.js/issues/5597\n            // https://github.com/chartjs/Chart.js/issues/5858\n            cornerRadius = radius * 0.516;\n            size = radius - cornerRadius;\n            xOffset = Math.cos(rad + QUARTER_PI) * size;\n            xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n            yOffset = Math.sin(rad + QUARTER_PI) * size;\n            yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n            ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n            ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n            ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n            ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n            ctx.closePath();\n            break;\n        case 'rect':\n            if (!rotation) {\n                size = Math.SQRT1_2 * radius;\n                width = w ? w / 2 : size;\n                ctx.rect(x - width, y - size, 2 * width, 2 * size);\n                break;\n            }\n            rad += QUARTER_PI;\n        /* falls through */ case 'rectRot':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            ctx.closePath();\n            break;\n        case 'crossRot':\n            rad += QUARTER_PI;\n        /* falls through */ case 'cross':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            break;\n        case 'star':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            rad += QUARTER_PI;\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            break;\n        case 'line':\n            xOffset = w ? w / 2 : Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            ctx.moveTo(x - xOffset, y - yOffset);\n            ctx.lineTo(x + xOffset, y + yOffset);\n            break;\n        case 'dash':\n            ctx.moveTo(x, y);\n            ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n            break;\n        case false:\n            ctx.closePath();\n            break;\n    }\n    ctx.fill();\n    if (options.borderWidth > 0) {\n        ctx.stroke();\n    }\n}\n/**\n * Returns true if the point is inside the rectangle\n * @param point - The point to test\n * @param area - The rectangle\n * @param margin - allowed margin\n * @private\n */ function _isPointInArea(point, area, margin) {\n    margin = margin || 0.5; // margin - default is to match rounded decimals\n    return !area || point && point.x > area.left - margin && point.x < area.right + margin && point.y > area.top - margin && point.y < area.bottom + margin;\n}\nfunction clipArea(ctx, area) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n    ctx.clip();\n}\nfunction unclipArea(ctx) {\n    ctx.restore();\n}\n/**\n * @private\n */ function _steppedLineTo(ctx, previous, target, flip, mode) {\n    if (!previous) {\n        return ctx.lineTo(target.x, target.y);\n    }\n    if (mode === 'middle') {\n        const midpoint = (previous.x + target.x) / 2.0;\n        ctx.lineTo(midpoint, previous.y);\n        ctx.lineTo(midpoint, target.y);\n    } else if (mode === 'after' !== !!flip) {\n        ctx.lineTo(previous.x, target.y);\n    } else {\n        ctx.lineTo(target.x, previous.y);\n    }\n    ctx.lineTo(target.x, target.y);\n}\n/**\n * @private\n */ function _bezierCurveTo(ctx, previous, target, flip) {\n    if (!previous) {\n        return ctx.lineTo(target.x, target.y);\n    }\n    ctx.bezierCurveTo(flip ? previous.cp1x : previous.cp2x, flip ? previous.cp1y : previous.cp2y, flip ? target.cp2x : target.cp1x, flip ? target.cp2y : target.cp1y, target.x, target.y);\n}\nfunction setRenderOpts(ctx, opts) {\n    if (opts.translation) {\n        ctx.translate(opts.translation[0], opts.translation[1]);\n    }\n    if (!isNullOrUndef(opts.rotation)) {\n        ctx.rotate(opts.rotation);\n    }\n    if (opts.color) {\n        ctx.fillStyle = opts.color;\n    }\n    if (opts.textAlign) {\n        ctx.textAlign = opts.textAlign;\n    }\n    if (opts.textBaseline) {\n        ctx.textBaseline = opts.textBaseline;\n    }\n}\nfunction decorateText(ctx, x, y, line, opts) {\n    if (opts.strikethrough || opts.underline) {\n        /**\n     * Now that IE11 support has been dropped, we can use more\n     * of the TextMetrics object. The actual bounding boxes\n     * are unflagged in Chrome, Firefox, Edge, and Safari so they\n     * can be safely used.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility\n     */ const metrics = ctx.measureText(line);\n        const left = x - metrics.actualBoundingBoxLeft;\n        const right = x + metrics.actualBoundingBoxRight;\n        const top = y - metrics.actualBoundingBoxAscent;\n        const bottom = y + metrics.actualBoundingBoxDescent;\n        const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n        ctx.strokeStyle = ctx.fillStyle;\n        ctx.beginPath();\n        ctx.lineWidth = opts.decorationWidth || 2;\n        ctx.moveTo(left, yDecoration);\n        ctx.lineTo(right, yDecoration);\n        ctx.stroke();\n    }\n}\nfunction drawBackdrop(ctx, opts) {\n    const oldColor = ctx.fillStyle;\n    ctx.fillStyle = opts.color;\n    ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n    ctx.fillStyle = oldColor;\n}\n/**\n * Render text onto the canvas\n */ function renderText(ctx, text, x, y, font, opts = {}) {\n    const lines = isArray(text) ? text : [\n        text\n    ];\n    const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n    let i, line;\n    ctx.save();\n    ctx.font = font.string;\n    setRenderOpts(ctx, opts);\n    for(i = 0; i < lines.length; ++i){\n        line = lines[i];\n        if (opts.backdrop) {\n            drawBackdrop(ctx, opts.backdrop);\n        }\n        if (stroke) {\n            if (opts.strokeColor) {\n                ctx.strokeStyle = opts.strokeColor;\n            }\n            if (!isNullOrUndef(opts.strokeWidth)) {\n                ctx.lineWidth = opts.strokeWidth;\n            }\n            ctx.strokeText(line, x, y, opts.maxWidth);\n        }\n        ctx.fillText(line, x, y, opts.maxWidth);\n        decorateText(ctx, x, y, line, opts);\n        y += Number(font.lineHeight);\n    }\n    ctx.restore();\n}\n/**\n * Add a path of a rectangle with rounded corners to the current sub-path\n * @param ctx - Context\n * @param rect - Bounding rect\n */ function addRoundedRectPath(ctx, rect) {\n    const { x , y , w , h , radius  } = rect;\n    // top left arc\n    ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, 1.5 * PI, PI, true);\n    // line from top left to bottom left\n    ctx.lineTo(x, y + h - radius.bottomLeft);\n    // bottom left arc\n    ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n    // line from bottom left to bottom right\n    ctx.lineTo(x + w - radius.bottomRight, y + h);\n    // bottom right arc\n    ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n    // line from bottom right to top right\n    ctx.lineTo(x + w, y + radius.topRight);\n    // top right arc\n    ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n    // line from top right to top left\n    ctx.lineTo(x + radius.topLeft, y);\n}\n\nconst LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nconst FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n/**\n * @alias Chart.helpers.options\n * @namespace\n */ /**\n * Converts the given line height `value` in pixels for a specific font `size`.\n * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n * @param size - The font size (in pixels) used to resolve relative `value`.\n * @returns The effective line height in pixels (size * 1.2 if value is invalid).\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n * @since 2.7.0\n */ function toLineHeight(value, size) {\n    const matches = ('' + value).match(LINE_HEIGHT);\n    if (!matches || matches[1] === 'normal') {\n        return size * 1.2;\n    }\n    value = +matches[2];\n    switch(matches[3]){\n        case 'px':\n            return value;\n        case '%':\n            value /= 100;\n            break;\n    }\n    return size * value;\n}\nconst numberOrZero = (v)=>+v || 0;\nfunction _readValueToProps(value, props) {\n    const ret = {};\n    const objProps = isObject(props);\n    const keys = objProps ? Object.keys(props) : props;\n    const read = isObject(value) ? objProps ? (prop)=>valueOrDefault(value[prop], value[props[prop]]) : (prop)=>value[prop] : ()=>value;\n    for (const prop of keys){\n        ret[prop] = numberOrZero(read(prop));\n    }\n    return ret;\n}\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */ function toTRBL(value) {\n    return _readValueToProps(value, {\n        top: 'y',\n        right: 'x',\n        bottom: 'y',\n        left: 'x'\n    });\n}\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */ function toTRBLCorners(value) {\n    return _readValueToProps(value, [\n        'topLeft',\n        'topRight',\n        'bottomLeft',\n        'bottomRight'\n    ]);\n}\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */ function toPadding(value) {\n    const obj = toTRBL(value);\n    obj.width = obj.left + obj.right;\n    obj.height = obj.top + obj.bottom;\n    return obj;\n}\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */ function toFont(options, fallback) {\n    options = options || {};\n    fallback = fallback || defaults.font;\n    let size = valueOrDefault(options.size, fallback.size);\n    if (typeof size === 'string') {\n        size = parseInt(size, 10);\n    }\n    let style = valueOrDefault(options.style, fallback.style);\n    if (style && !('' + style).match(FONT_STYLE)) {\n        console.warn('Invalid font style specified: \"' + style + '\"');\n        style = undefined;\n    }\n    const font = {\n        family: valueOrDefault(options.family, fallback.family),\n        lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n        size,\n        style,\n        weight: valueOrDefault(options.weight, fallback.weight),\n        string: ''\n    };\n    font.string = toFontString(font);\n    return font;\n}\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */ function resolve(inputs, context, index, info) {\n    let cacheable = true;\n    let i, ilen, value;\n    for(i = 0, ilen = inputs.length; i < ilen; ++i){\n        value = inputs[i];\n        if (value === undefined) {\n            continue;\n        }\n        if (context !== undefined && typeof value === 'function') {\n            value = value(context);\n            cacheable = false;\n        }\n        if (index !== undefined && isArray(value)) {\n            value = value[index % value.length];\n            cacheable = false;\n        }\n        if (value !== undefined) {\n            if (info && !cacheable) {\n                info.cacheable = false;\n            }\n            return value;\n        }\n    }\n}\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */ function _addGrace(minmax, grace, beginAtZero) {\n    const { min , max  } = minmax;\n    const change = toDimension(grace, (max - min) / 2);\n    const keepZero = (value, add)=>beginAtZero && value === 0 ? 0 : value + add;\n    return {\n        min: keepZero(min, -Math.abs(change)),\n        max: keepZero(max, change)\n    };\n}\nfunction createContext(parentContext, context) {\n    return Object.assign(Object.create(parentContext), context);\n}\n\n/**\n * Creates a Proxy for resolving raw values for options.\n * @param scopes - The option scopes to look for values, in resolution order\n * @param prefixes - The prefixes for values, in resolution order.\n * @param rootScopes - The root option scopes\n * @param fallback - Parent scopes fallback\n * @param getTarget - callback for getting the target for changed values\n * @returns Proxy\n * @private\n */ function _createResolver(scopes, prefixes = [\n    ''\n], rootScopes, fallback, getTarget = ()=>scopes[0]) {\n    const finalRootScopes = rootScopes || scopes;\n    if (typeof fallback === 'undefined') {\n        fallback = _resolve('_fallback', scopes);\n    }\n    const cache = {\n        [Symbol.toStringTag]: 'Object',\n        _cacheable: true,\n        _scopes: scopes,\n        _rootScopes: finalRootScopes,\n        _fallback: fallback,\n        _getTarget: getTarget,\n        override: (scope)=>_createResolver([\n                scope,\n                ...scopes\n            ], prefixes, finalRootScopes, fallback)\n    };\n    return new Proxy(cache, {\n        /**\n     * A trap for the delete operator.\n     */ deleteProperty (target, prop) {\n            delete target[prop]; // remove from cache\n            delete target._keys; // remove cached keys\n            delete scopes[0][prop]; // remove from top level scope\n            return true;\n        },\n        /**\n     * A trap for getting property values.\n     */ get (target, prop) {\n            return _cached(target, prop, ()=>_resolveWithPrefixes(prop, prefixes, scopes, target));\n        },\n        /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */ getOwnPropertyDescriptor (target, prop) {\n            return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n        },\n        /**\n     * A trap for Object.getPrototypeOf.\n     */ getPrototypeOf () {\n            return Reflect.getPrototypeOf(scopes[0]);\n        },\n        /**\n     * A trap for the in operator.\n     */ has (target, prop) {\n            return getKeysFromAllScopes(target).includes(prop);\n        },\n        /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */ ownKeys (target) {\n            return getKeysFromAllScopes(target);\n        },\n        /**\n     * A trap for setting property values.\n     */ set (target, prop, value) {\n            const storage = target._storage || (target._storage = getTarget());\n            target[prop] = storage[prop] = value; // set to top level scope + cache\n            delete target._keys; // remove cached keys\n            return true;\n        }\n    });\n}\n/**\n * Returns an Proxy for resolving option values with context.\n * @param proxy - The Proxy returned by `_createResolver`\n * @param context - Context object for scriptable/indexable options\n * @param subProxy - The proxy provided for scriptable options\n * @param descriptorDefaults - Defaults for descriptors\n * @private\n */ function _attachContext(proxy, context, subProxy, descriptorDefaults) {\n    const cache = {\n        _cacheable: false,\n        _proxy: proxy,\n        _context: context,\n        _subProxy: subProxy,\n        _stack: new Set(),\n        _descriptors: _descriptors(proxy, descriptorDefaults),\n        setContext: (ctx)=>_attachContext(proxy, ctx, subProxy, descriptorDefaults),\n        override: (scope)=>_attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n    };\n    return new Proxy(cache, {\n        /**\n     * A trap for the delete operator.\n     */ deleteProperty (target, prop) {\n            delete target[prop]; // remove from cache\n            delete proxy[prop]; // remove from proxy\n            return true;\n        },\n        /**\n     * A trap for getting property values.\n     */ get (target, prop, receiver) {\n            return _cached(target, prop, ()=>_resolveWithContext(target, prop, receiver));\n        },\n        /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */ getOwnPropertyDescriptor (target, prop) {\n            return target._descriptors.allKeys ? Reflect.has(proxy, prop) ? {\n                enumerable: true,\n                configurable: true\n            } : undefined : Reflect.getOwnPropertyDescriptor(proxy, prop);\n        },\n        /**\n     * A trap for Object.getPrototypeOf.\n     */ getPrototypeOf () {\n            return Reflect.getPrototypeOf(proxy);\n        },\n        /**\n     * A trap for the in operator.\n     */ has (target, prop) {\n            return Reflect.has(proxy, prop);\n        },\n        /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */ ownKeys () {\n            return Reflect.ownKeys(proxy);\n        },\n        /**\n     * A trap for setting property values.\n     */ set (target, prop, value) {\n            proxy[prop] = value; // set to proxy\n            delete target[prop]; // remove from cache\n            return true;\n        }\n    });\n}\n/**\n * @private\n */ function _descriptors(proxy, defaults = {\n    scriptable: true,\n    indexable: true\n}) {\n    const { _scriptable =defaults.scriptable , _indexable =defaults.indexable , _allKeys =defaults.allKeys  } = proxy;\n    return {\n        allKeys: _allKeys,\n        scriptable: _scriptable,\n        indexable: _indexable,\n        isScriptable: isFunction(_scriptable) ? _scriptable : ()=>_scriptable,\n        isIndexable: isFunction(_indexable) ? _indexable : ()=>_indexable\n    };\n}\nconst readKey = (prefix, name)=>prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop, value)=>isObject(value) && prop !== 'adapters' && (Object.getPrototypeOf(value) === null || value.constructor === Object);\nfunction _cached(target, prop, resolve) {\n    if (Object.prototype.hasOwnProperty.call(target, prop) || prop === 'constructor') {\n        return target[prop];\n    }\n    const value = resolve();\n    // cache the resolved value\n    target[prop] = value;\n    return value;\n}\nfunction _resolveWithContext(target, prop, receiver) {\n    const { _proxy , _context , _subProxy , _descriptors: descriptors  } = target;\n    let value = _proxy[prop]; // resolve from proxy\n    // resolve with context\n    if (isFunction(value) && descriptors.isScriptable(prop)) {\n        value = _resolveScriptable(prop, value, target, receiver);\n    }\n    if (isArray(value) && value.length) {\n        value = _resolveArray(prop, value, target, descriptors.isIndexable);\n    }\n    if (needsSubResolver(prop, value)) {\n        // if the resolved value is an object, create a sub resolver for it\n        value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n    }\n    return value;\n}\nfunction _resolveScriptable(prop, getValue, target, receiver) {\n    const { _proxy , _context , _subProxy , _stack  } = target;\n    if (_stack.has(prop)) {\n        throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n    }\n    _stack.add(prop);\n    let value = getValue(_context, _subProxy || receiver);\n    _stack.delete(prop);\n    if (needsSubResolver(prop, value)) {\n        // When scriptable option returns an object, create a resolver on that.\n        value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n    }\n    return value;\n}\nfunction _resolveArray(prop, value, target, isIndexable) {\n    const { _proxy , _context , _subProxy , _descriptors: descriptors  } = target;\n    if (typeof _context.index !== 'undefined' && isIndexable(prop)) {\n        return value[_context.index % value.length];\n    } else if (isObject(value[0])) {\n        // Array of objects, return array or resolvers\n        const arr = value;\n        const scopes = _proxy._scopes.filter((s)=>s !== arr);\n        value = [];\n        for (const item of arr){\n            const resolver = createSubResolver(scopes, _proxy, prop, item);\n            value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n        }\n    }\n    return value;\n}\nfunction resolveFallback(fallback, prop, value) {\n    return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\nconst getScope = (key, parent)=>key === true ? parent : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\nfunction addScopes(set, parentScopes, key, parentFallback, value) {\n    for (const parent of parentScopes){\n        const scope = getScope(key, parent);\n        if (scope) {\n            set.add(scope);\n            const fallback = resolveFallback(scope._fallback, key, value);\n            if (typeof fallback !== 'undefined' && fallback !== key && fallback !== parentFallback) {\n                // When we reach the descriptor that defines a new _fallback, return that.\n                // The fallback will resume to that new scope.\n                return fallback;\n            }\n        } else if (scope === false && typeof parentFallback !== 'undefined' && key !== parentFallback) {\n            // Fallback to `false` results to `false`, when falling back to different key.\n            // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`\n            return null;\n        }\n    }\n    return false;\n}\nfunction createSubResolver(parentScopes, resolver, prop, value) {\n    const rootScopes = resolver._rootScopes;\n    const fallback = resolveFallback(resolver._fallback, prop, value);\n    const allScopes = [\n        ...parentScopes,\n        ...rootScopes\n    ];\n    const set = new Set();\n    set.add(value);\n    let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n    if (key === null) {\n        return false;\n    }\n    if (typeof fallback !== 'undefined' && fallback !== prop) {\n        key = addScopesFromKey(set, allScopes, fallback, key, value);\n        if (key === null) {\n            return false;\n        }\n    }\n    return _createResolver(Array.from(set), [\n        ''\n    ], rootScopes, fallback, ()=>subGetTarget(resolver, prop, value));\n}\nfunction addScopesFromKey(set, allScopes, key, fallback, item) {\n    while(key){\n        key = addScopes(set, allScopes, key, fallback, item);\n    }\n    return key;\n}\nfunction subGetTarget(resolver, prop, value) {\n    const parent = resolver._getTarget();\n    if (!(prop in parent)) {\n        parent[prop] = {};\n    }\n    const target = parent[prop];\n    if (isArray(target) && isObject(value)) {\n        // For array of objects, the object is used to store updated values\n        return value;\n    }\n    return target || {};\n}\nfunction _resolveWithPrefixes(prop, prefixes, scopes, proxy) {\n    let value;\n    for (const prefix of prefixes){\n        value = _resolve(readKey(prefix, prop), scopes);\n        if (typeof value !== 'undefined') {\n            return needsSubResolver(prop, value) ? createSubResolver(scopes, proxy, prop, value) : value;\n        }\n    }\n}\nfunction _resolve(key, scopes) {\n    for (const scope of scopes){\n        if (!scope) {\n            continue;\n        }\n        const value = scope[key];\n        if (typeof value !== 'undefined') {\n            return value;\n        }\n    }\n}\nfunction getKeysFromAllScopes(target) {\n    let keys = target._keys;\n    if (!keys) {\n        keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n    }\n    return keys;\n}\nfunction resolveKeysFromAllScopes(scopes) {\n    const set = new Set();\n    for (const scope of scopes){\n        for (const key of Object.keys(scope).filter((k)=>!k.startsWith('_'))){\n            set.add(key);\n        }\n    }\n    return Array.from(set);\n}\nfunction _parseObjectDataRadialScale(meta, data, start, count) {\n    const { iScale  } = meta;\n    const { key ='r'  } = this._parsing;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n    for(i = 0, ilen = count; i < ilen; ++i){\n        index = i + start;\n        item = data[index];\n        parsed[i] = {\n            r: iScale.parse(resolveObjectKey(item, key), index)\n        };\n    }\n    return parsed;\n}\n\nconst EPSILON = Number.EPSILON || 1e-14;\nconst getPoint = (points, i)=>i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis)=>indexAxis === 'x' ? 'y' : 'x';\nfunction splineCurve(firstPoint, middlePoint, afterPoint, t) {\n    // Props to Rob Spencer at scaled innovation for his post on splining between points\n    // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n    // This function must also respect \"skipped\" points\n    const previous = firstPoint.skip ? middlePoint : firstPoint;\n    const current = middlePoint;\n    const next = afterPoint.skip ? middlePoint : afterPoint;\n    const d01 = distanceBetweenPoints(current, previous);\n    const d12 = distanceBetweenPoints(next, current);\n    let s01 = d01 / (d01 + d12);\n    let s12 = d12 / (d01 + d12);\n    // If all points are the same, s01 & s02 will be inf\n    s01 = isNaN(s01) ? 0 : s01;\n    s12 = isNaN(s12) ? 0 : s12;\n    const fa = t * s01; // scaling factor for triangle Ta\n    const fb = t * s12;\n    return {\n        previous: {\n            x: current.x - fa * (next.x - previous.x),\n            y: current.y - fa * (next.y - previous.y)\n        },\n        next: {\n            x: current.x + fb * (next.x - previous.x),\n            y: current.y + fb * (next.y - previous.y)\n        }\n    };\n}\n/**\n * Adjust tangents to ensure monotonic properties\n */ function monotoneAdjust(points, deltaK, mK) {\n    const pointsLen = points.length;\n    let alphaK, betaK, tauK, squaredMagnitude, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(let i = 0; i < pointsLen - 1; ++i){\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent || !pointAfter) {\n            continue;\n        }\n        if (almostEquals(deltaK[i], 0, EPSILON)) {\n            mK[i] = mK[i + 1] = 0;\n            continue;\n        }\n        alphaK = mK[i] / deltaK[i];\n        betaK = mK[i + 1] / deltaK[i];\n        squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n        if (squaredMagnitude <= 9) {\n            continue;\n        }\n        tauK = 3 / Math.sqrt(squaredMagnitude);\n        mK[i] = alphaK * tauK * deltaK[i];\n        mK[i + 1] = betaK * tauK * deltaK[i];\n    }\n}\nfunction monotoneCompute(points, mK, indexAxis = 'x') {\n    const valueAxis = getValueAxis(indexAxis);\n    const pointsLen = points.length;\n    let delta, pointBefore, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(let i = 0; i < pointsLen; ++i){\n        pointBefore = pointCurrent;\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent) {\n            continue;\n        }\n        const iPixel = pointCurrent[indexAxis];\n        const vPixel = pointCurrent[valueAxis];\n        if (pointBefore) {\n            delta = (iPixel - pointBefore[indexAxis]) / 3;\n            pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n            pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n        }\n        if (pointAfter) {\n            delta = (pointAfter[indexAxis] - iPixel) / 3;\n            pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n            pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n        }\n    }\n}\n/**\n * This function calculates Bzier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */ function splineCurveMonotone(points, indexAxis = 'x') {\n    const valueAxis = getValueAxis(indexAxis);\n    const pointsLen = points.length;\n    const deltaK = Array(pointsLen).fill(0);\n    const mK = Array(pointsLen);\n    // Calculate slopes (deltaK) and initialize tangents (mK)\n    let i, pointBefore, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(i = 0; i < pointsLen; ++i){\n        pointBefore = pointCurrent;\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent) {\n            continue;\n        }\n        if (pointAfter) {\n            const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n            // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n            deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n        }\n        mK[i] = !pointBefore ? deltaK[i] : !pointAfter ? deltaK[i - 1] : sign(deltaK[i - 1]) !== sign(deltaK[i]) ? 0 : (deltaK[i - 1] + deltaK[i]) / 2;\n    }\n    monotoneAdjust(points, deltaK, mK);\n    monotoneCompute(points, mK, indexAxis);\n}\nfunction capControlPoint(pt, min, max) {\n    return Math.max(Math.min(pt, max), min);\n}\nfunction capBezierPoints(points, area) {\n    let i, ilen, point, inArea, inAreaPrev;\n    let inAreaNext = _isPointInArea(points[0], area);\n    for(i = 0, ilen = points.length; i < ilen; ++i){\n        inAreaPrev = inArea;\n        inArea = inAreaNext;\n        inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n        if (!inArea) {\n            continue;\n        }\n        point = points[i];\n        if (inAreaPrev) {\n            point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n            point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n        }\n        if (inAreaNext) {\n            point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n            point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n        }\n    }\n}\n/**\n * @private\n */ function _updateBezierControlPoints(points, options, area, loop, indexAxis) {\n    let i, ilen, point, controlPoints;\n    // Only consider points that are drawn in case the spanGaps option is used\n    if (options.spanGaps) {\n        points = points.filter((pt)=>!pt.skip);\n    }\n    if (options.cubicInterpolationMode === 'monotone') {\n        splineCurveMonotone(points, indexAxis);\n    } else {\n        let prev = loop ? points[points.length - 1] : points[0];\n        for(i = 0, ilen = points.length; i < ilen; ++i){\n            point = points[i];\n            controlPoints = splineCurve(prev, point, points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen], options.tension);\n            point.cp1x = controlPoints.previous.x;\n            point.cp1y = controlPoints.previous.y;\n            point.cp2x = controlPoints.next.x;\n            point.cp2y = controlPoints.next.y;\n            prev = point;\n        }\n    }\n    if (options.capBezierPoints) {\n        capBezierPoints(points, area);\n    }\n}\n\n/**\n * @private\n */ function _isDomSupported() {\n    return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n/**\n * @private\n */ function _getParentNode(domNode) {\n    let parent = domNode.parentNode;\n    if (parent && parent.toString() === '[object ShadowRoot]') {\n        parent = parent.host;\n    }\n    return parent;\n}\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */ function parseMaxStyle(styleValue, node, parentProperty) {\n    let valueInPixels;\n    if (typeof styleValue === 'string') {\n        valueInPixels = parseInt(styleValue, 10);\n        if (styleValue.indexOf('%') !== -1) {\n            // percentage * size in dimension\n            valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n        }\n    } else {\n        valueInPixels = styleValue;\n    }\n    return valueInPixels;\n}\nconst getComputedStyle = (element)=>element.ownerDocument.defaultView.getComputedStyle(element, null);\nfunction getStyle(el, property) {\n    return getComputedStyle(el).getPropertyValue(property);\n}\nconst positions = [\n    'top',\n    'right',\n    'bottom',\n    'left'\n];\nfunction getPositionedStyle(styles, style, suffix) {\n    const result = {};\n    suffix = suffix ? '-' + suffix : '';\n    for(let i = 0; i < 4; i++){\n        const pos = positions[i];\n        result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n    }\n    result.width = result.left + result.right;\n    result.height = result.top + result.bottom;\n    return result;\n}\nconst useOffsetPos = (x, y, target)=>(x > 0 || y > 0) && (!target || !target.shadowRoot);\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */ function getCanvasPosition(e, canvas) {\n    const touches = e.touches;\n    const source = touches && touches.length ? touches[0] : e;\n    const { offsetX , offsetY  } = source;\n    let box = false;\n    let x, y;\n    if (useOffsetPos(offsetX, offsetY, e.target)) {\n        x = offsetX;\n        y = offsetY;\n    } else {\n        const rect = canvas.getBoundingClientRect();\n        x = source.clientX - rect.left;\n        y = source.clientY - rect.top;\n        box = true;\n    }\n    return {\n        x,\n        y,\n        box\n    };\n}\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */ function getRelativePosition(event, chart) {\n    if ('native' in event) {\n        return event;\n    }\n    const { canvas , currentDevicePixelRatio  } = chart;\n    const style = getComputedStyle(canvas);\n    const borderBox = style.boxSizing === 'border-box';\n    const paddings = getPositionedStyle(style, 'padding');\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const { x , y , box  } = getCanvasPosition(event, canvas);\n    const xOffset = paddings.left + (box && borders.left);\n    const yOffset = paddings.top + (box && borders.top);\n    let { width , height  } = chart;\n    if (borderBox) {\n        width -= paddings.width + borders.width;\n        height -= paddings.height + borders.height;\n    }\n    return {\n        x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n        y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n    };\n}\nfunction getContainerSize(canvas, width, height) {\n    let maxWidth, maxHeight;\n    if (width === undefined || height === undefined) {\n        const container = canvas && _getParentNode(canvas);\n        if (!container) {\n            width = canvas.clientWidth;\n            height = canvas.clientHeight;\n        } else {\n            const rect = container.getBoundingClientRect(); // this is the border box of the container\n            const containerStyle = getComputedStyle(container);\n            const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n            const containerPadding = getPositionedStyle(containerStyle, 'padding');\n            width = rect.width - containerPadding.width - containerBorder.width;\n            height = rect.height - containerPadding.height - containerBorder.height;\n            maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n            maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n        }\n    }\n    return {\n        width,\n        height,\n        maxWidth: maxWidth || INFINITY,\n        maxHeight: maxHeight || INFINITY\n    };\n}\nconst round1 = (v)=>Math.round(v * 10) / 10;\n// eslint-disable-next-line complexity\nfunction getMaximumSize(canvas, bbWidth, bbHeight, aspectRatio) {\n    const style = getComputedStyle(canvas);\n    const margins = getPositionedStyle(style, 'margin');\n    const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n    const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n    const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n    let { width , height  } = containerSize;\n    if (style.boxSizing === 'content-box') {\n        const borders = getPositionedStyle(style, 'border', 'width');\n        const paddings = getPositionedStyle(style, 'padding');\n        width -= paddings.width + borders.width;\n        height -= paddings.height + borders.height;\n    }\n    width = Math.max(0, width - margins.width);\n    height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);\n    width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n    height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n    if (width && !height) {\n        // https://github.com/chartjs/Chart.js/issues/4659\n        // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n        height = round1(width / 2);\n    }\n    const maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n    if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n        height = containerSize.height;\n        width = round1(Math.floor(height * aspectRatio));\n    }\n    return {\n        width,\n        height\n    };\n}\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */ function retinaScale(chart, forceRatio, forceStyle) {\n    const pixelRatio = forceRatio || 1;\n    const deviceHeight = round1(chart.height * pixelRatio);\n    const deviceWidth = round1(chart.width * pixelRatio);\n    chart.height = round1(chart.height);\n    chart.width = round1(chart.width);\n    const canvas = chart.canvas;\n    // If no style has been set on the canvas, the render size is used as display size,\n    // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n    // See https://github.com/chartjs/Chart.js/issues/3575\n    if (canvas.style && (forceStyle || !canvas.style.height && !canvas.style.width)) {\n        canvas.style.height = `${chart.height}px`;\n        canvas.style.width = `${chart.width}px`;\n    }\n    if (chart.currentDevicePixelRatio !== pixelRatio || canvas.height !== deviceHeight || canvas.width !== deviceWidth) {\n        chart.currentDevicePixelRatio = pixelRatio;\n        canvas.height = deviceHeight;\n        canvas.width = deviceWidth;\n        chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        return true;\n    }\n    return false;\n}\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */ const supportsEventListenerOptions = function() {\n    let passiveSupported = false;\n    try {\n        const options = {\n            get passive () {\n                passiveSupported = true;\n                return false;\n            }\n        };\n        if (_isDomSupported()) {\n            window.addEventListener('test', null, options);\n            window.removeEventListener('test', null, options);\n        }\n    } catch (e) {\n    // continue regardless of error\n    }\n    return passiveSupported;\n}();\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */ function readUsedSize(element, property) {\n    const value = getStyle(element, property);\n    const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n    return matches ? +matches[1] : undefined;\n}\n\n/**\n * @private\n */ function _pointInLine(p1, p2, t, mode) {\n    return {\n        x: p1.x + t * (p2.x - p1.x),\n        y: p1.y + t * (p2.y - p1.y)\n    };\n}\n/**\n * @private\n */ function _steppedInterpolation(p1, p2, t, mode) {\n    return {\n        x: p1.x + t * (p2.x - p1.x),\n        y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y : mode === 'after' ? t < 1 ? p1.y : p2.y : t > 0 ? p2.y : p1.y\n    };\n}\n/**\n * @private\n */ function _bezierInterpolation(p1, p2, t, mode) {\n    const cp1 = {\n        x: p1.cp2x,\n        y: p1.cp2y\n    };\n    const cp2 = {\n        x: p2.cp1x,\n        y: p2.cp1y\n    };\n    const a = _pointInLine(p1, cp1, t);\n    const b = _pointInLine(cp1, cp2, t);\n    const c = _pointInLine(cp2, p2, t);\n    const d = _pointInLine(a, b, t);\n    const e = _pointInLine(b, c, t);\n    return _pointInLine(d, e, t);\n}\n\nconst getRightToLeftAdapter = function(rectX, width) {\n    return {\n        x (x) {\n            return rectX + rectX + width - x;\n        },\n        setWidth (w) {\n            width = w;\n        },\n        textAlign (align) {\n            if (align === 'center') {\n                return align;\n            }\n            return align === 'right' ? 'left' : 'right';\n        },\n        xPlus (x, value) {\n            return x - value;\n        },\n        leftForLtr (x, itemWidth) {\n            return x - itemWidth;\n        }\n    };\n};\nconst getLeftToRightAdapter = function() {\n    return {\n        x (x) {\n            return x;\n        },\n        setWidth (w) {},\n        textAlign (align) {\n            return align;\n        },\n        xPlus (x, value) {\n            return x + value;\n        },\n        leftForLtr (x, _itemWidth) {\n            return x;\n        }\n    };\n};\nfunction getRtlAdapter(rtl, rectX, width) {\n    return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\nfunction overrideTextDirection(ctx, direction) {\n    let style, original;\n    if (direction === 'ltr' || direction === 'rtl') {\n        style = ctx.canvas.style;\n        original = [\n            style.getPropertyValue('direction'),\n            style.getPropertyPriority('direction')\n        ];\n        style.setProperty('direction', direction, 'important');\n        ctx.prevTextDirection = original;\n    }\n}\nfunction restoreTextDirection(ctx, original) {\n    if (original !== undefined) {\n        delete ctx.prevTextDirection;\n        ctx.canvas.style.setProperty('direction', original[0], original[1]);\n    }\n}\n\nfunction propertyFn(property) {\n    if (property === 'angle') {\n        return {\n            between: _angleBetween,\n            compare: _angleDiff,\n            normalize: _normalizeAngle\n        };\n    }\n    return {\n        between: _isBetween,\n        compare: (a, b)=>a - b,\n        normalize: (x)=>x\n    };\n}\nfunction normalizeSegment({ start , end , count , loop , style  }) {\n    return {\n        start: start % count,\n        end: end % count,\n        loop: loop && (end - start + 1) % count === 0,\n        style\n    };\n}\nfunction getSegment(segment, points, bounds) {\n    const { property , start: startBound , end: endBound  } = bounds;\n    const { between , normalize  } = propertyFn(property);\n    const count = points.length;\n    let { start , end , loop  } = segment;\n    let i, ilen;\n    if (loop) {\n        start += count;\n        end += count;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n                break;\n            }\n            start--;\n            end--;\n        }\n        start %= count;\n        end %= count;\n    }\n    if (end < start) {\n        end += count;\n    }\n    return {\n        start,\n        end,\n        loop,\n        style: segment.style\n    };\n}\n function _boundSegment(segment, points, bounds) {\n    if (!bounds) {\n        return [\n            segment\n        ];\n    }\n    const { property , start: startBound , end: endBound  } = bounds;\n    const count = points.length;\n    const { compare , between , normalize  } = propertyFn(property);\n    const { start , end , loop , style  } = getSegment(segment, points, bounds);\n    const result = [];\n    let inside = false;\n    let subStart = null;\n    let value, point, prevValue;\n    const startIsBefore = ()=>between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n    const endIsBefore = ()=>compare(endBound, value) === 0 || between(endBound, prevValue, value);\n    const shouldStart = ()=>inside || startIsBefore();\n    const shouldStop = ()=>!inside || endIsBefore();\n    for(let i = start, prev = start; i <= end; ++i){\n        point = points[i % count];\n        if (point.skip) {\n            continue;\n        }\n        value = normalize(point[property]);\n        if (value === prevValue) {\n            continue;\n        }\n        inside = between(value, startBound, endBound);\n        if (subStart === null && shouldStart()) {\n            subStart = compare(value, startBound) === 0 ? i : prev;\n        }\n        if (subStart !== null && shouldStop()) {\n            result.push(normalizeSegment({\n                start: subStart,\n                end: i,\n                loop,\n                count,\n                style\n            }));\n            subStart = null;\n        }\n        prev = i;\n        prevValue = value;\n    }\n    if (subStart !== null) {\n        result.push(normalizeSegment({\n            start: subStart,\n            end,\n            loop,\n            count,\n            style\n        }));\n    }\n    return result;\n}\n function _boundSegments(line, bounds) {\n    const result = [];\n    const segments = line.segments;\n    for(let i = 0; i < segments.length; i++){\n        const sub = _boundSegment(segments[i], line.points, bounds);\n        if (sub.length) {\n            result.push(...sub);\n        }\n    }\n    return result;\n}\n function findStartAndEnd(points, count, loop, spanGaps) {\n    let start = 0;\n    let end = count - 1;\n    if (loop && !spanGaps) {\n        while(start < count && !points[start].skip){\n            start++;\n        }\n    }\n    while(start < count && points[start].skip){\n        start++;\n    }\n    start %= count;\n    if (loop) {\n        end += start;\n    }\n    while(end > start && points[end % count].skip){\n        end--;\n    }\n    end %= count;\n    return {\n        start,\n        end\n    };\n}\n function solidSegments(points, start, max, loop) {\n    const count = points.length;\n    const result = [];\n    let last = start;\n    let prev = points[start];\n    let end;\n    for(end = start + 1; end <= max; ++end){\n        const cur = points[end % count];\n        if (cur.skip || cur.stop) {\n            if (!prev.skip) {\n                loop = false;\n                result.push({\n                    start: start % count,\n                    end: (end - 1) % count,\n                    loop\n                });\n                start = last = cur.stop ? end : null;\n            }\n        } else {\n            last = end;\n            if (prev.skip) {\n                start = end;\n            }\n        }\n        prev = cur;\n    }\n    if (last !== null) {\n        result.push({\n            start: start % count,\n            end: last % count,\n            loop\n        });\n    }\n    return result;\n}\n function _computeSegments(line, segmentOptions) {\n    const points = line.points;\n    const spanGaps = line.options.spanGaps;\n    const count = points.length;\n    if (!count) {\n        return [];\n    }\n    const loop = !!line._loop;\n    const { start , end  } = findStartAndEnd(points, count, loop, spanGaps);\n    if (spanGaps === true) {\n        return splitByStyles(line, [\n            {\n                start,\n                end,\n                loop\n            }\n        ], points, segmentOptions);\n    }\n    const max = end < start ? end + count : end;\n    const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n    return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n function splitByStyles(line, segments, points, segmentOptions) {\n    if (!segmentOptions || !segmentOptions.setContext || !points) {\n        return segments;\n    }\n    return doSplitByStyles(line, segments, points, segmentOptions);\n}\n function doSplitByStyles(line, segments, points, segmentOptions) {\n    const chartContext = line._chart.getContext();\n    const baseStyle = readStyle(line.options);\n    const { _datasetIndex: datasetIndex , options: { spanGaps  }  } = line;\n    const count = points.length;\n    const result = [];\n    let prevStyle = baseStyle;\n    let start = segments[0].start;\n    let i = start;\n    function addStyle(s, e, l, st) {\n        const dir = spanGaps ? -1 : 1;\n        if (s === e) {\n            return;\n        }\n        s += count;\n        while(points[s % count].skip){\n            s -= dir;\n        }\n        while(points[e % count].skip){\n            e += dir;\n        }\n        if (s % count !== e % count) {\n            result.push({\n                start: s % count,\n                end: e % count,\n                loop: l,\n                style: st\n            });\n            prevStyle = st;\n            start = e % count;\n        }\n    }\n    for (const segment of segments){\n        start = spanGaps ? start : segment.start;\n        let prev = points[start % count];\n        let style;\n        for(i = start + 1; i <= segment.end; i++){\n            const pt = points[i % count];\n            style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n                type: 'segment',\n                p0: prev,\n                p1: pt,\n                p0DataIndex: (i - 1) % count,\n                p1DataIndex: i % count,\n                datasetIndex\n            })));\n            if (styleChanged(style, prevStyle)) {\n                addStyle(start, i - 1, segment.loop, prevStyle);\n            }\n            prev = pt;\n            prevStyle = style;\n        }\n        if (start < i - 1) {\n            addStyle(start, i - 1, segment.loop, prevStyle);\n        }\n    }\n    return result;\n}\nfunction readStyle(options) {\n    return {\n        backgroundColor: options.backgroundColor,\n        borderCapStyle: options.borderCapStyle,\n        borderDash: options.borderDash,\n        borderDashOffset: options.borderDashOffset,\n        borderJoinStyle: options.borderJoinStyle,\n        borderWidth: options.borderWidth,\n        borderColor: options.borderColor\n    };\n}\nfunction styleChanged(style, prevStyle) {\n    if (!prevStyle) {\n        return false;\n    }\n    const cache = [];\n    const replacer = function(key, value) {\n        if (!isPatternOrGradient(value)) {\n            return value;\n        }\n        if (!cache.includes(value)) {\n            cache.push(value);\n        }\n        return cache.indexOf(value);\n    };\n    return JSON.stringify(style, replacer) !== JSON.stringify(prevStyle, replacer);\n}\n\nfunction getSizeForArea(scale, chartArea, field) {\n    return scale.options.clip ? scale[field] : chartArea[field];\n}\nfunction getDatasetArea(meta, chartArea) {\n    const { xScale , yScale  } = meta;\n    if (xScale && yScale) {\n        return {\n            left: getSizeForArea(xScale, chartArea, 'left'),\n            right: getSizeForArea(xScale, chartArea, 'right'),\n            top: getSizeForArea(yScale, chartArea, 'top'),\n            bottom: getSizeForArea(yScale, chartArea, 'bottom')\n        };\n    }\n    return chartArea;\n}\nfunction getDatasetClipArea(chart, meta) {\n    const clip = meta._clip;\n    if (clip.disabled) {\n        return false;\n    }\n    const area = getDatasetArea(meta, chart.chartArea);\n    return {\n        left: clip.left === false ? 0 : area.left - (clip.left === true ? 0 : clip.left),\n        right: clip.right === false ? chart.width : area.right + (clip.right === true ? 0 : clip.right),\n        top: clip.top === false ? 0 : area.top - (clip.top === true ? 0 : clip.top),\n        bottom: clip.bottom === false ? chart.height : area.bottom + (clip.bottom === true ? 0 : clip.bottom)\n    };\n}\n\nexport { unclipArea as $, _rlookupByKey as A, _lookupByKey as B, _isPointInArea as C, getAngleFromPoint as D, toPadding as E, each as F, getMaximumSize as G, HALF_PI as H, _getParentNode as I, readUsedSize as J, supportsEventListenerOptions as K, throttled as L, _isDomSupported as M, _factorize as N, finiteOrDefault as O, PI as P, callback as Q, _addGrace as R, _limitValue as S, TAU as T, toDegrees as U, _measureText as V, _int16Range as W, _alignPixel as X, clipArea as Y, renderText as Z, _arrayUnique as _, resolve as a, getStyle as a$, toFont as a0, _toLeftRightCenter as a1, _alignStartEnd as a2, overrides as a3, merge as a4, _capitalize as a5, descriptors as a6, isFunction as a7, _attachContext as a8, _createResolver as a9, getRtlAdapter as aA, overrideTextDirection as aB, _textX as aC, restoreTextDirection as aD, drawPointLegend as aE, distanceBetweenPoints as aF, noop as aG, _setMinAndMaxByKey as aH, niceNum as aI, almostWhole as aJ, almostEquals as aK, _decimalPlaces as aL, Ticks as aM, log10 as aN, _longestText as aO, _filterBetween as aP, _lookup as aQ, isPatternOrGradient as aR, getHoverColor as aS, clone as aT, _merger as aU, _mergerIf as aV, _deprecated as aW, _splitKey as aX, toFontString as aY, splineCurve as aZ, splineCurveMonotone as a_, _descriptors as aa, mergeIf as ab, uid as ac, debounce as ad, retinaScale as ae, clearCanvas as af, setsEqual as ag, getDatasetClipArea as ah, _elementsEqual as ai, _isClickEvent as aj, _isBetween as ak, _normalizeAngle as al, _readValueToProps as am, _updateBezierControlPoints as an, _computeSegments as ao, _boundSegments as ap, _steppedInterpolation as aq, _bezierInterpolation as ar, _pointInLine as as, _steppedLineTo as at, _bezierCurveTo as au, drawPoint as av, addRoundedRectPath as aw, toTRBL as ax, toTRBLCorners as ay, _boundSegment as az, isArray as b, fontString as b0, toLineHeight as b1, PITAU as b2, INFINITY as b3, RAD_PER_DEG as b4, QUARTER_PI as b5, TWO_THIRDS_PI as b6, _angleDiff as b7, color as c, defaults as d, effects as e, resolveObjectKey as f, isNumberFinite as g, defined as h, isObject as i, createContext as j, isNullOrUndef as k, listenArrayEvents as l, toPercentage as m, toDimension as n, formatNumber as o, _angleBetween as p, _getStartAndCountOfVisiblePoints as q, requestAnimFrame as r, sign as s, toRadians as t, unlistenArrayEvents as u, valueOrDefault as v, _scaleRangesChanged as w, isNumber as x, _parseObjectDataRadialScale as y, getRelativePosition as z };\n//# sourceMappingURL=helpers.dataset.js.map\n","/*!\n * Chart.js v4.5.1\n * https://www.chartjs.org\n * (c) 2025 Chart.js Contributors\n * Released under the MIT License\n */\nimport { r as requestAnimFrame, a as resolve, e as effects, c as color, i as isObject, d as defaults, b as isArray, v as valueOrDefault, u as unlistenArrayEvents, l as listenArrayEvents, f as resolveObjectKey, g as isNumberFinite, h as defined, s as sign, j as createContext, k as isNullOrUndef, _ as _arrayUnique, t as toRadians, m as toPercentage, n as toDimension, T as TAU, o as formatNumber, p as _angleBetween, H as HALF_PI, P as PI, q as _getStartAndCountOfVisiblePoints, w as _scaleRangesChanged, x as isNumber, y as _parseObjectDataRadialScale, z as getRelativePosition, A as _rlookupByKey, B as _lookupByKey, C as _isPointInArea, D as getAngleFromPoint, E as toPadding, F as each, G as getMaximumSize, I as _getParentNode, J as readUsedSize, K as supportsEventListenerOptions, L as throttled, M as _isDomSupported, N as _factorize, O as finiteOrDefault, Q as callback, R as _addGrace, S as _limitValue, U as toDegrees, V as _measureText, W as _int16Range, X as _alignPixel, Y as clipArea, Z as renderText, $ as unclipArea, a0 as toFont, a1 as _toLeftRightCenter, a2 as _alignStartEnd, a3 as overrides, a4 as merge, a5 as _capitalize, a6 as descriptors, a7 as isFunction, a8 as _attachContext, a9 as _createResolver, aa as _descriptors, ab as mergeIf, ac as uid, ad as debounce, ae as retinaScale, af as clearCanvas, ag as setsEqual, ah as getDatasetClipArea, ai as _elementsEqual, aj as _isClickEvent, ak as _isBetween, al as _normalizeAngle, am as _readValueToProps, an as _updateBezierControlPoints, ao as _computeSegments, ap as _boundSegments, aq as _steppedInterpolation, ar as _bezierInterpolation, as as _pointInLine, at as _steppedLineTo, au as _bezierCurveTo, av as drawPoint, aw as addRoundedRectPath, ax as toTRBL, ay as toTRBLCorners, az as _boundSegment, aA as getRtlAdapter, aB as overrideTextDirection, aC as _textX, aD as restoreTextDirection, aE as drawPointLegend, aF as distanceBetweenPoints, aG as noop, aH as _setMinAndMaxByKey, aI as niceNum, aJ as almostWhole, aK as almostEquals, aL as _decimalPlaces, aM as Ticks, aN as log10, aO as _longestText, aP as _filterBetween, aQ as _lookup } from './chunks/helpers.dataset.js';\nimport '@kurkle/color';\n\nclass Animator {\n    constructor(){\n        this._request = null;\n        this._charts = new Map();\n        this._running = false;\n        this._lastDate = undefined;\n    }\n _notify(chart, anims, date, type) {\n        const callbacks = anims.listeners[type];\n        const numSteps = anims.duration;\n        callbacks.forEach((fn)=>fn({\n                chart,\n                initial: anims.initial,\n                numSteps,\n                currentStep: Math.min(date - anims.start, numSteps)\n            }));\n    }\n _refresh() {\n        if (this._request) {\n            return;\n        }\n        this._running = true;\n        this._request = requestAnimFrame.call(window, ()=>{\n            this._update();\n            this._request = null;\n            if (this._running) {\n                this._refresh();\n            }\n        });\n    }\n _update(date = Date.now()) {\n        let remaining = 0;\n        this._charts.forEach((anims, chart)=>{\n            if (!anims.running || !anims.items.length) {\n                return;\n            }\n            const items = anims.items;\n            let i = items.length - 1;\n            let draw = false;\n            let item;\n            for(; i >= 0; --i){\n                item = items[i];\n                if (item._active) {\n                    if (item._total > anims.duration) {\n                        anims.duration = item._total;\n                    }\n                    item.tick(date);\n                    draw = true;\n                } else {\n                    items[i] = items[items.length - 1];\n                    items.pop();\n                }\n            }\n            if (draw) {\n                chart.draw();\n                this._notify(chart, anims, date, 'progress');\n            }\n            if (!items.length) {\n                anims.running = false;\n                this._notify(chart, anims, date, 'complete');\n                anims.initial = false;\n            }\n            remaining += items.length;\n        });\n        this._lastDate = date;\n        if (remaining === 0) {\n            this._running = false;\n        }\n    }\n _getAnims(chart) {\n        const charts = this._charts;\n        let anims = charts.get(chart);\n        if (!anims) {\n            anims = {\n                running: false,\n                initial: true,\n                items: [],\n                listeners: {\n                    complete: [],\n                    progress: []\n                }\n            };\n            charts.set(chart, anims);\n        }\n        return anims;\n    }\n listen(chart, event, cb) {\n        this._getAnims(chart).listeners[event].push(cb);\n    }\n add(chart, items) {\n        if (!items || !items.length) {\n            return;\n        }\n        this._getAnims(chart).items.push(...items);\n    }\n has(chart) {\n        return this._getAnims(chart).items.length > 0;\n    }\n start(chart) {\n        const anims = this._charts.get(chart);\n        if (!anims) {\n            return;\n        }\n        anims.running = true;\n        anims.start = Date.now();\n        anims.duration = anims.items.reduce((acc, cur)=>Math.max(acc, cur._duration), 0);\n        this._refresh();\n    }\n    running(chart) {\n        if (!this._running) {\n            return false;\n        }\n        const anims = this._charts.get(chart);\n        if (!anims || !anims.running || !anims.items.length) {\n            return false;\n        }\n        return true;\n    }\n stop(chart) {\n        const anims = this._charts.get(chart);\n        if (!anims || !anims.items.length) {\n            return;\n        }\n        const items = anims.items;\n        let i = items.length - 1;\n        for(; i >= 0; --i){\n            items[i].cancel();\n        }\n        anims.items = [];\n        this._notify(chart, anims, Date.now(), 'complete');\n    }\n remove(chart) {\n        return this._charts.delete(chart);\n    }\n}\nvar animator = /* #__PURE__ */ new Animator();\n\nconst transparent = 'transparent';\nconst interpolators = {\n    boolean (from, to, factor) {\n        return factor > 0.5 ? to : from;\n    },\n color (from, to, factor) {\n        const c0 = color(from || transparent);\n        const c1 = c0.valid && color(to || transparent);\n        return c1 && c1.valid ? c1.mix(c0, factor).hexString() : to;\n    },\n    number (from, to, factor) {\n        return from + (to - from) * factor;\n    }\n};\nclass Animation {\n    constructor(cfg, target, prop, to){\n        const currentValue = target[prop];\n        to = resolve([\n            cfg.to,\n            to,\n            currentValue,\n            cfg.from\n        ]);\n        const from = resolve([\n            cfg.from,\n            currentValue,\n            to\n        ]);\n        this._active = true;\n        this._fn = cfg.fn || interpolators[cfg.type || typeof from];\n        this._easing = effects[cfg.easing] || effects.linear;\n        this._start = Math.floor(Date.now() + (cfg.delay || 0));\n        this._duration = this._total = Math.floor(cfg.duration);\n        this._loop = !!cfg.loop;\n        this._target = target;\n        this._prop = prop;\n        this._from = from;\n        this._to = to;\n        this._promises = undefined;\n    }\n    active() {\n        return this._active;\n    }\n    update(cfg, to, date) {\n        if (this._active) {\n            this._notify(false);\n            const currentValue = this._target[this._prop];\n            const elapsed = date - this._start;\n            const remain = this._duration - elapsed;\n            this._start = date;\n            this._duration = Math.floor(Math.max(remain, cfg.duration));\n            this._total += elapsed;\n            this._loop = !!cfg.loop;\n            this._to = resolve([\n                cfg.to,\n                to,\n                currentValue,\n                cfg.from\n            ]);\n            this._from = resolve([\n                cfg.from,\n                currentValue,\n                to\n            ]);\n        }\n    }\n    cancel() {\n        if (this._active) {\n            this.tick(Date.now());\n            this._active = false;\n            this._notify(false);\n        }\n    }\n    tick(date) {\n        const elapsed = date - this._start;\n        const duration = this._duration;\n        const prop = this._prop;\n        const from = this._from;\n        const loop = this._loop;\n        const to = this._to;\n        let factor;\n        this._active = from !== to && (loop || elapsed < duration);\n        if (!this._active) {\n            this._target[prop] = to;\n            this._notify(true);\n            return;\n        }\n        if (elapsed < 0) {\n            this._target[prop] = from;\n            return;\n        }\n        factor = elapsed / duration % 2;\n        factor = loop && factor > 1 ? 2 - factor : factor;\n        factor = this._easing(Math.min(1, Math.max(0, factor)));\n        this._target[prop] = this._fn(from, to, factor);\n    }\n    wait() {\n        const promises = this._promises || (this._promises = []);\n        return new Promise((res, rej)=>{\n            promises.push({\n                res,\n                rej\n            });\n        });\n    }\n    _notify(resolved) {\n        const method = resolved ? 'res' : 'rej';\n        const promises = this._promises || [];\n        for(let i = 0; i < promises.length; i++){\n            promises[i][method]();\n        }\n    }\n}\n\nclass Animations {\n    constructor(chart, config){\n        this._chart = chart;\n        this._properties = new Map();\n        this.configure(config);\n    }\n    configure(config) {\n        if (!isObject(config)) {\n            return;\n        }\n        const animationOptions = Object.keys(defaults.animation);\n        const animatedProps = this._properties;\n        Object.getOwnPropertyNames(config).forEach((key)=>{\n            const cfg = config[key];\n            if (!isObject(cfg)) {\n                return;\n            }\n            const resolved = {};\n            for (const option of animationOptions){\n                resolved[option] = cfg[option];\n            }\n            (isArray(cfg.properties) && cfg.properties || [\n                key\n            ]).forEach((prop)=>{\n                if (prop === key || !animatedProps.has(prop)) {\n                    animatedProps.set(prop, resolved);\n                }\n            });\n        });\n    }\n _animateOptions(target, values) {\n        const newOptions = values.options;\n        const options = resolveTargetOptions(target, newOptions);\n        if (!options) {\n            return [];\n        }\n        const animations = this._createAnimations(options, newOptions);\n        if (newOptions.$shared) {\n            awaitAll(target.options.$animations, newOptions).then(()=>{\n                target.options = newOptions;\n            }, ()=>{\n            });\n        }\n        return animations;\n    }\n _createAnimations(target, values) {\n        const animatedProps = this._properties;\n        const animations = [];\n        const running = target.$animations || (target.$animations = {});\n        const props = Object.keys(values);\n        const date = Date.now();\n        let i;\n        for(i = props.length - 1; i >= 0; --i){\n            const prop = props[i];\n            if (prop.charAt(0) === '$') {\n                continue;\n            }\n            if (prop === 'options') {\n                animations.push(...this._animateOptions(target, values));\n                continue;\n            }\n            const value = values[prop];\n            let animation = running[prop];\n            const cfg = animatedProps.get(prop);\n            if (animation) {\n                if (cfg && animation.active()) {\n                    animation.update(cfg, value, date);\n                    continue;\n                } else {\n                    animation.cancel();\n                }\n            }\n            if (!cfg || !cfg.duration) {\n                target[prop] = value;\n                continue;\n            }\n            running[prop] = animation = new Animation(cfg, target, prop, value);\n            animations.push(animation);\n        }\n        return animations;\n    }\n update(target, values) {\n        if (this._properties.size === 0) {\n            Object.assign(target, values);\n            return;\n        }\n        const animations = this._createAnimations(target, values);\n        if (animations.length) {\n            animator.add(this._chart, animations);\n            return true;\n        }\n    }\n}\nfunction awaitAll(animations, properties) {\n    const running = [];\n    const keys = Object.keys(properties);\n    for(let i = 0; i < keys.length; i++){\n        const anim = animations[keys[i]];\n        if (anim && anim.active()) {\n            running.push(anim.wait());\n        }\n    }\n    return Promise.all(running);\n}\nfunction resolveTargetOptions(target, newOptions) {\n    if (!newOptions) {\n        return;\n    }\n    let options = target.options;\n    if (!options) {\n        target.options = newOptions;\n        return;\n    }\n    if (options.$shared) {\n        target.options = options = Object.assign({}, options, {\n            $shared: false,\n            $animations: {}\n        });\n    }\n    return options;\n}\n\nfunction scaleClip(scale, allowedOverflow) {\n    const opts = scale && scale.options || {};\n    const reverse = opts.reverse;\n    const min = opts.min === undefined ? allowedOverflow : 0;\n    const max = opts.max === undefined ? allowedOverflow : 0;\n    return {\n        start: reverse ? max : min,\n        end: reverse ? min : max\n    };\n}\nfunction defaultClip(xScale, yScale, allowedOverflow) {\n    if (allowedOverflow === false) {\n        return false;\n    }\n    const x = scaleClip(xScale, allowedOverflow);\n    const y = scaleClip(yScale, allowedOverflow);\n    return {\n        top: y.end,\n        right: x.end,\n        bottom: y.start,\n        left: x.start\n    };\n}\nfunction toClip(value) {\n    let t, r, b, l;\n    if (isObject(value)) {\n        t = value.top;\n        r = value.right;\n        b = value.bottom;\n        l = value.left;\n    } else {\n        t = r = b = l = value;\n    }\n    return {\n        top: t,\n        right: r,\n        bottom: b,\n        left: l,\n        disabled: value === false\n    };\n}\nfunction getSortedDatasetIndices(chart, filterVisible) {\n    const keys = [];\n    const metasets = chart._getSortedDatasetMetas(filterVisible);\n    let i, ilen;\n    for(i = 0, ilen = metasets.length; i < ilen; ++i){\n        keys.push(metasets[i].index);\n    }\n    return keys;\n}\nfunction applyStack(stack, value, dsIndex, options = {}) {\n    const keys = stack.keys;\n    const singleMode = options.mode === 'single';\n    let i, ilen, datasetIndex, otherValue;\n    if (value === null) {\n        return;\n    }\n    let found = false;\n    for(i = 0, ilen = keys.length; i < ilen; ++i){\n        datasetIndex = +keys[i];\n        if (datasetIndex === dsIndex) {\n            found = true;\n            if (options.all) {\n                continue;\n            }\n            break;\n        }\n        otherValue = stack.values[datasetIndex];\n        if (isNumberFinite(otherValue) && (singleMode || value === 0 || sign(value) === sign(otherValue))) {\n            value += otherValue;\n        }\n    }\n    if (!found && !options.all) {\n        return 0;\n    }\n    return value;\n}\nfunction convertObjectDataToArray(data, meta) {\n    const { iScale , vScale  } = meta;\n    const iAxisKey = iScale.axis === 'x' ? 'x' : 'y';\n    const vAxisKey = vScale.axis === 'x' ? 'x' : 'y';\n    const keys = Object.keys(data);\n    const adata = new Array(keys.length);\n    let i, ilen, key;\n    for(i = 0, ilen = keys.length; i < ilen; ++i){\n        key = keys[i];\n        adata[i] = {\n            [iAxisKey]: key,\n            [vAxisKey]: data[key]\n        };\n    }\n    return adata;\n}\nfunction isStacked(scale, meta) {\n    const stacked = scale && scale.options.stacked;\n    return stacked || stacked === undefined && meta.stack !== undefined;\n}\nfunction getStackKey(indexScale, valueScale, meta) {\n    return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\n}\nfunction getUserBounds(scale) {\n    const { min , max , minDefined , maxDefined  } = scale.getUserBounds();\n    return {\n        min: minDefined ? min : Number.NEGATIVE_INFINITY,\n        max: maxDefined ? max : Number.POSITIVE_INFINITY\n    };\n}\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\n    const subStack = stacks[stackKey] || (stacks[stackKey] = {});\n    return subStack[indexValue] || (subStack[indexValue] = {});\n}\nfunction getLastIndexInStack(stack, vScale, positive, type) {\n    for (const meta of vScale.getMatchingVisibleMetas(type).reverse()){\n        const value = stack[meta.index];\n        if (positive && value > 0 || !positive && value < 0) {\n            return meta.index;\n        }\n    }\n    return null;\n}\nfunction updateStacks(controller, parsed) {\n    const { chart , _cachedMeta: meta  } = controller;\n    const stacks = chart._stacks || (chart._stacks = {});\n    const { iScale , vScale , index: datasetIndex  } = meta;\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const key = getStackKey(iScale, vScale, meta);\n    const ilen = parsed.length;\n    let stack;\n    for(let i = 0; i < ilen; ++i){\n        const item = parsed[i];\n        const { [iAxis]: index , [vAxis]: value  } = item;\n        const itemStacks = item._stacks || (item._stacks = {});\n        stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\n        stack[datasetIndex] = value;\n        stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\n        stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\n        const visualValues = stack._visualValues || (stack._visualValues = {});\n        visualValues[datasetIndex] = value;\n    }\n}\nfunction getFirstScaleId(chart, axis) {\n    const scales = chart.scales;\n    return Object.keys(scales).filter((key)=>scales[key].axis === axis).shift();\n}\nfunction createDatasetContext(parent, index) {\n    return createContext(parent, {\n        active: false,\n        dataset: undefined,\n        datasetIndex: index,\n        index,\n        mode: 'default',\n        type: 'dataset'\n    });\n}\nfunction createDataContext(parent, index, element) {\n    return createContext(parent, {\n        active: false,\n        dataIndex: index,\n        parsed: undefined,\n        raw: undefined,\n        element,\n        index,\n        mode: 'default',\n        type: 'data'\n    });\n}\nfunction clearStacks(meta, items) {\n    const datasetIndex = meta.controller.index;\n    const axis = meta.vScale && meta.vScale.axis;\n    if (!axis) {\n        return;\n    }\n    items = items || meta._parsed;\n    for (const parsed of items){\n        const stacks = parsed._stacks;\n        if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\n            return;\n        }\n        delete stacks[axis][datasetIndex];\n        if (stacks[axis]._visualValues !== undefined && stacks[axis]._visualValues[datasetIndex] !== undefined) {\n            delete stacks[axis]._visualValues[datasetIndex];\n        }\n    }\n}\nconst isDirectUpdateMode = (mode)=>mode === 'reset' || mode === 'none';\nconst cloneIfNotShared = (cached, shared)=>shared ? cached : Object.assign({}, cached);\nconst createStack = (canStack, meta, chart)=>canStack && !meta.hidden && meta._stacked && {\n        keys: getSortedDatasetIndices(chart, true),\n        values: null\n    };\nclass DatasetController {\n static defaults = {};\n static datasetElementType = null;\n static dataElementType = null;\n constructor(chart, datasetIndex){\n        this.chart = chart;\n        this._ctx = chart.ctx;\n        this.index = datasetIndex;\n        this._cachedDataOpts = {};\n        this._cachedMeta = this.getMeta();\n        this._type = this._cachedMeta.type;\n        this.options = undefined;\n         this._parsing = false;\n        this._data = undefined;\n        this._objectData = undefined;\n        this._sharedOptions = undefined;\n        this._drawStart = undefined;\n        this._drawCount = undefined;\n        this.enableOptionSharing = false;\n        this.supportsDecimation = false;\n        this.$context = undefined;\n        this._syncList = [];\n        this.datasetElementType = new.target.datasetElementType;\n        this.dataElementType = new.target.dataElementType;\n        this.initialize();\n    }\n    initialize() {\n        const meta = this._cachedMeta;\n        this.configure();\n        this.linkScales();\n        meta._stacked = isStacked(meta.vScale, meta);\n        this.addElements();\n        if (this.options.fill && !this.chart.isPluginEnabled('filler')) {\n            console.warn(\"Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options\");\n        }\n    }\n    updateIndex(datasetIndex) {\n        if (this.index !== datasetIndex) {\n            clearStacks(this._cachedMeta);\n        }\n        this.index = datasetIndex;\n    }\n    linkScales() {\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const dataset = this.getDataset();\n        const chooseId = (axis, x, y, r)=>axis === 'x' ? x : axis === 'r' ? r : y;\n        const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\n        const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\n        const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\n        const indexAxis = meta.indexAxis;\n        const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\n        const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\n        meta.xScale = this.getScaleForId(xid);\n        meta.yScale = this.getScaleForId(yid);\n        meta.rScale = this.getScaleForId(rid);\n        meta.iScale = this.getScaleForId(iid);\n        meta.vScale = this.getScaleForId(vid);\n    }\n    getDataset() {\n        return this.chart.data.datasets[this.index];\n    }\n    getMeta() {\n        return this.chart.getDatasetMeta(this.index);\n    }\n getScaleForId(scaleID) {\n        return this.chart.scales[scaleID];\n    }\n _getOtherScale(scale) {\n        const meta = this._cachedMeta;\n        return scale === meta.iScale ? meta.vScale : meta.iScale;\n    }\n    reset() {\n        this._update('reset');\n    }\n _destroy() {\n        const meta = this._cachedMeta;\n        if (this._data) {\n            unlistenArrayEvents(this._data, this);\n        }\n        if (meta._stacked) {\n            clearStacks(meta);\n        }\n    }\n _dataCheck() {\n        const dataset = this.getDataset();\n        const data = dataset.data || (dataset.data = []);\n        const _data = this._data;\n        if (isObject(data)) {\n            const meta = this._cachedMeta;\n            this._data = convertObjectDataToArray(data, meta);\n        } else if (_data !== data) {\n            if (_data) {\n                unlistenArrayEvents(_data, this);\n                const meta = this._cachedMeta;\n                clearStacks(meta);\n                meta._parsed = [];\n            }\n            if (data && Object.isExtensible(data)) {\n                listenArrayEvents(data, this);\n            }\n            this._syncList = [];\n            this._data = data;\n        }\n    }\n    addElements() {\n        const meta = this._cachedMeta;\n        this._dataCheck();\n        if (this.datasetElementType) {\n            meta.dataset = new this.datasetElementType();\n        }\n    }\n    buildOrUpdateElements(resetNewElements) {\n        const meta = this._cachedMeta;\n        const dataset = this.getDataset();\n        let stackChanged = false;\n        this._dataCheck();\n        const oldStacked = meta._stacked;\n        meta._stacked = isStacked(meta.vScale, meta);\n        if (meta.stack !== dataset.stack) {\n            stackChanged = true;\n            clearStacks(meta);\n            meta.stack = dataset.stack;\n        }\n        this._resyncElements(resetNewElements);\n        if (stackChanged || oldStacked !== meta._stacked) {\n            updateStacks(this, meta._parsed);\n            meta._stacked = isStacked(meta.vScale, meta);\n        }\n    }\n configure() {\n        const config = this.chart.config;\n        const scopeKeys = config.datasetScopeKeys(this._type);\n        const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\n        this.options = config.createResolver(scopes, this.getContext());\n        this._parsing = this.options.parsing;\n        this._cachedDataOpts = {};\n    }\n parse(start, count) {\n        const { _cachedMeta: meta , _data: data  } = this;\n        const { iScale , _stacked  } = meta;\n        const iAxis = iScale.axis;\n        let sorted = start === 0 && count === data.length ? true : meta._sorted;\n        let prev = start > 0 && meta._parsed[start - 1];\n        let i, cur, parsed;\n        if (this._parsing === false) {\n            meta._parsed = data;\n            meta._sorted = true;\n            parsed = data;\n        } else {\n            if (isArray(data[start])) {\n                parsed = this.parseArrayData(meta, data, start, count);\n            } else if (isObject(data[start])) {\n                parsed = this.parseObjectData(meta, data, start, count);\n            } else {\n                parsed = this.parsePrimitiveData(meta, data, start, count);\n            }\n            const isNotInOrderComparedToPrev = ()=>cur[iAxis] === null || prev && cur[iAxis] < prev[iAxis];\n            for(i = 0; i < count; ++i){\n                meta._parsed[i + start] = cur = parsed[i];\n                if (sorted) {\n                    if (isNotInOrderComparedToPrev()) {\n                        sorted = false;\n                    }\n                    prev = cur;\n                }\n            }\n            meta._sorted = sorted;\n        }\n        if (_stacked) {\n            updateStacks(this, parsed);\n        }\n    }\n parsePrimitiveData(meta, data, start, count) {\n        const { iScale , vScale  } = meta;\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const labels = iScale.getLabels();\n        const singleScale = iScale === vScale;\n        const parsed = new Array(count);\n        let i, ilen, index;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            parsed[i] = {\n                [iAxis]: singleScale || iScale.parse(labels[index], index),\n                [vAxis]: vScale.parse(data[index], index)\n            };\n        }\n        return parsed;\n    }\n parseArrayData(meta, data, start, count) {\n        const { xScale , yScale  } = meta;\n        const parsed = new Array(count);\n        let i, ilen, index, item;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            item = data[index];\n            parsed[i] = {\n                x: xScale.parse(item[0], index),\n                y: yScale.parse(item[1], index)\n            };\n        }\n        return parsed;\n    }\n parseObjectData(meta, data, start, count) {\n        const { xScale , yScale  } = meta;\n        const { xAxisKey ='x' , yAxisKey ='y'  } = this._parsing;\n        const parsed = new Array(count);\n        let i, ilen, index, item;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            item = data[index];\n            parsed[i] = {\n                x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\n                y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\n            };\n        }\n        return parsed;\n    }\n getParsed(index) {\n        return this._cachedMeta._parsed[index];\n    }\n getDataElement(index) {\n        return this._cachedMeta.data[index];\n    }\n applyStack(scale, parsed, mode) {\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const value = parsed[scale.axis];\n        const stack = {\n            keys: getSortedDatasetIndices(chart, true),\n            values: parsed._stacks[scale.axis]._visualValues\n        };\n        return applyStack(stack, value, meta.index, {\n            mode\n        });\n    }\n updateRangeFromParsed(range, scale, parsed, stack) {\n        const parsedValue = parsed[scale.axis];\n        let value = parsedValue === null ? NaN : parsedValue;\n        const values = stack && parsed._stacks[scale.axis];\n        if (stack && values) {\n            stack.values = values;\n            value = applyStack(stack, parsedValue, this._cachedMeta.index);\n        }\n        range.min = Math.min(range.min, value);\n        range.max = Math.max(range.max, value);\n    }\n getMinMax(scale, canStack) {\n        const meta = this._cachedMeta;\n        const _parsed = meta._parsed;\n        const sorted = meta._sorted && scale === meta.iScale;\n        const ilen = _parsed.length;\n        const otherScale = this._getOtherScale(scale);\n        const stack = createStack(canStack, meta, this.chart);\n        const range = {\n            min: Number.POSITIVE_INFINITY,\n            max: Number.NEGATIVE_INFINITY\n        };\n        const { min: otherMin , max: otherMax  } = getUserBounds(otherScale);\n        let i, parsed;\n        function _skip() {\n            parsed = _parsed[i];\n            const otherValue = parsed[otherScale.axis];\n            return !isNumberFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\n        }\n        for(i = 0; i < ilen; ++i){\n            if (_skip()) {\n                continue;\n            }\n            this.updateRangeFromParsed(range, scale, parsed, stack);\n            if (sorted) {\n                break;\n            }\n        }\n        if (sorted) {\n            for(i = ilen - 1; i >= 0; --i){\n                if (_skip()) {\n                    continue;\n                }\n                this.updateRangeFromParsed(range, scale, parsed, stack);\n                break;\n            }\n        }\n        return range;\n    }\n    getAllParsedValues(scale) {\n        const parsed = this._cachedMeta._parsed;\n        const values = [];\n        let i, ilen, value;\n        for(i = 0, ilen = parsed.length; i < ilen; ++i){\n            value = parsed[i][scale.axis];\n            if (isNumberFinite(value)) {\n                values.push(value);\n            }\n        }\n        return values;\n    }\n getMaxOverflow() {\n        return false;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const iScale = meta.iScale;\n        const vScale = meta.vScale;\n        const parsed = this.getParsed(index);\n        return {\n            label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\n            value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\n        };\n    }\n _update(mode) {\n        const meta = this._cachedMeta;\n        this.update(mode || 'default');\n        meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\n    }\n update(mode) {}\n    draw() {\n        const ctx = this._ctx;\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const elements = meta.data || [];\n        const area = chart.chartArea;\n        const active = [];\n        const start = this._drawStart || 0;\n        const count = this._drawCount || elements.length - start;\n        const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\n        let i;\n        if (meta.dataset) {\n            meta.dataset.draw(ctx, area, start, count);\n        }\n        for(i = start; i < start + count; ++i){\n            const element = elements[i];\n            if (element.hidden) {\n                continue;\n            }\n            if (element.active && drawActiveElementsOnTop) {\n                active.push(element);\n            } else {\n                element.draw(ctx, area);\n            }\n        }\n        for(i = 0; i < active.length; ++i){\n            active[i].draw(ctx, area);\n        }\n    }\n getStyle(index, active) {\n        const mode = active ? 'active' : 'default';\n        return index === undefined && this._cachedMeta.dataset ? this.resolveDatasetElementOptions(mode) : this.resolveDataElementOptions(index || 0, mode);\n    }\n getContext(index, active, mode) {\n        const dataset = this.getDataset();\n        let context;\n        if (index >= 0 && index < this._cachedMeta.data.length) {\n            const element = this._cachedMeta.data[index];\n            context = element.$context || (element.$context = createDataContext(this.getContext(), index, element));\n            context.parsed = this.getParsed(index);\n            context.raw = dataset.data[index];\n            context.index = context.dataIndex = index;\n        } else {\n            context = this.$context || (this.$context = createDatasetContext(this.chart.getContext(), this.index));\n            context.dataset = dataset;\n            context.index = context.datasetIndex = this.index;\n        }\n        context.active = !!active;\n        context.mode = mode;\n        return context;\n    }\n resolveDatasetElementOptions(mode) {\n        return this._resolveElementOptions(this.datasetElementType.id, mode);\n    }\n resolveDataElementOptions(index, mode) {\n        return this._resolveElementOptions(this.dataElementType.id, mode, index);\n    }\n _resolveElementOptions(elementType, mode = 'default', index) {\n        const active = mode === 'active';\n        const cache = this._cachedDataOpts;\n        const cacheKey = elementType + '-' + mode;\n        const cached = cache[cacheKey];\n        const sharing = this.enableOptionSharing && defined(index);\n        if (cached) {\n            return cloneIfNotShared(cached, sharing);\n        }\n        const config = this.chart.config;\n        const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\n        const prefixes = active ? [\n            `${elementType}Hover`,\n            'hover',\n            elementType,\n            ''\n        ] : [\n            elementType,\n            ''\n        ];\n        const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n        const names = Object.keys(defaults.elements[elementType]);\n        const context = ()=>this.getContext(index, active, mode);\n        const values = config.resolveNamedOptions(scopes, names, context, prefixes);\n        if (values.$shared) {\n            values.$shared = sharing;\n            cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\n        }\n        return values;\n    }\n _resolveAnimations(index, transition, active) {\n        const chart = this.chart;\n        const cache = this._cachedDataOpts;\n        const cacheKey = `animation-${transition}`;\n        const cached = cache[cacheKey];\n        if (cached) {\n            return cached;\n        }\n        let options;\n        if (chart.options.animation !== false) {\n            const config = this.chart.config;\n            const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\n            const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n            options = config.createResolver(scopes, this.getContext(index, active, transition));\n        }\n        const animations = new Animations(chart, options && options.animations);\n        if (options && options._cacheable) {\n            cache[cacheKey] = Object.freeze(animations);\n        }\n        return animations;\n    }\n getSharedOptions(options) {\n        if (!options.$shared) {\n            return;\n        }\n        return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\n    }\n includeOptions(mode, sharedOptions) {\n        return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\n    }\n _getSharedOptions(start, mode) {\n        const firstOpts = this.resolveDataElementOptions(start, mode);\n        const previouslySharedOptions = this._sharedOptions;\n        const sharedOptions = this.getSharedOptions(firstOpts);\n        const includeOptions = this.includeOptions(mode, sharedOptions) || sharedOptions !== previouslySharedOptions;\n        this.updateSharedOptions(sharedOptions, mode, firstOpts);\n        return {\n            sharedOptions,\n            includeOptions\n        };\n    }\n updateElement(element, index, properties, mode) {\n        if (isDirectUpdateMode(mode)) {\n            Object.assign(element, properties);\n        } else {\n            this._resolveAnimations(index, mode).update(element, properties);\n        }\n    }\n updateSharedOptions(sharedOptions, mode, newOptions) {\n        if (sharedOptions && !isDirectUpdateMode(mode)) {\n            this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\n        }\n    }\n _setStyle(element, index, mode, active) {\n        element.active = active;\n        const options = this.getStyle(index, active);\n        this._resolveAnimations(index, mode, active).update(element, {\n            options: !active && this.getSharedOptions(options) || options\n        });\n    }\n    removeHoverStyle(element, datasetIndex, index) {\n        this._setStyle(element, index, 'active', false);\n    }\n    setHoverStyle(element, datasetIndex, index) {\n        this._setStyle(element, index, 'active', true);\n    }\n _removeDatasetHoverStyle() {\n        const element = this._cachedMeta.dataset;\n        if (element) {\n            this._setStyle(element, undefined, 'active', false);\n        }\n    }\n _setDatasetHoverStyle() {\n        const element = this._cachedMeta.dataset;\n        if (element) {\n            this._setStyle(element, undefined, 'active', true);\n        }\n    }\n _resyncElements(resetNewElements) {\n        const data = this._data;\n        const elements = this._cachedMeta.data;\n        for (const [method, arg1, arg2] of this._syncList){\n            this[method](arg1, arg2);\n        }\n        this._syncList = [];\n        const numMeta = elements.length;\n        const numData = data.length;\n        const count = Math.min(numData, numMeta);\n        if (count) {\n            this.parse(0, count);\n        }\n        if (numData > numMeta) {\n            this._insertElements(numMeta, numData - numMeta, resetNewElements);\n        } else if (numData < numMeta) {\n            this._removeElements(numData, numMeta - numData);\n        }\n    }\n _insertElements(start, count, resetNewElements = true) {\n        const meta = this._cachedMeta;\n        const data = meta.data;\n        const end = start + count;\n        let i;\n        const move = (arr)=>{\n            arr.length += count;\n            for(i = arr.length - 1; i >= end; i--){\n                arr[i] = arr[i - count];\n            }\n        };\n        move(data);\n        for(i = start; i < end; ++i){\n            data[i] = new this.dataElementType();\n        }\n        if (this._parsing) {\n            move(meta._parsed);\n        }\n        this.parse(start, count);\n        if (resetNewElements) {\n            this.updateElements(data, start, count, 'reset');\n        }\n    }\n    updateElements(element, start, count, mode) {}\n _removeElements(start, count) {\n        const meta = this._cachedMeta;\n        if (this._parsing) {\n            const removed = meta._parsed.splice(start, count);\n            if (meta._stacked) {\n                clearStacks(meta, removed);\n            }\n        }\n        meta.data.splice(start, count);\n    }\n _sync(args) {\n        if (this._parsing) {\n            this._syncList.push(args);\n        } else {\n            const [method, arg1, arg2] = args;\n            this[method](arg1, arg2);\n        }\n        this.chart._dataChanges.push([\n            this.index,\n            ...args\n        ]);\n    }\n    _onDataPush() {\n        const count = arguments.length;\n        this._sync([\n            '_insertElements',\n            this.getDataset().data.length - count,\n            count\n        ]);\n    }\n    _onDataPop() {\n        this._sync([\n            '_removeElements',\n            this._cachedMeta.data.length - 1,\n            1\n        ]);\n    }\n    _onDataShift() {\n        this._sync([\n            '_removeElements',\n            0,\n            1\n        ]);\n    }\n    _onDataSplice(start, count) {\n        if (count) {\n            this._sync([\n                '_removeElements',\n                start,\n                count\n            ]);\n        }\n        const newCount = arguments.length - 2;\n        if (newCount) {\n            this._sync([\n                '_insertElements',\n                start,\n                newCount\n            ]);\n        }\n    }\n    _onDataUnshift() {\n        this._sync([\n            '_insertElements',\n            0,\n            arguments.length\n        ]);\n    }\n}\n\nfunction getAllScaleValues(scale, type) {\n    if (!scale._cache.$bar) {\n        const visibleMetas = scale.getMatchingVisibleMetas(type);\n        let values = [];\n        for(let i = 0, ilen = visibleMetas.length; i < ilen; i++){\n            values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\n        }\n        scale._cache.$bar = _arrayUnique(values.sort((a, b)=>a - b));\n    }\n    return scale._cache.$bar;\n}\n function computeMinSampleSize(meta) {\n    const scale = meta.iScale;\n    const values = getAllScaleValues(scale, meta.type);\n    let min = scale._length;\n    let i, ilen, curr, prev;\n    const updateMinAndPrev = ()=>{\n        if (curr === 32767 || curr === -32768) {\n            return;\n        }\n        if (defined(prev)) {\n            min = Math.min(min, Math.abs(curr - prev) || min);\n        }\n        prev = curr;\n    };\n    for(i = 0, ilen = values.length; i < ilen; ++i){\n        curr = scale.getPixelForValue(values[i]);\n        updateMinAndPrev();\n    }\n    prev = undefined;\n    for(i = 0, ilen = scale.ticks.length; i < ilen; ++i){\n        curr = scale.getPixelForTick(i);\n        updateMinAndPrev();\n    }\n    return min;\n}\n function computeFitCategoryTraits(index, ruler, options, stackCount) {\n    const thickness = options.barThickness;\n    let size, ratio;\n    if (isNullOrUndef(thickness)) {\n        size = ruler.min * options.categoryPercentage;\n        ratio = options.barPercentage;\n    } else {\n        size = thickness * stackCount;\n        ratio = 1;\n    }\n    return {\n        chunk: size / stackCount,\n        ratio,\n        start: ruler.pixels[index] - size / 2\n    };\n}\n function computeFlexCategoryTraits(index, ruler, options, stackCount) {\n    const pixels = ruler.pixels;\n    const curr = pixels[index];\n    let prev = index > 0 ? pixels[index - 1] : null;\n    let next = index < pixels.length - 1 ? pixels[index + 1] : null;\n    const percent = options.categoryPercentage;\n    if (prev === null) {\n        prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\n    }\n    if (next === null) {\n        next = curr + curr - prev;\n    }\n    const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\n    const size = Math.abs(next - prev) / 2 * percent;\n    return {\n        chunk: size / stackCount,\n        ratio: options.barPercentage,\n        start\n    };\n}\nfunction parseFloatBar(entry, item, vScale, i) {\n    const startValue = vScale.parse(entry[0], i);\n    const endValue = vScale.parse(entry[1], i);\n    const min = Math.min(startValue, endValue);\n    const max = Math.max(startValue, endValue);\n    let barStart = min;\n    let barEnd = max;\n    if (Math.abs(min) > Math.abs(max)) {\n        barStart = max;\n        barEnd = min;\n    }\n    item[vScale.axis] = barEnd;\n    item._custom = {\n        barStart,\n        barEnd,\n        start: startValue,\n        end: endValue,\n        min,\n        max\n    };\n}\nfunction parseValue(entry, item, vScale, i) {\n    if (isArray(entry)) {\n        parseFloatBar(entry, item, vScale, i);\n    } else {\n        item[vScale.axis] = vScale.parse(entry, i);\n    }\n    return item;\n}\nfunction parseArrayOrPrimitive(meta, data, start, count) {\n    const iScale = meta.iScale;\n    const vScale = meta.vScale;\n    const labels = iScale.getLabels();\n    const singleScale = iScale === vScale;\n    const parsed = [];\n    let i, ilen, item, entry;\n    for(i = start, ilen = start + count; i < ilen; ++i){\n        entry = data[i];\n        item = {};\n        item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\n        parsed.push(parseValue(entry, item, vScale, i));\n    }\n    return parsed;\n}\nfunction isFloatBar(custom) {\n    return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\n}\nfunction barSign(size, vScale, actualBase) {\n    if (size !== 0) {\n        return sign(size);\n    }\n    return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\n}\nfunction borderProps(properties) {\n    let reverse, start, end, top, bottom;\n    if (properties.horizontal) {\n        reverse = properties.base > properties.x;\n        start = 'left';\n        end = 'right';\n    } else {\n        reverse = properties.base < properties.y;\n        start = 'bottom';\n        end = 'top';\n    }\n    if (reverse) {\n        top = 'end';\n        bottom = 'start';\n    } else {\n        top = 'start';\n        bottom = 'end';\n    }\n    return {\n        start,\n        end,\n        reverse,\n        top,\n        bottom\n    };\n}\nfunction setBorderSkipped(properties, options, stack, index) {\n    let edge = options.borderSkipped;\n    const res = {};\n    if (!edge) {\n        properties.borderSkipped = res;\n        return;\n    }\n    if (edge === true) {\n        properties.borderSkipped = {\n            top: true,\n            right: true,\n            bottom: true,\n            left: true\n        };\n        return;\n    }\n    const { start , end , reverse , top , bottom  } = borderProps(properties);\n    if (edge === 'middle' && stack) {\n        properties.enableBorderRadius = true;\n        if ((stack._top || 0) === index) {\n            edge = top;\n        } else if ((stack._bottom || 0) === index) {\n            edge = bottom;\n        } else {\n            res[parseEdge(bottom, start, end, reverse)] = true;\n            edge = top;\n        }\n    }\n    res[parseEdge(edge, start, end, reverse)] = true;\n    properties.borderSkipped = res;\n}\nfunction parseEdge(edge, a, b, reverse) {\n    if (reverse) {\n        edge = swap(edge, a, b);\n        edge = startEnd(edge, b, a);\n    } else {\n        edge = startEnd(edge, a, b);\n    }\n    return edge;\n}\nfunction swap(orig, v1, v2) {\n    return orig === v1 ? v2 : orig === v2 ? v1 : orig;\n}\nfunction startEnd(v, start, end) {\n    return v === 'start' ? start : v === 'end' ? end : v;\n}\nfunction setInflateAmount(properties, { inflateAmount  }, ratio) {\n    properties.inflateAmount = inflateAmount === 'auto' ? ratio === 1 ? 0.33 : 0 : inflateAmount;\n}\nclass BarController extends DatasetController {\n    static id = 'bar';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'bar',\n        categoryPercentage: 0.8,\n        barPercentage: 0.9,\n        grouped: true,\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'base',\n                    'width',\n                    'height'\n                ]\n            }\n        }\n    };\n static overrides = {\n        scales: {\n            _index_: {\n                type: 'category',\n                offset: true,\n                grid: {\n                    offset: true\n                }\n            },\n            _value_: {\n                type: 'linear',\n                beginAtZero: true\n            }\n        }\n    };\n parsePrimitiveData(meta, data, start, count) {\n        return parseArrayOrPrimitive(meta, data, start, count);\n    }\n parseArrayData(meta, data, start, count) {\n        return parseArrayOrPrimitive(meta, data, start, count);\n    }\n parseObjectData(meta, data, start, count) {\n        const { iScale , vScale  } = meta;\n        const { xAxisKey ='x' , yAxisKey ='y'  } = this._parsing;\n        const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\n        const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\n        const parsed = [];\n        let i, ilen, item, obj;\n        for(i = start, ilen = start + count; i < ilen; ++i){\n            obj = data[i];\n            item = {};\n            item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\n            parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\n        }\n        return parsed;\n    }\n updateRangeFromParsed(range, scale, parsed, stack) {\n        super.updateRangeFromParsed(range, scale, parsed, stack);\n        const custom = parsed._custom;\n        if (custom && scale === this._cachedMeta.vScale) {\n            range.min = Math.min(range.min, custom.min);\n            range.max = Math.max(range.max, custom.max);\n        }\n    }\n getMaxOverflow() {\n        return 0;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const { iScale , vScale  } = meta;\n        const parsed = this.getParsed(index);\n        const custom = parsed._custom;\n        const value = isFloatBar(custom) ? '[' + custom.start + ', ' + custom.end + ']' : '' + vScale.getLabelForValue(parsed[vScale.axis]);\n        return {\n            label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\n            value\n        };\n    }\n    initialize() {\n        this.enableOptionSharing = true;\n        super.initialize();\n        const meta = this._cachedMeta;\n        meta.stack = this.getDataset().stack;\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        this.updateElements(meta.data, 0, meta.data.length, mode);\n    }\n    updateElements(bars, start, count, mode) {\n        const reset = mode === 'reset';\n        const { index , _cachedMeta: { vScale  }  } = this;\n        const base = vScale.getBasePixel();\n        const horizontal = vScale.isHorizontal();\n        const ruler = this._getRuler();\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        for(let i = start; i < start + count; i++){\n            const parsed = this.getParsed(i);\n            const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {\n                base,\n                head: base\n            } : this._calculateBarValuePixels(i);\n            const ipixels = this._calculateBarIndexPixels(i, ruler);\n            const stack = (parsed._stacks || {})[vScale.axis];\n            const properties = {\n                horizontal,\n                base: vpixels.base,\n                enableBorderRadius: !stack || isFloatBar(parsed._custom) || index === stack._top || index === stack._bottom,\n                x: horizontal ? vpixels.head : ipixels.center,\n                y: horizontal ? ipixels.center : vpixels.head,\n                height: horizontal ? ipixels.size : Math.abs(vpixels.size),\n                width: horizontal ? Math.abs(vpixels.size) : ipixels.size\n            };\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\n            }\n            const options = properties.options || bars[i].options;\n            setBorderSkipped(properties, options, stack, index);\n            setInflateAmount(properties, options, ruler.ratio);\n            this.updateElement(bars[i], i, properties, mode);\n        }\n    }\n _getStacks(last, dataIndex) {\n        const { iScale  } = this._cachedMeta;\n        const metasets = iScale.getMatchingVisibleMetas(this._type).filter((meta)=>meta.controller.options.grouped);\n        const stacked = iScale.options.stacked;\n        const stacks = [];\n        const currentParsed = this._cachedMeta.controller.getParsed(dataIndex);\n        const iScaleValue = currentParsed && currentParsed[iScale.axis];\n        const skipNull = (meta)=>{\n            const parsed = meta._parsed.find((item)=>item[iScale.axis] === iScaleValue);\n            const val = parsed && parsed[meta.vScale.axis];\n            if (isNullOrUndef(val) || isNaN(val)) {\n                return true;\n            }\n        };\n        for (const meta of metasets){\n            if (dataIndex !== undefined && skipNull(meta)) {\n                continue;\n            }\n            if (stacked === false || stacks.indexOf(meta.stack) === -1 || stacked === undefined && meta.stack === undefined) {\n                stacks.push(meta.stack);\n            }\n            if (meta.index === last) {\n                break;\n            }\n        }\n        if (!stacks.length) {\n            stacks.push(undefined);\n        }\n        return stacks;\n    }\n _getStackCount(index) {\n        return this._getStacks(undefined, index).length;\n    }\n    _getAxisCount() {\n        return this._getAxis().length;\n    }\n    getFirstScaleIdForIndexAxis() {\n        const scales = this.chart.scales;\n        const indexScaleId = this.chart.options.indexAxis;\n        return Object.keys(scales).filter((key)=>scales[key].axis === indexScaleId).shift();\n    }\n    _getAxis() {\n        const axis = {};\n        const firstScaleAxisId = this.getFirstScaleIdForIndexAxis();\n        for (const dataset of this.chart.data.datasets){\n            axis[valueOrDefault(this.chart.options.indexAxis === 'x' ? dataset.xAxisID : dataset.yAxisID, firstScaleAxisId)] = true;\n        }\n        return Object.keys(axis);\n    }\n _getStackIndex(datasetIndex, name, dataIndex) {\n        const stacks = this._getStacks(datasetIndex, dataIndex);\n        const index = name !== undefined ? stacks.indexOf(name) : -1;\n        return index === -1 ? stacks.length - 1 : index;\n    }\n _getRuler() {\n        const opts = this.options;\n        const meta = this._cachedMeta;\n        const iScale = meta.iScale;\n        const pixels = [];\n        let i, ilen;\n        for(i = 0, ilen = meta.data.length; i < ilen; ++i){\n            pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\n        }\n        const barThickness = opts.barThickness;\n        const min = barThickness || computeMinSampleSize(meta);\n        return {\n            min,\n            pixels,\n            start: iScale._startPixel,\n            end: iScale._endPixel,\n            stackCount: this._getStackCount(),\n            scale: iScale,\n            grouped: opts.grouped,\n            ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\n        };\n    }\n _calculateBarValuePixels(index) {\n        const { _cachedMeta: { vScale , _stacked , index: datasetIndex  } , options: { base: baseValue , minBarLength  }  } = this;\n        const actualBase = baseValue || 0;\n        const parsed = this.getParsed(index);\n        const custom = parsed._custom;\n        const floating = isFloatBar(custom);\n        let value = parsed[vScale.axis];\n        let start = 0;\n        let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\n        let head, size;\n        if (length !== value) {\n            start = length - value;\n            length = value;\n        }\n        if (floating) {\n            value = custom.barStart;\n            length = custom.barEnd - custom.barStart;\n            if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\n                start = 0;\n            }\n            start += value;\n        }\n        const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\n        let base = vScale.getPixelForValue(startValue);\n        if (this.chart.getDataVisibility(index)) {\n            head = vScale.getPixelForValue(start + length);\n        } else {\n            head = base;\n        }\n        size = head - base;\n        if (Math.abs(size) < minBarLength) {\n            size = barSign(size, vScale, actualBase) * minBarLength;\n            if (value === actualBase) {\n                base -= size / 2;\n            }\n            const startPixel = vScale.getPixelForDecimal(0);\n            const endPixel = vScale.getPixelForDecimal(1);\n            const min = Math.min(startPixel, endPixel);\n            const max = Math.max(startPixel, endPixel);\n            base = Math.max(Math.min(base, max), min);\n            head = base + size;\n            if (_stacked && !floating) {\n                parsed._stacks[vScale.axis]._visualValues[datasetIndex] = vScale.getValueForPixel(head) - vScale.getValueForPixel(base);\n            }\n        }\n        if (base === vScale.getPixelForValue(actualBase)) {\n            const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\n            base += halfGrid;\n            size -= halfGrid;\n        }\n        return {\n            size,\n            base,\n            head,\n            center: head + size / 2\n        };\n    }\n _calculateBarIndexPixels(index, ruler) {\n        const scale = ruler.scale;\n        const options = this.options;\n        const skipNull = options.skipNull;\n        const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\n        let center, size;\n        const axisCount = this._getAxisCount();\n        if (ruler.grouped) {\n            const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\n            const range = options.barThickness === 'flex' ? computeFlexCategoryTraits(index, ruler, options, stackCount * axisCount) : computeFitCategoryTraits(index, ruler, options, stackCount * axisCount);\n            const axisID = this.chart.options.indexAxis === 'x' ? this.getDataset().xAxisID : this.getDataset().yAxisID;\n            const axisNumber = this._getAxis().indexOf(valueOrDefault(axisID, this.getFirstScaleIdForIndexAxis()));\n            const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined) + axisNumber;\n            center = range.start + range.chunk * stackIndex + range.chunk / 2;\n            size = Math.min(maxBarThickness, range.chunk * range.ratio);\n        } else {\n            center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\n            size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\n        }\n        return {\n            base: center - size / 2,\n            head: center + size / 2,\n            center,\n            size\n        };\n    }\n    draw() {\n        const meta = this._cachedMeta;\n        const vScale = meta.vScale;\n        const rects = meta.data;\n        const ilen = rects.length;\n        let i = 0;\n        for(; i < ilen; ++i){\n            if (this.getParsed(i)[vScale.axis] !== null && !rects[i].hidden) {\n                rects[i].draw(this._ctx);\n            }\n        }\n    }\n}\n\nclass BubbleController extends DatasetController {\n    static id = 'bubble';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'point',\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'borderWidth',\n                    'radius'\n                ]\n            }\n        }\n    };\n static overrides = {\n        scales: {\n            x: {\n                type: 'linear'\n            },\n            y: {\n                type: 'linear'\n            }\n        }\n    };\n    initialize() {\n        this.enableOptionSharing = true;\n        super.initialize();\n    }\n parsePrimitiveData(meta, data, start, count) {\n        const parsed = super.parsePrimitiveData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\n        }\n        return parsed;\n    }\n parseArrayData(meta, data, start, count) {\n        const parsed = super.parseArrayData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            const item = data[start + i];\n            parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\n        }\n        return parsed;\n    }\n parseObjectData(meta, data, start, count) {\n        const parsed = super.parseObjectData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            const item = data[start + i];\n            parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\n        }\n        return parsed;\n    }\n getMaxOverflow() {\n        const data = this._cachedMeta.data;\n        let max = 0;\n        for(let i = data.length - 1; i >= 0; --i){\n            max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n        }\n        return max > 0 && max;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const labels = this.chart.data.labels || [];\n        const { xScale , yScale  } = meta;\n        const parsed = this.getParsed(index);\n        const x = xScale.getLabelForValue(parsed.x);\n        const y = yScale.getLabelForValue(parsed.y);\n        const r = parsed._custom;\n        return {\n            label: labels[index] || '',\n            value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\n        };\n    }\n    update(mode) {\n        const points = this._cachedMeta.data;\n        this.updateElements(points, 0, points.length, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale  } = this._cachedMeta;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        for(let i = start; i < start + count; i++){\n            const point = points[i];\n            const parsed = !reset && this.getParsed(i);\n            const properties = {};\n            const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\n            const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel);\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n                if (reset) {\n                    properties.options.radius = 0;\n                }\n            }\n            this.updateElement(point, i, properties, mode);\n        }\n    }\n resolveDataElementOptions(index, mode) {\n        const parsed = this.getParsed(index);\n        let values = super.resolveDataElementOptions(index, mode);\n        if (values.$shared) {\n            values = Object.assign({}, values, {\n                $shared: false\n            });\n        }\n        const radius = values.radius;\n        if (mode !== 'active') {\n            values.radius = 0;\n        }\n        values.radius += valueOrDefault(parsed && parsed._custom, radius);\n        return values;\n    }\n}\n\nfunction getRatioAndOffset(rotation, circumference, cutout) {\n    let ratioX = 1;\n    let ratioY = 1;\n    let offsetX = 0;\n    let offsetY = 0;\n    if (circumference < TAU) {\n        const startAngle = rotation;\n        const endAngle = startAngle + circumference;\n        const startX = Math.cos(startAngle);\n        const startY = Math.sin(startAngle);\n        const endX = Math.cos(endAngle);\n        const endY = Math.sin(endAngle);\n        const calcMax = (angle, a, b)=>_angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\n        const calcMin = (angle, a, b)=>_angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\n        const maxX = calcMax(0, startX, endX);\n        const maxY = calcMax(HALF_PI, startY, endY);\n        const minX = calcMin(PI, startX, endX);\n        const minY = calcMin(PI + HALF_PI, startY, endY);\n        ratioX = (maxX - minX) / 2;\n        ratioY = (maxY - minY) / 2;\n        offsetX = -(maxX + minX) / 2;\n        offsetY = -(maxY + minY) / 2;\n    }\n    return {\n        ratioX,\n        ratioY,\n        offsetX,\n        offsetY\n    };\n}\nclass DoughnutController extends DatasetController {\n    static id = 'doughnut';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'arc',\n        animation: {\n            animateRotate: true,\n            animateScale: false\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'circumference',\n                    'endAngle',\n                    'innerRadius',\n                    'outerRadius',\n                    'startAngle',\n                    'x',\n                    'y',\n                    'offset',\n                    'borderWidth',\n                    'spacing'\n                ]\n            }\n        },\n        cutout: '50%',\n        rotation: 0,\n        circumference: 360,\n        radius: '100%',\n        spacing: 0,\n        indexAxis: 'r'\n    };\n    static descriptors = {\n        _scriptable: (name)=>name !== 'spacing',\n        _indexable: (name)=>name !== 'spacing' && !name.startsWith('borderDash') && !name.startsWith('hoverBorderDash')\n    };\n static overrides = {\n        aspectRatio: 1,\n        plugins: {\n            legend: {\n                labels: {\n                    generateLabels (chart) {\n                        const data = chart.data;\n                        const { labels: { pointStyle , textAlign , color , useBorderRadius , borderRadius  }  } = chart.legend.options;\n                        if (data.labels.length && data.datasets.length) {\n                            return data.labels.map((label, i)=>{\n                                const meta = chart.getDatasetMeta(0);\n                                const style = meta.controller.getStyle(i);\n                                return {\n                                    text: label,\n                                    fillStyle: style.backgroundColor,\n                                    fontColor: color,\n                                    hidden: !chart.getDataVisibility(i),\n                                    lineDash: style.borderDash,\n                                    lineDashOffset: style.borderDashOffset,\n                                    lineJoin: style.borderJoinStyle,\n                                    lineWidth: style.borderWidth,\n                                    strokeStyle: style.borderColor,\n                                    textAlign: textAlign,\n                                    pointStyle: pointStyle,\n                                    borderRadius: useBorderRadius && (borderRadius || style.borderRadius),\n                                    index: i\n                                };\n                            });\n                        }\n                        return [];\n                    }\n                },\n                onClick (e, legendItem, legend) {\n                    legend.chart.toggleDataVisibility(legendItem.index);\n                    legend.chart.update();\n                }\n            }\n        }\n    };\n    constructor(chart, datasetIndex){\n        super(chart, datasetIndex);\n        this.enableOptionSharing = true;\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n        this.offsetX = undefined;\n        this.offsetY = undefined;\n    }\n    linkScales() {}\n parse(start, count) {\n        const data = this.getDataset().data;\n        const meta = this._cachedMeta;\n        if (this._parsing === false) {\n            meta._parsed = data;\n        } else {\n            let getter = (i)=>+data[i];\n            if (isObject(data[start])) {\n                const { key ='value'  } = this._parsing;\n                getter = (i)=>+resolveObjectKey(data[i], key);\n            }\n            let i, ilen;\n            for(i = start, ilen = start + count; i < ilen; ++i){\n                meta._parsed[i] = getter(i);\n            }\n        }\n    }\n _getRotation() {\n        return toRadians(this.options.rotation - 90);\n    }\n _getCircumference() {\n        return toRadians(this.options.circumference);\n    }\n _getRotationExtents() {\n        let min = TAU;\n        let max = -TAU;\n        for(let i = 0; i < this.chart.data.datasets.length; ++i){\n            if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {\n                const controller = this.chart.getDatasetMeta(i).controller;\n                const rotation = controller._getRotation();\n                const circumference = controller._getCircumference();\n                min = Math.min(min, rotation);\n                max = Math.max(max, rotation + circumference);\n            }\n        }\n        return {\n            rotation: min,\n            circumference: max - min\n        };\n    }\n update(mode) {\n        const chart = this.chart;\n        const { chartArea  } = chart;\n        const meta = this._cachedMeta;\n        const arcs = meta.data;\n        const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\n        const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\n        const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\n        const chartWeight = this._getRingWeight(this.index);\n        const { circumference , rotation  } = this._getRotationExtents();\n        const { ratioX , ratioY , offsetX , offsetY  } = getRatioAndOffset(rotation, circumference, cutout);\n        const maxWidth = (chartArea.width - spacing) / ratioX;\n        const maxHeight = (chartArea.height - spacing) / ratioY;\n        const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\n        const outerRadius = toDimension(this.options.radius, maxRadius);\n        const innerRadius = Math.max(outerRadius * cutout, 0);\n        const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\n        this.offsetX = offsetX * outerRadius;\n        this.offsetY = offsetY * outerRadius;\n        meta.total = this.calculateTotal();\n        this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\n        this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\n        this.updateElements(arcs, 0, arcs.length, mode);\n    }\n _circumference(i, reset) {\n        const opts = this.options;\n        const meta = this._cachedMeta;\n        const circumference = this._getCircumference();\n        if (reset && opts.animation.animateRotate || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\n            return 0;\n        }\n        return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\n    }\n    updateElements(arcs, start, count, mode) {\n        const reset = mode === 'reset';\n        const chart = this.chart;\n        const chartArea = chart.chartArea;\n        const opts = chart.options;\n        const animationOpts = opts.animation;\n        const centerX = (chartArea.left + chartArea.right) / 2;\n        const centerY = (chartArea.top + chartArea.bottom) / 2;\n        const animateScale = reset && animationOpts.animateScale;\n        const innerRadius = animateScale ? 0 : this.innerRadius;\n        const outerRadius = animateScale ? 0 : this.outerRadius;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        let startAngle = this._getRotation();\n        let i;\n        for(i = 0; i < start; ++i){\n            startAngle += this._circumference(i, reset);\n        }\n        for(i = start; i < start + count; ++i){\n            const circumference = this._circumference(i, reset);\n            const arc = arcs[i];\n            const properties = {\n                x: centerX + this.offsetX,\n                y: centerY + this.offsetY,\n                startAngle,\n                endAngle: startAngle + circumference,\n                circumference,\n                outerRadius,\n                innerRadius\n            };\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\n            }\n            startAngle += circumference;\n            this.updateElement(arc, i, properties, mode);\n        }\n    }\n    calculateTotal() {\n        const meta = this._cachedMeta;\n        const metaData = meta.data;\n        let total = 0;\n        let i;\n        for(i = 0; i < metaData.length; i++){\n            const value = meta._parsed[i];\n            if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\n                total += Math.abs(value);\n            }\n        }\n        return total;\n    }\n    calculateCircumference(value) {\n        const total = this._cachedMeta.total;\n        if (total > 0 && !isNaN(value)) {\n            return TAU * (Math.abs(value) / total);\n        }\n        return 0;\n    }\n    getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const chart = this.chart;\n        const labels = chart.data.labels || [];\n        const value = formatNumber(meta._parsed[index], chart.options.locale);\n        return {\n            label: labels[index] || '',\n            value\n        };\n    }\n    getMaxBorderWidth(arcs) {\n        let max = 0;\n        const chart = this.chart;\n        let i, ilen, meta, controller, options;\n        if (!arcs) {\n            for(i = 0, ilen = chart.data.datasets.length; i < ilen; ++i){\n                if (chart.isDatasetVisible(i)) {\n                    meta = chart.getDatasetMeta(i);\n                    arcs = meta.data;\n                    controller = meta.controller;\n                    break;\n                }\n            }\n        }\n        if (!arcs) {\n            return 0;\n        }\n        for(i = 0, ilen = arcs.length; i < ilen; ++i){\n            options = controller.resolveDataElementOptions(i);\n            if (options.borderAlign !== 'inner') {\n                max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\n            }\n        }\n        return max;\n    }\n    getMaxOffset(arcs) {\n        let max = 0;\n        for(let i = 0, ilen = arcs.length; i < ilen; ++i){\n            const options = this.resolveDataElementOptions(i);\n            max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\n        }\n        return max;\n    }\n _getRingWeightOffset(datasetIndex) {\n        let ringWeightOffset = 0;\n        for(let i = 0; i < datasetIndex; ++i){\n            if (this.chart.isDatasetVisible(i)) {\n                ringWeightOffset += this._getRingWeight(i);\n            }\n        }\n        return ringWeightOffset;\n    }\n _getRingWeight(datasetIndex) {\n        return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\n    }\n _getVisibleDatasetWeightTotal() {\n        return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\n    }\n}\n\nclass LineController extends DatasetController {\n    static id = 'line';\n static defaults = {\n        datasetElementType: 'line',\n        dataElementType: 'point',\n        showLine: true,\n        spanGaps: false\n    };\n static overrides = {\n        scales: {\n            _index_: {\n                type: 'category'\n            },\n            _value_: {\n                type: 'linear'\n            }\n        }\n    };\n    initialize() {\n        this.enableOptionSharing = true;\n        this.supportsDecimation = true;\n        super.initialize();\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const { dataset: line , data: points = [] , _dataset  } = meta;\n        const animationsDisabled = this.chart._animationsDisabled;\n        let { start , count  } = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n        this._drawStart = start;\n        this._drawCount = count;\n        if (_scaleRangesChanged(meta)) {\n            start = 0;\n            count = points.length;\n        }\n        line._chart = this.chart;\n        line._datasetIndex = this.index;\n        line._decimated = !!_dataset._decimated;\n        line.points = points;\n        const options = this.resolveDatasetElementOptions(mode);\n        if (!this.options.showLine) {\n            options.borderWidth = 0;\n        }\n        options.segment = this.options.segment;\n        this.updateElement(line, undefined, {\n            animated: !animationsDisabled,\n            options\n        }, mode);\n        this.updateElements(points, start, count, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale , _stacked , _dataset  } = this._cachedMeta;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const { spanGaps , segment  } = this.options;\n        const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n        const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n        const end = start + count;\n        const pointsCount = points.length;\n        let prevParsed = start > 0 && this.getParsed(start - 1);\n        for(let i = 0; i < pointsCount; ++i){\n            const point = points[i];\n            const properties = directUpdate ? point : {};\n            if (i < start || i >= end) {\n                properties.skip = true;\n                continue;\n            }\n            const parsed = this.getParsed(i);\n            const nullData = isNullOrUndef(parsed[vAxis]);\n            const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n            const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n            properties.stop = i > 0 && Math.abs(parsed[iAxis] - prevParsed[iAxis]) > maxGapLength;\n            if (segment) {\n                properties.parsed = parsed;\n                properties.raw = _dataset.data[i];\n            }\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            }\n            if (!directUpdate) {\n                this.updateElement(point, i, properties, mode);\n            }\n            prevParsed = parsed;\n        }\n    }\n getMaxOverflow() {\n        const meta = this._cachedMeta;\n        const dataset = meta.dataset;\n        const border = dataset.options && dataset.options.borderWidth || 0;\n        const data = meta.data || [];\n        if (!data.length) {\n            return border;\n        }\n        const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n        const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n        return Math.max(border, firstPoint, lastPoint) / 2;\n    }\n    draw() {\n        const meta = this._cachedMeta;\n        meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\n        super.draw();\n    }\n}\n\nclass PolarAreaController extends DatasetController {\n    static id = 'polarArea';\n static defaults = {\n        dataElementType: 'arc',\n        animation: {\n            animateRotate: true,\n            animateScale: true\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'startAngle',\n                    'endAngle',\n                    'innerRadius',\n                    'outerRadius'\n                ]\n            }\n        },\n        indexAxis: 'r',\n        startAngle: 0\n    };\n static overrides = {\n        aspectRatio: 1,\n        plugins: {\n            legend: {\n                labels: {\n                    generateLabels (chart) {\n                        const data = chart.data;\n                        if (data.labels.length && data.datasets.length) {\n                            const { labels: { pointStyle , color  }  } = chart.legend.options;\n                            return data.labels.map((label, i)=>{\n                                const meta = chart.getDatasetMeta(0);\n                                const style = meta.controller.getStyle(i);\n                                return {\n                                    text: label,\n                                    fillStyle: style.backgroundColor,\n                                    strokeStyle: style.borderColor,\n                                    fontColor: color,\n                                    lineWidth: style.borderWidth,\n                                    pointStyle: pointStyle,\n                                    hidden: !chart.getDataVisibility(i),\n                                    index: i\n                                };\n                            });\n                        }\n                        return [];\n                    }\n                },\n                onClick (e, legendItem, legend) {\n                    legend.chart.toggleDataVisibility(legendItem.index);\n                    legend.chart.update();\n                }\n            }\n        },\n        scales: {\n            r: {\n                type: 'radialLinear',\n                angleLines: {\n                    display: false\n                },\n                beginAtZero: true,\n                grid: {\n                    circular: true\n                },\n                pointLabels: {\n                    display: false\n                },\n                startAngle: 0\n            }\n        }\n    };\n    constructor(chart, datasetIndex){\n        super(chart, datasetIndex);\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n    }\n    getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const chart = this.chart;\n        const labels = chart.data.labels || [];\n        const value = formatNumber(meta._parsed[index].r, chart.options.locale);\n        return {\n            label: labels[index] || '',\n            value\n        };\n    }\n    parseObjectData(meta, data, start, count) {\n        return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n    }\n    update(mode) {\n        const arcs = this._cachedMeta.data;\n        this._updateRadius();\n        this.updateElements(arcs, 0, arcs.length, mode);\n    }\n getMinMax() {\n        const meta = this._cachedMeta;\n        const range = {\n            min: Number.POSITIVE_INFINITY,\n            max: Number.NEGATIVE_INFINITY\n        };\n        meta.data.forEach((element, index)=>{\n            const parsed = this.getParsed(index).r;\n            if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\n                if (parsed < range.min) {\n                    range.min = parsed;\n                }\n                if (parsed > range.max) {\n                    range.max = parsed;\n                }\n            }\n        });\n        return range;\n    }\n _updateRadius() {\n        const chart = this.chart;\n        const chartArea = chart.chartArea;\n        const opts = chart.options;\n        const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n        const outerRadius = Math.max(minSize / 2, 0);\n        const innerRadius = Math.max(opts.cutoutPercentage ? outerRadius / 100 * opts.cutoutPercentage : 1, 0);\n        const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\n        this.outerRadius = outerRadius - radiusLength * this.index;\n        this.innerRadius = this.outerRadius - radiusLength;\n    }\n    updateElements(arcs, start, count, mode) {\n        const reset = mode === 'reset';\n        const chart = this.chart;\n        const opts = chart.options;\n        const animationOpts = opts.animation;\n        const scale = this._cachedMeta.rScale;\n        const centerX = scale.xCenter;\n        const centerY = scale.yCenter;\n        const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\n        let angle = datasetStartAngle;\n        let i;\n        const defaultAngle = 360 / this.countVisibleElements();\n        for(i = 0; i < start; ++i){\n            angle += this._computeAngle(i, mode, defaultAngle);\n        }\n        for(i = start; i < start + count; i++){\n            const arc = arcs[i];\n            let startAngle = angle;\n            let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\n            let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\n            angle = endAngle;\n            if (reset) {\n                if (animationOpts.animateScale) {\n                    outerRadius = 0;\n                }\n                if (animationOpts.animateRotate) {\n                    startAngle = endAngle = datasetStartAngle;\n                }\n            }\n            const properties = {\n                x: centerX,\n                y: centerY,\n                innerRadius: 0,\n                outerRadius,\n                startAngle,\n                endAngle,\n                options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\n            };\n            this.updateElement(arc, i, properties, mode);\n        }\n    }\n    countVisibleElements() {\n        const meta = this._cachedMeta;\n        let count = 0;\n        meta.data.forEach((element, index)=>{\n            if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\n                count++;\n            }\n        });\n        return count;\n    }\n _computeAngle(index, mode, defaultAngle) {\n        return this.chart.getDataVisibility(index) ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle) : 0;\n    }\n}\n\nclass PieController extends DoughnutController {\n    static id = 'pie';\n static defaults = {\n        cutout: 0,\n        rotation: 0,\n        circumference: 360,\n        radius: '100%'\n    };\n}\n\nclass RadarController extends DatasetController {\n    static id = 'radar';\n static defaults = {\n        datasetElementType: 'line',\n        dataElementType: 'point',\n        indexAxis: 'r',\n        showLine: true,\n        elements: {\n            line: {\n                fill: 'start'\n            }\n        }\n    };\n static overrides = {\n        aspectRatio: 1,\n        scales: {\n            r: {\n                type: 'radialLinear'\n            }\n        }\n    };\n getLabelAndValue(index) {\n        const vScale = this._cachedMeta.vScale;\n        const parsed = this.getParsed(index);\n        return {\n            label: vScale.getLabels()[index],\n            value: '' + vScale.getLabelForValue(parsed[vScale.axis])\n        };\n    }\n    parseObjectData(meta, data, start, count) {\n        return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const line = meta.dataset;\n        const points = meta.data || [];\n        const labels = meta.iScale.getLabels();\n        line.points = points;\n        if (mode !== 'resize') {\n            const options = this.resolveDatasetElementOptions(mode);\n            if (!this.options.showLine) {\n                options.borderWidth = 0;\n            }\n            const properties = {\n                _loop: true,\n                _fullLoop: labels.length === points.length,\n                options\n            };\n            this.updateElement(line, undefined, properties, mode);\n        }\n        this.updateElements(points, 0, points.length, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const scale = this._cachedMeta.rScale;\n        const reset = mode === 'reset';\n        for(let i = start; i < start + count; i++){\n            const point = points[i];\n            const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\n            const x = reset ? scale.xCenter : pointPosition.x;\n            const y = reset ? scale.yCenter : pointPosition.y;\n            const properties = {\n                x,\n                y,\n                angle: pointPosition.angle,\n                skip: isNaN(x) || isNaN(y),\n                options\n            };\n            this.updateElement(point, i, properties, mode);\n        }\n    }\n}\n\nclass ScatterController extends DatasetController {\n    static id = 'scatter';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'point',\n        showLine: false,\n        fill: false\n    };\n static overrides = {\n        interaction: {\n            mode: 'point'\n        },\n        scales: {\n            x: {\n                type: 'linear'\n            },\n            y: {\n                type: 'linear'\n            }\n        }\n    };\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const labels = this.chart.data.labels || [];\n        const { xScale , yScale  } = meta;\n        const parsed = this.getParsed(index);\n        const x = xScale.getLabelForValue(parsed.x);\n        const y = yScale.getLabelForValue(parsed.y);\n        return {\n            label: labels[index] || '',\n            value: '(' + x + ', ' + y + ')'\n        };\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const { data: points = []  } = meta;\n        const animationsDisabled = this.chart._animationsDisabled;\n        let { start , count  } = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n        this._drawStart = start;\n        this._drawCount = count;\n        if (_scaleRangesChanged(meta)) {\n            start = 0;\n            count = points.length;\n        }\n        if (this.options.showLine) {\n            if (!this.datasetElementType) {\n                this.addElements();\n            }\n            const { dataset: line , _dataset  } = meta;\n            line._chart = this.chart;\n            line._datasetIndex = this.index;\n            line._decimated = !!_dataset._decimated;\n            line.points = points;\n            const options = this.resolveDatasetElementOptions(mode);\n            options.segment = this.options.segment;\n            this.updateElement(line, undefined, {\n                animated: !animationsDisabled,\n                options\n            }, mode);\n        } else if (this.datasetElementType) {\n            delete meta.dataset;\n            this.datasetElementType = false;\n        }\n        this.updateElements(points, start, count, mode);\n    }\n    addElements() {\n        const { showLine  } = this.options;\n        if (!this.datasetElementType && showLine) {\n            this.datasetElementType = this.chart.registry.getElement('line');\n        }\n        super.addElements();\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale , _stacked , _dataset  } = this._cachedMeta;\n        const firstOpts = this.resolveDataElementOptions(start, mode);\n        const sharedOptions = this.getSharedOptions(firstOpts);\n        const includeOptions = this.includeOptions(mode, sharedOptions);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const { spanGaps , segment  } = this.options;\n        const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n        const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n        let prevParsed = start > 0 && this.getParsed(start - 1);\n        for(let i = start; i < start + count; ++i){\n            const point = points[i];\n            const parsed = this.getParsed(i);\n            const properties = directUpdate ? point : {};\n            const nullData = isNullOrUndef(parsed[vAxis]);\n            const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n            const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n            properties.stop = i > 0 && Math.abs(parsed[iAxis] - prevParsed[iAxis]) > maxGapLength;\n            if (segment) {\n                properties.parsed = parsed;\n                properties.raw = _dataset.data[i];\n            }\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            }\n            if (!directUpdate) {\n                this.updateElement(point, i, properties, mode);\n            }\n            prevParsed = parsed;\n        }\n        this.updateSharedOptions(sharedOptions, mode, firstOpts);\n    }\n getMaxOverflow() {\n        const meta = this._cachedMeta;\n        const data = meta.data || [];\n        if (!this.options.showLine) {\n            let max = 0;\n            for(let i = data.length - 1; i >= 0; --i){\n                max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n            }\n            return max > 0 && max;\n        }\n        const dataset = meta.dataset;\n        const border = dataset.options && dataset.options.borderWidth || 0;\n        if (!data.length) {\n            return border;\n        }\n        const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n        const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n        return Math.max(border, firstPoint, lastPoint) / 2;\n    }\n}\n\nvar controllers = /*#__PURE__*/Object.freeze({\n__proto__: null,\nBarController: BarController,\nBubbleController: BubbleController,\nDoughnutController: DoughnutController,\nLineController: LineController,\nPieController: PieController,\nPolarAreaController: PolarAreaController,\nRadarController: RadarController,\nScatterController: ScatterController\n});\n\n/**\n * @namespace Chart._adapters\n * @since 2.8.0\n * @private\n */ function abstract() {\n    throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\n}\n/**\n * Date adapter (current used by the time scale)\n * @namespace Chart._adapters._date\n * @memberof Chart._adapters\n * @private\n */ class DateAdapterBase {\n    /**\n   * Override default date adapter methods.\n   * Accepts type parameter to define options type.\n   * @example\n   * Chart._adapters._date.override<{myAdapterOption: string}>({\n   *   init() {\n   *     console.log(this.options.myAdapterOption);\n   *   }\n   * })\n   */ static override(members) {\n        Object.assign(DateAdapterBase.prototype, members);\n    }\n    options;\n    constructor(options){\n        this.options = options || {};\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    init() {}\n    formats() {\n        return abstract();\n    }\n    parse() {\n        return abstract();\n    }\n    format() {\n        return abstract();\n    }\n    add() {\n        return abstract();\n    }\n    diff() {\n        return abstract();\n    }\n    startOf() {\n        return abstract();\n    }\n    endOf() {\n        return abstract();\n    }\n}\nvar adapters = {\n    _date: DateAdapterBase\n};\n\nfunction binarySearch(metaset, axis, value, intersect) {\n    const { controller , data , _sorted  } = metaset;\n    const iScale = controller._cachedMeta.iScale;\n    const spanGaps = metaset.dataset ? metaset.dataset.options ? metaset.dataset.options.spanGaps : null : null;\n    if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\n        const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\n        if (!intersect) {\n            const result = lookupMethod(data, axis, value);\n            if (spanGaps) {\n                const { vScale  } = controller._cachedMeta;\n                const { _parsed  } = metaset;\n                const distanceToDefinedLo = _parsed.slice(0, result.lo + 1).reverse().findIndex((point)=>!isNullOrUndef(point[vScale.axis]));\n                result.lo -= Math.max(0, distanceToDefinedLo);\n                const distanceToDefinedHi = _parsed.slice(result.hi).findIndex((point)=>!isNullOrUndef(point[vScale.axis]));\n                result.hi += Math.max(0, distanceToDefinedHi);\n            }\n            return result;\n        } else if (controller._sharedOptions) {\n            const el = data[0];\n            const range = typeof el.getRange === 'function' && el.getRange(axis);\n            if (range) {\n                const start = lookupMethod(data, axis, value - range);\n                const end = lookupMethod(data, axis, value + range);\n                return {\n                    lo: start.lo,\n                    hi: end.hi\n                };\n            }\n        }\n    }\n    return {\n        lo: 0,\n        hi: data.length - 1\n    };\n}\n function evaluateInteractionItems(chart, axis, position, handler, intersect) {\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    const value = position[axis];\n    for(let i = 0, ilen = metasets.length; i < ilen; ++i){\n        const { index , data  } = metasets[i];\n        const { lo , hi  } = binarySearch(metasets[i], axis, value, intersect);\n        for(let j = lo; j <= hi; ++j){\n            const element = data[j];\n            if (!element.skip) {\n                handler(element, index, j);\n            }\n        }\n    }\n}\n function getDistanceMetricForAxis(axis) {\n    const useX = axis.indexOf('x') !== -1;\n    const useY = axis.indexOf('y') !== -1;\n    return function(pt1, pt2) {\n        const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\n        const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\n        return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n    };\n}\n function getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\n    const items = [];\n    if (!includeInvisible && !chart.isPointInArea(position)) {\n        return items;\n    }\n    const evaluationFunc = function(element, datasetIndex, index) {\n        if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\n            return;\n        }\n        if (element.inRange(position.x, position.y, useFinalPosition)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    };\n    evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\n    return items;\n}\n function getNearestRadialItems(chart, position, axis, useFinalPosition) {\n    let items = [];\n    function evaluationFunc(element, datasetIndex, index) {\n        const { startAngle , endAngle  } = element.getProps([\n            'startAngle',\n            'endAngle'\n        ], useFinalPosition);\n        const { angle  } = getAngleFromPoint(element, {\n            x: position.x,\n            y: position.y\n        });\n        if (_angleBetween(angle, startAngle, endAngle)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    }\n    evaluateInteractionItems(chart, axis, position, evaluationFunc);\n    return items;\n}\n function getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n    let items = [];\n    const distanceMetric = getDistanceMetricForAxis(axis);\n    let minDistance = Number.POSITIVE_INFINITY;\n    function evaluationFunc(element, datasetIndex, index) {\n        const inRange = element.inRange(position.x, position.y, useFinalPosition);\n        if (intersect && !inRange) {\n            return;\n        }\n        const center = element.getCenterPoint(useFinalPosition);\n        const pointInArea = !!includeInvisible || chart.isPointInArea(center);\n        if (!pointInArea && !inRange) {\n            return;\n        }\n        const distance = distanceMetric(position, center);\n        if (distance < minDistance) {\n            items = [\n                {\n                    element,\n                    datasetIndex,\n                    index\n                }\n            ];\n            minDistance = distance;\n        } else if (distance === minDistance) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    }\n    evaluateInteractionItems(chart, axis, position, evaluationFunc);\n    return items;\n}\n function getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n    if (!includeInvisible && !chart.isPointInArea(position)) {\n        return [];\n    }\n    return axis === 'r' && !intersect ? getNearestRadialItems(chart, position, axis, useFinalPosition) : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\n}\n function getAxisItems(chart, position, axis, intersect, useFinalPosition) {\n    const items = [];\n    const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\n    let intersectsItem = false;\n    evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index)=>{\n        if (element[rangeMethod] && element[rangeMethod](position[axis], useFinalPosition)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n            intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\n        }\n    });\n    if (intersect && !intersectsItem) {\n        return [];\n    }\n    return items;\n}\n var Interaction = {\n    evaluateInteractionItems,\n    modes: {\n index (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'x';\n            const includeInvisible = options.includeInvisible || false;\n            const items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n            const elements = [];\n            if (!items.length) {\n                return [];\n            }\n            chart.getSortedVisibleDatasetMetas().forEach((meta)=>{\n                const index = items[0].index;\n                const element = meta.data[index];\n                if (element && !element.skip) {\n                    elements.push({\n                        element,\n                        datasetIndex: meta.index,\n                        index\n                    });\n                }\n            });\n            return elements;\n        },\n dataset (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            let items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n            if (items.length > 0) {\n                const datasetIndex = items[0].datasetIndex;\n                const data = chart.getDatasetMeta(datasetIndex).data;\n                items = [];\n                for(let i = 0; i < data.length; ++i){\n                    items.push({\n                        element: data[i],\n                        datasetIndex,\n                        index: i\n                    });\n                }\n            }\n            return items;\n        },\n point (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\n        },\n nearest (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\n        },\n x (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\n        },\n y (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\n        }\n    }\n};\n\nconst STATIC_POSITIONS = [\n    'left',\n    'top',\n    'right',\n    'bottom'\n];\nfunction filterByPosition(array, position) {\n    return array.filter((v)=>v.pos === position);\n}\nfunction filterDynamicPositionByAxis(array, axis) {\n    return array.filter((v)=>STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\n}\nfunction sortByWeight(array, reverse) {\n    return array.sort((a, b)=>{\n        const v0 = reverse ? b : a;\n        const v1 = reverse ? a : b;\n        return v0.weight === v1.weight ? v0.index - v1.index : v0.weight - v1.weight;\n    });\n}\nfunction wrapBoxes(boxes) {\n    const layoutBoxes = [];\n    let i, ilen, box, pos, stack, stackWeight;\n    for(i = 0, ilen = (boxes || []).length; i < ilen; ++i){\n        box = boxes[i];\n        ({ position: pos , options: { stack , stackWeight =1  }  } = box);\n        layoutBoxes.push({\n            index: i,\n            box,\n            pos,\n            horizontal: box.isHorizontal(),\n            weight: box.weight,\n            stack: stack && pos + stack,\n            stackWeight\n        });\n    }\n    return layoutBoxes;\n}\nfunction buildStacks(layouts) {\n    const stacks = {};\n    for (const wrap of layouts){\n        const { stack , pos , stackWeight  } = wrap;\n        if (!stack || !STATIC_POSITIONS.includes(pos)) {\n            continue;\n        }\n        const _stack = stacks[stack] || (stacks[stack] = {\n            count: 0,\n            placed: 0,\n            weight: 0,\n            size: 0\n        });\n        _stack.count++;\n        _stack.weight += stackWeight;\n    }\n    return stacks;\n}\n function setLayoutDims(layouts, params) {\n    const stacks = buildStacks(layouts);\n    const { vBoxMaxWidth , hBoxMaxHeight  } = params;\n    let i, ilen, layout;\n    for(i = 0, ilen = layouts.length; i < ilen; ++i){\n        layout = layouts[i];\n        const { fullSize  } = layout.box;\n        const stack = stacks[layout.stack];\n        const factor = stack && layout.stackWeight / stack.weight;\n        if (layout.horizontal) {\n            layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\n            layout.height = hBoxMaxHeight;\n        } else {\n            layout.width = vBoxMaxWidth;\n            layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\n        }\n    }\n    return stacks;\n}\nfunction buildLayoutBoxes(boxes) {\n    const layoutBoxes = wrapBoxes(boxes);\n    const fullSize = sortByWeight(layoutBoxes.filter((wrap)=>wrap.box.fullSize), true);\n    const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\n    const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\n    const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\n    const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\n    const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\n    const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\n    return {\n        fullSize,\n        leftAndTop: left.concat(top),\n        rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\n        chartArea: filterByPosition(layoutBoxes, 'chartArea'),\n        vertical: left.concat(right).concat(centerVertical),\n        horizontal: top.concat(bottom).concat(centerHorizontal)\n    };\n}\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\n    return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\n}\nfunction updateMaxPadding(maxPadding, boxPadding) {\n    maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\n    maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\n    maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\n    maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\n}\nfunction updateDims(chartArea, params, layout, stacks) {\n    const { pos , box  } = layout;\n    const maxPadding = chartArea.maxPadding;\n    if (!isObject(pos)) {\n        if (layout.size) {\n            chartArea[pos] -= layout.size;\n        }\n        const stack = stacks[layout.stack] || {\n            size: 0,\n            count: 1\n        };\n        stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\n        layout.size = stack.size / stack.count;\n        chartArea[pos] += layout.size;\n    }\n    if (box.getPadding) {\n        updateMaxPadding(maxPadding, box.getPadding());\n    }\n    const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\n    const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\n    const widthChanged = newWidth !== chartArea.w;\n    const heightChanged = newHeight !== chartArea.h;\n    chartArea.w = newWidth;\n    chartArea.h = newHeight;\n    return layout.horizontal ? {\n        same: widthChanged,\n        other: heightChanged\n    } : {\n        same: heightChanged,\n        other: widthChanged\n    };\n}\nfunction handleMaxPadding(chartArea) {\n    const maxPadding = chartArea.maxPadding;\n    function updatePos(pos) {\n        const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\n        chartArea[pos] += change;\n        return change;\n    }\n    chartArea.y += updatePos('top');\n    chartArea.x += updatePos('left');\n    updatePos('right');\n    updatePos('bottom');\n}\nfunction getMargins(horizontal, chartArea) {\n    const maxPadding = chartArea.maxPadding;\n    function marginForPositions(positions) {\n        const margin = {\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0\n        };\n        positions.forEach((pos)=>{\n            margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\n        });\n        return margin;\n    }\n    return horizontal ? marginForPositions([\n        'left',\n        'right'\n    ]) : marginForPositions([\n        'top',\n        'bottom'\n    ]);\n}\nfunction fitBoxes(boxes, chartArea, params, stacks) {\n    const refitBoxes = [];\n    let i, ilen, layout, box, refit, changed;\n    for(i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i){\n        layout = boxes[i];\n        box = layout.box;\n        box.update(layout.width || chartArea.w, layout.height || chartArea.h, getMargins(layout.horizontal, chartArea));\n        const { same , other  } = updateDims(chartArea, params, layout, stacks);\n        refit |= same && refitBoxes.length;\n        changed = changed || other;\n        if (!box.fullSize) {\n            refitBoxes.push(layout);\n        }\n    }\n    return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\n}\nfunction setBoxDims(box, left, top, width, height) {\n    box.top = top;\n    box.left = left;\n    box.right = left + width;\n    box.bottom = top + height;\n    box.width = width;\n    box.height = height;\n}\nfunction placeBoxes(boxes, chartArea, params, stacks) {\n    const userPadding = params.padding;\n    let { x , y  } = chartArea;\n    for (const layout of boxes){\n        const box = layout.box;\n        const stack = stacks[layout.stack] || {\n            count: 1,\n            placed: 0,\n            weight: 1\n        };\n        const weight = layout.stackWeight / stack.weight || 1;\n        if (layout.horizontal) {\n            const width = chartArea.w * weight;\n            const height = stack.size || box.height;\n            if (defined(stack.start)) {\n                y = stack.start;\n            }\n            if (box.fullSize) {\n                setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\n            } else {\n                setBoxDims(box, chartArea.left + stack.placed, y, width, height);\n            }\n            stack.start = y;\n            stack.placed += width;\n            y = box.bottom;\n        } else {\n            const height = chartArea.h * weight;\n            const width = stack.size || box.width;\n            if (defined(stack.start)) {\n                x = stack.start;\n            }\n            if (box.fullSize) {\n                setBoxDims(box, x, userPadding.top, width, params.outerHeight - userPadding.bottom - userPadding.top);\n            } else {\n                setBoxDims(box, x, chartArea.top + stack.placed, width, height);\n            }\n            stack.start = x;\n            stack.placed += height;\n            x = box.right;\n        }\n    }\n    chartArea.x = x;\n    chartArea.y = y;\n}\nvar layouts = {\n addBox (chart, item) {\n        if (!chart.boxes) {\n            chart.boxes = [];\n        }\n        item.fullSize = item.fullSize || false;\n        item.position = item.position || 'top';\n        item.weight = item.weight || 0;\n        item._layers = item._layers || function() {\n            return [\n                {\n                    z: 0,\n                    draw (chartArea) {\n                        item.draw(chartArea);\n                    }\n                }\n            ];\n        };\n        chart.boxes.push(item);\n    },\n removeBox (chart, layoutItem) {\n        const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\n        if (index !== -1) {\n            chart.boxes.splice(index, 1);\n        }\n    },\n configure (chart, item, options) {\n        item.fullSize = options.fullSize;\n        item.position = options.position;\n        item.weight = options.weight;\n    },\n update (chart, width, height, minPadding) {\n        if (!chart) {\n            return;\n        }\n        const padding = toPadding(chart.options.layout.padding);\n        const availableWidth = Math.max(width - padding.width, 0);\n        const availableHeight = Math.max(height - padding.height, 0);\n        const boxes = buildLayoutBoxes(chart.boxes);\n        const verticalBoxes = boxes.vertical;\n        const horizontalBoxes = boxes.horizontal;\n        each(chart.boxes, (box)=>{\n            if (typeof box.beforeLayout === 'function') {\n                box.beforeLayout();\n            }\n        });\n        const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap)=>wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\n        const params = Object.freeze({\n            outerWidth: width,\n            outerHeight: height,\n            padding,\n            availableWidth,\n            availableHeight,\n            vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\n            hBoxMaxHeight: availableHeight / 2\n        });\n        const maxPadding = Object.assign({}, padding);\n        updateMaxPadding(maxPadding, toPadding(minPadding));\n        const chartArea = Object.assign({\n            maxPadding,\n            w: availableWidth,\n            h: availableHeight,\n            x: padding.left,\n            y: padding.top\n        }, padding);\n        const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\n        fitBoxes(boxes.fullSize, chartArea, params, stacks);\n        fitBoxes(verticalBoxes, chartArea, params, stacks);\n        if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\n            fitBoxes(verticalBoxes, chartArea, params, stacks);\n        }\n        handleMaxPadding(chartArea);\n        placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\n        chartArea.x += chartArea.w;\n        chartArea.y += chartArea.h;\n        placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\n        chart.chartArea = {\n            left: chartArea.left,\n            top: chartArea.top,\n            right: chartArea.left + chartArea.w,\n            bottom: chartArea.top + chartArea.h,\n            height: chartArea.h,\n            width: chartArea.w\n        };\n        each(boxes.chartArea, (layout)=>{\n            const box = layout.box;\n            Object.assign(box, chart.chartArea);\n            box.update(chartArea.w, chartArea.h, {\n                left: 0,\n                top: 0,\n                right: 0,\n                bottom: 0\n            });\n        });\n    }\n};\n\nclass BasePlatform {\n acquireContext(canvas, aspectRatio) {}\n releaseContext(context) {\n        return false;\n    }\n addEventListener(chart, type, listener) {}\n removeEventListener(chart, type, listener) {}\n getDevicePixelRatio() {\n        return 1;\n    }\n getMaximumSize(element, width, height, aspectRatio) {\n        width = Math.max(0, width || element.width);\n        height = height || element.height;\n        return {\n            width,\n            height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\n        };\n    }\n isAttached(canvas) {\n        return true;\n    }\n updateConfig(config) {\n    }\n}\n\nclass BasicPlatform extends BasePlatform {\n    acquireContext(item) {\n        return item && item.getContext && item.getContext('2d') || null;\n    }\n    updateConfig(config) {\n        config.options.animation = false;\n    }\n}\n\nconst EXPANDO_KEY = '$chartjs';\n const EVENT_TYPES = {\n    touchstart: 'mousedown',\n    touchmove: 'mousemove',\n    touchend: 'mouseup',\n    pointerenter: 'mouseenter',\n    pointerdown: 'mousedown',\n    pointermove: 'mousemove',\n    pointerup: 'mouseup',\n    pointerleave: 'mouseout',\n    pointerout: 'mouseout'\n};\nconst isNullOrEmpty = (value)=>value === null || value === '';\n function initCanvas(canvas, aspectRatio) {\n    const style = canvas.style;\n    const renderHeight = canvas.getAttribute('height');\n    const renderWidth = canvas.getAttribute('width');\n    canvas[EXPANDO_KEY] = {\n        initial: {\n            height: renderHeight,\n            width: renderWidth,\n            style: {\n                display: style.display,\n                height: style.height,\n                width: style.width\n            }\n        }\n    };\n    style.display = style.display || 'block';\n    style.boxSizing = style.boxSizing || 'border-box';\n    if (isNullOrEmpty(renderWidth)) {\n        const displayWidth = readUsedSize(canvas, 'width');\n        if (displayWidth !== undefined) {\n            canvas.width = displayWidth;\n        }\n    }\n    if (isNullOrEmpty(renderHeight)) {\n        if (canvas.style.height === '') {\n            canvas.height = canvas.width / (aspectRatio || 2);\n        } else {\n            const displayHeight = readUsedSize(canvas, 'height');\n            if (displayHeight !== undefined) {\n                canvas.height = displayHeight;\n            }\n        }\n    }\n    return canvas;\n}\nconst eventListenerOptions = supportsEventListenerOptions ? {\n    passive: true\n} : false;\nfunction addListener(node, type, listener) {\n    if (node) {\n        node.addEventListener(type, listener, eventListenerOptions);\n    }\n}\nfunction removeListener(chart, type, listener) {\n    if (chart && chart.canvas) {\n        chart.canvas.removeEventListener(type, listener, eventListenerOptions);\n    }\n}\nfunction fromNativeEvent(event, chart) {\n    const type = EVENT_TYPES[event.type] || event.type;\n    const { x , y  } = getRelativePosition(event, chart);\n    return {\n        type,\n        chart,\n        native: event,\n        x: x !== undefined ? x : null,\n        y: y !== undefined ? y : null\n    };\n}\nfunction nodeListContains(nodeList, canvas) {\n    for (const node of nodeList){\n        if (node === canvas || node.contains(canvas)) {\n            return true;\n        }\n    }\n}\nfunction createAttachObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const observer = new MutationObserver((entries)=>{\n        let trigger = false;\n        for (const entry of entries){\n            trigger = trigger || nodeListContains(entry.addedNodes, canvas);\n            trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\n        }\n        if (trigger) {\n            listener();\n        }\n    });\n    observer.observe(document, {\n        childList: true,\n        subtree: true\n    });\n    return observer;\n}\nfunction createDetachObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const observer = new MutationObserver((entries)=>{\n        let trigger = false;\n        for (const entry of entries){\n            trigger = trigger || nodeListContains(entry.removedNodes, canvas);\n            trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\n        }\n        if (trigger) {\n            listener();\n        }\n    });\n    observer.observe(document, {\n        childList: true,\n        subtree: true\n    });\n    return observer;\n}\nconst drpListeningCharts = new Map();\nlet oldDevicePixelRatio = 0;\nfunction onWindowResize() {\n    const dpr = window.devicePixelRatio;\n    if (dpr === oldDevicePixelRatio) {\n        return;\n    }\n    oldDevicePixelRatio = dpr;\n    drpListeningCharts.forEach((resize, chart)=>{\n        if (chart.currentDevicePixelRatio !== dpr) {\n            resize();\n        }\n    });\n}\nfunction listenDevicePixelRatioChanges(chart, resize) {\n    if (!drpListeningCharts.size) {\n        window.addEventListener('resize', onWindowResize);\n    }\n    drpListeningCharts.set(chart, resize);\n}\nfunction unlistenDevicePixelRatioChanges(chart) {\n    drpListeningCharts.delete(chart);\n    if (!drpListeningCharts.size) {\n        window.removeEventListener('resize', onWindowResize);\n    }\n}\nfunction createResizeObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const container = canvas && _getParentNode(canvas);\n    if (!container) {\n        return;\n    }\n    const resize = throttled((width, height)=>{\n        const w = container.clientWidth;\n        listener(width, height);\n        if (w < container.clientWidth) {\n            listener();\n        }\n    }, window);\n    const observer = new ResizeObserver((entries)=>{\n        const entry = entries[0];\n        const width = entry.contentRect.width;\n        const height = entry.contentRect.height;\n        if (width === 0 && height === 0) {\n            return;\n        }\n        resize(width, height);\n    });\n    observer.observe(container);\n    listenDevicePixelRatioChanges(chart, resize);\n    return observer;\n}\nfunction releaseObserver(chart, type, observer) {\n    if (observer) {\n        observer.disconnect();\n    }\n    if (type === 'resize') {\n        unlistenDevicePixelRatioChanges(chart);\n    }\n}\nfunction createProxyAndListen(chart, type, listener) {\n    const canvas = chart.canvas;\n    const proxy = throttled((event)=>{\n        if (chart.ctx !== null) {\n            listener(fromNativeEvent(event, chart));\n        }\n    }, chart);\n    addListener(canvas, type, proxy);\n    return proxy;\n}\n class DomPlatform extends BasePlatform {\n acquireContext(canvas, aspectRatio) {\n        const context = canvas && canvas.getContext && canvas.getContext('2d');\n        if (context && context.canvas === canvas) {\n            initCanvas(canvas, aspectRatio);\n            return context;\n        }\n        return null;\n    }\n releaseContext(context) {\n        const canvas = context.canvas;\n        if (!canvas[EXPANDO_KEY]) {\n            return false;\n        }\n        const initial = canvas[EXPANDO_KEY].initial;\n        [\n            'height',\n            'width'\n        ].forEach((prop)=>{\n            const value = initial[prop];\n            if (isNullOrUndef(value)) {\n                canvas.removeAttribute(prop);\n            } else {\n                canvas.setAttribute(prop, value);\n            }\n        });\n        const style = initial.style || {};\n        Object.keys(style).forEach((key)=>{\n            canvas.style[key] = style[key];\n        });\n        canvas.width = canvas.width;\n        delete canvas[EXPANDO_KEY];\n        return true;\n    }\n addEventListener(chart, type, listener) {\n        this.removeEventListener(chart, type);\n        const proxies = chart.$proxies || (chart.$proxies = {});\n        const handlers = {\n            attach: createAttachObserver,\n            detach: createDetachObserver,\n            resize: createResizeObserver\n        };\n        const handler = handlers[type] || createProxyAndListen;\n        proxies[type] = handler(chart, type, listener);\n    }\n removeEventListener(chart, type) {\n        const proxies = chart.$proxies || (chart.$proxies = {});\n        const proxy = proxies[type];\n        if (!proxy) {\n            return;\n        }\n        const handlers = {\n            attach: releaseObserver,\n            detach: releaseObserver,\n            resize: releaseObserver\n        };\n        const handler = handlers[type] || removeListener;\n        handler(chart, type, proxy);\n        proxies[type] = undefined;\n    }\n    getDevicePixelRatio() {\n        return window.devicePixelRatio;\n    }\n getMaximumSize(canvas, width, height, aspectRatio) {\n        return getMaximumSize(canvas, width, height, aspectRatio);\n    }\n isAttached(canvas) {\n        const container = canvas && _getParentNode(canvas);\n        return !!(container && container.isConnected);\n    }\n}\n\nfunction _detectPlatform(canvas) {\n    if (!_isDomSupported() || typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas) {\n        return BasicPlatform;\n    }\n    return DomPlatform;\n}\n\nclass Element {\n    static defaults = {};\n    static defaultRoutes = undefined;\n    x;\n    y;\n    active = false;\n    options;\n    $animations;\n    tooltipPosition(useFinalPosition) {\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return {\n            x,\n            y\n        };\n    }\n    hasValue() {\n        return isNumber(this.x) && isNumber(this.y);\n    }\n    getProps(props, final) {\n        const anims = this.$animations;\n        if (!final || !anims) {\n            // let's not create an object, if not needed\n            return this;\n        }\n        const ret = {};\n        props.forEach((prop)=>{\n            ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop];\n        });\n        return ret;\n    }\n}\n\nfunction autoSkip(scale, ticks) {\n    const tickOpts = scale.options.ticks;\n    const determinedMaxTicks = determineMaxTicks(scale);\n    const ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);\n    const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\n    const numMajorIndices = majorIndices.length;\n    const first = majorIndices[0];\n    const last = majorIndices[numMajorIndices - 1];\n    const newTicks = [];\n    if (numMajorIndices > ticksLimit) {\n        skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\n        return newTicks;\n    }\n    const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\n    if (numMajorIndices > 0) {\n        let i, ilen;\n        const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\n        skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\n        for(i = 0, ilen = numMajorIndices - 1; i < ilen; i++){\n            skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\n        }\n        skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\n        return newTicks;\n    }\n    skip(ticks, newTicks, spacing);\n    return newTicks;\n}\nfunction determineMaxTicks(scale) {\n    const offset = scale.options.offset;\n    const tickLength = scale._tickSize();\n    const maxScale = scale._length / tickLength + (offset ? 0 : 1);\n    const maxChart = scale._maxLength / tickLength;\n    return Math.floor(Math.min(maxScale, maxChart));\n}\n function calculateSpacing(majorIndices, ticks, ticksLimit) {\n    const evenMajorSpacing = getEvenSpacing(majorIndices);\n    const spacing = ticks.length / ticksLimit;\n    if (!evenMajorSpacing) {\n        return Math.max(spacing, 1);\n    }\n    const factors = _factorize(evenMajorSpacing);\n    for(let i = 0, ilen = factors.length - 1; i < ilen; i++){\n        const factor = factors[i];\n        if (factor > spacing) {\n            return factor;\n        }\n    }\n    return Math.max(spacing, 1);\n}\n function getMajorIndices(ticks) {\n    const result = [];\n    let i, ilen;\n    for(i = 0, ilen = ticks.length; i < ilen; i++){\n        if (ticks[i].major) {\n            result.push(i);\n        }\n    }\n    return result;\n}\n function skipMajors(ticks, newTicks, majorIndices, spacing) {\n    let count = 0;\n    let next = majorIndices[0];\n    let i;\n    spacing = Math.ceil(spacing);\n    for(i = 0; i < ticks.length; i++){\n        if (i === next) {\n            newTicks.push(ticks[i]);\n            count++;\n            next = majorIndices[count * spacing];\n        }\n    }\n}\n function skip(ticks, newTicks, spacing, majorStart, majorEnd) {\n    const start = valueOrDefault(majorStart, 0);\n    const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\n    let count = 0;\n    let length, i, next;\n    spacing = Math.ceil(spacing);\n    if (majorEnd) {\n        length = majorEnd - majorStart;\n        spacing = length / Math.floor(length / spacing);\n    }\n    next = start;\n    while(next < 0){\n        count++;\n        next = Math.round(start + count * spacing);\n    }\n    for(i = Math.max(start, 0); i < end; i++){\n        if (i === next) {\n            newTicks.push(ticks[i]);\n            count++;\n            next = Math.round(start + count * spacing);\n        }\n    }\n}\n function getEvenSpacing(arr) {\n    const len = arr.length;\n    let i, diff;\n    if (len < 2) {\n        return false;\n    }\n    for(diff = arr[0], i = 1; i < len; ++i){\n        if (arr[i] - arr[i - 1] !== diff) {\n            return false;\n        }\n    }\n    return diff;\n}\n\nconst reverseAlign = (align)=>align === 'left' ? 'right' : align === 'right' ? 'left' : align;\nconst offsetFromEdge = (scale, edge, offset)=>edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\nconst getTicksLimit = (ticksLength, maxTicksLimit)=>Math.min(maxTicksLimit || ticksLength, ticksLength);\n function sample(arr, numItems) {\n    const result = [];\n    const increment = arr.length / numItems;\n    const len = arr.length;\n    let i = 0;\n    for(; i < len; i += increment){\n        result.push(arr[Math.floor(i)]);\n    }\n    return result;\n}\n function getPixelForGridLine(scale, index, offsetGridLines) {\n    const length = scale.ticks.length;\n    const validIndex = Math.min(index, length - 1);\n    const start = scale._startPixel;\n    const end = scale._endPixel;\n    const epsilon = 1e-6;\n    let lineValue = scale.getPixelForTick(validIndex);\n    let offset;\n    if (offsetGridLines) {\n        if (length === 1) {\n            offset = Math.max(lineValue - start, end - lineValue);\n        } else if (index === 0) {\n            offset = (scale.getPixelForTick(1) - lineValue) / 2;\n        } else {\n            offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\n        }\n        lineValue += validIndex < index ? offset : -offset;\n        if (lineValue < start - epsilon || lineValue > end + epsilon) {\n            return;\n        }\n    }\n    return lineValue;\n}\n function garbageCollect(caches, length) {\n    each(caches, (cache)=>{\n        const gc = cache.gc;\n        const gcLen = gc.length / 2;\n        let i;\n        if (gcLen > length) {\n            for(i = 0; i < gcLen; ++i){\n                delete cache.data[gc[i]];\n            }\n            gc.splice(0, gcLen);\n        }\n    });\n}\n function getTickMarkLength(options) {\n    return options.drawTicks ? options.tickLength : 0;\n}\n function getTitleHeight(options, fallback) {\n    if (!options.display) {\n        return 0;\n    }\n    const font = toFont(options.font, fallback);\n    const padding = toPadding(options.padding);\n    const lines = isArray(options.text) ? options.text.length : 1;\n    return lines * font.lineHeight + padding.height;\n}\nfunction createScaleContext(parent, scale) {\n    return createContext(parent, {\n        scale,\n        type: 'scale'\n    });\n}\nfunction createTickContext(parent, index, tick) {\n    return createContext(parent, {\n        tick,\n        index,\n        type: 'tick'\n    });\n}\nfunction titleAlign(align, position, reverse) {\n     let ret = _toLeftRightCenter(align);\n    if (reverse && position !== 'right' || !reverse && position === 'right') {\n        ret = reverseAlign(ret);\n    }\n    return ret;\n}\nfunction titleArgs(scale, offset, position, align) {\n    const { top , left , bottom , right , chart  } = scale;\n    const { chartArea , scales  } = chart;\n    let rotation = 0;\n    let maxWidth, titleX, titleY;\n    const height = bottom - top;\n    const width = right - left;\n    if (scale.isHorizontal()) {\n        titleX = _alignStartEnd(align, left, right);\n        if (isObject(position)) {\n            const positionAxisID = Object.keys(position)[0];\n            const value = position[positionAxisID];\n            titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\n        } else if (position === 'center') {\n            titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\n        } else {\n            titleY = offsetFromEdge(scale, position, offset);\n        }\n        maxWidth = right - left;\n    } else {\n        if (isObject(position)) {\n            const positionAxisID = Object.keys(position)[0];\n            const value = position[positionAxisID];\n            titleX = scales[positionAxisID].getPixelForValue(value) - width + offset;\n        } else if (position === 'center') {\n            titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\n        } else {\n            titleX = offsetFromEdge(scale, position, offset);\n        }\n        titleY = _alignStartEnd(align, bottom, top);\n        rotation = position === 'left' ? -HALF_PI : HALF_PI;\n    }\n    return {\n        titleX,\n        titleY,\n        maxWidth,\n        rotation\n    };\n}\nclass Scale extends Element {\n    constructor(cfg){\n        super();\n         this.id = cfg.id;\n         this.type = cfg.type;\n         this.options = undefined;\n         this.ctx = cfg.ctx;\n         this.chart = cfg.chart;\n         this.top = undefined;\n         this.bottom = undefined;\n         this.left = undefined;\n         this.right = undefined;\n         this.width = undefined;\n         this.height = undefined;\n        this._margins = {\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0\n        };\n         this.maxWidth = undefined;\n         this.maxHeight = undefined;\n         this.paddingTop = undefined;\n         this.paddingBottom = undefined;\n         this.paddingLeft = undefined;\n         this.paddingRight = undefined;\n         this.axis = undefined;\n         this.labelRotation = undefined;\n        this.min = undefined;\n        this.max = undefined;\n        this._range = undefined;\n         this.ticks = [];\n         this._gridLineItems = null;\n         this._labelItems = null;\n         this._labelSizes = null;\n        this._length = 0;\n        this._maxLength = 0;\n        this._longestTextCache = {};\n         this._startPixel = undefined;\n         this._endPixel = undefined;\n        this._reversePixels = false;\n        this._userMax = undefined;\n        this._userMin = undefined;\n        this._suggestedMax = undefined;\n        this._suggestedMin = undefined;\n        this._ticksLength = 0;\n        this._borderValue = 0;\n        this._cache = {};\n        this._dataLimitsCached = false;\n        this.$context = undefined;\n    }\n init(options) {\n        this.options = options.setContext(this.getContext());\n        this.axis = options.axis;\n        this._userMin = this.parse(options.min);\n        this._userMax = this.parse(options.max);\n        this._suggestedMin = this.parse(options.suggestedMin);\n        this._suggestedMax = this.parse(options.suggestedMax);\n    }\n parse(raw, index) {\n        return raw;\n    }\n getUserBounds() {\n        let { _userMin , _userMax , _suggestedMin , _suggestedMax  } = this;\n        _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\n        _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\n        _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\n        _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\n        return {\n            min: finiteOrDefault(_userMin, _suggestedMin),\n            max: finiteOrDefault(_userMax, _suggestedMax),\n            minDefined: isNumberFinite(_userMin),\n            maxDefined: isNumberFinite(_userMax)\n        };\n    }\n getMinMax(canStack) {\n        let { min , max , minDefined , maxDefined  } = this.getUserBounds();\n        let range;\n        if (minDefined && maxDefined) {\n            return {\n                min,\n                max\n            };\n        }\n        const metas = this.getMatchingVisibleMetas();\n        for(let i = 0, ilen = metas.length; i < ilen; ++i){\n            range = metas[i].controller.getMinMax(this, canStack);\n            if (!minDefined) {\n                min = Math.min(min, range.min);\n            }\n            if (!maxDefined) {\n                max = Math.max(max, range.max);\n            }\n        }\n        min = maxDefined && min > max ? max : min;\n        max = minDefined && min > max ? min : max;\n        return {\n            min: finiteOrDefault(min, finiteOrDefault(max, min)),\n            max: finiteOrDefault(max, finiteOrDefault(min, max))\n        };\n    }\n getPadding() {\n        return {\n            left: this.paddingLeft || 0,\n            top: this.paddingTop || 0,\n            right: this.paddingRight || 0,\n            bottom: this.paddingBottom || 0\n        };\n    }\n getTicks() {\n        return this.ticks;\n    }\n getLabels() {\n        const data = this.chart.data;\n        return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\n    }\n getLabelItems(chartArea = this.chart.chartArea) {\n        const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\n        return items;\n    }\n    beforeLayout() {\n        this._cache = {};\n        this._dataLimitsCached = false;\n    }\n    beforeUpdate() {\n        callback(this.options.beforeUpdate, [\n            this\n        ]);\n    }\n update(maxWidth, maxHeight, margins) {\n        const { beginAtZero , grace , ticks: tickOpts  } = this.options;\n        const sampleSize = tickOpts.sampleSize;\n        this.beforeUpdate();\n        this.maxWidth = maxWidth;\n        this.maxHeight = maxHeight;\n        this._margins = margins = Object.assign({\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0\n        }, margins);\n        this.ticks = null;\n        this._labelSizes = null;\n        this._gridLineItems = null;\n        this._labelItems = null;\n        this.beforeSetDimensions();\n        this.setDimensions();\n        this.afterSetDimensions();\n        this._maxLength = this.isHorizontal() ? this.width + margins.left + margins.right : this.height + margins.top + margins.bottom;\n        if (!this._dataLimitsCached) {\n            this.beforeDataLimits();\n            this.determineDataLimits();\n            this.afterDataLimits();\n            this._range = _addGrace(this, grace, beginAtZero);\n            this._dataLimitsCached = true;\n        }\n        this.beforeBuildTicks();\n        this.ticks = this.buildTicks() || [];\n        this.afterBuildTicks();\n        const samplingEnabled = sampleSize < this.ticks.length;\n        this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\n        this.configure();\n        this.beforeCalculateLabelRotation();\n        this.calculateLabelRotation();\n        this.afterCalculateLabelRotation();\n        if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\n            this.ticks = autoSkip(this, this.ticks);\n            this._labelSizes = null;\n            this.afterAutoSkip();\n        }\n        if (samplingEnabled) {\n            this._convertTicksToLabels(this.ticks);\n        }\n        this.beforeFit();\n        this.fit();\n        this.afterFit();\n        this.afterUpdate();\n    }\n configure() {\n        let reversePixels = this.options.reverse;\n        let startPixel, endPixel;\n        if (this.isHorizontal()) {\n            startPixel = this.left;\n            endPixel = this.right;\n        } else {\n            startPixel = this.top;\n            endPixel = this.bottom;\n            reversePixels = !reversePixels;\n        }\n        this._startPixel = startPixel;\n        this._endPixel = endPixel;\n        this._reversePixels = reversePixels;\n        this._length = endPixel - startPixel;\n        this._alignToPixels = this.options.alignToPixels;\n    }\n    afterUpdate() {\n        callback(this.options.afterUpdate, [\n            this\n        ]);\n    }\n    beforeSetDimensions() {\n        callback(this.options.beforeSetDimensions, [\n            this\n        ]);\n    }\n    setDimensions() {\n        if (this.isHorizontal()) {\n            this.width = this.maxWidth;\n            this.left = 0;\n            this.right = this.width;\n        } else {\n            this.height = this.maxHeight;\n            this.top = 0;\n            this.bottom = this.height;\n        }\n        this.paddingLeft = 0;\n        this.paddingTop = 0;\n        this.paddingRight = 0;\n        this.paddingBottom = 0;\n    }\n    afterSetDimensions() {\n        callback(this.options.afterSetDimensions, [\n            this\n        ]);\n    }\n    _callHooks(name) {\n        this.chart.notifyPlugins(name, this.getContext());\n        callback(this.options[name], [\n            this\n        ]);\n    }\n    beforeDataLimits() {\n        this._callHooks('beforeDataLimits');\n    }\n    determineDataLimits() {}\n    afterDataLimits() {\n        this._callHooks('afterDataLimits');\n    }\n    beforeBuildTicks() {\n        this._callHooks('beforeBuildTicks');\n    }\n buildTicks() {\n        return [];\n    }\n    afterBuildTicks() {\n        this._callHooks('afterBuildTicks');\n    }\n    beforeTickToLabelConversion() {\n        callback(this.options.beforeTickToLabelConversion, [\n            this\n        ]);\n    }\n generateTickLabels(ticks) {\n        const tickOpts = this.options.ticks;\n        let i, ilen, tick;\n        for(i = 0, ilen = ticks.length; i < ilen; i++){\n            tick = ticks[i];\n            tick.label = callback(tickOpts.callback, [\n                tick.value,\n                i,\n                ticks\n            ], this);\n        }\n    }\n    afterTickToLabelConversion() {\n        callback(this.options.afterTickToLabelConversion, [\n            this\n        ]);\n    }\n    beforeCalculateLabelRotation() {\n        callback(this.options.beforeCalculateLabelRotation, [\n            this\n        ]);\n    }\n    calculateLabelRotation() {\n        const options = this.options;\n        const tickOpts = options.ticks;\n        const numTicks = getTicksLimit(this.ticks.length, options.ticks.maxTicksLimit);\n        const minRotation = tickOpts.minRotation || 0;\n        const maxRotation = tickOpts.maxRotation;\n        let labelRotation = minRotation;\n        let tickWidth, maxHeight, maxLabelDiagonal;\n        if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\n            this.labelRotation = minRotation;\n            return;\n        }\n        const labelSizes = this._getLabelSizes();\n        const maxLabelWidth = labelSizes.widest.width;\n        const maxLabelHeight = labelSizes.highest.height;\n        const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\n        tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\n        if (maxLabelWidth + 6 > tickWidth) {\n            tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\n            maxHeight = this.maxHeight - getTickMarkLength(options.grid) - tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\n            maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\n            labelRotation = toDegrees(Math.min(Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)), Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))));\n            labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\n        }\n        this.labelRotation = labelRotation;\n    }\n    afterCalculateLabelRotation() {\n        callback(this.options.afterCalculateLabelRotation, [\n            this\n        ]);\n    }\n    afterAutoSkip() {}\n    beforeFit() {\n        callback(this.options.beforeFit, [\n            this\n        ]);\n    }\n    fit() {\n        const minSize = {\n            width: 0,\n            height: 0\n        };\n        const { chart , options: { ticks: tickOpts , title: titleOpts , grid: gridOpts  }  } = this;\n        const display = this._isVisible();\n        const isHorizontal = this.isHorizontal();\n        if (display) {\n            const titleHeight = getTitleHeight(titleOpts, chart.options.font);\n            if (isHorizontal) {\n                minSize.width = this.maxWidth;\n                minSize.height = getTickMarkLength(gridOpts) + titleHeight;\n            } else {\n                minSize.height = this.maxHeight;\n                minSize.width = getTickMarkLength(gridOpts) + titleHeight;\n            }\n            if (tickOpts.display && this.ticks.length) {\n                const { first , last , widest , highest  } = this._getLabelSizes();\n                const tickPadding = tickOpts.padding * 2;\n                const angleRadians = toRadians(this.labelRotation);\n                const cos = Math.cos(angleRadians);\n                const sin = Math.sin(angleRadians);\n                if (isHorizontal) {\n                    const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\n                    minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\n                } else {\n                    const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\n                    minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\n                }\n                this._calculatePadding(first, last, sin, cos);\n            }\n        }\n        this._handleMargins();\n        if (isHorizontal) {\n            this.width = this._length = chart.width - this._margins.left - this._margins.right;\n            this.height = minSize.height;\n        } else {\n            this.width = minSize.width;\n            this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\n        }\n    }\n    _calculatePadding(first, last, sin, cos) {\n        const { ticks: { align , padding  } , position  } = this.options;\n        const isRotated = this.labelRotation !== 0;\n        const labelsBelowTicks = position !== 'top' && this.axis === 'x';\n        if (this.isHorizontal()) {\n            const offsetLeft = this.getPixelForTick(0) - this.left;\n            const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\n            let paddingLeft = 0;\n            let paddingRight = 0;\n            if (isRotated) {\n                if (labelsBelowTicks) {\n                    paddingLeft = cos * first.width;\n                    paddingRight = sin * last.height;\n                } else {\n                    paddingLeft = sin * first.height;\n                    paddingRight = cos * last.width;\n                }\n            } else if (align === 'start') {\n                paddingRight = last.width;\n            } else if (align === 'end') {\n                paddingLeft = first.width;\n            } else if (align !== 'inner') {\n                paddingLeft = first.width / 2;\n                paddingRight = last.width / 2;\n            }\n            this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\n            this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\n        } else {\n            let paddingTop = last.height / 2;\n            let paddingBottom = first.height / 2;\n            if (align === 'start') {\n                paddingTop = 0;\n                paddingBottom = first.height;\n            } else if (align === 'end') {\n                paddingTop = last.height;\n                paddingBottom = 0;\n            }\n            this.paddingTop = paddingTop + padding;\n            this.paddingBottom = paddingBottom + padding;\n        }\n    }\n _handleMargins() {\n        if (this._margins) {\n            this._margins.left = Math.max(this.paddingLeft, this._margins.left);\n            this._margins.top = Math.max(this.paddingTop, this._margins.top);\n            this._margins.right = Math.max(this.paddingRight, this._margins.right);\n            this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\n        }\n    }\n    afterFit() {\n        callback(this.options.afterFit, [\n            this\n        ]);\n    }\n isHorizontal() {\n        const { axis , position  } = this.options;\n        return position === 'top' || position === 'bottom' || axis === 'x';\n    }\n isFullSize() {\n        return this.options.fullSize;\n    }\n _convertTicksToLabels(ticks) {\n        this.beforeTickToLabelConversion();\n        this.generateTickLabels(ticks);\n        let i, ilen;\n        for(i = 0, ilen = ticks.length; i < ilen; i++){\n            if (isNullOrUndef(ticks[i].label)) {\n                ticks.splice(i, 1);\n                ilen--;\n                i--;\n            }\n        }\n        this.afterTickToLabelConversion();\n    }\n _getLabelSizes() {\n        let labelSizes = this._labelSizes;\n        if (!labelSizes) {\n            const sampleSize = this.options.ticks.sampleSize;\n            let ticks = this.ticks;\n            if (sampleSize < ticks.length) {\n                ticks = sample(ticks, sampleSize);\n            }\n            this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length, this.options.ticks.maxTicksLimit);\n        }\n        return labelSizes;\n    }\n _computeLabelSizes(ticks, length, maxTicksLimit) {\n        const { ctx , _longestTextCache: caches  } = this;\n        const widths = [];\n        const heights = [];\n        const increment = Math.floor(length / getTicksLimit(length, maxTicksLimit));\n        let widestLabelSize = 0;\n        let highestLabelSize = 0;\n        let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\n        for(i = 0; i < length; i += increment){\n            label = ticks[i].label;\n            tickFont = this._resolveTickFontOptions(i);\n            ctx.font = fontString = tickFont.string;\n            cache = caches[fontString] = caches[fontString] || {\n                data: {},\n                gc: []\n            };\n            lineHeight = tickFont.lineHeight;\n            width = height = 0;\n            if (!isNullOrUndef(label) && !isArray(label)) {\n                width = _measureText(ctx, cache.data, cache.gc, width, label);\n                height = lineHeight;\n            } else if (isArray(label)) {\n                for(j = 0, jlen = label.length; j < jlen; ++j){\n                    nestedLabel =  label[j];\n                    if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\n                        width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\n                        height += lineHeight;\n                    }\n                }\n            }\n            widths.push(width);\n            heights.push(height);\n            widestLabelSize = Math.max(width, widestLabelSize);\n            highestLabelSize = Math.max(height, highestLabelSize);\n        }\n        garbageCollect(caches, length);\n        const widest = widths.indexOf(widestLabelSize);\n        const highest = heights.indexOf(highestLabelSize);\n        const valueAt = (idx)=>({\n                width: widths[idx] || 0,\n                height: heights[idx] || 0\n            });\n        return {\n            first: valueAt(0),\n            last: valueAt(length - 1),\n            widest: valueAt(widest),\n            highest: valueAt(highest),\n            widths,\n            heights\n        };\n    }\n getLabelForValue(value) {\n        return value;\n    }\n getPixelForValue(value, index) {\n        return NaN;\n    }\n getValueForPixel(pixel) {}\n getPixelForTick(index) {\n        const ticks = this.ticks;\n        if (index < 0 || index > ticks.length - 1) {\n            return null;\n        }\n        return this.getPixelForValue(ticks[index].value);\n    }\n getPixelForDecimal(decimal) {\n        if (this._reversePixels) {\n            decimal = 1 - decimal;\n        }\n        const pixel = this._startPixel + decimal * this._length;\n        return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\n    }\n getDecimalForPixel(pixel) {\n        const decimal = (pixel - this._startPixel) / this._length;\n        return this._reversePixels ? 1 - decimal : decimal;\n    }\n getBasePixel() {\n        return this.getPixelForValue(this.getBaseValue());\n    }\n getBaseValue() {\n        const { min , max  } = this;\n        return min < 0 && max < 0 ? max : min > 0 && max > 0 ? min : 0;\n    }\n getContext(index) {\n        const ticks = this.ticks || [];\n        if (index >= 0 && index < ticks.length) {\n            const tick = ticks[index];\n            return tick.$context || (tick.$context = createTickContext(this.getContext(), index, tick));\n        }\n        return this.$context || (this.$context = createScaleContext(this.chart.getContext(), this));\n    }\n _tickSize() {\n        const optionTicks = this.options.ticks;\n        const rot = toRadians(this.labelRotation);\n        const cos = Math.abs(Math.cos(rot));\n        const sin = Math.abs(Math.sin(rot));\n        const labelSizes = this._getLabelSizes();\n        const padding = optionTicks.autoSkipPadding || 0;\n        const w = labelSizes ? labelSizes.widest.width + padding : 0;\n        const h = labelSizes ? labelSizes.highest.height + padding : 0;\n        return this.isHorizontal() ? h * cos > w * sin ? w / cos : h / sin : h * sin < w * cos ? h / cos : w / sin;\n    }\n _isVisible() {\n        const display = this.options.display;\n        if (display !== 'auto') {\n            return !!display;\n        }\n        return this.getMatchingVisibleMetas().length > 0;\n    }\n _computeGridLineItems(chartArea) {\n        const axis = this.axis;\n        const chart = this.chart;\n        const options = this.options;\n        const { grid , position , border  } = options;\n        const offset = grid.offset;\n        const isHorizontal = this.isHorizontal();\n        const ticks = this.ticks;\n        const ticksLength = ticks.length + (offset ? 1 : 0);\n        const tl = getTickMarkLength(grid);\n        const items = [];\n        const borderOpts = border.setContext(this.getContext());\n        const axisWidth = borderOpts.display ? borderOpts.width : 0;\n        const axisHalfWidth = axisWidth / 2;\n        const alignBorderValue = function(pixel) {\n            return _alignPixel(chart, pixel, axisWidth);\n        };\n        let borderValue, i, lineValue, alignedLineValue;\n        let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\n        if (position === 'top') {\n            borderValue = alignBorderValue(this.bottom);\n            ty1 = this.bottom - tl;\n            ty2 = borderValue - axisHalfWidth;\n            y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\n            y2 = chartArea.bottom;\n        } else if (position === 'bottom') {\n            borderValue = alignBorderValue(this.top);\n            y1 = chartArea.top;\n            y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\n            ty1 = borderValue + axisHalfWidth;\n            ty2 = this.top + tl;\n        } else if (position === 'left') {\n            borderValue = alignBorderValue(this.right);\n            tx1 = this.right - tl;\n            tx2 = borderValue - axisHalfWidth;\n            x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\n            x2 = chartArea.right;\n        } else if (position === 'right') {\n            borderValue = alignBorderValue(this.left);\n            x1 = chartArea.left;\n            x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\n            tx1 = borderValue + axisHalfWidth;\n            tx2 = this.left + tl;\n        } else if (axis === 'x') {\n            if (position === 'center') {\n                borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n            }\n            y1 = chartArea.top;\n            y2 = chartArea.bottom;\n            ty1 = borderValue + axisHalfWidth;\n            ty2 = ty1 + tl;\n        } else if (axis === 'y') {\n            if (position === 'center') {\n                borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n            }\n            tx1 = borderValue - axisHalfWidth;\n            tx2 = tx1 - tl;\n            x1 = chartArea.left;\n            x2 = chartArea.right;\n        }\n        const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\n        const step = Math.max(1, Math.ceil(ticksLength / limit));\n        for(i = 0; i < ticksLength; i += step){\n            const context = this.getContext(i);\n            const optsAtIndex = grid.setContext(context);\n            const optsAtIndexBorder = border.setContext(context);\n            const lineWidth = optsAtIndex.lineWidth;\n            const lineColor = optsAtIndex.color;\n            const borderDash = optsAtIndexBorder.dash || [];\n            const borderDashOffset = optsAtIndexBorder.dashOffset;\n            const tickWidth = optsAtIndex.tickWidth;\n            const tickColor = optsAtIndex.tickColor;\n            const tickBorderDash = optsAtIndex.tickBorderDash || [];\n            const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\n            lineValue = getPixelForGridLine(this, i, offset);\n            if (lineValue === undefined) {\n                continue;\n            }\n            alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\n            if (isHorizontal) {\n                tx1 = tx2 = x1 = x2 = alignedLineValue;\n            } else {\n                ty1 = ty2 = y1 = y2 = alignedLineValue;\n            }\n            items.push({\n                tx1,\n                ty1,\n                tx2,\n                ty2,\n                x1,\n                y1,\n                x2,\n                y2,\n                width: lineWidth,\n                color: lineColor,\n                borderDash,\n                borderDashOffset,\n                tickWidth,\n                tickColor,\n                tickBorderDash,\n                tickBorderDashOffset\n            });\n        }\n        this._ticksLength = ticksLength;\n        this._borderValue = borderValue;\n        return items;\n    }\n _computeLabelItems(chartArea) {\n        const axis = this.axis;\n        const options = this.options;\n        const { position , ticks: optionTicks  } = options;\n        const isHorizontal = this.isHorizontal();\n        const ticks = this.ticks;\n        const { align , crossAlign , padding , mirror  } = optionTicks;\n        const tl = getTickMarkLength(options.grid);\n        const tickAndPadding = tl + padding;\n        const hTickAndPadding = mirror ? -padding : tickAndPadding;\n        const rotation = -toRadians(this.labelRotation);\n        const items = [];\n        let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\n        let textBaseline = 'middle';\n        if (position === 'top') {\n            y = this.bottom - hTickAndPadding;\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (position === 'bottom') {\n            y = this.top + hTickAndPadding;\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (position === 'left') {\n            const ret = this._getYAxisLabelAlignment(tl);\n            textAlign = ret.textAlign;\n            x = ret.x;\n        } else if (position === 'right') {\n            const ret = this._getYAxisLabelAlignment(tl);\n            textAlign = ret.textAlign;\n            x = ret.x;\n        } else if (axis === 'x') {\n            if (position === 'center') {\n                y = (chartArea.top + chartArea.bottom) / 2 + tickAndPadding;\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\n            }\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (axis === 'y') {\n            if (position === 'center') {\n                x = (chartArea.left + chartArea.right) / 2 - tickAndPadding;\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                x = this.chart.scales[positionAxisID].getPixelForValue(value);\n            }\n            textAlign = this._getYAxisLabelAlignment(tl).textAlign;\n        }\n        if (axis === 'y') {\n            if (align === 'start') {\n                textBaseline = 'top';\n            } else if (align === 'end') {\n                textBaseline = 'bottom';\n            }\n        }\n        const labelSizes = this._getLabelSizes();\n        for(i = 0, ilen = ticks.length; i < ilen; ++i){\n            tick = ticks[i];\n            label = tick.label;\n            const optsAtIndex = optionTicks.setContext(this.getContext(i));\n            pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\n            font = this._resolveTickFontOptions(i);\n            lineHeight = font.lineHeight;\n            lineCount = isArray(label) ? label.length : 1;\n            const halfCount = lineCount / 2;\n            const color = optsAtIndex.color;\n            const strokeColor = optsAtIndex.textStrokeColor;\n            const strokeWidth = optsAtIndex.textStrokeWidth;\n            let tickTextAlign = textAlign;\n            if (isHorizontal) {\n                x = pixel;\n                if (textAlign === 'inner') {\n                    if (i === ilen - 1) {\n                        tickTextAlign = !this.options.reverse ? 'right' : 'left';\n                    } else if (i === 0) {\n                        tickTextAlign = !this.options.reverse ? 'left' : 'right';\n                    } else {\n                        tickTextAlign = 'center';\n                    }\n                }\n                if (position === 'top') {\n                    if (crossAlign === 'near' || rotation !== 0) {\n                        textOffset = -lineCount * lineHeight + lineHeight / 2;\n                    } else if (crossAlign === 'center') {\n                        textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\n                    } else {\n                        textOffset = -labelSizes.highest.height + lineHeight / 2;\n                    }\n                } else {\n                    if (crossAlign === 'near' || rotation !== 0) {\n                        textOffset = lineHeight / 2;\n                    } else if (crossAlign === 'center') {\n                        textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\n                    } else {\n                        textOffset = labelSizes.highest.height - lineCount * lineHeight;\n                    }\n                }\n                if (mirror) {\n                    textOffset *= -1;\n                }\n                if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {\n                    x += lineHeight / 2 * Math.sin(rotation);\n                }\n            } else {\n                y = pixel;\n                textOffset = (1 - lineCount) * lineHeight / 2;\n            }\n            let backdrop;\n            if (optsAtIndex.showLabelBackdrop) {\n                const labelPadding = toPadding(optsAtIndex.backdropPadding);\n                const height = labelSizes.heights[i];\n                const width = labelSizes.widths[i];\n                let top = textOffset - labelPadding.top;\n                let left = 0 - labelPadding.left;\n                switch(textBaseline){\n                    case 'middle':\n                        top -= height / 2;\n                        break;\n                    case 'bottom':\n                        top -= height;\n                        break;\n                }\n                switch(textAlign){\n                    case 'center':\n                        left -= width / 2;\n                        break;\n                    case 'right':\n                        left -= width;\n                        break;\n                    case 'inner':\n                        if (i === ilen - 1) {\n                            left -= width;\n                        } else if (i > 0) {\n                            left -= width / 2;\n                        }\n                        break;\n                }\n                backdrop = {\n                    left,\n                    top,\n                    width: width + labelPadding.width,\n                    height: height + labelPadding.height,\n                    color: optsAtIndex.backdropColor\n                };\n            }\n            items.push({\n                label,\n                font,\n                textOffset,\n                options: {\n                    rotation,\n                    color,\n                    strokeColor,\n                    strokeWidth,\n                    textAlign: tickTextAlign,\n                    textBaseline,\n                    translation: [\n                        x,\n                        y\n                    ],\n                    backdrop\n                }\n            });\n        }\n        return items;\n    }\n    _getXAxisLabelAlignment() {\n        const { position , ticks  } = this.options;\n        const rotation = -toRadians(this.labelRotation);\n        if (rotation) {\n            return position === 'top' ? 'left' : 'right';\n        }\n        let align = 'center';\n        if (ticks.align === 'start') {\n            align = 'left';\n        } else if (ticks.align === 'end') {\n            align = 'right';\n        } else if (ticks.align === 'inner') {\n            align = 'inner';\n        }\n        return align;\n    }\n    _getYAxisLabelAlignment(tl) {\n        const { position , ticks: { crossAlign , mirror , padding  }  } = this.options;\n        const labelSizes = this._getLabelSizes();\n        const tickAndPadding = tl + padding;\n        const widest = labelSizes.widest.width;\n        let textAlign;\n        let x;\n        if (position === 'left') {\n            if (mirror) {\n                x = this.right + padding;\n                if (crossAlign === 'near') {\n                    textAlign = 'left';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x += widest / 2;\n                } else {\n                    textAlign = 'right';\n                    x += widest;\n                }\n            } else {\n                x = this.right - tickAndPadding;\n                if (crossAlign === 'near') {\n                    textAlign = 'right';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x -= widest / 2;\n                } else {\n                    textAlign = 'left';\n                    x = this.left;\n                }\n            }\n        } else if (position === 'right') {\n            if (mirror) {\n                x = this.left + padding;\n                if (crossAlign === 'near') {\n                    textAlign = 'right';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x -= widest / 2;\n                } else {\n                    textAlign = 'left';\n                    x -= widest;\n                }\n            } else {\n                x = this.left + tickAndPadding;\n                if (crossAlign === 'near') {\n                    textAlign = 'left';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x += widest / 2;\n                } else {\n                    textAlign = 'right';\n                    x = this.right;\n                }\n            }\n        } else {\n            textAlign = 'right';\n        }\n        return {\n            textAlign,\n            x\n        };\n    }\n _computeLabelArea() {\n        if (this.options.ticks.mirror) {\n            return;\n        }\n        const chart = this.chart;\n        const position = this.options.position;\n        if (position === 'left' || position === 'right') {\n            return {\n                top: 0,\n                left: this.left,\n                bottom: chart.height,\n                right: this.right\n            };\n        }\n        if (position === 'top' || position === 'bottom') {\n            return {\n                top: this.top,\n                left: 0,\n                bottom: this.bottom,\n                right: chart.width\n            };\n        }\n    }\n drawBackground() {\n        const { ctx , options: { backgroundColor  } , left , top , width , height  } = this;\n        if (backgroundColor) {\n            ctx.save();\n            ctx.fillStyle = backgroundColor;\n            ctx.fillRect(left, top, width, height);\n            ctx.restore();\n        }\n    }\n    getLineWidthForValue(value) {\n        const grid = this.options.grid;\n        if (!this._isVisible() || !grid.display) {\n            return 0;\n        }\n        const ticks = this.ticks;\n        const index = ticks.findIndex((t)=>t.value === value);\n        if (index >= 0) {\n            const opts = grid.setContext(this.getContext(index));\n            return opts.lineWidth;\n        }\n        return 0;\n    }\n drawGrid(chartArea) {\n        const grid = this.options.grid;\n        const ctx = this.ctx;\n        const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\n        let i, ilen;\n        const drawLine = (p1, p2, style)=>{\n            if (!style.width || !style.color) {\n                return;\n            }\n            ctx.save();\n            ctx.lineWidth = style.width;\n            ctx.strokeStyle = style.color;\n            ctx.setLineDash(style.borderDash || []);\n            ctx.lineDashOffset = style.borderDashOffset;\n            ctx.beginPath();\n            ctx.moveTo(p1.x, p1.y);\n            ctx.lineTo(p2.x, p2.y);\n            ctx.stroke();\n            ctx.restore();\n        };\n        if (grid.display) {\n            for(i = 0, ilen = items.length; i < ilen; ++i){\n                const item = items[i];\n                if (grid.drawOnChartArea) {\n                    drawLine({\n                        x: item.x1,\n                        y: item.y1\n                    }, {\n                        x: item.x2,\n                        y: item.y2\n                    }, item);\n                }\n                if (grid.drawTicks) {\n                    drawLine({\n                        x: item.tx1,\n                        y: item.ty1\n                    }, {\n                        x: item.tx2,\n                        y: item.ty2\n                    }, {\n                        color: item.tickColor,\n                        width: item.tickWidth,\n                        borderDash: item.tickBorderDash,\n                        borderDashOffset: item.tickBorderDashOffset\n                    });\n                }\n            }\n        }\n    }\n drawBorder() {\n        const { chart , ctx , options: { border , grid  }  } = this;\n        const borderOpts = border.setContext(this.getContext());\n        const axisWidth = border.display ? borderOpts.width : 0;\n        if (!axisWidth) {\n            return;\n        }\n        const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\n        const borderValue = this._borderValue;\n        let x1, x2, y1, y2;\n        if (this.isHorizontal()) {\n            x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\n            x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\n            y1 = y2 = borderValue;\n        } else {\n            y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\n            y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\n            x1 = x2 = borderValue;\n        }\n        ctx.save();\n        ctx.lineWidth = borderOpts.width;\n        ctx.strokeStyle = borderOpts.color;\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.stroke();\n        ctx.restore();\n    }\n drawLabels(chartArea) {\n        const optionTicks = this.options.ticks;\n        if (!optionTicks.display) {\n            return;\n        }\n        const ctx = this.ctx;\n        const area = this._computeLabelArea();\n        if (area) {\n            clipArea(ctx, area);\n        }\n        const items = this.getLabelItems(chartArea);\n        for (const item of items){\n            const renderTextOptions = item.options;\n            const tickFont = item.font;\n            const label = item.label;\n            const y = item.textOffset;\n            renderText(ctx, label, 0, y, tickFont, renderTextOptions);\n        }\n        if (area) {\n            unclipArea(ctx);\n        }\n    }\n drawTitle() {\n        const { ctx , options: { position , title , reverse  }  } = this;\n        if (!title.display) {\n            return;\n        }\n        const font = toFont(title.font);\n        const padding = toPadding(title.padding);\n        const align = title.align;\n        let offset = font.lineHeight / 2;\n        if (position === 'bottom' || position === 'center' || isObject(position)) {\n            offset += padding.bottom;\n            if (isArray(title.text)) {\n                offset += font.lineHeight * (title.text.length - 1);\n            }\n        } else {\n            offset += padding.top;\n        }\n        const { titleX , titleY , maxWidth , rotation  } = titleArgs(this, offset, position, align);\n        renderText(ctx, title.text, 0, 0, font, {\n            color: title.color,\n            maxWidth,\n            rotation,\n            textAlign: titleAlign(align, position, reverse),\n            textBaseline: 'middle',\n            translation: [\n                titleX,\n                titleY\n            ]\n        });\n    }\n    draw(chartArea) {\n        if (!this._isVisible()) {\n            return;\n        }\n        this.drawBackground();\n        this.drawGrid(chartArea);\n        this.drawBorder();\n        this.drawTitle();\n        this.drawLabels(chartArea);\n    }\n _layers() {\n        const opts = this.options;\n        const tz = opts.ticks && opts.ticks.z || 0;\n        const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\n        const bz = valueOrDefault(opts.border && opts.border.z, 0);\n        if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\n            return [\n                {\n                    z: tz,\n                    draw: (chartArea)=>{\n                        this.draw(chartArea);\n                    }\n                }\n            ];\n        }\n        return [\n            {\n                z: gz,\n                draw: (chartArea)=>{\n                    this.drawBackground();\n                    this.drawGrid(chartArea);\n                    this.drawTitle();\n                }\n            },\n            {\n                z: bz,\n                draw: ()=>{\n                    this.drawBorder();\n                }\n            },\n            {\n                z: tz,\n                draw: (chartArea)=>{\n                    this.drawLabels(chartArea);\n                }\n            }\n        ];\n    }\n getMatchingVisibleMetas(type) {\n        const metas = this.chart.getSortedVisibleDatasetMetas();\n        const axisID = this.axis + 'AxisID';\n        const result = [];\n        let i, ilen;\n        for(i = 0, ilen = metas.length; i < ilen; ++i){\n            const meta = metas[i];\n            if (meta[axisID] === this.id && (!type || meta.type === type)) {\n                result.push(meta);\n            }\n        }\n        return result;\n    }\n _resolveTickFontOptions(index) {\n        const opts = this.options.ticks.setContext(this.getContext(index));\n        return toFont(opts.font);\n    }\n _maxDigits() {\n        const fontSize = this._resolveTickFontOptions(0).lineHeight;\n        return (this.isHorizontal() ? this.width : this.height) / fontSize;\n    }\n}\n\nclass TypedRegistry {\n    constructor(type, scope, override){\n        this.type = type;\n        this.scope = scope;\n        this.override = override;\n        this.items = Object.create(null);\n    }\n    isForType(type) {\n        return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\n    }\n register(item) {\n        const proto = Object.getPrototypeOf(item);\n        let parentScope;\n        if (isIChartComponent(proto)) {\n            parentScope = this.register(proto);\n        }\n        const items = this.items;\n        const id = item.id;\n        const scope = this.scope + '.' + id;\n        if (!id) {\n            throw new Error('class does not have id: ' + item);\n        }\n        if (id in items) {\n            return scope;\n        }\n        items[id] = item;\n        registerDefaults(item, scope, parentScope);\n        if (this.override) {\n            defaults.override(item.id, item.overrides);\n        }\n        return scope;\n    }\n get(id) {\n        return this.items[id];\n    }\n unregister(item) {\n        const items = this.items;\n        const id = item.id;\n        const scope = this.scope;\n        if (id in items) {\n            delete items[id];\n        }\n        if (scope && id in defaults[scope]) {\n            delete defaults[scope][id];\n            if (this.override) {\n                delete overrides[id];\n            }\n        }\n    }\n}\nfunction registerDefaults(item, scope, parentScope) {\n    const itemDefaults = merge(Object.create(null), [\n        parentScope ? defaults.get(parentScope) : {},\n        defaults.get(scope),\n        item.defaults\n    ]);\n    defaults.set(scope, itemDefaults);\n    if (item.defaultRoutes) {\n        routeDefaults(scope, item.defaultRoutes);\n    }\n    if (item.descriptors) {\n        defaults.describe(scope, item.descriptors);\n    }\n}\nfunction routeDefaults(scope, routes) {\n    Object.keys(routes).forEach((property)=>{\n        const propertyParts = property.split('.');\n        const sourceName = propertyParts.pop();\n        const sourceScope = [\n            scope\n        ].concat(propertyParts).join('.');\n        const parts = routes[property].split('.');\n        const targetName = parts.pop();\n        const targetScope = parts.join('.');\n        defaults.route(sourceScope, sourceName, targetScope, targetName);\n    });\n}\nfunction isIChartComponent(proto) {\n    return 'id' in proto && 'defaults' in proto;\n}\n\nclass Registry {\n    constructor(){\n        this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\n        this.elements = new TypedRegistry(Element, 'elements');\n        this.plugins = new TypedRegistry(Object, 'plugins');\n        this.scales = new TypedRegistry(Scale, 'scales');\n        this._typedRegistries = [\n            this.controllers,\n            this.scales,\n            this.elements\n        ];\n    }\n add(...args) {\n        this._each('register', args);\n    }\n    remove(...args) {\n        this._each('unregister', args);\n    }\n addControllers(...args) {\n        this._each('register', args, this.controllers);\n    }\n addElements(...args) {\n        this._each('register', args, this.elements);\n    }\n addPlugins(...args) {\n        this._each('register', args, this.plugins);\n    }\n addScales(...args) {\n        this._each('register', args, this.scales);\n    }\n getController(id) {\n        return this._get(id, this.controllers, 'controller');\n    }\n getElement(id) {\n        return this._get(id, this.elements, 'element');\n    }\n getPlugin(id) {\n        return this._get(id, this.plugins, 'plugin');\n    }\n getScale(id) {\n        return this._get(id, this.scales, 'scale');\n    }\n removeControllers(...args) {\n        this._each('unregister', args, this.controllers);\n    }\n removeElements(...args) {\n        this._each('unregister', args, this.elements);\n    }\n removePlugins(...args) {\n        this._each('unregister', args, this.plugins);\n    }\n removeScales(...args) {\n        this._each('unregister', args, this.scales);\n    }\n _each(method, args, typedRegistry) {\n        [\n            ...args\n        ].forEach((arg)=>{\n            const reg = typedRegistry || this._getRegistryForType(arg);\n            if (typedRegistry || reg.isForType(arg) || reg === this.plugins && arg.id) {\n                this._exec(method, reg, arg);\n            } else {\n                each(arg, (item)=>{\n                    const itemReg = typedRegistry || this._getRegistryForType(item);\n                    this._exec(method, itemReg, item);\n                });\n            }\n        });\n    }\n _exec(method, registry, component) {\n        const camelMethod = _capitalize(method);\n        callback(component['before' + camelMethod], [], component);\n        registry[method](component);\n        callback(component['after' + camelMethod], [], component);\n    }\n _getRegistryForType(type) {\n        for(let i = 0; i < this._typedRegistries.length; i++){\n            const reg = this._typedRegistries[i];\n            if (reg.isForType(type)) {\n                return reg;\n            }\n        }\n        return this.plugins;\n    }\n _get(id, typedRegistry, type) {\n        const item = typedRegistry.get(id);\n        if (item === undefined) {\n            throw new Error('\"' + id + '\" is not a registered ' + type + '.');\n        }\n        return item;\n    }\n}\nvar registry = /* #__PURE__ */ new Registry();\n\nclass PluginService {\n    constructor(){\n        this._init = undefined;\n    }\n notify(chart, hook, args, filter) {\n        if (hook === 'beforeInit') {\n            this._init = this._createDescriptors(chart, true);\n            this._notify(this._init, chart, 'install');\n        }\n        if (this._init === undefined) {\n            return;\n        }\n        const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\n        const result = this._notify(descriptors, chart, hook, args);\n        if (hook === 'afterDestroy') {\n            this._notify(descriptors, chart, 'stop');\n            this._notify(this._init, chart, 'uninstall');\n            this._init = undefined;\n        }\n        return result;\n    }\n _notify(descriptors, chart, hook, args) {\n        args = args || {};\n        for (const descriptor of descriptors){\n            const plugin = descriptor.plugin;\n            const method = plugin[hook];\n            const params = [\n                chart,\n                args,\n                descriptor.options\n            ];\n            if (callback(method, params, plugin) === false && args.cancelable) {\n                return false;\n            }\n        }\n        return true;\n    }\n    invalidate() {\n        if (!isNullOrUndef(this._cache)) {\n            this._oldCache = this._cache;\n            this._cache = undefined;\n        }\n    }\n _descriptors(chart) {\n        if (this._cache) {\n            return this._cache;\n        }\n        const descriptors = this._cache = this._createDescriptors(chart);\n        this._notifyStateChanges(chart);\n        return descriptors;\n    }\n    _createDescriptors(chart, all) {\n        const config = chart && chart.config;\n        const options = valueOrDefault(config.options && config.options.plugins, {});\n        const plugins = allPlugins(config);\n        return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\n    }\n _notifyStateChanges(chart) {\n        const previousDescriptors = this._oldCache || [];\n        const descriptors = this._cache;\n        const diff = (a, b)=>a.filter((x)=>!b.some((y)=>x.plugin.id === y.plugin.id));\n        this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\n        this._notify(diff(descriptors, previousDescriptors), chart, 'start');\n    }\n}\n function allPlugins(config) {\n    const localIds = {};\n    const plugins = [];\n    const keys = Object.keys(registry.plugins.items);\n    for(let i = 0; i < keys.length; i++){\n        plugins.push(registry.getPlugin(keys[i]));\n    }\n    const local = config.plugins || [];\n    for(let i = 0; i < local.length; i++){\n        const plugin = local[i];\n        if (plugins.indexOf(plugin) === -1) {\n            plugins.push(plugin);\n            localIds[plugin.id] = true;\n        }\n    }\n    return {\n        plugins,\n        localIds\n    };\n}\nfunction getOpts(options, all) {\n    if (!all && options === false) {\n        return null;\n    }\n    if (options === true) {\n        return {};\n    }\n    return options;\n}\nfunction createDescriptors(chart, { plugins , localIds  }, options, all) {\n    const result = [];\n    const context = chart.getContext();\n    for (const plugin of plugins){\n        const id = plugin.id;\n        const opts = getOpts(options[id], all);\n        if (opts === null) {\n            continue;\n        }\n        result.push({\n            plugin,\n            options: pluginOpts(chart.config, {\n                plugin,\n                local: localIds[id]\n            }, opts, context)\n        });\n    }\n    return result;\n}\nfunction pluginOpts(config, { plugin , local  }, opts, context) {\n    const keys = config.pluginScopeKeys(plugin);\n    const scopes = config.getOptionScopes(opts, keys);\n    if (local && plugin.defaults) {\n        scopes.push(plugin.defaults);\n    }\n    return config.createResolver(scopes, context, [\n        ''\n    ], {\n        scriptable: false,\n        indexable: false,\n        allKeys: true\n    });\n}\n\nfunction getIndexAxis(type, options) {\n    const datasetDefaults = defaults.datasets[type] || {};\n    const datasetOptions = (options.datasets || {})[type] || {};\n    return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\n}\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\n    let axis = id;\n    if (id === '_index_') {\n        axis = indexAxis;\n    } else if (id === '_value_') {\n        axis = indexAxis === 'x' ? 'y' : 'x';\n    }\n    return axis;\n}\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\n    return axis === indexAxis ? '_index_' : '_value_';\n}\nfunction idMatchesAxis(id) {\n    if (id === 'x' || id === 'y' || id === 'r') {\n        return id;\n    }\n}\nfunction axisFromPosition(position) {\n    if (position === 'top' || position === 'bottom') {\n        return 'x';\n    }\n    if (position === 'left' || position === 'right') {\n        return 'y';\n    }\n}\nfunction determineAxis(id, ...scaleOptions) {\n    if (idMatchesAxis(id)) {\n        return id;\n    }\n    for (const opts of scaleOptions){\n        const axis = opts.axis || axisFromPosition(opts.position) || id.length > 1 && idMatchesAxis(id[0].toLowerCase());\n        if (axis) {\n            return axis;\n        }\n    }\n    throw new Error(`Cannot determine type of '${id}' axis. Please provide 'axis' or 'position' option.`);\n}\nfunction getAxisFromDataset(id, axis, dataset) {\n    if (dataset[axis + 'AxisID'] === id) {\n        return {\n            axis\n        };\n    }\n}\nfunction retrieveAxisFromDatasets(id, config) {\n    if (config.data && config.data.datasets) {\n        const boundDs = config.data.datasets.filter((d)=>d.xAxisID === id || d.yAxisID === id);\n        if (boundDs.length) {\n            return getAxisFromDataset(id, 'x', boundDs[0]) || getAxisFromDataset(id, 'y', boundDs[0]);\n        }\n    }\n    return {};\n}\nfunction mergeScaleConfig(config, options) {\n    const chartDefaults = overrides[config.type] || {\n        scales: {}\n    };\n    const configScales = options.scales || {};\n    const chartIndexAxis = getIndexAxis(config.type, options);\n    const scales = Object.create(null);\n    Object.keys(configScales).forEach((id)=>{\n        const scaleConf = configScales[id];\n        if (!isObject(scaleConf)) {\n            return console.error(`Invalid scale configuration for scale: ${id}`);\n        }\n        if (scaleConf._proxy) {\n            return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\n        }\n        const axis = determineAxis(id, scaleConf, retrieveAxisFromDatasets(id, config), defaults.scales[scaleConf.type]);\n        const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\n        const defaultScaleOptions = chartDefaults.scales || {};\n        scales[id] = mergeIf(Object.create(null), [\n            {\n                axis\n            },\n            scaleConf,\n            defaultScaleOptions[axis],\n            defaultScaleOptions[defaultId]\n        ]);\n    });\n    config.data.datasets.forEach((dataset)=>{\n        const type = dataset.type || config.type;\n        const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\n        const datasetDefaults = overrides[type] || {};\n        const defaultScaleOptions = datasetDefaults.scales || {};\n        Object.keys(defaultScaleOptions).forEach((defaultID)=>{\n            const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\n            const id = dataset[axis + 'AxisID'] || axis;\n            scales[id] = scales[id] || Object.create(null);\n            mergeIf(scales[id], [\n                {\n                    axis\n                },\n                configScales[id],\n                defaultScaleOptions[defaultID]\n            ]);\n        });\n    });\n    Object.keys(scales).forEach((key)=>{\n        const scale = scales[key];\n        mergeIf(scale, [\n            defaults.scales[scale.type],\n            defaults.scale\n        ]);\n    });\n    return scales;\n}\nfunction initOptions(config) {\n    const options = config.options || (config.options = {});\n    options.plugins = valueOrDefault(options.plugins, {});\n    options.scales = mergeScaleConfig(config, options);\n}\nfunction initData(data) {\n    data = data || {};\n    data.datasets = data.datasets || [];\n    data.labels = data.labels || [];\n    return data;\n}\nfunction initConfig(config) {\n    config = config || {};\n    config.data = initData(config.data);\n    initOptions(config);\n    return config;\n}\nconst keyCache = new Map();\nconst keysCached = new Set();\nfunction cachedKeys(cacheKey, generate) {\n    let keys = keyCache.get(cacheKey);\n    if (!keys) {\n        keys = generate();\n        keyCache.set(cacheKey, keys);\n        keysCached.add(keys);\n    }\n    return keys;\n}\nconst addIfFound = (set, obj, key)=>{\n    const opts = resolveObjectKey(obj, key);\n    if (opts !== undefined) {\n        set.add(opts);\n    }\n};\nclass Config {\n    constructor(config){\n        this._config = initConfig(config);\n        this._scopeCache = new Map();\n        this._resolverCache = new Map();\n    }\n    get platform() {\n        return this._config.platform;\n    }\n    get type() {\n        return this._config.type;\n    }\n    set type(type) {\n        this._config.type = type;\n    }\n    get data() {\n        return this._config.data;\n    }\n    set data(data) {\n        this._config.data = initData(data);\n    }\n    get options() {\n        return this._config.options;\n    }\n    set options(options) {\n        this._config.options = options;\n    }\n    get plugins() {\n        return this._config.plugins;\n    }\n    update() {\n        const config = this._config;\n        this.clearCache();\n        initOptions(config);\n    }\n    clearCache() {\n        this._scopeCache.clear();\n        this._resolverCache.clear();\n    }\n datasetScopeKeys(datasetType) {\n        return cachedKeys(datasetType, ()=>[\n                [\n                    `datasets.${datasetType}`,\n                    ''\n                ]\n            ]);\n    }\n datasetAnimationScopeKeys(datasetType, transition) {\n        return cachedKeys(`${datasetType}.transition.${transition}`, ()=>[\n                [\n                    `datasets.${datasetType}.transitions.${transition}`,\n                    `transitions.${transition}`\n                ],\n                [\n                    `datasets.${datasetType}`,\n                    ''\n                ]\n            ]);\n    }\n datasetElementScopeKeys(datasetType, elementType) {\n        return cachedKeys(`${datasetType}-${elementType}`, ()=>[\n                [\n                    `datasets.${datasetType}.elements.${elementType}`,\n                    `datasets.${datasetType}`,\n                    `elements.${elementType}`,\n                    ''\n                ]\n            ]);\n    }\n pluginScopeKeys(plugin) {\n        const id = plugin.id;\n        const type = this.type;\n        return cachedKeys(`${type}-plugin-${id}`, ()=>[\n                [\n                    `plugins.${id}`,\n                    ...plugin.additionalOptionScopes || []\n                ]\n            ]);\n    }\n _cachedScopes(mainScope, resetCache) {\n        const _scopeCache = this._scopeCache;\n        let cache = _scopeCache.get(mainScope);\n        if (!cache || resetCache) {\n            cache = new Map();\n            _scopeCache.set(mainScope, cache);\n        }\n        return cache;\n    }\n getOptionScopes(mainScope, keyLists, resetCache) {\n        const { options , type  } = this;\n        const cache = this._cachedScopes(mainScope, resetCache);\n        const cached = cache.get(keyLists);\n        if (cached) {\n            return cached;\n        }\n        const scopes = new Set();\n        keyLists.forEach((keys)=>{\n            if (mainScope) {\n                scopes.add(mainScope);\n                keys.forEach((key)=>addIfFound(scopes, mainScope, key));\n            }\n            keys.forEach((key)=>addIfFound(scopes, options, key));\n            keys.forEach((key)=>addIfFound(scopes, overrides[type] || {}, key));\n            keys.forEach((key)=>addIfFound(scopes, defaults, key));\n            keys.forEach((key)=>addIfFound(scopes, descriptors, key));\n        });\n        const array = Array.from(scopes);\n        if (array.length === 0) {\n            array.push(Object.create(null));\n        }\n        if (keysCached.has(keyLists)) {\n            cache.set(keyLists, array);\n        }\n        return array;\n    }\n chartOptionScopes() {\n        const { options , type  } = this;\n        return [\n            options,\n            overrides[type] || {},\n            defaults.datasets[type] || {},\n            {\n                type\n            },\n            defaults,\n            descriptors\n        ];\n    }\n resolveNamedOptions(scopes, names, context, prefixes = [\n        ''\n    ]) {\n        const result = {\n            $shared: true\n        };\n        const { resolver , subPrefixes  } = getResolver(this._resolverCache, scopes, prefixes);\n        let options = resolver;\n        if (needContext(resolver, names)) {\n            result.$shared = false;\n            context = isFunction(context) ? context() : context;\n            const subResolver = this.createResolver(scopes, context, subPrefixes);\n            options = _attachContext(resolver, context, subResolver);\n        }\n        for (const prop of names){\n            result[prop] = options[prop];\n        }\n        return result;\n    }\n createResolver(scopes, context, prefixes = [\n        ''\n    ], descriptorDefaults) {\n        const { resolver  } = getResolver(this._resolverCache, scopes, prefixes);\n        return isObject(context) ? _attachContext(resolver, context, undefined, descriptorDefaults) : resolver;\n    }\n}\nfunction getResolver(resolverCache, scopes, prefixes) {\n    let cache = resolverCache.get(scopes);\n    if (!cache) {\n        cache = new Map();\n        resolverCache.set(scopes, cache);\n    }\n    const cacheKey = prefixes.join();\n    let cached = cache.get(cacheKey);\n    if (!cached) {\n        const resolver = _createResolver(scopes, prefixes);\n        cached = {\n            resolver,\n            subPrefixes: prefixes.filter((p)=>!p.toLowerCase().includes('hover'))\n        };\n        cache.set(cacheKey, cached);\n    }\n    return cached;\n}\nconst hasFunction = (value)=>isObject(value) && Object.getOwnPropertyNames(value).some((key)=>isFunction(value[key]));\nfunction needContext(proxy, names) {\n    const { isScriptable , isIndexable  } = _descriptors(proxy);\n    for (const prop of names){\n        const scriptable = isScriptable(prop);\n        const indexable = isIndexable(prop);\n        const value = (indexable || scriptable) && proxy[prop];\n        if (scriptable && (isFunction(value) || hasFunction(value)) || indexable && isArray(value)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar version = \"4.5.1\";\n\nconst KNOWN_POSITIONS = [\n    'top',\n    'bottom',\n    'left',\n    'right',\n    'chartArea'\n];\nfunction positionIsHorizontal(position, axis) {\n    return position === 'top' || position === 'bottom' || KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x';\n}\nfunction compare2Level(l1, l2) {\n    return function(a, b) {\n        return a[l1] === b[l1] ? a[l2] - b[l2] : a[l1] - b[l1];\n    };\n}\nfunction onAnimationsComplete(context) {\n    const chart = context.chart;\n    const animationOptions = chart.options.animation;\n    chart.notifyPlugins('afterRender');\n    callback(animationOptions && animationOptions.onComplete, [\n        context\n    ], chart);\n}\nfunction onAnimationProgress(context) {\n    const chart = context.chart;\n    const animationOptions = chart.options.animation;\n    callback(animationOptions && animationOptions.onProgress, [\n        context\n    ], chart);\n}\n function getCanvas(item) {\n    if (_isDomSupported() && typeof item === 'string') {\n        item = document.getElementById(item);\n    } else if (item && item.length) {\n        item = item[0];\n    }\n    if (item && item.canvas) {\n        item = item.canvas;\n    }\n    return item;\n}\nconst instances = {};\nconst getChart = (key)=>{\n    const canvas = getCanvas(key);\n    return Object.values(instances).filter((c)=>c.canvas === canvas).pop();\n};\nfunction moveNumericKeys(obj, start, move) {\n    const keys = Object.keys(obj);\n    for (const key of keys){\n        const intKey = +key;\n        if (intKey >= start) {\n            const value = obj[key];\n            delete obj[key];\n            if (move > 0 || intKey > start) {\n                obj[intKey + move] = value;\n            }\n        }\n    }\n}\n function determineLastEvent(e, lastEvent, inChartArea, isClick) {\n    if (!inChartArea || e.type === 'mouseout') {\n        return null;\n    }\n    if (isClick) {\n        return lastEvent;\n    }\n    return e;\n}\nclass Chart {\n    static defaults = defaults;\n    static instances = instances;\n    static overrides = overrides;\n    static registry = registry;\n    static version = version;\n    static getChart = getChart;\n    static register(...items) {\n        registry.add(...items);\n        invalidatePlugins();\n    }\n    static unregister(...items) {\n        registry.remove(...items);\n        invalidatePlugins();\n    }\n    constructor(item, userConfig){\n        const config = this.config = new Config(userConfig);\n        const initialCanvas = getCanvas(item);\n        const existingChart = getChart(initialCanvas);\n        if (existingChart) {\n            throw new Error('Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' + ' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.');\n        }\n        const options = config.createResolver(config.chartOptionScopes(), this.getContext());\n        this.platform = new (config.platform || _detectPlatform(initialCanvas))();\n        this.platform.updateConfig(config);\n        const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\n        const canvas = context && context.canvas;\n        const height = canvas && canvas.height;\n        const width = canvas && canvas.width;\n        this.id = uid();\n        this.ctx = context;\n        this.canvas = canvas;\n        this.width = width;\n        this.height = height;\n        this._options = options;\n        this._aspectRatio = this.aspectRatio;\n        this._layers = [];\n        this._metasets = [];\n        this._stacks = undefined;\n        this.boxes = [];\n        this.currentDevicePixelRatio = undefined;\n        this.chartArea = undefined;\n        this._active = [];\n        this._lastEvent = undefined;\n        this._listeners = {};\n         this._responsiveListeners = undefined;\n        this._sortedMetasets = [];\n        this.scales = {};\n        this._plugins = new PluginService();\n        this.$proxies = {};\n        this._hiddenIndices = {};\n        this.attached = false;\n        this._animationsDisabled = undefined;\n        this.$context = undefined;\n        this._doResize = debounce((mode)=>this.update(mode), options.resizeDelay || 0);\n        this._dataChanges = [];\n        instances[this.id] = this;\n        if (!context || !canvas) {\n            console.error(\"Failed to create chart: can't acquire context from the given item\");\n            return;\n        }\n        animator.listen(this, 'complete', onAnimationsComplete);\n        animator.listen(this, 'progress', onAnimationProgress);\n        this._initialize();\n        if (this.attached) {\n            this.update();\n        }\n    }\n    get aspectRatio() {\n        const { options: { aspectRatio , maintainAspectRatio  } , width , height , _aspectRatio  } = this;\n        if (!isNullOrUndef(aspectRatio)) {\n            return aspectRatio;\n        }\n        if (maintainAspectRatio && _aspectRatio) {\n            return _aspectRatio;\n        }\n        return height ? width / height : null;\n    }\n    get data() {\n        return this.config.data;\n    }\n    set data(data) {\n        this.config.data = data;\n    }\n    get options() {\n        return this._options;\n    }\n    set options(options) {\n        this.config.options = options;\n    }\n    get registry() {\n        return registry;\n    }\n _initialize() {\n        this.notifyPlugins('beforeInit');\n        if (this.options.responsive) {\n            this.resize();\n        } else {\n            retinaScale(this, this.options.devicePixelRatio);\n        }\n        this.bindEvents();\n        this.notifyPlugins('afterInit');\n        return this;\n    }\n    clear() {\n        clearCanvas(this.canvas, this.ctx);\n        return this;\n    }\n    stop() {\n        animator.stop(this);\n        return this;\n    }\n resize(width, height) {\n        if (!animator.running(this)) {\n            this._resize(width, height);\n        } else {\n            this._resizeBeforeDraw = {\n                width,\n                height\n            };\n        }\n    }\n    _resize(width, height) {\n        const options = this.options;\n        const canvas = this.canvas;\n        const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\n        const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\n        const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\n        const mode = this.width ? 'resize' : 'attach';\n        this.width = newSize.width;\n        this.height = newSize.height;\n        this._aspectRatio = this.aspectRatio;\n        if (!retinaScale(this, newRatio, true)) {\n            return;\n        }\n        this.notifyPlugins('resize', {\n            size: newSize\n        });\n        callback(options.onResize, [\n            this,\n            newSize\n        ], this);\n        if (this.attached) {\n            if (this._doResize(mode)) {\n                this.render();\n            }\n        }\n    }\n    ensureScalesHaveIDs() {\n        const options = this.options;\n        const scalesOptions = options.scales || {};\n        each(scalesOptions, (axisOptions, axisID)=>{\n            axisOptions.id = axisID;\n        });\n    }\n buildOrUpdateScales() {\n        const options = this.options;\n        const scaleOpts = options.scales;\n        const scales = this.scales;\n        const updated = Object.keys(scales).reduce((obj, id)=>{\n            obj[id] = false;\n            return obj;\n        }, {});\n        let items = [];\n        if (scaleOpts) {\n            items = items.concat(Object.keys(scaleOpts).map((id)=>{\n                const scaleOptions = scaleOpts[id];\n                const axis = determineAxis(id, scaleOptions);\n                const isRadial = axis === 'r';\n                const isHorizontal = axis === 'x';\n                return {\n                    options: scaleOptions,\n                    dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\n                    dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\n                };\n            }));\n        }\n        each(items, (item)=>{\n            const scaleOptions = item.options;\n            const id = scaleOptions.id;\n            const axis = determineAxis(id, scaleOptions);\n            const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n            if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\n                scaleOptions.position = item.dposition;\n            }\n            updated[id] = true;\n            let scale = null;\n            if (id in scales && scales[id].type === scaleType) {\n                scale = scales[id];\n            } else {\n                const scaleClass = registry.getScale(scaleType);\n                scale = new scaleClass({\n                    id,\n                    type: scaleType,\n                    ctx: this.ctx,\n                    chart: this\n                });\n                scales[scale.id] = scale;\n            }\n            scale.init(scaleOptions, options);\n        });\n        each(updated, (hasUpdated, id)=>{\n            if (!hasUpdated) {\n                delete scales[id];\n            }\n        });\n        each(scales, (scale)=>{\n            layouts.configure(this, scale, scale.options);\n            layouts.addBox(this, scale);\n        });\n    }\n _updateMetasets() {\n        const metasets = this._metasets;\n        const numData = this.data.datasets.length;\n        const numMeta = metasets.length;\n        metasets.sort((a, b)=>a.index - b.index);\n        if (numMeta > numData) {\n            for(let i = numData; i < numMeta; ++i){\n                this._destroyDatasetMeta(i);\n            }\n            metasets.splice(numData, numMeta - numData);\n        }\n        this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\n    }\n _removeUnreferencedMetasets() {\n        const { _metasets: metasets , data: { datasets  }  } = this;\n        if (metasets.length > datasets.length) {\n            delete this._stacks;\n        }\n        metasets.forEach((meta, index)=>{\n            if (datasets.filter((x)=>x === meta._dataset).length === 0) {\n                this._destroyDatasetMeta(index);\n            }\n        });\n    }\n    buildOrUpdateControllers() {\n        const newControllers = [];\n        const datasets = this.data.datasets;\n        let i, ilen;\n        this._removeUnreferencedMetasets();\n        for(i = 0, ilen = datasets.length; i < ilen; i++){\n            const dataset = datasets[i];\n            let meta = this.getDatasetMeta(i);\n            const type = dataset.type || this.config.type;\n            if (meta.type && meta.type !== type) {\n                this._destroyDatasetMeta(i);\n                meta = this.getDatasetMeta(i);\n            }\n            meta.type = type;\n            meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\n            meta.order = dataset.order || 0;\n            meta.index = i;\n            meta.label = '' + dataset.label;\n            meta.visible = this.isDatasetVisible(i);\n            if (meta.controller) {\n                meta.controller.updateIndex(i);\n                meta.controller.linkScales();\n            } else {\n                const ControllerClass = registry.getController(type);\n                const { datasetElementType , dataElementType  } = defaults.datasets[type];\n                Object.assign(ControllerClass, {\n                    dataElementType: registry.getElement(dataElementType),\n                    datasetElementType: datasetElementType && registry.getElement(datasetElementType)\n                });\n                meta.controller = new ControllerClass(this, i);\n                newControllers.push(meta.controller);\n            }\n        }\n        this._updateMetasets();\n        return newControllers;\n    }\n _resetElements() {\n        each(this.data.datasets, (dataset, datasetIndex)=>{\n            this.getDatasetMeta(datasetIndex).controller.reset();\n        }, this);\n    }\n reset() {\n        this._resetElements();\n        this.notifyPlugins('reset');\n    }\n    update(mode) {\n        const config = this.config;\n        config.update();\n        const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\n        const animsDisabled = this._animationsDisabled = !options.animation;\n        this._updateScales();\n        this._checkEventBindings();\n        this._updateHiddenIndices();\n        this._plugins.invalidate();\n        if (this.notifyPlugins('beforeUpdate', {\n            mode,\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const newControllers = this.buildOrUpdateControllers();\n        this.notifyPlugins('beforeElementsUpdate');\n        let minPadding = 0;\n        for(let i = 0, ilen = this.data.datasets.length; i < ilen; i++){\n            const { controller  } = this.getDatasetMeta(i);\n            const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\n            controller.buildOrUpdateElements(reset);\n            minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\n        }\n        minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\n        this._updateLayout(minPadding);\n        if (!animsDisabled) {\n            each(newControllers, (controller)=>{\n                controller.reset();\n            });\n        }\n        this._updateDatasets(mode);\n        this.notifyPlugins('afterUpdate', {\n            mode\n        });\n        this._layers.sort(compare2Level('z', '_idx'));\n        const { _active , _lastEvent  } = this;\n        if (_lastEvent) {\n            this._eventHandler(_lastEvent, true);\n        } else if (_active.length) {\n            this._updateHoverStyles(_active, _active, true);\n        }\n        this.render();\n    }\n _updateScales() {\n        each(this.scales, (scale)=>{\n            layouts.removeBox(this, scale);\n        });\n        this.ensureScalesHaveIDs();\n        this.buildOrUpdateScales();\n    }\n _checkEventBindings() {\n        const options = this.options;\n        const existingEvents = new Set(Object.keys(this._listeners));\n        const newEvents = new Set(options.events);\n        if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\n            this.unbindEvents();\n            this.bindEvents();\n        }\n    }\n _updateHiddenIndices() {\n        const { _hiddenIndices  } = this;\n        const changes = this._getUniformDataChanges() || [];\n        for (const { method , start , count  } of changes){\n            const move = method === '_removeElements' ? -count : count;\n            moveNumericKeys(_hiddenIndices, start, move);\n        }\n    }\n _getUniformDataChanges() {\n        const _dataChanges = this._dataChanges;\n        if (!_dataChanges || !_dataChanges.length) {\n            return;\n        }\n        this._dataChanges = [];\n        const datasetCount = this.data.datasets.length;\n        const makeSet = (idx)=>new Set(_dataChanges.filter((c)=>c[0] === idx).map((c, i)=>i + ',' + c.splice(1).join(',')));\n        const changeSet = makeSet(0);\n        for(let i = 1; i < datasetCount; i++){\n            if (!setsEqual(changeSet, makeSet(i))) {\n                return;\n            }\n        }\n        return Array.from(changeSet).map((c)=>c.split(',')).map((a)=>({\n                method: a[1],\n                start: +a[2],\n                count: +a[3]\n            }));\n    }\n _updateLayout(minPadding) {\n        if (this.notifyPlugins('beforeLayout', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        layouts.update(this, this.width, this.height, minPadding);\n        const area = this.chartArea;\n        const noArea = area.width <= 0 || area.height <= 0;\n        this._layers = [];\n        each(this.boxes, (box)=>{\n            if (noArea && box.position === 'chartArea') {\n                return;\n            }\n            if (box.configure) {\n                box.configure();\n            }\n            this._layers.push(...box._layers());\n        }, this);\n        this._layers.forEach((item, index)=>{\n            item._idx = index;\n        });\n        this.notifyPlugins('afterLayout');\n    }\n _updateDatasets(mode) {\n        if (this.notifyPlugins('beforeDatasetsUpdate', {\n            mode,\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        for(let i = 0, ilen = this.data.datasets.length; i < ilen; ++i){\n            this.getDatasetMeta(i).controller.configure();\n        }\n        for(let i = 0, ilen = this.data.datasets.length; i < ilen; ++i){\n            this._updateDataset(i, isFunction(mode) ? mode({\n                datasetIndex: i\n            }) : mode);\n        }\n        this.notifyPlugins('afterDatasetsUpdate', {\n            mode\n        });\n    }\n _updateDataset(index, mode) {\n        const meta = this.getDatasetMeta(index);\n        const args = {\n            meta,\n            index,\n            mode,\n            cancelable: true\n        };\n        if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\n            return;\n        }\n        meta.controller._update(mode);\n        args.cancelable = false;\n        this.notifyPlugins('afterDatasetUpdate', args);\n    }\n    render() {\n        if (this.notifyPlugins('beforeRender', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        if (animator.has(this)) {\n            if (this.attached && !animator.running(this)) {\n                animator.start(this);\n            }\n        } else {\n            this.draw();\n            onAnimationsComplete({\n                chart: this\n            });\n        }\n    }\n    draw() {\n        let i;\n        if (this._resizeBeforeDraw) {\n            const { width , height  } = this._resizeBeforeDraw;\n            this._resizeBeforeDraw = null;\n            this._resize(width, height);\n        }\n        this.clear();\n        if (this.width <= 0 || this.height <= 0) {\n            return;\n        }\n        if (this.notifyPlugins('beforeDraw', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const layers = this._layers;\n        for(i = 0; i < layers.length && layers[i].z <= 0; ++i){\n            layers[i].draw(this.chartArea);\n        }\n        this._drawDatasets();\n        for(; i < layers.length; ++i){\n            layers[i].draw(this.chartArea);\n        }\n        this.notifyPlugins('afterDraw');\n    }\n _getSortedDatasetMetas(filterVisible) {\n        const metasets = this._sortedMetasets;\n        const result = [];\n        let i, ilen;\n        for(i = 0, ilen = metasets.length; i < ilen; ++i){\n            const meta = metasets[i];\n            if (!filterVisible || meta.visible) {\n                result.push(meta);\n            }\n        }\n        return result;\n    }\n getSortedVisibleDatasetMetas() {\n        return this._getSortedDatasetMetas(true);\n    }\n _drawDatasets() {\n        if (this.notifyPlugins('beforeDatasetsDraw', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const metasets = this.getSortedVisibleDatasetMetas();\n        for(let i = metasets.length - 1; i >= 0; --i){\n            this._drawDataset(metasets[i]);\n        }\n        this.notifyPlugins('afterDatasetsDraw');\n    }\n _drawDataset(meta) {\n        const ctx = this.ctx;\n        const args = {\n            meta,\n            index: meta.index,\n            cancelable: true\n        };\n        const clip = getDatasetClipArea(this, meta);\n        if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\n            return;\n        }\n        if (clip) {\n            clipArea(ctx, clip);\n        }\n        meta.controller.draw();\n        if (clip) {\n            unclipArea(ctx);\n        }\n        args.cancelable = false;\n        this.notifyPlugins('afterDatasetDraw', args);\n    }\n isPointInArea(point) {\n        return _isPointInArea(point, this.chartArea, this._minPadding);\n    }\n    getElementsAtEventForMode(e, mode, options, useFinalPosition) {\n        const method = Interaction.modes[mode];\n        if (typeof method === 'function') {\n            return method(this, e, options, useFinalPosition);\n        }\n        return [];\n    }\n    getDatasetMeta(datasetIndex) {\n        const dataset = this.data.datasets[datasetIndex];\n        const metasets = this._metasets;\n        let meta = metasets.filter((x)=>x && x._dataset === dataset).pop();\n        if (!meta) {\n            meta = {\n                type: null,\n                data: [],\n                dataset: null,\n                controller: null,\n                hidden: null,\n                xAxisID: null,\n                yAxisID: null,\n                order: dataset && dataset.order || 0,\n                index: datasetIndex,\n                _dataset: dataset,\n                _parsed: [],\n                _sorted: false\n            };\n            metasets.push(meta);\n        }\n        return meta;\n    }\n    getContext() {\n        return this.$context || (this.$context = createContext(null, {\n            chart: this,\n            type: 'chart'\n        }));\n    }\n    getVisibleDatasetCount() {\n        return this.getSortedVisibleDatasetMetas().length;\n    }\n    isDatasetVisible(datasetIndex) {\n        const dataset = this.data.datasets[datasetIndex];\n        if (!dataset) {\n            return false;\n        }\n        const meta = this.getDatasetMeta(datasetIndex);\n        return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\n    }\n    setDatasetVisibility(datasetIndex, visible) {\n        const meta = this.getDatasetMeta(datasetIndex);\n        meta.hidden = !visible;\n    }\n    toggleDataVisibility(index) {\n        this._hiddenIndices[index] = !this._hiddenIndices[index];\n    }\n    getDataVisibility(index) {\n        return !this._hiddenIndices[index];\n    }\n _updateVisibility(datasetIndex, dataIndex, visible) {\n        const mode = visible ? 'show' : 'hide';\n        const meta = this.getDatasetMeta(datasetIndex);\n        const anims = meta.controller._resolveAnimations(undefined, mode);\n        if (defined(dataIndex)) {\n            meta.data[dataIndex].hidden = !visible;\n            this.update();\n        } else {\n            this.setDatasetVisibility(datasetIndex, visible);\n            anims.update(meta, {\n                visible\n            });\n            this.update((ctx)=>ctx.datasetIndex === datasetIndex ? mode : undefined);\n        }\n    }\n    hide(datasetIndex, dataIndex) {\n        this._updateVisibility(datasetIndex, dataIndex, false);\n    }\n    show(datasetIndex, dataIndex) {\n        this._updateVisibility(datasetIndex, dataIndex, true);\n    }\n _destroyDatasetMeta(datasetIndex) {\n        const meta = this._metasets[datasetIndex];\n        if (meta && meta.controller) {\n            meta.controller._destroy();\n        }\n        delete this._metasets[datasetIndex];\n    }\n    _stop() {\n        let i, ilen;\n        this.stop();\n        animator.remove(this);\n        for(i = 0, ilen = this.data.datasets.length; i < ilen; ++i){\n            this._destroyDatasetMeta(i);\n        }\n    }\n    destroy() {\n        this.notifyPlugins('beforeDestroy');\n        const { canvas , ctx  } = this;\n        this._stop();\n        this.config.clearCache();\n        if (canvas) {\n            this.unbindEvents();\n            clearCanvas(canvas, ctx);\n            this.platform.releaseContext(ctx);\n            this.canvas = null;\n            this.ctx = null;\n        }\n        delete instances[this.id];\n        this.notifyPlugins('afterDestroy');\n    }\n    toBase64Image(...args) {\n        return this.canvas.toDataURL(...args);\n    }\n bindEvents() {\n        this.bindUserEvents();\n        if (this.options.responsive) {\n            this.bindResponsiveEvents();\n        } else {\n            this.attached = true;\n        }\n    }\n bindUserEvents() {\n        const listeners = this._listeners;\n        const platform = this.platform;\n        const _add = (type, listener)=>{\n            platform.addEventListener(this, type, listener);\n            listeners[type] = listener;\n        };\n        const listener = (e, x, y)=>{\n            e.offsetX = x;\n            e.offsetY = y;\n            this._eventHandler(e);\n        };\n        each(this.options.events, (type)=>_add(type, listener));\n    }\n bindResponsiveEvents() {\n        if (!this._responsiveListeners) {\n            this._responsiveListeners = {};\n        }\n        const listeners = this._responsiveListeners;\n        const platform = this.platform;\n        const _add = (type, listener)=>{\n            platform.addEventListener(this, type, listener);\n            listeners[type] = listener;\n        };\n        const _remove = (type, listener)=>{\n            if (listeners[type]) {\n                platform.removeEventListener(this, type, listener);\n                delete listeners[type];\n            }\n        };\n        const listener = (width, height)=>{\n            if (this.canvas) {\n                this.resize(width, height);\n            }\n        };\n        let detached;\n        const attached = ()=>{\n            _remove('attach', attached);\n            this.attached = true;\n            this.resize();\n            _add('resize', listener);\n            _add('detach', detached);\n        };\n        detached = ()=>{\n            this.attached = false;\n            _remove('resize', listener);\n            this._stop();\n            this._resize(0, 0);\n            _add('attach', attached);\n        };\n        if (platform.isAttached(this.canvas)) {\n            attached();\n        } else {\n            detached();\n        }\n    }\n unbindEvents() {\n        each(this._listeners, (listener, type)=>{\n            this.platform.removeEventListener(this, type, listener);\n        });\n        this._listeners = {};\n        each(this._responsiveListeners, (listener, type)=>{\n            this.platform.removeEventListener(this, type, listener);\n        });\n        this._responsiveListeners = undefined;\n    }\n    updateHoverStyle(items, mode, enabled) {\n        const prefix = enabled ? 'set' : 'remove';\n        let meta, item, i, ilen;\n        if (mode === 'dataset') {\n            meta = this.getDatasetMeta(items[0].datasetIndex);\n            meta.controller['_' + prefix + 'DatasetHoverStyle']();\n        }\n        for(i = 0, ilen = items.length; i < ilen; ++i){\n            item = items[i];\n            const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\n            if (controller) {\n                controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\n            }\n        }\n    }\n getActiveElements() {\n        return this._active || [];\n    }\n setActiveElements(activeElements) {\n        const lastActive = this._active || [];\n        const active = activeElements.map(({ datasetIndex , index  })=>{\n            const meta = this.getDatasetMeta(datasetIndex);\n            if (!meta) {\n                throw new Error('No dataset found at index ' + datasetIndex);\n            }\n            return {\n                datasetIndex,\n                element: meta.data[index],\n                index\n            };\n        });\n        const changed = !_elementsEqual(active, lastActive);\n        if (changed) {\n            this._active = active;\n            this._lastEvent = null;\n            this._updateHoverStyles(active, lastActive);\n        }\n    }\n notifyPlugins(hook, args, filter) {\n        return this._plugins.notify(this, hook, args, filter);\n    }\n isPluginEnabled(pluginId) {\n        return this._plugins._cache.filter((p)=>p.plugin.id === pluginId).length === 1;\n    }\n _updateHoverStyles(active, lastActive, replay) {\n        const hoverOptions = this.options.hover;\n        const diff = (a, b)=>a.filter((x)=>!b.some((y)=>x.datasetIndex === y.datasetIndex && x.index === y.index));\n        const deactivated = diff(lastActive, active);\n        const activated = replay ? active : diff(active, lastActive);\n        if (deactivated.length) {\n            this.updateHoverStyle(deactivated, hoverOptions.mode, false);\n        }\n        if (activated.length && hoverOptions.mode) {\n            this.updateHoverStyle(activated, hoverOptions.mode, true);\n        }\n    }\n _eventHandler(e, replay) {\n        const args = {\n            event: e,\n            replay,\n            cancelable: true,\n            inChartArea: this.isPointInArea(e)\n        };\n        const eventFilter = (plugin)=>(plugin.options.events || this.options.events).includes(e.native.type);\n        if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\n            return;\n        }\n        const changed = this._handleEvent(e, replay, args.inChartArea);\n        args.cancelable = false;\n        this.notifyPlugins('afterEvent', args, eventFilter);\n        if (changed || args.changed) {\n            this.render();\n        }\n        return this;\n    }\n _handleEvent(e, replay, inChartArea) {\n        const { _active: lastActive = [] , options  } = this;\n        const useFinalPosition = replay;\n        const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\n        const isClick = _isClickEvent(e);\n        const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\n        if (inChartArea) {\n            this._lastEvent = null;\n            callback(options.onHover, [\n                e,\n                active,\n                this\n            ], this);\n            if (isClick) {\n                callback(options.onClick, [\n                    e,\n                    active,\n                    this\n                ], this);\n            }\n        }\n        const changed = !_elementsEqual(active, lastActive);\n        if (changed || replay) {\n            this._active = active;\n            this._updateHoverStyles(active, lastActive, replay);\n        }\n        this._lastEvent = lastEvent;\n        return changed;\n    }\n _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\n        if (e.type === 'mouseout') {\n            return [];\n        }\n        if (!inChartArea) {\n            return lastActive;\n        }\n        const hoverOptions = this.options.hover;\n        return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\n    }\n}\nfunction invalidatePlugins() {\n    return each(Chart.instances, (chart)=>chart._plugins.invalidate());\n}\n\nfunction clipSelf(ctx, element, endAngle) {\n    const { startAngle , x , y , outerRadius , innerRadius , options  } = element;\n    const { borderWidth , borderJoinStyle  } = options;\n    const outerAngleClip = Math.min(borderWidth / outerRadius, _normalizeAngle(startAngle - endAngle));\n    ctx.beginPath();\n    ctx.arc(x, y, outerRadius - borderWidth / 2, startAngle + outerAngleClip / 2, endAngle - outerAngleClip / 2);\n    if (innerRadius > 0) {\n        const innerAngleClip = Math.min(borderWidth / innerRadius, _normalizeAngle(startAngle - endAngle));\n        ctx.arc(x, y, innerRadius + borderWidth / 2, endAngle - innerAngleClip / 2, startAngle + innerAngleClip / 2, true);\n    } else {\n        const clipWidth = Math.min(borderWidth / 2, outerRadius * _normalizeAngle(startAngle - endAngle));\n        if (borderJoinStyle === 'round') {\n            ctx.arc(x, y, clipWidth, endAngle - PI / 2, startAngle + PI / 2, true);\n        } else if (borderJoinStyle === 'bevel') {\n            const r = 2 * clipWidth * clipWidth;\n            const endX = -r * Math.cos(endAngle + PI / 2) + x;\n            const endY = -r * Math.sin(endAngle + PI / 2) + y;\n            const startX = r * Math.cos(startAngle + PI / 2) + x;\n            const startY = r * Math.sin(startAngle + PI / 2) + y;\n            ctx.lineTo(endX, endY);\n            ctx.lineTo(startX, startY);\n        }\n    }\n    ctx.closePath();\n    ctx.moveTo(0, 0);\n    ctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.clip('evenodd');\n}\nfunction clipArc(ctx, element, endAngle) {\n    const { startAngle , pixelMargin , x , y , outerRadius , innerRadius  } = element;\n    let angleMargin = pixelMargin / outerRadius;\n    // Draw an inner border by clipping the arc and drawing a double-width border\n    // Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\n    ctx.beginPath();\n    ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\n    if (innerRadius > pixelMargin) {\n        angleMargin = pixelMargin / innerRadius;\n        ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\n    } else {\n        ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\n    }\n    ctx.closePath();\n    ctx.clip();\n}\nfunction toRadiusCorners(value) {\n    return _readValueToProps(value, [\n        'outerStart',\n        'outerEnd',\n        'innerStart',\n        'innerEnd'\n    ]);\n}\n/**\n * Parse border radius from the provided options\n */ function parseBorderRadius$1(arc, innerRadius, outerRadius, angleDelta) {\n    const o = toRadiusCorners(arc.options.borderRadius);\n    const halfThickness = (outerRadius - innerRadius) / 2;\n    const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\n    // Outer limits are complicated. We want to compute the available angular distance at\n    // a radius of outerRadius - borderRadius because for small angular distances, this term limits.\n    // We compute at r = outerRadius - borderRadius because this circle defines the center of the border corners.\n    //\n    // If the borderRadius is large, that value can become negative.\n    // This causes the outer borders to lose their radius entirely, which is rather unexpected. To solve that, if borderRadius > outerRadius\n    // we know that the thickness term will dominate and compute the limits at that point\n    const computeOuterLimit = (val)=>{\n        const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\n        return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\n    };\n    return {\n        outerStart: computeOuterLimit(o.outerStart),\n        outerEnd: computeOuterLimit(o.outerEnd),\n        innerStart: _limitValue(o.innerStart, 0, innerLimit),\n        innerEnd: _limitValue(o.innerEnd, 0, innerLimit)\n    };\n}\n/**\n * Convert (r, ) to (x, y)\n */ function rThetaToXY(r, theta, x, y) {\n    return {\n        x: x + r * Math.cos(theta),\n        y: y + r * Math.sin(theta)\n    };\n}\n/**\n * Path the arc, respecting border radius by separating into left and right halves.\n *\n *   Start      End\n *\n *    1--->a--->2    Outer\n *   /           \\\n *   8           3\n *   |           |\n *   |           |\n *   7           4\n *   \\           /\n *    6<---b<---5    Inner\n */ function pathArc(ctx, element, offset, spacing, end, circular) {\n    const { x , y , startAngle: start , pixelMargin , innerRadius: innerR  } = element;\n    const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\n    const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\n    let spacingOffset = 0;\n    const alpha = end - start;\n    if (spacing) {\n        // When spacing is present, it is the same for all items\n        // So we adjust the start and end angle of the arc such that\n        // the distance is the same as it would be without the spacing\n        const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\n        const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\n        const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\n        const adjustedAngle = avNogSpacingRadius !== 0 ? alpha * avNogSpacingRadius / (avNogSpacingRadius + spacing) : alpha;\n        spacingOffset = (alpha - adjustedAngle) / 2;\n    }\n    const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\n    const angleOffset = (alpha - beta) / 2;\n    const startAngle = start + angleOffset + spacingOffset;\n    const endAngle = end - angleOffset - spacingOffset;\n    const { outerStart , outerEnd , innerStart , innerEnd  } = parseBorderRadius$1(element, innerRadius, outerRadius, endAngle - startAngle);\n    const outerStartAdjustedRadius = outerRadius - outerStart;\n    const outerEndAdjustedRadius = outerRadius - outerEnd;\n    const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\n    const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\n    const innerStartAdjustedRadius = innerRadius + innerStart;\n    const innerEndAdjustedRadius = innerRadius + innerEnd;\n    const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\n    const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\n    ctx.beginPath();\n    if (circular) {\n        // The first arc segments from point 1 to point a to point 2\n        const outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;\n        ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);\n        ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);\n        // The corner segment from point 2 to point 3\n        if (outerEnd > 0) {\n            const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\n        }\n        // The line from point 3 to point 4\n        const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\n        ctx.lineTo(p4.x, p4.y);\n        // The corner segment from point 4 to point 5\n        if (innerEnd > 0) {\n            const pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\n        }\n        // The inner arc from point 5 to point b to point 6\n        const innerMidAdjustedAngle = (endAngle - innerEnd / innerRadius + (startAngle + innerStart / innerRadius)) / 2;\n        ctx.arc(x, y, innerRadius, endAngle - innerEnd / innerRadius, innerMidAdjustedAngle, true);\n        ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + innerStart / innerRadius, true);\n        // The corner segment from point 6 to point 7\n        if (innerStart > 0) {\n            const pCenter = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\n        }\n        // The line from point 7 to point 8\n        const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\n        ctx.lineTo(p8.x, p8.y);\n        // The corner segment from point 8 to point 1\n        if (outerStart > 0) {\n            const pCenter = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\n        }\n    } else {\n        ctx.moveTo(x, y);\n        const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\n        const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\n        ctx.lineTo(outerStartX, outerStartY);\n        const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\n        const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\n        ctx.lineTo(outerEndX, outerEndY);\n    }\n    ctx.closePath();\n}\nfunction drawArc(ctx, element, offset, spacing, circular) {\n    const { fullCircles , startAngle , circumference  } = element;\n    let endAngle = element.endAngle;\n    if (fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        for(let i = 0; i < fullCircles; ++i){\n            ctx.fill();\n        }\n        if (!isNaN(circumference)) {\n            endAngle = startAngle + (circumference % TAU || TAU);\n        }\n    }\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    ctx.fill();\n    return endAngle;\n}\nfunction drawBorder(ctx, element, offset, spacing, circular) {\n    const { fullCircles , startAngle , circumference , options  } = element;\n    const { borderWidth , borderJoinStyle , borderDash , borderDashOffset , borderRadius  } = options;\n    const inner = options.borderAlign === 'inner';\n    if (!borderWidth) {\n        return;\n    }\n    ctx.setLineDash(borderDash || []);\n    ctx.lineDashOffset = borderDashOffset;\n    if (inner) {\n        ctx.lineWidth = borderWidth * 2;\n        ctx.lineJoin = borderJoinStyle || 'round';\n    } else {\n        ctx.lineWidth = borderWidth;\n        ctx.lineJoin = borderJoinStyle || 'bevel';\n    }\n    let endAngle = element.endAngle;\n    if (fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        for(let i = 0; i < fullCircles; ++i){\n            ctx.stroke();\n        }\n        if (!isNaN(circumference)) {\n            endAngle = startAngle + (circumference % TAU || TAU);\n        }\n    }\n    if (inner) {\n        clipArc(ctx, element, endAngle);\n    }\n    if (options.selfJoin && endAngle - startAngle >= PI && borderRadius === 0 && borderJoinStyle !== 'miter') {\n        clipSelf(ctx, element, endAngle);\n    }\n    if (!fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        ctx.stroke();\n    }\n}\nclass ArcElement extends Element {\n    static id = 'arc';\n    static defaults = {\n        borderAlign: 'center',\n        borderColor: '#fff',\n        borderDash: [],\n        borderDashOffset: 0,\n        borderJoinStyle: undefined,\n        borderRadius: 0,\n        borderWidth: 2,\n        offset: 0,\n        spacing: 0,\n        angle: undefined,\n        circular: true,\n        selfJoin: false\n    };\n    static defaultRoutes = {\n        backgroundColor: 'backgroundColor'\n    };\n    static descriptors = {\n        _scriptable: true,\n        _indexable: (name)=>name !== 'borderDash'\n    };\n    circumference;\n    endAngle;\n    fullCircles;\n    innerRadius;\n    outerRadius;\n    pixelMargin;\n    startAngle;\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.circumference = undefined;\n        this.startAngle = undefined;\n        this.endAngle = undefined;\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n        this.pixelMargin = 0;\n        this.fullCircles = 0;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    inRange(chartX, chartY, useFinalPosition) {\n        const point = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        const { angle , distance  } = getAngleFromPoint(point, {\n            x: chartX,\n            y: chartY\n        });\n        const { startAngle , endAngle , innerRadius , outerRadius , circumference  } = this.getProps([\n            'startAngle',\n            'endAngle',\n            'innerRadius',\n            'outerRadius',\n            'circumference'\n        ], useFinalPosition);\n        const rAdjust = (this.options.spacing + this.options.borderWidth) / 2;\n        const _circumference = valueOrDefault(circumference, endAngle - startAngle);\n        const nonZeroBetween = _angleBetween(angle, startAngle, endAngle) && startAngle !== endAngle;\n        const betweenAngles = _circumference >= TAU || nonZeroBetween;\n        const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\n        return betweenAngles && withinRadius;\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y , startAngle , endAngle , innerRadius , outerRadius  } = this.getProps([\n            'x',\n            'y',\n            'startAngle',\n            'endAngle',\n            'innerRadius',\n            'outerRadius'\n        ], useFinalPosition);\n        const { offset , spacing  } = this.options;\n        const halfAngle = (startAngle + endAngle) / 2;\n        const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\n        return {\n            x: x + Math.cos(halfAngle) * halfRadius,\n            y: y + Math.sin(halfAngle) * halfRadius\n        };\n    }\n    tooltipPosition(useFinalPosition) {\n        return this.getCenterPoint(useFinalPosition);\n    }\n    draw(ctx) {\n        const { options , circumference  } = this;\n        const offset = (options.offset || 0) / 4;\n        const spacing = (options.spacing || 0) / 2;\n        const circular = options.circular;\n        this.pixelMargin = options.borderAlign === 'inner' ? 0.33 : 0;\n        this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\n        if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\n            return;\n        }\n        ctx.save();\n        const halfAngle = (this.startAngle + this.endAngle) / 2;\n        ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);\n        const fix = 1 - Math.sin(Math.min(PI, circumference || 0));\n        const radiusOffset = offset * fix;\n        ctx.fillStyle = options.backgroundColor;\n        ctx.strokeStyle = options.borderColor;\n        drawArc(ctx, this, radiusOffset, spacing, circular);\n        drawBorder(ctx, this, radiusOffset, spacing, circular);\n        ctx.restore();\n    }\n}\n\nfunction setStyle(ctx, options, style = options) {\n    ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\n    ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\n    ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\n    ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\n    ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\n    ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\n}\nfunction lineTo(ctx, previous, target) {\n    ctx.lineTo(target.x, target.y);\n}\n function getLineMethod(options) {\n    if (options.stepped) {\n        return _steppedLineTo;\n    }\n    if (options.tension || options.cubicInterpolationMode === 'monotone') {\n        return _bezierCurveTo;\n    }\n    return lineTo;\n}\nfunction pathVars(points, segment, params = {}) {\n    const count = points.length;\n    const { start: paramsStart = 0 , end: paramsEnd = count - 1  } = params;\n    const { start: segmentStart , end: segmentEnd  } = segment;\n    const start = Math.max(paramsStart, segmentStart);\n    const end = Math.min(paramsEnd, segmentEnd);\n    const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\n    return {\n        count,\n        start,\n        loop: segment.loop,\n        ilen: end < start && !outside ? count + end - start : end - start\n    };\n}\n function pathSegment(ctx, line, segment, params) {\n    const { points , options  } = line;\n    const { count , start , loop , ilen  } = pathVars(points, segment, params);\n    const lineMethod = getLineMethod(options);\n    let { move =true , reverse  } = params || {};\n    let i, point, prev;\n    for(i = 0; i <= ilen; ++i){\n        point = points[(start + (reverse ? ilen - i : i)) % count];\n        if (point.skip) {\n            continue;\n        } else if (move) {\n            ctx.moveTo(point.x, point.y);\n            move = false;\n        } else {\n            lineMethod(ctx, prev, point, reverse, options.stepped);\n        }\n        prev = point;\n    }\n    if (loop) {\n        point = points[(start + (reverse ? ilen : 0)) % count];\n        lineMethod(ctx, prev, point, reverse, options.stepped);\n    }\n    return !!loop;\n}\n function fastPathSegment(ctx, line, segment, params) {\n    const points = line.points;\n    const { count , start , ilen  } = pathVars(points, segment, params);\n    const { move =true , reverse  } = params || {};\n    let avgX = 0;\n    let countX = 0;\n    let i, point, prevX, minY, maxY, lastY;\n    const pointIndex = (index)=>(start + (reverse ? ilen - index : index)) % count;\n    const drawX = ()=>{\n        if (minY !== maxY) {\n            ctx.lineTo(avgX, maxY);\n            ctx.lineTo(avgX, minY);\n            ctx.lineTo(avgX, lastY);\n        }\n    };\n    if (move) {\n        point = points[pointIndex(0)];\n        ctx.moveTo(point.x, point.y);\n    }\n    for(i = 0; i <= ilen; ++i){\n        point = points[pointIndex(i)];\n        if (point.skip) {\n            continue;\n        }\n        const x = point.x;\n        const y = point.y;\n        const truncX = x | 0;\n        if (truncX === prevX) {\n            if (y < minY) {\n                minY = y;\n            } else if (y > maxY) {\n                maxY = y;\n            }\n            avgX = (countX * avgX + x) / ++countX;\n        } else {\n            drawX();\n            ctx.lineTo(x, y);\n            prevX = truncX;\n            countX = 0;\n            minY = maxY = y;\n        }\n        lastY = y;\n    }\n    drawX();\n}\n function _getSegmentMethod(line) {\n    const opts = line.options;\n    const borderDash = opts.borderDash && opts.borderDash.length;\n    const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\n    return useFastPath ? fastPathSegment : pathSegment;\n}\n function _getInterpolationMethod(options) {\n    if (options.stepped) {\n        return _steppedInterpolation;\n    }\n    if (options.tension || options.cubicInterpolationMode === 'monotone') {\n        return _bezierInterpolation;\n    }\n    return _pointInLine;\n}\nfunction strokePathWithCache(ctx, line, start, count) {\n    let path = line._path;\n    if (!path) {\n        path = line._path = new Path2D();\n        if (line.path(path, start, count)) {\n            path.closePath();\n        }\n    }\n    setStyle(ctx, line.options);\n    ctx.stroke(path);\n}\nfunction strokePathDirect(ctx, line, start, count) {\n    const { segments , options  } = line;\n    const segmentMethod = _getSegmentMethod(line);\n    for (const segment of segments){\n        setStyle(ctx, options, segment.style);\n        ctx.beginPath();\n        if (segmentMethod(ctx, line, segment, {\n            start,\n            end: start + count - 1\n        })) {\n            ctx.closePath();\n        }\n        ctx.stroke();\n    }\n}\nconst usePath2D = typeof Path2D === 'function';\nfunction draw(ctx, line, start, count) {\n    if (usePath2D && !line.options.segment) {\n        strokePathWithCache(ctx, line, start, count);\n    } else {\n        strokePathDirect(ctx, line, start, count);\n    }\n}\nclass LineElement extends Element {\n    static id = 'line';\n static defaults = {\n        borderCapStyle: 'butt',\n        borderDash: [],\n        borderDashOffset: 0,\n        borderJoinStyle: 'miter',\n        borderWidth: 3,\n        capBezierPoints: true,\n        cubicInterpolationMode: 'default',\n        fill: false,\n        spanGaps: false,\n        stepped: false,\n        tension: 0\n    };\n static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    static descriptors = {\n        _scriptable: true,\n        _indexable: (name)=>name !== 'borderDash' && name !== 'fill'\n    };\n    constructor(cfg){\n        super();\n        this.animated = true;\n        this.options = undefined;\n        this._chart = undefined;\n        this._loop = undefined;\n        this._fullLoop = undefined;\n        this._path = undefined;\n        this._points = undefined;\n        this._segments = undefined;\n        this._decimated = false;\n        this._pointsUpdated = false;\n        this._datasetIndex = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    updateControlPoints(chartArea, indexAxis) {\n        const options = this.options;\n        if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\n            const loop = options.spanGaps ? this._loop : this._fullLoop;\n            _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\n            this._pointsUpdated = true;\n        }\n    }\n    set points(points) {\n        this._points = points;\n        delete this._segments;\n        delete this._path;\n        this._pointsUpdated = false;\n    }\n    get points() {\n        return this._points;\n    }\n    get segments() {\n        return this._segments || (this._segments = _computeSegments(this, this.options.segment));\n    }\n first() {\n        const segments = this.segments;\n        const points = this.points;\n        return segments.length && points[segments[0].start];\n    }\n last() {\n        const segments = this.segments;\n        const points = this.points;\n        const count = segments.length;\n        return count && points[segments[count - 1].end];\n    }\n interpolate(point, property) {\n        const options = this.options;\n        const value = point[property];\n        const points = this.points;\n        const segments = _boundSegments(this, {\n            property,\n            start: value,\n            end: value\n        });\n        if (!segments.length) {\n            return;\n        }\n        const result = [];\n        const _interpolate = _getInterpolationMethod(options);\n        let i, ilen;\n        for(i = 0, ilen = segments.length; i < ilen; ++i){\n            const { start , end  } = segments[i];\n            const p1 = points[start];\n            const p2 = points[end];\n            if (p1 === p2) {\n                result.push(p1);\n                continue;\n            }\n            const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\n            const interpolated = _interpolate(p1, p2, t, options.stepped);\n            interpolated[property] = point[property];\n            result.push(interpolated);\n        }\n        return result.length === 1 ? result[0] : result;\n    }\n pathSegment(ctx, segment, params) {\n        const segmentMethod = _getSegmentMethod(this);\n        return segmentMethod(ctx, this, segment, params);\n    }\n path(ctx, start, count) {\n        const segments = this.segments;\n        const segmentMethod = _getSegmentMethod(this);\n        let loop = this._loop;\n        start = start || 0;\n        count = count || this.points.length - start;\n        for (const segment of segments){\n            loop &= segmentMethod(ctx, this, segment, {\n                start,\n                end: start + count - 1\n            });\n        }\n        return !!loop;\n    }\n draw(ctx, chartArea, start, count) {\n        const options = this.options || {};\n        const points = this.points || [];\n        if (points.length && options.borderWidth) {\n            ctx.save();\n            draw(ctx, this, start, count);\n            ctx.restore();\n        }\n        if (this.animated) {\n            this._pointsUpdated = false;\n            this._path = undefined;\n        }\n    }\n}\n\nfunction inRange$1(el, pos, axis, useFinalPosition) {\n    const options = el.options;\n    const { [axis]: value  } = el.getProps([\n        axis\n    ], useFinalPosition);\n    return Math.abs(pos - value) < options.radius + options.hitRadius;\n}\nclass PointElement extends Element {\n    static id = 'point';\n    parsed;\n    skip;\n    stop;\n    /**\n   * @type {any}\n   */ static defaults = {\n        borderWidth: 1,\n        hitRadius: 1,\n        hoverBorderWidth: 1,\n        hoverRadius: 4,\n        pointStyle: 'circle',\n        radius: 3,\n        rotation: 0\n    };\n    /**\n   * @type {any}\n   */ static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.parsed = undefined;\n        this.skip = undefined;\n        this.stop = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    inRange(mouseX, mouseY, useFinalPosition) {\n        const options = this.options;\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2) < Math.pow(options.hitRadius + options.radius, 2);\n    }\n    inXRange(mouseX, useFinalPosition) {\n        return inRange$1(this, mouseX, 'x', useFinalPosition);\n    }\n    inYRange(mouseY, useFinalPosition) {\n        return inRange$1(this, mouseY, 'y', useFinalPosition);\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return {\n            x,\n            y\n        };\n    }\n    size(options) {\n        options = options || this.options || {};\n        let radius = options.radius || 0;\n        radius = Math.max(radius, radius && options.hoverRadius || 0);\n        const borderWidth = radius && options.borderWidth || 0;\n        return (radius + borderWidth) * 2;\n    }\n    draw(ctx, area) {\n        const options = this.options;\n        if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\n            return;\n        }\n        ctx.strokeStyle = options.borderColor;\n        ctx.lineWidth = options.borderWidth;\n        ctx.fillStyle = options.backgroundColor;\n        drawPoint(ctx, options, this.x, this.y);\n    }\n    getRange() {\n        const options = this.options || {};\n        // @ts-expect-error Fallbacks should never be hit in practice\n        return options.radius + options.hitRadius;\n    }\n}\n\nfunction getBarBounds(bar, useFinalPosition) {\n    const { x , y , base , width , height  } =  bar.getProps([\n        'x',\n        'y',\n        'base',\n        'width',\n        'height'\n    ], useFinalPosition);\n    let left, right, top, bottom, half;\n    if (bar.horizontal) {\n        half = height / 2;\n        left = Math.min(x, base);\n        right = Math.max(x, base);\n        top = y - half;\n        bottom = y + half;\n    } else {\n        half = width / 2;\n        left = x - half;\n        right = x + half;\n        top = Math.min(y, base);\n        bottom = Math.max(y, base);\n    }\n    return {\n        left,\n        top,\n        right,\n        bottom\n    };\n}\nfunction skipOrLimit(skip, value, min, max) {\n    return skip ? 0 : _limitValue(value, min, max);\n}\nfunction parseBorderWidth(bar, maxW, maxH) {\n    const value = bar.options.borderWidth;\n    const skip = bar.borderSkipped;\n    const o = toTRBL(value);\n    return {\n        t: skipOrLimit(skip.top, o.top, 0, maxH),\n        r: skipOrLimit(skip.right, o.right, 0, maxW),\n        b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\n        l: skipOrLimit(skip.left, o.left, 0, maxW)\n    };\n}\nfunction parseBorderRadius(bar, maxW, maxH) {\n    const { enableBorderRadius  } = bar.getProps([\n        'enableBorderRadius'\n    ]);\n    const value = bar.options.borderRadius;\n    const o = toTRBLCorners(value);\n    const maxR = Math.min(maxW, maxH);\n    const skip = bar.borderSkipped;\n    const enableBorder = enableBorderRadius || isObject(value);\n    return {\n        topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\n        topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\n        bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\n        bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\n    };\n}\nfunction boundingRects(bar) {\n    const bounds = getBarBounds(bar);\n    const width = bounds.right - bounds.left;\n    const height = bounds.bottom - bounds.top;\n    const border = parseBorderWidth(bar, width / 2, height / 2);\n    const radius = parseBorderRadius(bar, width / 2, height / 2);\n    return {\n        outer: {\n            x: bounds.left,\n            y: bounds.top,\n            w: width,\n            h: height,\n            radius\n        },\n        inner: {\n            x: bounds.left + border.l,\n            y: bounds.top + border.t,\n            w: width - border.l - border.r,\n            h: height - border.t - border.b,\n            radius: {\n                topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\n                topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\n                bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\n                bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r))\n            }\n        }\n    };\n}\nfunction inRange(bar, x, y, useFinalPosition) {\n    const skipX = x === null;\n    const skipY = y === null;\n    const skipBoth = skipX && skipY;\n    const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\n    return bounds && (skipX || _isBetween(x, bounds.left, bounds.right)) && (skipY || _isBetween(y, bounds.top, bounds.bottom));\n}\nfunction hasRadius(radius) {\n    return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\n}\n function addNormalRectPath(ctx, rect) {\n    ctx.rect(rect.x, rect.y, rect.w, rect.h);\n}\nfunction inflateRect(rect, amount, refRect = {}) {\n    const x = rect.x !== refRect.x ? -amount : 0;\n    const y = rect.y !== refRect.y ? -amount : 0;\n    const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\n    const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\n    return {\n        x: rect.x + x,\n        y: rect.y + y,\n        w: rect.w + w,\n        h: rect.h + h,\n        radius: rect.radius\n    };\n}\nclass BarElement extends Element {\n    static id = 'bar';\n static defaults = {\n        borderSkipped: 'start',\n        borderWidth: 0,\n        borderRadius: 0,\n        inflateAmount: 'auto',\n        pointStyle: undefined\n    };\n static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.horizontal = undefined;\n        this.base = undefined;\n        this.width = undefined;\n        this.height = undefined;\n        this.inflateAmount = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    draw(ctx) {\n        const { inflateAmount , options: { borderColor , backgroundColor  }  } = this;\n        const { inner , outer  } = boundingRects(this);\n        const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\n        ctx.save();\n        if (outer.w !== inner.w || outer.h !== inner.h) {\n            ctx.beginPath();\n            addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\n            ctx.clip();\n            addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\n            ctx.fillStyle = borderColor;\n            ctx.fill('evenodd');\n        }\n        ctx.beginPath();\n        addRectPath(ctx, inflateRect(inner, inflateAmount));\n        ctx.fillStyle = backgroundColor;\n        ctx.fill();\n        ctx.restore();\n    }\n    inRange(mouseX, mouseY, useFinalPosition) {\n        return inRange(this, mouseX, mouseY, useFinalPosition);\n    }\n    inXRange(mouseX, useFinalPosition) {\n        return inRange(this, mouseX, null, useFinalPosition);\n    }\n    inYRange(mouseY, useFinalPosition) {\n        return inRange(this, null, mouseY, useFinalPosition);\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y , base , horizontal  } =  this.getProps([\n            'x',\n            'y',\n            'base',\n            'horizontal'\n        ], useFinalPosition);\n        return {\n            x: horizontal ? (x + base) / 2 : x,\n            y: horizontal ? y : (y + base) / 2\n        };\n    }\n    getRange(axis) {\n        return axis === 'x' ? this.width / 2 : this.height / 2;\n    }\n}\n\nvar elements = /*#__PURE__*/Object.freeze({\n__proto__: null,\nArcElement: ArcElement,\nBarElement: BarElement,\nLineElement: LineElement,\nPointElement: PointElement\n});\n\nconst BORDER_COLORS = [\n    'rgb(54, 162, 235)',\n    'rgb(255, 99, 132)',\n    'rgb(255, 159, 64)',\n    'rgb(255, 205, 86)',\n    'rgb(75, 192, 192)',\n    'rgb(153, 102, 255)',\n    'rgb(201, 203, 207)' // grey\n];\n// Border colors with 50% transparency\nconst BACKGROUND_COLORS = /* #__PURE__ */ BORDER_COLORS.map((color)=>color.replace('rgb(', 'rgba(').replace(')', ', 0.5)'));\nfunction getBorderColor(i) {\n    return BORDER_COLORS[i % BORDER_COLORS.length];\n}\nfunction getBackgroundColor(i) {\n    return BACKGROUND_COLORS[i % BACKGROUND_COLORS.length];\n}\nfunction colorizeDefaultDataset(dataset, i) {\n    dataset.borderColor = getBorderColor(i);\n    dataset.backgroundColor = getBackgroundColor(i);\n    return ++i;\n}\nfunction colorizeDoughnutDataset(dataset, i) {\n    dataset.backgroundColor = dataset.data.map(()=>getBorderColor(i++));\n    return i;\n}\nfunction colorizePolarAreaDataset(dataset, i) {\n    dataset.backgroundColor = dataset.data.map(()=>getBackgroundColor(i++));\n    return i;\n}\nfunction getColorizer(chart) {\n    let i = 0;\n    return (dataset, datasetIndex)=>{\n        const controller = chart.getDatasetMeta(datasetIndex).controller;\n        if (controller instanceof DoughnutController) {\n            i = colorizeDoughnutDataset(dataset, i);\n        } else if (controller instanceof PolarAreaController) {\n            i = colorizePolarAreaDataset(dataset, i);\n        } else if (controller) {\n            i = colorizeDefaultDataset(dataset, i);\n        }\n    };\n}\nfunction containsColorsDefinitions(descriptors) {\n    let k;\n    for(k in descriptors){\n        if (descriptors[k].borderColor || descriptors[k].backgroundColor) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction containsColorsDefinition(descriptor) {\n    return descriptor && (descriptor.borderColor || descriptor.backgroundColor);\n}\nfunction containsDefaultColorsDefenitions() {\n    return defaults.borderColor !== 'rgba(0,0,0,0.1)' || defaults.backgroundColor !== 'rgba(0,0,0,0.1)';\n}\nvar plugin_colors = {\n    id: 'colors',\n    defaults: {\n        enabled: true,\n        forceOverride: false\n    },\n    beforeLayout (chart, _args, options) {\n        if (!options.enabled) {\n            return;\n        }\n        const { data: { datasets  } , options: chartOptions  } = chart.config;\n        const { elements  } = chartOptions;\n        const containsColorDefenition = containsColorsDefinitions(datasets) || containsColorsDefinition(chartOptions) || elements && containsColorsDefinitions(elements) || containsDefaultColorsDefenitions();\n        if (!options.forceOverride && containsColorDefenition) {\n            return;\n        }\n        const colorizer = getColorizer(chart);\n        datasets.forEach(colorizer);\n    }\n};\n\nfunction lttbDecimation(data, start, count, availableWidth, options) {\n const samples = options.samples || availableWidth;\n    if (samples >= count) {\n        return data.slice(start, start + count);\n    }\n    const decimated = [];\n    const bucketWidth = (count - 2) / (samples - 2);\n    let sampledIndex = 0;\n    const endIndex = start + count - 1;\n    let a = start;\n    let i, maxAreaPoint, maxArea, area, nextA;\n    decimated[sampledIndex++] = data[a];\n    for(i = 0; i < samples - 2; i++){\n        let avgX = 0;\n        let avgY = 0;\n        let j;\n        const avgRangeStart = Math.floor((i + 1) * bucketWidth) + 1 + start;\n        const avgRangeEnd = Math.min(Math.floor((i + 2) * bucketWidth) + 1, count) + start;\n        const avgRangeLength = avgRangeEnd - avgRangeStart;\n        for(j = avgRangeStart; j < avgRangeEnd; j++){\n            avgX += data[j].x;\n            avgY += data[j].y;\n        }\n        avgX /= avgRangeLength;\n        avgY /= avgRangeLength;\n        const rangeOffs = Math.floor(i * bucketWidth) + 1 + start;\n        const rangeTo = Math.min(Math.floor((i + 1) * bucketWidth) + 1, count) + start;\n        const { x: pointAx , y: pointAy  } = data[a];\n        maxArea = area = -1;\n        for(j = rangeOffs; j < rangeTo; j++){\n            area = 0.5 * Math.abs((pointAx - avgX) * (data[j].y - pointAy) - (pointAx - data[j].x) * (avgY - pointAy));\n            if (area > maxArea) {\n                maxArea = area;\n                maxAreaPoint = data[j];\n                nextA = j;\n            }\n        }\n        decimated[sampledIndex++] = maxAreaPoint;\n        a = nextA;\n    }\n    decimated[sampledIndex++] = data[endIndex];\n    return decimated;\n}\nfunction minMaxDecimation(data, start, count, availableWidth) {\n    let avgX = 0;\n    let countX = 0;\n    let i, point, x, y, prevX, minIndex, maxIndex, startIndex, minY, maxY;\n    const decimated = [];\n    const endIndex = start + count - 1;\n    const xMin = data[start].x;\n    const xMax = data[endIndex].x;\n    const dx = xMax - xMin;\n    for(i = start; i < start + count; ++i){\n        point = data[i];\n        x = (point.x - xMin) / dx * availableWidth;\n        y = point.y;\n        const truncX = x | 0;\n        if (truncX === prevX) {\n            if (y < minY) {\n                minY = y;\n                minIndex = i;\n            } else if (y > maxY) {\n                maxY = y;\n                maxIndex = i;\n            }\n            avgX = (countX * avgX + point.x) / ++countX;\n        } else {\n            const lastIndex = i - 1;\n            if (!isNullOrUndef(minIndex) && !isNullOrUndef(maxIndex)) {\n                const intermediateIndex1 = Math.min(minIndex, maxIndex);\n                const intermediateIndex2 = Math.max(minIndex, maxIndex);\n                if (intermediateIndex1 !== startIndex && intermediateIndex1 !== lastIndex) {\n                    decimated.push({\n                        ...data[intermediateIndex1],\n                        x: avgX\n                    });\n                }\n                if (intermediateIndex2 !== startIndex && intermediateIndex2 !== lastIndex) {\n                    decimated.push({\n                        ...data[intermediateIndex2],\n                        x: avgX\n                    });\n                }\n            }\n            if (i > 0 && lastIndex !== startIndex) {\n                decimated.push(data[lastIndex]);\n            }\n            decimated.push(point);\n            prevX = truncX;\n            countX = 0;\n            minY = maxY = y;\n            minIndex = maxIndex = startIndex = i;\n        }\n    }\n    return decimated;\n}\nfunction cleanDecimatedDataset(dataset) {\n    if (dataset._decimated) {\n        const data = dataset._data;\n        delete dataset._decimated;\n        delete dataset._data;\n        Object.defineProperty(dataset, 'data', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: data\n        });\n    }\n}\nfunction cleanDecimatedData(chart) {\n    chart.data.datasets.forEach((dataset)=>{\n        cleanDecimatedDataset(dataset);\n    });\n}\nfunction getStartAndCountOfVisiblePointsSimplified(meta, points) {\n    const pointCount = points.length;\n    let start = 0;\n    let count;\n    const { iScale  } = meta;\n    const { min , max , minDefined , maxDefined  } = iScale.getUserBounds();\n    if (minDefined) {\n        start = _limitValue(_lookupByKey(points, iScale.axis, min).lo, 0, pointCount - 1);\n    }\n    if (maxDefined) {\n        count = _limitValue(_lookupByKey(points, iScale.axis, max).hi + 1, start, pointCount) - start;\n    } else {\n        count = pointCount - start;\n    }\n    return {\n        start,\n        count\n    };\n}\nvar plugin_decimation = {\n    id: 'decimation',\n    defaults: {\n        algorithm: 'min-max',\n        enabled: false\n    },\n    beforeElementsUpdate: (chart, args, options)=>{\n        if (!options.enabled) {\n            cleanDecimatedData(chart);\n            return;\n        }\n        const availableWidth = chart.width;\n        chart.data.datasets.forEach((dataset, datasetIndex)=>{\n            const { _data , indexAxis  } = dataset;\n            const meta = chart.getDatasetMeta(datasetIndex);\n            const data = _data || dataset.data;\n            if (resolve([\n                indexAxis,\n                chart.options.indexAxis\n            ]) === 'y') {\n                return;\n            }\n            if (!meta.controller.supportsDecimation) {\n                return;\n            }\n            const xAxis = chart.scales[meta.xAxisID];\n            if (xAxis.type !== 'linear' && xAxis.type !== 'time') {\n                return;\n            }\n            if (chart.options.parsing) {\n                return;\n            }\n            let { start , count  } = getStartAndCountOfVisiblePointsSimplified(meta, data);\n            const threshold = options.threshold || 4 * availableWidth;\n            if (count <= threshold) {\n                cleanDecimatedDataset(dataset);\n                return;\n            }\n            if (isNullOrUndef(_data)) {\n                dataset._data = data;\n                delete dataset.data;\n                Object.defineProperty(dataset, 'data', {\n                    configurable: true,\n                    enumerable: true,\n                    get: function() {\n                        return this._decimated;\n                    },\n                    set: function(d) {\n                        this._data = d;\n                    }\n                });\n            }\n            let decimated;\n            switch(options.algorithm){\n                case 'lttb':\n                    decimated = lttbDecimation(data, start, count, availableWidth, options);\n                    break;\n                case 'min-max':\n                    decimated = minMaxDecimation(data, start, count, availableWidth);\n                    break;\n                default:\n                    throw new Error(`Unsupported decimation algorithm '${options.algorithm}'`);\n            }\n            dataset._decimated = decimated;\n        });\n    },\n    destroy (chart) {\n        cleanDecimatedData(chart);\n    }\n};\n\nfunction _segments(line, target, property) {\n    const segments = line.segments;\n    const points = line.points;\n    const tpoints = target.points;\n    const parts = [];\n    for (const segment of segments){\n        let { start , end  } = segment;\n        end = _findSegmentEnd(start, end, points);\n        const bounds = _getBounds(property, points[start], points[end], segment.loop);\n        if (!target.segments) {\n            parts.push({\n                source: segment,\n                target: bounds,\n                start: points[start],\n                end: points[end]\n            });\n            continue;\n        }\n        const targetSegments = _boundSegments(target, bounds);\n        for (const tgt of targetSegments){\n            const subBounds = _getBounds(property, tpoints[tgt.start], tpoints[tgt.end], tgt.loop);\n            const fillSources = _boundSegment(segment, points, subBounds);\n            for (const fillSource of fillSources){\n                parts.push({\n                    source: fillSource,\n                    target: tgt,\n                    start: {\n                        [property]: _getEdge(bounds, subBounds, 'start', Math.max)\n                    },\n                    end: {\n                        [property]: _getEdge(bounds, subBounds, 'end', Math.min)\n                    }\n                });\n            }\n        }\n    }\n    return parts;\n}\nfunction _getBounds(property, first, last, loop) {\n    if (loop) {\n        return;\n    }\n    let start = first[property];\n    let end = last[property];\n    if (property === 'angle') {\n        start = _normalizeAngle(start);\n        end = _normalizeAngle(end);\n    }\n    return {\n        property,\n        start,\n        end\n    };\n}\nfunction _pointsFromSegments(boundary, line) {\n    const { x =null , y =null  } = boundary || {};\n    const linePoints = line.points;\n    const points = [];\n    line.segments.forEach(({ start , end  })=>{\n        end = _findSegmentEnd(start, end, linePoints);\n        const first = linePoints[start];\n        const last = linePoints[end];\n        if (y !== null) {\n            points.push({\n                x: first.x,\n                y\n            });\n            points.push({\n                x: last.x,\n                y\n            });\n        } else if (x !== null) {\n            points.push({\n                x,\n                y: first.y\n            });\n            points.push({\n                x,\n                y: last.y\n            });\n        }\n    });\n    return points;\n}\nfunction _findSegmentEnd(start, end, points) {\n    for(; end > start; end--){\n        const point = points[end];\n        if (!isNaN(point.x) && !isNaN(point.y)) {\n            break;\n        }\n    }\n    return end;\n}\nfunction _getEdge(a, b, prop, fn) {\n    if (a && b) {\n        return fn(a[prop], b[prop]);\n    }\n    return a ? a[prop] : b ? b[prop] : 0;\n}\n\nfunction _createBoundaryLine(boundary, line) {\n    let points = [];\n    let _loop = false;\n    if (isArray(boundary)) {\n        _loop = true;\n        points = boundary;\n    } else {\n        points = _pointsFromSegments(boundary, line);\n    }\n    return points.length ? new LineElement({\n        points,\n        options: {\n            tension: 0\n        },\n        _loop,\n        _fullLoop: _loop\n    }) : null;\n}\nfunction _shouldApplyFill(source) {\n    return source && source.fill !== false;\n}\n\nfunction _resolveTarget(sources, index, propagate) {\n    const source = sources[index];\n    let fill = source.fill;\n    const visited = [\n        index\n    ];\n    let target;\n    if (!propagate) {\n        return fill;\n    }\n    while(fill !== false && visited.indexOf(fill) === -1){\n        if (!isNumberFinite(fill)) {\n            return fill;\n        }\n        target = sources[fill];\n        if (!target) {\n            return false;\n        }\n        if (target.visible) {\n            return fill;\n        }\n        visited.push(fill);\n        fill = target.fill;\n    }\n    return false;\n}\n function _decodeFill(line, index, count) {\n     const fill = parseFillOption(line);\n    if (isObject(fill)) {\n        return isNaN(fill.value) ? false : fill;\n    }\n    let target = parseFloat(fill);\n    if (isNumberFinite(target) && Math.floor(target) === target) {\n        return decodeTargetIndex(fill[0], index, target, count);\n    }\n    return [\n        'origin',\n        'start',\n        'end',\n        'stack',\n        'shape'\n    ].indexOf(fill) >= 0 && fill;\n}\nfunction decodeTargetIndex(firstCh, index, target, count) {\n    if (firstCh === '-' || firstCh === '+') {\n        target = index + target;\n    }\n    if (target === index || target < 0 || target >= count) {\n        return false;\n    }\n    return target;\n}\n function _getTargetPixel(fill, scale) {\n    let pixel = null;\n    if (fill === 'start') {\n        pixel = scale.bottom;\n    } else if (fill === 'end') {\n        pixel = scale.top;\n    } else if (isObject(fill)) {\n        pixel = scale.getPixelForValue(fill.value);\n    } else if (scale.getBasePixel) {\n        pixel = scale.getBasePixel();\n    }\n    return pixel;\n}\n function _getTargetValue(fill, scale, startValue) {\n    let value;\n    if (fill === 'start') {\n        value = startValue;\n    } else if (fill === 'end') {\n        value = scale.options.reverse ? scale.min : scale.max;\n    } else if (isObject(fill)) {\n        value = fill.value;\n    } else {\n        value = scale.getBaseValue();\n    }\n    return value;\n}\n function parseFillOption(line) {\n    const options = line.options;\n    const fillOption = options.fill;\n    let fill = valueOrDefault(fillOption && fillOption.target, fillOption);\n    if (fill === undefined) {\n        fill = !!options.backgroundColor;\n    }\n    if (fill === false || fill === null) {\n        return false;\n    }\n    if (fill === true) {\n        return 'origin';\n    }\n    return fill;\n}\n\nfunction _buildStackLine(source) {\n    const { scale , index , line  } = source;\n    const points = [];\n    const segments = line.segments;\n    const sourcePoints = line.points;\n    const linesBelow = getLinesBelow(scale, index);\n    linesBelow.push(_createBoundaryLine({\n        x: null,\n        y: scale.bottom\n    }, line));\n    for(let i = 0; i < segments.length; i++){\n        const segment = segments[i];\n        for(let j = segment.start; j <= segment.end; j++){\n            addPointsBelow(points, sourcePoints[j], linesBelow);\n        }\n    }\n    return new LineElement({\n        points,\n        options: {}\n    });\n}\n function getLinesBelow(scale, index) {\n    const below = [];\n    const metas = scale.getMatchingVisibleMetas('line');\n    for(let i = 0; i < metas.length; i++){\n        const meta = metas[i];\n        if (meta.index === index) {\n            break;\n        }\n        if (!meta.hidden) {\n            below.unshift(meta.dataset);\n        }\n    }\n    return below;\n}\n function addPointsBelow(points, sourcePoint, linesBelow) {\n    const postponed = [];\n    for(let j = 0; j < linesBelow.length; j++){\n        const line = linesBelow[j];\n        const { first , last , point  } = findPoint(line, sourcePoint, 'x');\n        if (!point || first && last) {\n            continue;\n        }\n        if (first) {\n            postponed.unshift(point);\n        } else {\n            points.push(point);\n            if (!last) {\n                break;\n            }\n        }\n    }\n    points.push(...postponed);\n}\n function findPoint(line, sourcePoint, property) {\n    const point = line.interpolate(sourcePoint, property);\n    if (!point) {\n        return {};\n    }\n    const pointValue = point[property];\n    const segments = line.segments;\n    const linePoints = line.points;\n    let first = false;\n    let last = false;\n    for(let i = 0; i < segments.length; i++){\n        const segment = segments[i];\n        const firstValue = linePoints[segment.start][property];\n        const lastValue = linePoints[segment.end][property];\n        if (_isBetween(pointValue, firstValue, lastValue)) {\n            first = pointValue === firstValue;\n            last = pointValue === lastValue;\n            break;\n        }\n    }\n    return {\n        first,\n        last,\n        point\n    };\n}\n\nclass simpleArc {\n    constructor(opts){\n        this.x = opts.x;\n        this.y = opts.y;\n        this.radius = opts.radius;\n    }\n    pathSegment(ctx, bounds, opts) {\n        const { x , y , radius  } = this;\n        bounds = bounds || {\n            start: 0,\n            end: TAU\n        };\n        ctx.arc(x, y, radius, bounds.end, bounds.start, true);\n        return !opts.bounds;\n    }\n    interpolate(point) {\n        const { x , y , radius  } = this;\n        const angle = point.angle;\n        return {\n            x: x + Math.cos(angle) * radius,\n            y: y + Math.sin(angle) * radius,\n            angle\n        };\n    }\n}\n\nfunction _getTarget(source) {\n    const { chart , fill , line  } = source;\n    if (isNumberFinite(fill)) {\n        return getLineByIndex(chart, fill);\n    }\n    if (fill === 'stack') {\n        return _buildStackLine(source);\n    }\n    if (fill === 'shape') {\n        return true;\n    }\n    const boundary = computeBoundary(source);\n    if (boundary instanceof simpleArc) {\n        return boundary;\n    }\n    return _createBoundaryLine(boundary, line);\n}\n function getLineByIndex(chart, index) {\n    const meta = chart.getDatasetMeta(index);\n    const visible = meta && chart.isDatasetVisible(index);\n    return visible ? meta.dataset : null;\n}\nfunction computeBoundary(source) {\n    const scale = source.scale || {};\n    if (scale.getPointPositionForValue) {\n        return computeCircularBoundary(source);\n    }\n    return computeLinearBoundary(source);\n}\nfunction computeLinearBoundary(source) {\n    const { scale ={} , fill  } = source;\n    const pixel = _getTargetPixel(fill, scale);\n    if (isNumberFinite(pixel)) {\n        const horizontal = scale.isHorizontal();\n        return {\n            x: horizontal ? pixel : null,\n            y: horizontal ? null : pixel\n        };\n    }\n    return null;\n}\nfunction computeCircularBoundary(source) {\n    const { scale , fill  } = source;\n    const options = scale.options;\n    const length = scale.getLabels().length;\n    const start = options.reverse ? scale.max : scale.min;\n    const value = _getTargetValue(fill, scale, start);\n    const target = [];\n    if (options.grid.circular) {\n        const center = scale.getPointPositionForValue(0, start);\n        return new simpleArc({\n            x: center.x,\n            y: center.y,\n            radius: scale.getDistanceFromCenterForValue(value)\n        });\n    }\n    for(let i = 0; i < length; ++i){\n        target.push(scale.getPointPositionForValue(i, value));\n    }\n    return target;\n}\n\nfunction _drawfill(ctx, source, area) {\n    const target = _getTarget(source);\n    const { chart , index , line , scale , axis  } = source;\n    const lineOpts = line.options;\n    const fillOption = lineOpts.fill;\n    const color = lineOpts.backgroundColor;\n    const { above =color , below =color  } = fillOption || {};\n    const meta = chart.getDatasetMeta(index);\n    const clip = getDatasetClipArea(chart, meta);\n    if (target && line.points.length) {\n        clipArea(ctx, area);\n        doFill(ctx, {\n            line,\n            target,\n            above,\n            below,\n            area,\n            scale,\n            axis,\n            clip\n        });\n        unclipArea(ctx);\n    }\n}\nfunction doFill(ctx, cfg) {\n    const { line , target , above , below , area , scale , clip  } = cfg;\n    const property = line._loop ? 'angle' : cfg.axis;\n    ctx.save();\n    let fillColor = below;\n    if (below !== above) {\n        if (property === 'x') {\n            clipVertical(ctx, target, area.top);\n            fill(ctx, {\n                line,\n                target,\n                color: above,\n                scale,\n                property,\n                clip\n            });\n            ctx.restore();\n            ctx.save();\n            clipVertical(ctx, target, area.bottom);\n        } else if (property === 'y') {\n            clipHorizontal(ctx, target, area.left);\n            fill(ctx, {\n                line,\n                target,\n                color: below,\n                scale,\n                property,\n                clip\n            });\n            ctx.restore();\n            ctx.save();\n            clipHorizontal(ctx, target, area.right);\n            fillColor = above;\n        }\n    }\n    fill(ctx, {\n        line,\n        target,\n        color: fillColor,\n        scale,\n        property,\n        clip\n    });\n    ctx.restore();\n}\nfunction clipVertical(ctx, target, clipY) {\n    const { segments , points  } = target;\n    let first = true;\n    let lineLoop = false;\n    ctx.beginPath();\n    for (const segment of segments){\n        const { start , end  } = segment;\n        const firstPoint = points[start];\n        const lastPoint = points[_findSegmentEnd(start, end, points)];\n        if (first) {\n            ctx.moveTo(firstPoint.x, firstPoint.y);\n            first = false;\n        } else {\n            ctx.lineTo(firstPoint.x, clipY);\n            ctx.lineTo(firstPoint.x, firstPoint.y);\n        }\n        lineLoop = !!target.pathSegment(ctx, segment, {\n            move: lineLoop\n        });\n        if (lineLoop) {\n            ctx.closePath();\n        } else {\n            ctx.lineTo(lastPoint.x, clipY);\n        }\n    }\n    ctx.lineTo(target.first().x, clipY);\n    ctx.closePath();\n    ctx.clip();\n}\nfunction clipHorizontal(ctx, target, clipX) {\n    const { segments , points  } = target;\n    let first = true;\n    let lineLoop = false;\n    ctx.beginPath();\n    for (const segment of segments){\n        const { start , end  } = segment;\n        const firstPoint = points[start];\n        const lastPoint = points[_findSegmentEnd(start, end, points)];\n        if (first) {\n            ctx.moveTo(firstPoint.x, firstPoint.y);\n            first = false;\n        } else {\n            ctx.lineTo(clipX, firstPoint.y);\n            ctx.lineTo(firstPoint.x, firstPoint.y);\n        }\n        lineLoop = !!target.pathSegment(ctx, segment, {\n            move: lineLoop\n        });\n        if (lineLoop) {\n            ctx.closePath();\n        } else {\n            ctx.lineTo(clipX, lastPoint.y);\n        }\n    }\n    ctx.lineTo(clipX, target.first().y);\n    ctx.closePath();\n    ctx.clip();\n}\nfunction fill(ctx, cfg) {\n    const { line , target , property , color , scale , clip  } = cfg;\n    const segments = _segments(line, target, property);\n    for (const { source: src , target: tgt , start , end  } of segments){\n        const { style: { backgroundColor =color  } = {}  } = src;\n        const notShape = target !== true;\n        ctx.save();\n        ctx.fillStyle = backgroundColor;\n        clipBounds(ctx, scale, clip, notShape && _getBounds(property, start, end));\n        ctx.beginPath();\n        const lineLoop = !!line.pathSegment(ctx, src);\n        let loop;\n        if (notShape) {\n            if (lineLoop) {\n                ctx.closePath();\n            } else {\n                interpolatedLineTo(ctx, target, end, property);\n            }\n            const targetLoop = !!target.pathSegment(ctx, tgt, {\n                move: lineLoop,\n                reverse: true\n            });\n            loop = lineLoop && targetLoop;\n            if (!loop) {\n                interpolatedLineTo(ctx, target, start, property);\n            }\n        }\n        ctx.closePath();\n        ctx.fill(loop ? 'evenodd' : 'nonzero');\n        ctx.restore();\n    }\n}\nfunction clipBounds(ctx, scale, clip, bounds) {\n    const chartArea = scale.chart.chartArea;\n    const { property , start , end  } = bounds || {};\n    if (property === 'x' || property === 'y') {\n        let left, top, right, bottom;\n        if (property === 'x') {\n            left = start;\n            top = chartArea.top;\n            right = end;\n            bottom = chartArea.bottom;\n        } else {\n            left = chartArea.left;\n            top = start;\n            right = chartArea.right;\n            bottom = end;\n        }\n        ctx.beginPath();\n        if (clip) {\n            left = Math.max(left, clip.left);\n            right = Math.min(right, clip.right);\n            top = Math.max(top, clip.top);\n            bottom = Math.min(bottom, clip.bottom);\n        }\n        ctx.rect(left, top, right - left, bottom - top);\n        ctx.clip();\n    }\n}\nfunction interpolatedLineTo(ctx, target, point, property) {\n    const interpolatedPoint = target.interpolate(point, property);\n    if (interpolatedPoint) {\n        ctx.lineTo(interpolatedPoint.x, interpolatedPoint.y);\n    }\n}\n\nvar index = {\n    id: 'filler',\n    afterDatasetsUpdate (chart, _args, options) {\n        const count = (chart.data.datasets || []).length;\n        const sources = [];\n        let meta, i, line, source;\n        for(i = 0; i < count; ++i){\n            meta = chart.getDatasetMeta(i);\n            line = meta.dataset;\n            source = null;\n            if (line && line.options && line instanceof LineElement) {\n                source = {\n                    visible: chart.isDatasetVisible(i),\n                    index: i,\n                    fill: _decodeFill(line, i, count),\n                    chart,\n                    axis: meta.controller.options.indexAxis,\n                    scale: meta.vScale,\n                    line\n                };\n            }\n            meta.$filler = source;\n            sources.push(source);\n        }\n        for(i = 0; i < count; ++i){\n            source = sources[i];\n            if (!source || source.fill === false) {\n                continue;\n            }\n            source.fill = _resolveTarget(sources, i, options.propagate);\n        }\n    },\n    beforeDraw (chart, _args, options) {\n        const draw = options.drawTime === 'beforeDraw';\n        const metasets = chart.getSortedVisibleDatasetMetas();\n        const area = chart.chartArea;\n        for(let i = metasets.length - 1; i >= 0; --i){\n            const source = metasets[i].$filler;\n            if (!source) {\n                continue;\n            }\n            source.line.updateControlPoints(area, source.axis);\n            if (draw && source.fill) {\n                _drawfill(chart.ctx, source, area);\n            }\n        }\n    },\n    beforeDatasetsDraw (chart, _args, options) {\n        if (options.drawTime !== 'beforeDatasetsDraw') {\n            return;\n        }\n        const metasets = chart.getSortedVisibleDatasetMetas();\n        for(let i = metasets.length - 1; i >= 0; --i){\n            const source = metasets[i].$filler;\n            if (_shouldApplyFill(source)) {\n                _drawfill(chart.ctx, source, chart.chartArea);\n            }\n        }\n    },\n    beforeDatasetDraw (chart, args, options) {\n        const source = args.meta.$filler;\n        if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {\n            return;\n        }\n        _drawfill(chart.ctx, source, chart.chartArea);\n    },\n    defaults: {\n        propagate: true,\n        drawTime: 'beforeDatasetDraw'\n    }\n};\n\nconst getBoxSize = (labelOpts, fontSize)=>{\n    let { boxHeight =fontSize , boxWidth =fontSize  } = labelOpts;\n    if (labelOpts.usePointStyle) {\n        boxHeight = Math.min(boxHeight, fontSize);\n        boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);\n    }\n    return {\n        boxWidth,\n        boxHeight,\n        itemHeight: Math.max(fontSize, boxHeight)\n    };\n};\nconst itemsEqual = (a, b)=>a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;\nclass Legend extends Element {\n constructor(config){\n        super();\n        this._added = false;\n        this.legendHitBoxes = [];\n this._hoveredItem = null;\n        this.doughnutMode = false;\n        this.chart = config.chart;\n        this.options = config.options;\n        this.ctx = config.ctx;\n        this.legendItems = undefined;\n        this.columnSizes = undefined;\n        this.lineWidths = undefined;\n        this.maxHeight = undefined;\n        this.maxWidth = undefined;\n        this.top = undefined;\n        this.bottom = undefined;\n        this.left = undefined;\n        this.right = undefined;\n        this.height = undefined;\n        this.width = undefined;\n        this._margins = undefined;\n        this.position = undefined;\n        this.weight = undefined;\n        this.fullSize = undefined;\n    }\n    update(maxWidth, maxHeight, margins) {\n        this.maxWidth = maxWidth;\n        this.maxHeight = maxHeight;\n        this._margins = margins;\n        this.setDimensions();\n        this.buildLabels();\n        this.fit();\n    }\n    setDimensions() {\n        if (this.isHorizontal()) {\n            this.width = this.maxWidth;\n            this.left = this._margins.left;\n            this.right = this.width;\n        } else {\n            this.height = this.maxHeight;\n            this.top = this._margins.top;\n            this.bottom = this.height;\n        }\n    }\n    buildLabels() {\n        const labelOpts = this.options.labels || {};\n        let legendItems = callback(labelOpts.generateLabels, [\n            this.chart\n        ], this) || [];\n        if (labelOpts.filter) {\n            legendItems = legendItems.filter((item)=>labelOpts.filter(item, this.chart.data));\n        }\n        if (labelOpts.sort) {\n            legendItems = legendItems.sort((a, b)=>labelOpts.sort(a, b, this.chart.data));\n        }\n        if (this.options.reverse) {\n            legendItems.reverse();\n        }\n        this.legendItems = legendItems;\n    }\n    fit() {\n        const { options , ctx  } = this;\n        if (!options.display) {\n            this.width = this.height = 0;\n            return;\n        }\n        const labelOpts = options.labels;\n        const labelFont = toFont(labelOpts.font);\n        const fontSize = labelFont.size;\n        const titleHeight = this._computeTitleHeight();\n        const { boxWidth , itemHeight  } = getBoxSize(labelOpts, fontSize);\n        let width, height;\n        ctx.font = labelFont.string;\n        if (this.isHorizontal()) {\n            width = this.maxWidth;\n            height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;\n        } else {\n            height = this.maxHeight;\n            width = this._fitCols(titleHeight, labelFont, boxWidth, itemHeight) + 10;\n        }\n        this.width = Math.min(width, options.maxWidth || this.maxWidth);\n        this.height = Math.min(height, options.maxHeight || this.maxHeight);\n    }\n _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {\n        const { ctx , maxWidth , options: { labels: { padding  }  }  } = this;\n        const hitboxes = this.legendHitBoxes = [];\n        const lineWidths = this.lineWidths = [\n            0\n        ];\n        const lineHeight = itemHeight + padding;\n        let totalHeight = titleHeight;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'middle';\n        let row = -1;\n        let top = -lineHeight;\n        this.legendItems.forEach((legendItem, i)=>{\n            const itemWidth = boxWidth + fontSize / 2 + ctx.measureText(legendItem.text).width;\n            if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {\n                totalHeight += lineHeight;\n                lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\n                top += lineHeight;\n                row++;\n            }\n            hitboxes[i] = {\n                left: 0,\n                top,\n                row,\n                width: itemWidth,\n                height: itemHeight\n            };\n            lineWidths[lineWidths.length - 1] += itemWidth + padding;\n        });\n        return totalHeight;\n    }\n    _fitCols(titleHeight, labelFont, boxWidth, _itemHeight) {\n        const { ctx , maxHeight , options: { labels: { padding  }  }  } = this;\n        const hitboxes = this.legendHitBoxes = [];\n        const columnSizes = this.columnSizes = [];\n        const heightLimit = maxHeight - titleHeight;\n        let totalWidth = padding;\n        let currentColWidth = 0;\n        let currentColHeight = 0;\n        let left = 0;\n        let col = 0;\n        this.legendItems.forEach((legendItem, i)=>{\n            const { itemWidth , itemHeight  } = calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight);\n            if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {\n                totalWidth += currentColWidth + padding;\n                columnSizes.push({\n                    width: currentColWidth,\n                    height: currentColHeight\n                });\n                left += currentColWidth + padding;\n                col++;\n                currentColWidth = currentColHeight = 0;\n            }\n            hitboxes[i] = {\n                left,\n                top: currentColHeight,\n                col,\n                width: itemWidth,\n                height: itemHeight\n            };\n            currentColWidth = Math.max(currentColWidth, itemWidth);\n            currentColHeight += itemHeight + padding;\n        });\n        totalWidth += currentColWidth;\n        columnSizes.push({\n            width: currentColWidth,\n            height: currentColHeight\n        });\n        return totalWidth;\n    }\n    adjustHitBoxes() {\n        if (!this.options.display) {\n            return;\n        }\n        const titleHeight = this._computeTitleHeight();\n        const { legendHitBoxes: hitboxes , options: { align , labels: { padding  } , rtl  }  } = this;\n        const rtlHelper = getRtlAdapter(rtl, this.left, this.width);\n        if (this.isHorizontal()) {\n            let row = 0;\n            let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n            for (const hitbox of hitboxes){\n                if (row !== hitbox.row) {\n                    row = hitbox.row;\n                    left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n                }\n                hitbox.top += this.top + titleHeight + padding;\n                hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);\n                left += hitbox.width + padding;\n            }\n        } else {\n            let col = 0;\n            let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n            for (const hitbox of hitboxes){\n                if (hitbox.col !== col) {\n                    col = hitbox.col;\n                    top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n                }\n                hitbox.top = top;\n                hitbox.left += this.left + padding;\n                hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox.left), hitbox.width);\n                top += hitbox.height + padding;\n            }\n        }\n    }\n    isHorizontal() {\n        return this.options.position === 'top' || this.options.position === 'bottom';\n    }\n    draw() {\n        if (this.options.display) {\n            const ctx = this.ctx;\n            clipArea(ctx, this);\n            this._draw();\n            unclipArea(ctx);\n        }\n    }\n _draw() {\n        const { options: opts , columnSizes , lineWidths , ctx  } = this;\n        const { align , labels: labelOpts  } = opts;\n        const defaultColor = defaults.color;\n        const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n        const labelFont = toFont(labelOpts.font);\n        const { padding  } = labelOpts;\n        const fontSize = labelFont.size;\n        const halfFontSize = fontSize / 2;\n        let cursor;\n        this.drawTitle();\n        ctx.textAlign = rtlHelper.textAlign('left');\n        ctx.textBaseline = 'middle';\n        ctx.lineWidth = 0.5;\n        ctx.font = labelFont.string;\n        const { boxWidth , boxHeight , itemHeight  } = getBoxSize(labelOpts, fontSize);\n        const drawLegendBox = function(x, y, legendItem) {\n            if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {\n                return;\n            }\n            ctx.save();\n            const lineWidth = valueOrDefault(legendItem.lineWidth, 1);\n            ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\n            ctx.lineCap = valueOrDefault(legendItem.lineCap, 'butt');\n            ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);\n            ctx.lineJoin = valueOrDefault(legendItem.lineJoin, 'miter');\n            ctx.lineWidth = lineWidth;\n            ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\n            ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));\n            if (labelOpts.usePointStyle) {\n                const drawOptions = {\n                    radius: boxHeight * Math.SQRT2 / 2,\n                    pointStyle: legendItem.pointStyle,\n                    rotation: legendItem.rotation,\n                    borderWidth: lineWidth\n                };\n                const centerX = rtlHelper.xPlus(x, boxWidth / 2);\n                const centerY = y + halfFontSize;\n                drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);\n            } else {\n                const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);\n                const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);\n                const borderRadius = toTRBLCorners(legendItem.borderRadius);\n                ctx.beginPath();\n                if (Object.values(borderRadius).some((v)=>v !== 0)) {\n                    addRoundedRectPath(ctx, {\n                        x: xBoxLeft,\n                        y: yBoxTop,\n                        w: boxWidth,\n                        h: boxHeight,\n                        radius: borderRadius\n                    });\n                } else {\n                    ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);\n                }\n                ctx.fill();\n                if (lineWidth !== 0) {\n                    ctx.stroke();\n                }\n            }\n            ctx.restore();\n        };\n        const fillText = function(x, y, legendItem) {\n            renderText(ctx, legendItem.text, x, y + itemHeight / 2, labelFont, {\n                strikethrough: legendItem.hidden,\n                textAlign: rtlHelper.textAlign(legendItem.textAlign)\n            });\n        };\n        const isHorizontal = this.isHorizontal();\n        const titleHeight = this._computeTitleHeight();\n        if (isHorizontal) {\n            cursor = {\n                x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),\n                y: this.top + padding + titleHeight,\n                line: 0\n            };\n        } else {\n            cursor = {\n                x: this.left + padding,\n                y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),\n                line: 0\n            };\n        }\n        overrideTextDirection(this.ctx, opts.textDirection);\n        const lineHeight = itemHeight + padding;\n        this.legendItems.forEach((legendItem, i)=>{\n            ctx.strokeStyle = legendItem.fontColor;\n            ctx.fillStyle = legendItem.fontColor;\n            const textWidth = ctx.measureText(legendItem.text).width;\n            const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));\n            const width = boxWidth + halfFontSize + textWidth;\n            let x = cursor.x;\n            let y = cursor.y;\n            rtlHelper.setWidth(this.width);\n            if (isHorizontal) {\n                if (i > 0 && x + width + padding > this.right) {\n                    y = cursor.y += lineHeight;\n                    cursor.line++;\n                    x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);\n                }\n            } else if (i > 0 && y + lineHeight > this.bottom) {\n                x = cursor.x = x + columnSizes[cursor.line].width + padding;\n                cursor.line++;\n                y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);\n            }\n            const realX = rtlHelper.x(x);\n            drawLegendBox(realX, y, legendItem);\n            x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);\n            fillText(rtlHelper.x(x), y, legendItem);\n            if (isHorizontal) {\n                cursor.x += width + padding;\n            } else if (typeof legendItem.text !== 'string') {\n                const fontLineHeight = labelFont.lineHeight;\n                cursor.y += calculateLegendItemHeight(legendItem, fontLineHeight) + padding;\n            } else {\n                cursor.y += lineHeight;\n            }\n        });\n        restoreTextDirection(this.ctx, opts.textDirection);\n    }\n drawTitle() {\n        const opts = this.options;\n        const titleOpts = opts.title;\n        const titleFont = toFont(titleOpts.font);\n        const titlePadding = toPadding(titleOpts.padding);\n        if (!titleOpts.display) {\n            return;\n        }\n        const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n        const ctx = this.ctx;\n        const position = titleOpts.position;\n        const halfFontSize = titleFont.size / 2;\n        const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;\n        let y;\n        let left = this.left;\n        let maxWidth = this.width;\n        if (this.isHorizontal()) {\n            maxWidth = Math.max(...this.lineWidths);\n            y = this.top + topPaddingPlusHalfFontSize;\n            left = _alignStartEnd(opts.align, left, this.right - maxWidth);\n        } else {\n            const maxHeight = this.columnSizes.reduce((acc, size)=>Math.max(acc, size.height), 0);\n            y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());\n        }\n        const x = _alignStartEnd(position, left, left + maxWidth);\n        ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));\n        ctx.textBaseline = 'middle';\n        ctx.strokeStyle = titleOpts.color;\n        ctx.fillStyle = titleOpts.color;\n        ctx.font = titleFont.string;\n        renderText(ctx, titleOpts.text, x, y, titleFont);\n    }\n _computeTitleHeight() {\n        const titleOpts = this.options.title;\n        const titleFont = toFont(titleOpts.font);\n        const titlePadding = toPadding(titleOpts.padding);\n        return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;\n    }\n _getLegendItemAt(x, y) {\n        let i, hitBox, lh;\n        if (_isBetween(x, this.left, this.right) && _isBetween(y, this.top, this.bottom)) {\n            lh = this.legendHitBoxes;\n            for(i = 0; i < lh.length; ++i){\n                hitBox = lh[i];\n                if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width) && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {\n                    return this.legendItems[i];\n                }\n            }\n        }\n        return null;\n    }\n handleEvent(e) {\n        const opts = this.options;\n        if (!isListened(e.type, opts)) {\n            return;\n        }\n        const hoveredItem = this._getLegendItemAt(e.x, e.y);\n        if (e.type === 'mousemove' || e.type === 'mouseout') {\n            const previous = this._hoveredItem;\n            const sameItem = itemsEqual(previous, hoveredItem);\n            if (previous && !sameItem) {\n                callback(opts.onLeave, [\n                    e,\n                    previous,\n                    this\n                ], this);\n            }\n            this._hoveredItem = hoveredItem;\n            if (hoveredItem && !sameItem) {\n                callback(opts.onHover, [\n                    e,\n                    hoveredItem,\n                    this\n                ], this);\n            }\n        } else if (hoveredItem) {\n            callback(opts.onClick, [\n                e,\n                hoveredItem,\n                this\n            ], this);\n        }\n    }\n}\nfunction calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight) {\n    const itemWidth = calculateItemWidth(legendItem, boxWidth, labelFont, ctx);\n    const itemHeight = calculateItemHeight(_itemHeight, legendItem, labelFont.lineHeight);\n    return {\n        itemWidth,\n        itemHeight\n    };\n}\nfunction calculateItemWidth(legendItem, boxWidth, labelFont, ctx) {\n    let legendItemText = legendItem.text;\n    if (legendItemText && typeof legendItemText !== 'string') {\n        legendItemText = legendItemText.reduce((a, b)=>a.length > b.length ? a : b);\n    }\n    return boxWidth + labelFont.size / 2 + ctx.measureText(legendItemText).width;\n}\nfunction calculateItemHeight(_itemHeight, legendItem, fontLineHeight) {\n    let itemHeight = _itemHeight;\n    if (typeof legendItem.text !== 'string') {\n        itemHeight = calculateLegendItemHeight(legendItem, fontLineHeight);\n    }\n    return itemHeight;\n}\nfunction calculateLegendItemHeight(legendItem, fontLineHeight) {\n    const labelHeight = legendItem.text ? legendItem.text.length : 0;\n    return fontLineHeight * labelHeight;\n}\nfunction isListened(type, opts) {\n    if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {\n        return true;\n    }\n    if (opts.onClick && (type === 'click' || type === 'mouseup')) {\n        return true;\n    }\n    return false;\n}\nvar plugin_legend = {\n    id: 'legend',\n _element: Legend,\n    start (chart, _args, options) {\n        const legend = chart.legend = new Legend({\n            ctx: chart.ctx,\n            options,\n            chart\n        });\n        layouts.configure(chart, legend, options);\n        layouts.addBox(chart, legend);\n    },\n    stop (chart) {\n        layouts.removeBox(chart, chart.legend);\n        delete chart.legend;\n    },\n    beforeUpdate (chart, _args, options) {\n        const legend = chart.legend;\n        layouts.configure(chart, legend, options);\n        legend.options = options;\n    },\n    afterUpdate (chart) {\n        const legend = chart.legend;\n        legend.buildLabels();\n        legend.adjustHitBoxes();\n    },\n    afterEvent (chart, args) {\n        if (!args.replay) {\n            chart.legend.handleEvent(args.event);\n        }\n    },\n    defaults: {\n        display: true,\n        position: 'top',\n        align: 'center',\n        fullSize: true,\n        reverse: false,\n        weight: 1000,\n        onClick (e, legendItem, legend) {\n            const index = legendItem.datasetIndex;\n            const ci = legend.chart;\n            if (ci.isDatasetVisible(index)) {\n                ci.hide(index);\n                legendItem.hidden = true;\n            } else {\n                ci.show(index);\n                legendItem.hidden = false;\n            }\n        },\n        onHover: null,\n        onLeave: null,\n        labels: {\n            color: (ctx)=>ctx.chart.options.color,\n            boxWidth: 40,\n            padding: 10,\n            generateLabels (chart) {\n                const datasets = chart.data.datasets;\n                const { labels: { usePointStyle , pointStyle , textAlign , color , useBorderRadius , borderRadius  }  } = chart.legend.options;\n                return chart._getSortedDatasetMetas().map((meta)=>{\n                    const style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\n                    const borderWidth = toPadding(style.borderWidth);\n                    return {\n                        text: datasets[meta.index].label,\n                        fillStyle: style.backgroundColor,\n                        fontColor: color,\n                        hidden: !meta.visible,\n                        lineCap: style.borderCapStyle,\n                        lineDash: style.borderDash,\n                        lineDashOffset: style.borderDashOffset,\n                        lineJoin: style.borderJoinStyle,\n                        lineWidth: (borderWidth.width + borderWidth.height) / 4,\n                        strokeStyle: style.borderColor,\n                        pointStyle: pointStyle || style.pointStyle,\n                        rotation: style.rotation,\n                        textAlign: textAlign || style.textAlign,\n                        borderRadius: useBorderRadius && (borderRadius || style.borderRadius),\n                        datasetIndex: meta.index\n                    };\n                }, this);\n            }\n        },\n        title: {\n            color: (ctx)=>ctx.chart.options.color,\n            display: false,\n            position: 'center',\n            text: ''\n        }\n    },\n    descriptors: {\n        _scriptable: (name)=>!name.startsWith('on'),\n        labels: {\n            _scriptable: (name)=>![\n                    'generateLabels',\n                    'filter',\n                    'sort'\n                ].includes(name)\n        }\n    }\n};\n\nclass Title extends Element {\n constructor(config){\n        super();\n        this.chart = config.chart;\n        this.options = config.options;\n        this.ctx = config.ctx;\n        this._padding = undefined;\n        this.top = undefined;\n        this.bottom = undefined;\n        this.left = undefined;\n        this.right = undefined;\n        this.width = undefined;\n        this.height = undefined;\n        this.position = undefined;\n        this.weight = undefined;\n        this.fullSize = undefined;\n    }\n    update(maxWidth, maxHeight) {\n        const opts = this.options;\n        this.left = 0;\n        this.top = 0;\n        if (!opts.display) {\n            this.width = this.height = this.right = this.bottom = 0;\n            return;\n        }\n        this.width = this.right = maxWidth;\n        this.height = this.bottom = maxHeight;\n        const lineCount = isArray(opts.text) ? opts.text.length : 1;\n        this._padding = toPadding(opts.padding);\n        const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;\n        if (this.isHorizontal()) {\n            this.height = textSize;\n        } else {\n            this.width = textSize;\n        }\n    }\n    isHorizontal() {\n        const pos = this.options.position;\n        return pos === 'top' || pos === 'bottom';\n    }\n    _drawArgs(offset) {\n        const { top , left , bottom , right , options  } = this;\n        const align = options.align;\n        let rotation = 0;\n        let maxWidth, titleX, titleY;\n        if (this.isHorizontal()) {\n            titleX = _alignStartEnd(align, left, right);\n            titleY = top + offset;\n            maxWidth = right - left;\n        } else {\n            if (options.position === 'left') {\n                titleX = left + offset;\n                titleY = _alignStartEnd(align, bottom, top);\n                rotation = PI * -0.5;\n            } else {\n                titleX = right - offset;\n                titleY = _alignStartEnd(align, top, bottom);\n                rotation = PI * 0.5;\n            }\n            maxWidth = bottom - top;\n        }\n        return {\n            titleX,\n            titleY,\n            maxWidth,\n            rotation\n        };\n    }\n    draw() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        if (!opts.display) {\n            return;\n        }\n        const fontOpts = toFont(opts.font);\n        const lineHeight = fontOpts.lineHeight;\n        const offset = lineHeight / 2 + this._padding.top;\n        const { titleX , titleY , maxWidth , rotation  } = this._drawArgs(offset);\n        renderText(ctx, opts.text, 0, 0, fontOpts, {\n            color: opts.color,\n            maxWidth,\n            rotation,\n            textAlign: _toLeftRightCenter(opts.align),\n            textBaseline: 'middle',\n            translation: [\n                titleX,\n                titleY\n            ]\n        });\n    }\n}\nfunction createTitle(chart, titleOpts) {\n    const title = new Title({\n        ctx: chart.ctx,\n        options: titleOpts,\n        chart\n    });\n    layouts.configure(chart, title, titleOpts);\n    layouts.addBox(chart, title);\n    chart.titleBlock = title;\n}\nvar plugin_title = {\n    id: 'title',\n _element: Title,\n    start (chart, _args, options) {\n        createTitle(chart, options);\n    },\n    stop (chart) {\n        const titleBlock = chart.titleBlock;\n        layouts.removeBox(chart, titleBlock);\n        delete chart.titleBlock;\n    },\n    beforeUpdate (chart, _args, options) {\n        const title = chart.titleBlock;\n        layouts.configure(chart, title, options);\n        title.options = options;\n    },\n    defaults: {\n        align: 'center',\n        display: false,\n        font: {\n            weight: 'bold'\n        },\n        fullSize: true,\n        padding: 10,\n        position: 'top',\n        text: '',\n        weight: 2000\n    },\n    defaultRoutes: {\n        color: 'color'\n    },\n    descriptors: {\n        _scriptable: true,\n        _indexable: false\n    }\n};\n\nconst map = new WeakMap();\nvar plugin_subtitle = {\n    id: 'subtitle',\n    start (chart, _args, options) {\n        const title = new Title({\n            ctx: chart.ctx,\n            options,\n            chart\n        });\n        layouts.configure(chart, title, options);\n        layouts.addBox(chart, title);\n        map.set(chart, title);\n    },\n    stop (chart) {\n        layouts.removeBox(chart, map.get(chart));\n        map.delete(chart);\n    },\n    beforeUpdate (chart, _args, options) {\n        const title = map.get(chart);\n        layouts.configure(chart, title, options);\n        title.options = options;\n    },\n    defaults: {\n        align: 'center',\n        display: false,\n        font: {\n            weight: 'normal'\n        },\n        fullSize: true,\n        padding: 0,\n        position: 'top',\n        text: '',\n        weight: 1500\n    },\n    defaultRoutes: {\n        color: 'color'\n    },\n    descriptors: {\n        _scriptable: true,\n        _indexable: false\n    }\n};\n\nconst positioners = {\n average (items) {\n        if (!items.length) {\n            return false;\n        }\n        let i, len;\n        let xSet = new Set();\n        let y = 0;\n        let count = 0;\n        for(i = 0, len = items.length; i < len; ++i){\n            const el = items[i].element;\n            if (el && el.hasValue()) {\n                const pos = el.tooltipPosition();\n                xSet.add(pos.x);\n                y += pos.y;\n                ++count;\n            }\n        }\n        if (count === 0 || xSet.size === 0) {\n            return false;\n        }\n        const xAverage = [\n            ...xSet\n        ].reduce((a, b)=>a + b) / xSet.size;\n        return {\n            x: xAverage,\n            y: y / count\n        };\n    },\n nearest (items, eventPosition) {\n        if (!items.length) {\n            return false;\n        }\n        let x = eventPosition.x;\n        let y = eventPosition.y;\n        let minDistance = Number.POSITIVE_INFINITY;\n        let i, len, nearestElement;\n        for(i = 0, len = items.length; i < len; ++i){\n            const el = items[i].element;\n            if (el && el.hasValue()) {\n                const center = el.getCenterPoint();\n                const d = distanceBetweenPoints(eventPosition, center);\n                if (d < minDistance) {\n                    minDistance = d;\n                    nearestElement = el;\n                }\n            }\n        }\n        if (nearestElement) {\n            const tp = nearestElement.tooltipPosition();\n            x = tp.x;\n            y = tp.y;\n        }\n        return {\n            x,\n            y\n        };\n    }\n};\nfunction pushOrConcat(base, toPush) {\n    if (toPush) {\n        if (isArray(toPush)) {\n            Array.prototype.push.apply(base, toPush);\n        } else {\n            base.push(toPush);\n        }\n    }\n    return base;\n}\n function splitNewlines(str) {\n    if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n        return str.split('\\n');\n    }\n    return str;\n}\n function createTooltipItem(chart, item) {\n    const { element , datasetIndex , index  } = item;\n    const controller = chart.getDatasetMeta(datasetIndex).controller;\n    const { label , value  } = controller.getLabelAndValue(index);\n    return {\n        chart,\n        label,\n        parsed: controller.getParsed(index),\n        raw: chart.data.datasets[datasetIndex].data[index],\n        formattedValue: value,\n        dataset: controller.getDataset(),\n        dataIndex: index,\n        datasetIndex,\n        element\n    };\n}\n function getTooltipSize(tooltip, options) {\n    const ctx = tooltip.chart.ctx;\n    const { body , footer , title  } = tooltip;\n    const { boxWidth , boxHeight  } = options;\n    const bodyFont = toFont(options.bodyFont);\n    const titleFont = toFont(options.titleFont);\n    const footerFont = toFont(options.footerFont);\n    const titleLineCount = title.length;\n    const footerLineCount = footer.length;\n    const bodyLineItemCount = body.length;\n    const padding = toPadding(options.padding);\n    let height = padding.height;\n    let width = 0;\n    let combinedBodyLength = body.reduce((count, bodyItem)=>count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\n    combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\n    if (titleLineCount) {\n        height += titleLineCount * titleFont.lineHeight + (titleLineCount - 1) * options.titleSpacing + options.titleMarginBottom;\n    }\n    if (combinedBodyLength) {\n        const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\n        height += bodyLineItemCount * bodyLineHeight + (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight + (combinedBodyLength - 1) * options.bodySpacing;\n    }\n    if (footerLineCount) {\n        height += options.footerMarginTop + footerLineCount * footerFont.lineHeight + (footerLineCount - 1) * options.footerSpacing;\n    }\n    let widthPadding = 0;\n    const maxLineWidth = function(line) {\n        width = Math.max(width, ctx.measureText(line).width + widthPadding);\n    };\n    ctx.save();\n    ctx.font = titleFont.string;\n    each(tooltip.title, maxLineWidth);\n    ctx.font = bodyFont.string;\n    each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\n    widthPadding = options.displayColors ? boxWidth + 2 + options.boxPadding : 0;\n    each(body, (bodyItem)=>{\n        each(bodyItem.before, maxLineWidth);\n        each(bodyItem.lines, maxLineWidth);\n        each(bodyItem.after, maxLineWidth);\n    });\n    widthPadding = 0;\n    ctx.font = footerFont.string;\n    each(tooltip.footer, maxLineWidth);\n    ctx.restore();\n    width += padding.width;\n    return {\n        width,\n        height\n    };\n}\nfunction determineYAlign(chart, size) {\n    const { y , height  } = size;\n    if (y < height / 2) {\n        return 'top';\n    } else if (y > chart.height - height / 2) {\n        return 'bottom';\n    }\n    return 'center';\n}\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\n    const { x , width  } = size;\n    const caret = options.caretSize + options.caretPadding;\n    if (xAlign === 'left' && x + width + caret > chart.width) {\n        return true;\n    }\n    if (xAlign === 'right' && x - width - caret < 0) {\n        return true;\n    }\n}\nfunction determineXAlign(chart, options, size, yAlign) {\n    const { x , width  } = size;\n    const { width: chartWidth , chartArea: { left , right  }  } = chart;\n    let xAlign = 'center';\n    if (yAlign === 'center') {\n        xAlign = x <= (left + right) / 2 ? 'left' : 'right';\n    } else if (x <= width / 2) {\n        xAlign = 'left';\n    } else if (x >= chartWidth - width / 2) {\n        xAlign = 'right';\n    }\n    if (doesNotFitWithAlign(xAlign, chart, options, size)) {\n        xAlign = 'center';\n    }\n    return xAlign;\n}\n function determineAlignment(chart, options, size) {\n    const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\n    return {\n        xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\n        yAlign\n    };\n}\nfunction alignX(size, xAlign) {\n    let { x , width  } = size;\n    if (xAlign === 'right') {\n        x -= width;\n    } else if (xAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nfunction alignY(size, yAlign, paddingAndSize) {\n    let { y , height  } = size;\n    if (yAlign === 'top') {\n        y += paddingAndSize;\n    } else if (yAlign === 'bottom') {\n        y -= height + paddingAndSize;\n    } else {\n        y -= height / 2;\n    }\n    return y;\n}\n function getBackgroundPoint(options, size, alignment, chart) {\n    const { caretSize , caretPadding , cornerRadius  } = options;\n    const { xAlign , yAlign  } = alignment;\n    const paddingAndSize = caretSize + caretPadding;\n    const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(cornerRadius);\n    let x = alignX(size, xAlign);\n    const y = alignY(size, yAlign, paddingAndSize);\n    if (yAlign === 'center') {\n        if (xAlign === 'left') {\n            x += paddingAndSize;\n        } else if (xAlign === 'right') {\n            x -= paddingAndSize;\n        }\n    } else if (xAlign === 'left') {\n        x -= Math.max(topLeft, bottomLeft) + caretSize;\n    } else if (xAlign === 'right') {\n        x += Math.max(topRight, bottomRight) + caretSize;\n    }\n    return {\n        x: _limitValue(x, 0, chart.width - size.width),\n        y: _limitValue(y, 0, chart.height - size.height)\n    };\n}\nfunction getAlignedX(tooltip, align, options) {\n    const padding = toPadding(options.padding);\n    return align === 'center' ? tooltip.x + tooltip.width / 2 : align === 'right' ? tooltip.x + tooltip.width - padding.right : tooltip.x + padding.left;\n}\n function getBeforeAfterBodyLines(callback) {\n    return pushOrConcat([], splitNewlines(callback));\n}\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\n    return createContext(parent, {\n        tooltip,\n        tooltipItems,\n        type: 'tooltip'\n    });\n}\nfunction overrideCallbacks(callbacks, context) {\n    const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\n    return override ? callbacks.override(override) : callbacks;\n}\nconst defaultCallbacks = {\n    beforeTitle: noop,\n    title (tooltipItems) {\n        if (tooltipItems.length > 0) {\n            const item = tooltipItems[0];\n            const labels = item.chart.data.labels;\n            const labelCount = labels ? labels.length : 0;\n            if (this && this.options && this.options.mode === 'dataset') {\n                return item.dataset.label || '';\n            } else if (item.label) {\n                return item.label;\n            } else if (labelCount > 0 && item.dataIndex < labelCount) {\n                return labels[item.dataIndex];\n            }\n        }\n        return '';\n    },\n    afterTitle: noop,\n    beforeBody: noop,\n    beforeLabel: noop,\n    label (tooltipItem) {\n        if (this && this.options && this.options.mode === 'dataset') {\n            return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\n        }\n        let label = tooltipItem.dataset.label || '';\n        if (label) {\n            label += ': ';\n        }\n        const value = tooltipItem.formattedValue;\n        if (!isNullOrUndef(value)) {\n            label += value;\n        }\n        return label;\n    },\n    labelColor (tooltipItem) {\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\n        return {\n            borderColor: options.borderColor,\n            backgroundColor: options.backgroundColor,\n            borderWidth: options.borderWidth,\n            borderDash: options.borderDash,\n            borderDashOffset: options.borderDashOffset,\n            borderRadius: 0\n        };\n    },\n    labelTextColor () {\n        return this.options.bodyColor;\n    },\n    labelPointStyle (tooltipItem) {\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\n        return {\n            pointStyle: options.pointStyle,\n            rotation: options.rotation\n        };\n    },\n    afterLabel: noop,\n    afterBody: noop,\n    beforeFooter: noop,\n    footer: noop,\n    afterFooter: noop\n};\n function invokeCallbackWithFallback(callbacks, name, ctx, arg) {\n    const result = callbacks[name].call(ctx, arg);\n    if (typeof result === 'undefined') {\n        return defaultCallbacks[name].call(ctx, arg);\n    }\n    return result;\n}\nclass Tooltip extends Element {\n static positioners = positioners;\n    constructor(config){\n        super();\n        this.opacity = 0;\n        this._active = [];\n        this._eventPosition = undefined;\n        this._size = undefined;\n        this._cachedAnimations = undefined;\n        this._tooltipItems = [];\n        this.$animations = undefined;\n        this.$context = undefined;\n        this.chart = config.chart;\n        this.options = config.options;\n        this.dataPoints = undefined;\n        this.title = undefined;\n        this.beforeBody = undefined;\n        this.body = undefined;\n        this.afterBody = undefined;\n        this.footer = undefined;\n        this.xAlign = undefined;\n        this.yAlign = undefined;\n        this.x = undefined;\n        this.y = undefined;\n        this.height = undefined;\n        this.width = undefined;\n        this.caretX = undefined;\n        this.caretY = undefined;\n        this.labelColors = undefined;\n        this.labelPointStyles = undefined;\n        this.labelTextColors = undefined;\n    }\n    initialize(options) {\n        this.options = options;\n        this._cachedAnimations = undefined;\n        this.$context = undefined;\n    }\n _resolveAnimations() {\n        const cached = this._cachedAnimations;\n        if (cached) {\n            return cached;\n        }\n        const chart = this.chart;\n        const options = this.options.setContext(this.getContext());\n        const opts = options.enabled && chart.options.animation && options.animations;\n        const animations = new Animations(this.chart, opts);\n        if (opts._cacheable) {\n            this._cachedAnimations = Object.freeze(animations);\n        }\n        return animations;\n    }\n getContext() {\n        return this.$context || (this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\n    }\n    getTitle(context, options) {\n        const { callbacks  } = options;\n        const beforeTitle = invokeCallbackWithFallback(callbacks, 'beforeTitle', this, context);\n        const title = invokeCallbackWithFallback(callbacks, 'title', this, context);\n        const afterTitle = invokeCallbackWithFallback(callbacks, 'afterTitle', this, context);\n        let lines = [];\n        lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n        lines = pushOrConcat(lines, splitNewlines(title));\n        lines = pushOrConcat(lines, splitNewlines(afterTitle));\n        return lines;\n    }\n    getBeforeBody(tooltipItems, options) {\n        return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, 'beforeBody', this, tooltipItems));\n    }\n    getBody(tooltipItems, options) {\n        const { callbacks  } = options;\n        const bodyItems = [];\n        each(tooltipItems, (context)=>{\n            const bodyItem = {\n                before: [],\n                lines: [],\n                after: []\n            };\n            const scoped = overrideCallbacks(callbacks, context);\n            pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, 'beforeLabel', this, context)));\n            pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, 'label', this, context));\n            pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, 'afterLabel', this, context)));\n            bodyItems.push(bodyItem);\n        });\n        return bodyItems;\n    }\n    getAfterBody(tooltipItems, options) {\n        return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, 'afterBody', this, tooltipItems));\n    }\n    getFooter(tooltipItems, options) {\n        const { callbacks  } = options;\n        const beforeFooter = invokeCallbackWithFallback(callbacks, 'beforeFooter', this, tooltipItems);\n        const footer = invokeCallbackWithFallback(callbacks, 'footer', this, tooltipItems);\n        const afterFooter = invokeCallbackWithFallback(callbacks, 'afterFooter', this, tooltipItems);\n        let lines = [];\n        lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n        lines = pushOrConcat(lines, splitNewlines(footer));\n        lines = pushOrConcat(lines, splitNewlines(afterFooter));\n        return lines;\n    }\n _createItems(options) {\n        const active = this._active;\n        const data = this.chart.data;\n        const labelColors = [];\n        const labelPointStyles = [];\n        const labelTextColors = [];\n        let tooltipItems = [];\n        let i, len;\n        for(i = 0, len = active.length; i < len; ++i){\n            tooltipItems.push(createTooltipItem(this.chart, active[i]));\n        }\n        if (options.filter) {\n            tooltipItems = tooltipItems.filter((element, index, array)=>options.filter(element, index, array, data));\n        }\n        if (options.itemSort) {\n            tooltipItems = tooltipItems.sort((a, b)=>options.itemSort(a, b, data));\n        }\n        each(tooltipItems, (context)=>{\n            const scoped = overrideCallbacks(options.callbacks, context);\n            labelColors.push(invokeCallbackWithFallback(scoped, 'labelColor', this, context));\n            labelPointStyles.push(invokeCallbackWithFallback(scoped, 'labelPointStyle', this, context));\n            labelTextColors.push(invokeCallbackWithFallback(scoped, 'labelTextColor', this, context));\n        });\n        this.labelColors = labelColors;\n        this.labelPointStyles = labelPointStyles;\n        this.labelTextColors = labelTextColors;\n        this.dataPoints = tooltipItems;\n        return tooltipItems;\n    }\n    update(changed, replay) {\n        const options = this.options.setContext(this.getContext());\n        const active = this._active;\n        let properties;\n        let tooltipItems = [];\n        if (!active.length) {\n            if (this.opacity !== 0) {\n                properties = {\n                    opacity: 0\n                };\n            }\n        } else {\n            const position = positioners[options.position].call(this, active, this._eventPosition);\n            tooltipItems = this._createItems(options);\n            this.title = this.getTitle(tooltipItems, options);\n            this.beforeBody = this.getBeforeBody(tooltipItems, options);\n            this.body = this.getBody(tooltipItems, options);\n            this.afterBody = this.getAfterBody(tooltipItems, options);\n            this.footer = this.getFooter(tooltipItems, options);\n            const size = this._size = getTooltipSize(this, options);\n            const positionAndSize = Object.assign({}, position, size);\n            const alignment = determineAlignment(this.chart, options, positionAndSize);\n            const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\n            this.xAlign = alignment.xAlign;\n            this.yAlign = alignment.yAlign;\n            properties = {\n                opacity: 1,\n                x: backgroundPoint.x,\n                y: backgroundPoint.y,\n                width: size.width,\n                height: size.height,\n                caretX: position.x,\n                caretY: position.y\n            };\n        }\n        this._tooltipItems = tooltipItems;\n        this.$context = undefined;\n        if (properties) {\n            this._resolveAnimations().update(this, properties);\n        }\n        if (changed && options.external) {\n            options.external.call(this, {\n                chart: this.chart,\n                tooltip: this,\n                replay\n            });\n        }\n    }\n    drawCaret(tooltipPoint, ctx, size, options) {\n        const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\n        ctx.lineTo(caretPosition.x1, caretPosition.y1);\n        ctx.lineTo(caretPosition.x2, caretPosition.y2);\n        ctx.lineTo(caretPosition.x3, caretPosition.y3);\n    }\n    getCaretPosition(tooltipPoint, size, options) {\n        const { xAlign , yAlign  } = this;\n        const { caretSize , cornerRadius  } = options;\n        const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(cornerRadius);\n        const { x: ptX , y: ptY  } = tooltipPoint;\n        const { width , height  } = size;\n        let x1, x2, x3, y1, y2, y3;\n        if (yAlign === 'center') {\n            y2 = ptY + height / 2;\n            if (xAlign === 'left') {\n                x1 = ptX;\n                x2 = x1 - caretSize;\n                y1 = y2 + caretSize;\n                y3 = y2 - caretSize;\n            } else {\n                x1 = ptX + width;\n                x2 = x1 + caretSize;\n                y1 = y2 - caretSize;\n                y3 = y2 + caretSize;\n            }\n            x3 = x1;\n        } else {\n            if (xAlign === 'left') {\n                x2 = ptX + Math.max(topLeft, bottomLeft) + caretSize;\n            } else if (xAlign === 'right') {\n                x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\n            } else {\n                x2 = this.caretX;\n            }\n            if (yAlign === 'top') {\n                y1 = ptY;\n                y2 = y1 - caretSize;\n                x1 = x2 - caretSize;\n                x3 = x2 + caretSize;\n            } else {\n                y1 = ptY + height;\n                y2 = y1 + caretSize;\n                x1 = x2 + caretSize;\n                x3 = x2 - caretSize;\n            }\n            y3 = y1;\n        }\n        return {\n            x1,\n            x2,\n            x3,\n            y1,\n            y2,\n            y3\n        };\n    }\n    drawTitle(pt, ctx, options) {\n        const title = this.title;\n        const length = title.length;\n        let titleFont, titleSpacing, i;\n        if (length) {\n            const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n            pt.x = getAlignedX(this, options.titleAlign, options);\n            ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\n            ctx.textBaseline = 'middle';\n            titleFont = toFont(options.titleFont);\n            titleSpacing = options.titleSpacing;\n            ctx.fillStyle = options.titleColor;\n            ctx.font = titleFont.string;\n            for(i = 0; i < length; ++i){\n                ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\n                pt.y += titleFont.lineHeight + titleSpacing;\n                if (i + 1 === length) {\n                    pt.y += options.titleMarginBottom - titleSpacing;\n                }\n            }\n        }\n    }\n _drawColorBox(ctx, pt, i, rtlHelper, options) {\n        const labelColor = this.labelColors[i];\n        const labelPointStyle = this.labelPointStyles[i];\n        const { boxHeight , boxWidth  } = options;\n        const bodyFont = toFont(options.bodyFont);\n        const colorX = getAlignedX(this, 'left', options);\n        const rtlColorX = rtlHelper.x(colorX);\n        const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\n        const colorY = pt.y + yOffSet;\n        if (options.usePointStyle) {\n            const drawOptions = {\n                radius: Math.min(boxWidth, boxHeight) / 2,\n                pointStyle: labelPointStyle.pointStyle,\n                rotation: labelPointStyle.rotation,\n                borderWidth: 1\n            };\n            const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\n            const centerY = colorY + boxHeight / 2;\n            ctx.strokeStyle = options.multiKeyBackground;\n            ctx.fillStyle = options.multiKeyBackground;\n            drawPoint(ctx, drawOptions, centerX, centerY);\n            ctx.strokeStyle = labelColor.borderColor;\n            ctx.fillStyle = labelColor.backgroundColor;\n            drawPoint(ctx, drawOptions, centerX, centerY);\n        } else {\n            ctx.lineWidth = isObject(labelColor.borderWidth) ? Math.max(...Object.values(labelColor.borderWidth)) : labelColor.borderWidth || 1;\n            ctx.strokeStyle = labelColor.borderColor;\n            ctx.setLineDash(labelColor.borderDash || []);\n            ctx.lineDashOffset = labelColor.borderDashOffset || 0;\n            const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth);\n            const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - 2);\n            const borderRadius = toTRBLCorners(labelColor.borderRadius);\n            if (Object.values(borderRadius).some((v)=>v !== 0)) {\n                ctx.beginPath();\n                ctx.fillStyle = options.multiKeyBackground;\n                addRoundedRectPath(ctx, {\n                    x: outerX,\n                    y: colorY,\n                    w: boxWidth,\n                    h: boxHeight,\n                    radius: borderRadius\n                });\n                ctx.fill();\n                ctx.stroke();\n                ctx.fillStyle = labelColor.backgroundColor;\n                ctx.beginPath();\n                addRoundedRectPath(ctx, {\n                    x: innerX,\n                    y: colorY + 1,\n                    w: boxWidth - 2,\n                    h: boxHeight - 2,\n                    radius: borderRadius\n                });\n                ctx.fill();\n            } else {\n                ctx.fillStyle = options.multiKeyBackground;\n                ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\n                ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\n                ctx.fillStyle = labelColor.backgroundColor;\n                ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\n            }\n        }\n        ctx.fillStyle = this.labelTextColors[i];\n    }\n    drawBody(pt, ctx, options) {\n        const { body  } = this;\n        const { bodySpacing , bodyAlign , displayColors , boxHeight , boxWidth , boxPadding  } = options;\n        const bodyFont = toFont(options.bodyFont);\n        let bodyLineHeight = bodyFont.lineHeight;\n        let xLinePadding = 0;\n        const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n        const fillLineOfText = function(line) {\n            ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\n            pt.y += bodyLineHeight + bodySpacing;\n        };\n        const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\n        let bodyItem, textColor, lines, i, j, ilen, jlen;\n        ctx.textAlign = bodyAlign;\n        ctx.textBaseline = 'middle';\n        ctx.font = bodyFont.string;\n        pt.x = getAlignedX(this, bodyAlignForCalculation, options);\n        ctx.fillStyle = options.bodyColor;\n        each(this.beforeBody, fillLineOfText);\n        xLinePadding = displayColors && bodyAlignForCalculation !== 'right' ? bodyAlign === 'center' ? boxWidth / 2 + boxPadding : boxWidth + 2 + boxPadding : 0;\n        for(i = 0, ilen = body.length; i < ilen; ++i){\n            bodyItem = body[i];\n            textColor = this.labelTextColors[i];\n            ctx.fillStyle = textColor;\n            each(bodyItem.before, fillLineOfText);\n            lines = bodyItem.lines;\n            if (displayColors && lines.length) {\n                this._drawColorBox(ctx, pt, i, rtlHelper, options);\n                bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\n            }\n            for(j = 0, jlen = lines.length; j < jlen; ++j){\n                fillLineOfText(lines[j]);\n                bodyLineHeight = bodyFont.lineHeight;\n            }\n            each(bodyItem.after, fillLineOfText);\n        }\n        xLinePadding = 0;\n        bodyLineHeight = bodyFont.lineHeight;\n        each(this.afterBody, fillLineOfText);\n        pt.y -= bodySpacing;\n    }\n    drawFooter(pt, ctx, options) {\n        const footer = this.footer;\n        const length = footer.length;\n        let footerFont, i;\n        if (length) {\n            const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n            pt.x = getAlignedX(this, options.footerAlign, options);\n            pt.y += options.footerMarginTop;\n            ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\n            ctx.textBaseline = 'middle';\n            footerFont = toFont(options.footerFont);\n            ctx.fillStyle = options.footerColor;\n            ctx.font = footerFont.string;\n            for(i = 0; i < length; ++i){\n                ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\n                pt.y += footerFont.lineHeight + options.footerSpacing;\n            }\n        }\n    }\n    drawBackground(pt, ctx, tooltipSize, options) {\n        const { xAlign , yAlign  } = this;\n        const { x , y  } = pt;\n        const { width , height  } = tooltipSize;\n        const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(options.cornerRadius);\n        ctx.fillStyle = options.backgroundColor;\n        ctx.strokeStyle = options.borderColor;\n        ctx.lineWidth = options.borderWidth;\n        ctx.beginPath();\n        ctx.moveTo(x + topLeft, y);\n        if (yAlign === 'top') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + width - topRight, y);\n        ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\n        if (yAlign === 'center' && xAlign === 'right') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + width, y + height - bottomRight);\n        ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\n        if (yAlign === 'bottom') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + bottomLeft, y + height);\n        ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\n        if (yAlign === 'center' && xAlign === 'left') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x, y + topLeft);\n        ctx.quadraticCurveTo(x, y, x + topLeft, y);\n        ctx.closePath();\n        ctx.fill();\n        if (options.borderWidth > 0) {\n            ctx.stroke();\n        }\n    }\n _updateAnimationTarget(options) {\n        const chart = this.chart;\n        const anims = this.$animations;\n        const animX = anims && anims.x;\n        const animY = anims && anims.y;\n        if (animX || animY) {\n            const position = positioners[options.position].call(this, this._active, this._eventPosition);\n            if (!position) {\n                return;\n            }\n            const size = this._size = getTooltipSize(this, options);\n            const positionAndSize = Object.assign({}, position, this._size);\n            const alignment = determineAlignment(chart, options, positionAndSize);\n            const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\n            if (animX._to !== point.x || animY._to !== point.y) {\n                this.xAlign = alignment.xAlign;\n                this.yAlign = alignment.yAlign;\n                this.width = size.width;\n                this.height = size.height;\n                this.caretX = position.x;\n                this.caretY = position.y;\n                this._resolveAnimations().update(this, point);\n            }\n        }\n    }\n _willRender() {\n        return !!this.opacity;\n    }\n    draw(ctx) {\n        const options = this.options.setContext(this.getContext());\n        let opacity = this.opacity;\n        if (!opacity) {\n            return;\n        }\n        this._updateAnimationTarget(options);\n        const tooltipSize = {\n            width: this.width,\n            height: this.height\n        };\n        const pt = {\n            x: this.x,\n            y: this.y\n        };\n        opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\n        const padding = toPadding(options.padding);\n        const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\n        if (options.enabled && hasTooltipContent) {\n            ctx.save();\n            ctx.globalAlpha = opacity;\n            this.drawBackground(pt, ctx, tooltipSize, options);\n            overrideTextDirection(ctx, options.textDirection);\n            pt.y += padding.top;\n            this.drawTitle(pt, ctx, options);\n            this.drawBody(pt, ctx, options);\n            this.drawFooter(pt, ctx, options);\n            restoreTextDirection(ctx, options.textDirection);\n            ctx.restore();\n        }\n    }\n getActiveElements() {\n        return this._active || [];\n    }\n setActiveElements(activeElements, eventPosition) {\n        const lastActive = this._active;\n        const active = activeElements.map(({ datasetIndex , index  })=>{\n            const meta = this.chart.getDatasetMeta(datasetIndex);\n            if (!meta) {\n                throw new Error('Cannot find a dataset at index ' + datasetIndex);\n            }\n            return {\n                datasetIndex,\n                element: meta.data[index],\n                index\n            };\n        });\n        const changed = !_elementsEqual(lastActive, active);\n        const positionChanged = this._positionChanged(active, eventPosition);\n        if (changed || positionChanged) {\n            this._active = active;\n            this._eventPosition = eventPosition;\n            this._ignoreReplayEvents = true;\n            this.update(true);\n        }\n    }\n handleEvent(e, replay, inChartArea = true) {\n        if (replay && this._ignoreReplayEvents) {\n            return false;\n        }\n        this._ignoreReplayEvents = false;\n        const options = this.options;\n        const lastActive = this._active || [];\n        const active = this._getActiveElements(e, lastActive, replay, inChartArea);\n        const positionChanged = this._positionChanged(active, e);\n        const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\n        if (changed) {\n            this._active = active;\n            if (options.enabled || options.external) {\n                this._eventPosition = {\n                    x: e.x,\n                    y: e.y\n                };\n                this.update(true, replay);\n            }\n        }\n        return changed;\n    }\n _getActiveElements(e, lastActive, replay, inChartArea) {\n        const options = this.options;\n        if (e.type === 'mouseout') {\n            return [];\n        }\n        if (!inChartArea) {\n            return lastActive.filter((i)=>this.chart.data.datasets[i.datasetIndex] && this.chart.getDatasetMeta(i.datasetIndex).controller.getParsed(i.index) !== undefined);\n        }\n        const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\n        if (options.reverse) {\n            active.reverse();\n        }\n        return active;\n    }\n _positionChanged(active, e) {\n        const { caretX , caretY , options  } = this;\n        const position = positioners[options.position].call(this, active, e);\n        return position !== false && (caretX !== position.x || caretY !== position.y);\n    }\n}\nvar plugin_tooltip = {\n    id: 'tooltip',\n    _element: Tooltip,\n    positioners,\n    afterInit (chart, _args, options) {\n        if (options) {\n            chart.tooltip = new Tooltip({\n                chart,\n                options\n            });\n        }\n    },\n    beforeUpdate (chart, _args, options) {\n        if (chart.tooltip) {\n            chart.tooltip.initialize(options);\n        }\n    },\n    reset (chart, _args, options) {\n        if (chart.tooltip) {\n            chart.tooltip.initialize(options);\n        }\n    },\n    afterDraw (chart) {\n        const tooltip = chart.tooltip;\n        if (tooltip && tooltip._willRender()) {\n            const args = {\n                tooltip\n            };\n            if (chart.notifyPlugins('beforeTooltipDraw', {\n                ...args,\n                cancelable: true\n            }) === false) {\n                return;\n            }\n            tooltip.draw(chart.ctx);\n            chart.notifyPlugins('afterTooltipDraw', args);\n        }\n    },\n    afterEvent (chart, args) {\n        if (chart.tooltip) {\n            const useFinalPosition = args.replay;\n            if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\n                args.changed = true;\n            }\n        }\n    },\n    defaults: {\n        enabled: true,\n        external: null,\n        position: 'average',\n        backgroundColor: 'rgba(0,0,0,0.8)',\n        titleColor: '#fff',\n        titleFont: {\n            weight: 'bold'\n        },\n        titleSpacing: 2,\n        titleMarginBottom: 6,\n        titleAlign: 'left',\n        bodyColor: '#fff',\n        bodySpacing: 2,\n        bodyFont: {},\n        bodyAlign: 'left',\n        footerColor: '#fff',\n        footerSpacing: 2,\n        footerMarginTop: 6,\n        footerFont: {\n            weight: 'bold'\n        },\n        footerAlign: 'left',\n        padding: 6,\n        caretPadding: 2,\n        caretSize: 5,\n        cornerRadius: 6,\n        boxHeight: (ctx, opts)=>opts.bodyFont.size,\n        boxWidth: (ctx, opts)=>opts.bodyFont.size,\n        multiKeyBackground: '#fff',\n        displayColors: true,\n        boxPadding: 0,\n        borderColor: 'rgba(0,0,0,0)',\n        borderWidth: 0,\n        animation: {\n            duration: 400,\n            easing: 'easeOutQuart'\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'width',\n                    'height',\n                    'caretX',\n                    'caretY'\n                ]\n            },\n            opacity: {\n                easing: 'linear',\n                duration: 200\n            }\n        },\n        callbacks: defaultCallbacks\n    },\n    defaultRoutes: {\n        bodyFont: 'font',\n        footerFont: 'font',\n        titleFont: 'font'\n    },\n    descriptors: {\n        _scriptable: (name)=>name !== 'filter' && name !== 'itemSort' && name !== 'external',\n        _indexable: false,\n        callbacks: {\n            _scriptable: false,\n            _indexable: false\n        },\n        animation: {\n            _fallback: false\n        },\n        animations: {\n            _fallback: 'animation'\n        }\n    },\n    additionalOptionScopes: [\n        'interaction'\n    ]\n};\n\nvar plugins = /*#__PURE__*/Object.freeze({\n__proto__: null,\nColors: plugin_colors,\nDecimation: plugin_decimation,\nFiller: index,\nLegend: plugin_legend,\nSubTitle: plugin_subtitle,\nTitle: plugin_title,\nTooltip: plugin_tooltip\n});\n\nconst addIfString = (labels, raw, index, addedLabels)=>{\n    if (typeof raw === 'string') {\n        index = labels.push(raw) - 1;\n        addedLabels.unshift({\n            index,\n            label: raw\n        });\n    } else if (isNaN(raw)) {\n        index = null;\n    }\n    return index;\n};\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\n    const first = labels.indexOf(raw);\n    if (first === -1) {\n        return addIfString(labels, raw, index, addedLabels);\n    }\n    const last = labels.lastIndexOf(raw);\n    return first !== last ? index : first;\n}\nconst validIndex = (index, max)=>index === null ? null : _limitValue(Math.round(index), 0, max);\nfunction _getLabelForValue(value) {\n    const labels = this.getLabels();\n    if (value >= 0 && value < labels.length) {\n        return labels[value];\n    }\n    return value;\n}\nclass CategoryScale extends Scale {\n    static id = 'category';\n static defaults = {\n        ticks: {\n            callback: _getLabelForValue\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this._startValue = undefined;\n        this._valueRange = 0;\n        this._addedLabels = [];\n    }\n    init(scaleOptions) {\n        const added = this._addedLabels;\n        if (added.length) {\n            const labels = this.getLabels();\n            for (const { index , label  } of added){\n                if (labels[index] === label) {\n                    labels.splice(index, 1);\n                }\n            }\n            this._addedLabels = [];\n        }\n        super.init(scaleOptions);\n    }\n    parse(raw, index) {\n        if (isNullOrUndef(raw)) {\n            return null;\n        }\n        const labels = this.getLabels();\n        index = isFinite(index) && labels[index] === raw ? index : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\n        return validIndex(index, labels.length - 1);\n    }\n    determineDataLimits() {\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let { min , max  } = this.getMinMax(true);\n        if (this.options.bounds === 'ticks') {\n            if (!minDefined) {\n                min = 0;\n            }\n            if (!maxDefined) {\n                max = this.getLabels().length - 1;\n            }\n        }\n        this.min = min;\n        this.max = max;\n    }\n    buildTicks() {\n        const min = this.min;\n        const max = this.max;\n        const offset = this.options.offset;\n        const ticks = [];\n        let labels = this.getLabels();\n        labels = min === 0 && max === labels.length - 1 ? labels : labels.slice(min, max + 1);\n        this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\n        this._startValue = this.min - (offset ? 0.5 : 0);\n        for(let value = min; value <= max; value++){\n            ticks.push({\n                value\n            });\n        }\n        return ticks;\n    }\n    getLabelForValue(value) {\n        return _getLabelForValue.call(this, value);\n    }\n configure() {\n        super.configure();\n        if (!this.isHorizontal()) {\n            this._reversePixels = !this._reversePixels;\n        }\n    }\n    getPixelForValue(value) {\n        if (typeof value !== 'number') {\n            value = this.parse(value);\n        }\n        return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n    }\n    getPixelForTick(index) {\n        const ticks = this.ticks;\n        if (index < 0 || index > ticks.length - 1) {\n            return null;\n        }\n        return this.getPixelForValue(ticks[index].value);\n    }\n    getValueForPixel(pixel) {\n        return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\n    }\n    getBasePixel() {\n        return this.bottom;\n    }\n}\n\nfunction generateTicks$1(generationOptions, dataRange) {\n    const ticks = [];\n    const MIN_SPACING = 1e-14;\n    const { bounds , step , min , max , precision , count , maxTicks , maxDigits , includeBounds  } = generationOptions;\n    const unit = step || 1;\n    const maxSpaces = maxTicks - 1;\n    const { min: rmin , max: rmax  } = dataRange;\n    const minDefined = !isNullOrUndef(min);\n    const maxDefined = !isNullOrUndef(max);\n    const countDefined = !isNullOrUndef(count);\n    const minSpacing = (rmax - rmin) / (maxDigits + 1);\n    let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\n    let factor, niceMin, niceMax, numSpaces;\n    if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\n        return [\n            {\n                value: rmin\n            },\n            {\n                value: rmax\n            }\n        ];\n    }\n    numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\n    if (numSpaces > maxSpaces) {\n        spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\n    }\n    if (!isNullOrUndef(precision)) {\n        factor = Math.pow(10, precision);\n        spacing = Math.ceil(spacing * factor) / factor;\n    }\n    if (bounds === 'ticks') {\n        niceMin = Math.floor(rmin / spacing) * spacing;\n        niceMax = Math.ceil(rmax / spacing) * spacing;\n    } else {\n        niceMin = rmin;\n        niceMax = rmax;\n    }\n    if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\n        numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\n        spacing = (max - min) / numSpaces;\n        niceMin = min;\n        niceMax = max;\n    } else if (countDefined) {\n        niceMin = minDefined ? min : niceMin;\n        niceMax = maxDefined ? max : niceMax;\n        numSpaces = count - 1;\n        spacing = (niceMax - niceMin) / numSpaces;\n    } else {\n        numSpaces = (niceMax - niceMin) / spacing;\n        if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n            numSpaces = Math.round(numSpaces);\n        } else {\n            numSpaces = Math.ceil(numSpaces);\n        }\n    }\n    const decimalPlaces = Math.max(_decimalPlaces(spacing), _decimalPlaces(niceMin));\n    factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\n    niceMin = Math.round(niceMin * factor) / factor;\n    niceMax = Math.round(niceMax * factor) / factor;\n    let j = 0;\n    if (minDefined) {\n        if (includeBounds && niceMin !== min) {\n            ticks.push({\n                value: min\n            });\n            if (niceMin < min) {\n                j++;\n            }\n            if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\n                j++;\n            }\n        } else if (niceMin < min) {\n            j++;\n        }\n    }\n    for(; j < numSpaces; ++j){\n        const tickValue = Math.round((niceMin + j * spacing) * factor) / factor;\n        if (maxDefined && tickValue > max) {\n            break;\n        }\n        ticks.push({\n            value: tickValue\n        });\n    }\n    if (maxDefined && includeBounds && niceMax !== max) {\n        if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\n            ticks[ticks.length - 1].value = max;\n        } else {\n            ticks.push({\n                value: max\n            });\n        }\n    } else if (!maxDefined || niceMax === max) {\n        ticks.push({\n            value: niceMax\n        });\n    }\n    return ticks;\n}\nfunction relativeLabelSize(value, minSpacing, { horizontal , minRotation  }) {\n    const rad = toRadians(minRotation);\n    const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\n    const length = 0.75 * minSpacing * ('' + value).length;\n    return Math.min(minSpacing / ratio, length);\n}\nclass LinearScaleBase extends Scale {\n    constructor(cfg){\n        super(cfg);\n         this.start = undefined;\n         this.end = undefined;\n         this._startValue = undefined;\n         this._endValue = undefined;\n        this._valueRange = 0;\n    }\n    parse(raw, index) {\n        if (isNullOrUndef(raw)) {\n            return null;\n        }\n        if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\n            return null;\n        }\n        return +raw;\n    }\n    handleTickRangeOptions() {\n        const { beginAtZero  } = this.options;\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let { min , max  } = this;\n        const setMin = (v)=>min = minDefined ? min : v;\n        const setMax = (v)=>max = maxDefined ? max : v;\n        if (beginAtZero) {\n            const minSign = sign(min);\n            const maxSign = sign(max);\n            if (minSign < 0 && maxSign < 0) {\n                setMax(0);\n            } else if (minSign > 0 && maxSign > 0) {\n                setMin(0);\n            }\n        }\n        if (min === max) {\n            let offset = max === 0 ? 1 : Math.abs(max * 0.05);\n            setMax(max + offset);\n            if (!beginAtZero) {\n                setMin(min - offset);\n            }\n        }\n        this.min = min;\n        this.max = max;\n    }\n    getTickLimit() {\n        const tickOpts = this.options.ticks;\n        let { maxTicksLimit , stepSize  } = tickOpts;\n        let maxTicks;\n        if (stepSize) {\n            maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\n            if (maxTicks > 1000) {\n                console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\n                maxTicks = 1000;\n            }\n        } else {\n            maxTicks = this.computeTickLimit();\n            maxTicksLimit = maxTicksLimit || 11;\n        }\n        if (maxTicksLimit) {\n            maxTicks = Math.min(maxTicksLimit, maxTicks);\n        }\n        return maxTicks;\n    }\n computeTickLimit() {\n        return Number.POSITIVE_INFINITY;\n    }\n    buildTicks() {\n        const opts = this.options;\n        const tickOpts = opts.ticks;\n        let maxTicks = this.getTickLimit();\n        maxTicks = Math.max(2, maxTicks);\n        const numericGeneratorOptions = {\n            maxTicks,\n            bounds: opts.bounds,\n            min: opts.min,\n            max: opts.max,\n            precision: tickOpts.precision,\n            step: tickOpts.stepSize,\n            count: tickOpts.count,\n            maxDigits: this._maxDigits(),\n            horizontal: this.isHorizontal(),\n            minRotation: tickOpts.minRotation || 0,\n            includeBounds: tickOpts.includeBounds !== false\n        };\n        const dataRange = this._range || this;\n        const ticks = generateTicks$1(numericGeneratorOptions, dataRange);\n        if (opts.bounds === 'ticks') {\n            _setMinAndMaxByKey(ticks, this, 'value');\n        }\n        if (opts.reverse) {\n            ticks.reverse();\n            this.start = this.max;\n            this.end = this.min;\n        } else {\n            this.start = this.min;\n            this.end = this.max;\n        }\n        return ticks;\n    }\n configure() {\n        const ticks = this.ticks;\n        let start = this.min;\n        let end = this.max;\n        super.configure();\n        if (this.options.offset && ticks.length) {\n            const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\n            start -= offset;\n            end += offset;\n        }\n        this._startValue = start;\n        this._endValue = end;\n        this._valueRange = end - start;\n    }\n    getLabelForValue(value) {\n        return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n    }\n}\n\nclass LinearScale extends LinearScaleBase {\n    static id = 'linear';\n static defaults = {\n        ticks: {\n            callback: Ticks.formatters.numeric\n        }\n    };\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(true);\n        this.min = isNumberFinite(min) ? min : 0;\n        this.max = isNumberFinite(max) ? max : 1;\n        this.handleTickRangeOptions();\n    }\n computeTickLimit() {\n        const horizontal = this.isHorizontal();\n        const length = horizontal ? this.width : this.height;\n        const minRotation = toRadians(this.options.ticks.minRotation);\n        const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\n        const tickFont = this._resolveTickFontOptions(0);\n        return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\n    }\n    getPixelForValue(value) {\n        return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n    }\n    getValueForPixel(pixel) {\n        return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\n    }\n}\n\nconst log10Floor = (v)=>Math.floor(log10(v));\nconst changeExponent = (v, m)=>Math.pow(10, log10Floor(v) + m);\nfunction isMajor(tickVal) {\n    const remain = tickVal / Math.pow(10, log10Floor(tickVal));\n    return remain === 1;\n}\nfunction steps(min, max, rangeExp) {\n    const rangeStep = Math.pow(10, rangeExp);\n    const start = Math.floor(min / rangeStep);\n    const end = Math.ceil(max / rangeStep);\n    return end - start;\n}\nfunction startExp(min, max) {\n    const range = max - min;\n    let rangeExp = log10Floor(range);\n    while(steps(min, max, rangeExp) > 10){\n        rangeExp++;\n    }\n    while(steps(min, max, rangeExp) < 10){\n        rangeExp--;\n    }\n    return Math.min(rangeExp, log10Floor(min));\n}\n function generateTicks(generationOptions, { min , max  }) {\n    min = finiteOrDefault(generationOptions.min, min);\n    const ticks = [];\n    const minExp = log10Floor(min);\n    let exp = startExp(min, max);\n    let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\n    const stepSize = Math.pow(10, exp);\n    const base = minExp > exp ? Math.pow(10, minExp) : 0;\n    const start = Math.round((min - base) * precision) / precision;\n    const offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;\n    let significand = Math.floor((start - offset) / Math.pow(10, exp));\n    let value = finiteOrDefault(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);\n    while(value < max){\n        ticks.push({\n            value,\n            major: isMajor(value),\n            significand\n        });\n        if (significand >= 10) {\n            significand = significand < 15 ? 15 : 20;\n        } else {\n            significand++;\n        }\n        if (significand >= 20) {\n            exp++;\n            significand = 2;\n            precision = exp >= 0 ? 1 : precision;\n        }\n        value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;\n    }\n    const lastTick = finiteOrDefault(generationOptions.max, value);\n    ticks.push({\n        value: lastTick,\n        major: isMajor(lastTick),\n        significand\n    });\n    return ticks;\n}\nclass LogarithmicScale extends Scale {\n    static id = 'logarithmic';\n static defaults = {\n        ticks: {\n            callback: Ticks.formatters.logarithmic,\n            major: {\n                enabled: true\n            }\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this.start = undefined;\n         this.end = undefined;\n         this._startValue = undefined;\n        this._valueRange = 0;\n    }\n    parse(raw, index) {\n        const value = LinearScaleBase.prototype.parse.apply(this, [\n            raw,\n            index\n        ]);\n        if (value === 0) {\n            this._zero = true;\n            return undefined;\n        }\n        return isNumberFinite(value) && value > 0 ? value : null;\n    }\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(true);\n        this.min = isNumberFinite(min) ? Math.max(0, min) : null;\n        this.max = isNumberFinite(max) ? Math.max(0, max) : null;\n        if (this.options.beginAtZero) {\n            this._zero = true;\n        }\n        if (this._zero && this.min !== this._suggestedMin && !isNumberFinite(this._userMin)) {\n            this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);\n        }\n        this.handleTickRangeOptions();\n    }\n    handleTickRangeOptions() {\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let min = this.min;\n        let max = this.max;\n        const setMin = (v)=>min = minDefined ? min : v;\n        const setMax = (v)=>max = maxDefined ? max : v;\n        if (min === max) {\n            if (min <= 0) {\n                setMin(1);\n                setMax(10);\n            } else {\n                setMin(changeExponent(min, -1));\n                setMax(changeExponent(max, +1));\n            }\n        }\n        if (min <= 0) {\n            setMin(changeExponent(max, -1));\n        }\n        if (max <= 0) {\n            setMax(changeExponent(min, +1));\n        }\n        this.min = min;\n        this.max = max;\n    }\n    buildTicks() {\n        const opts = this.options;\n        const generationOptions = {\n            min: this._userMin,\n            max: this._userMax\n        };\n        const ticks = generateTicks(generationOptions, this);\n        if (opts.bounds === 'ticks') {\n            _setMinAndMaxByKey(ticks, this, 'value');\n        }\n        if (opts.reverse) {\n            ticks.reverse();\n            this.start = this.max;\n            this.end = this.min;\n        } else {\n            this.start = this.min;\n            this.end = this.max;\n        }\n        return ticks;\n    }\n getLabelForValue(value) {\n        return value === undefined ? '0' : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n    }\n configure() {\n        const start = this.min;\n        super.configure();\n        this._startValue = log10(start);\n        this._valueRange = log10(this.max) - log10(start);\n    }\n    getPixelForValue(value) {\n        if (value === undefined || value === 0) {\n            value = this.min;\n        }\n        if (value === null || isNaN(value)) {\n            return NaN;\n        }\n        return this.getPixelForDecimal(value === this.min ? 0 : (log10(value) - this._startValue) / this._valueRange);\n    }\n    getValueForPixel(pixel) {\n        const decimal = this.getDecimalForPixel(pixel);\n        return Math.pow(10, this._startValue + decimal * this._valueRange);\n    }\n}\n\nfunction getTickBackdropHeight(opts) {\n    const tickOpts = opts.ticks;\n    if (tickOpts.display && opts.display) {\n        const padding = toPadding(tickOpts.backdropPadding);\n        return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\n    }\n    return 0;\n}\nfunction measureLabelSize(ctx, font, label) {\n    label = isArray(label) ? label : [\n        label\n    ];\n    return {\n        w: _longestText(ctx, font.string, label),\n        h: label.length * font.lineHeight\n    };\n}\nfunction determineLimits(angle, pos, size, min, max) {\n    if (angle === min || angle === max) {\n        return {\n            start: pos - size / 2,\n            end: pos + size / 2\n        };\n    } else if (angle < min || angle > max) {\n        return {\n            start: pos - size,\n            end: pos\n        };\n    }\n    return {\n        start: pos,\n        end: pos + size\n    };\n}\n function fitWithPointLabels(scale) {\n    const orig = {\n        l: scale.left + scale._padding.left,\n        r: scale.right - scale._padding.right,\n        t: scale.top + scale._padding.top,\n        b: scale.bottom - scale._padding.bottom\n    };\n    const limits = Object.assign({}, orig);\n    const labelSizes = [];\n    const padding = [];\n    const valueCount = scale._pointLabels.length;\n    const pointLabelOpts = scale.options.pointLabels;\n    const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\n    for(let i = 0; i < valueCount; i++){\n        const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\n        padding[i] = opts.padding;\n        const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\n        const plFont = toFont(opts.font);\n        const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\n        labelSizes[i] = textSize;\n        const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\n        const angle = Math.round(toDegrees(angleRadians));\n        const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\n        const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\n        updateLimits(limits, orig, angleRadians, hLimits, vLimits);\n    }\n    scale.setCenterPoint(orig.l - limits.l, limits.r - orig.r, orig.t - limits.t, limits.b - orig.b);\n    scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\n}\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\n    const sin = Math.abs(Math.sin(angle));\n    const cos = Math.abs(Math.cos(angle));\n    let x = 0;\n    let y = 0;\n    if (hLimits.start < orig.l) {\n        x = (orig.l - hLimits.start) / sin;\n        limits.l = Math.min(limits.l, orig.l - x);\n    } else if (hLimits.end > orig.r) {\n        x = (hLimits.end - orig.r) / sin;\n        limits.r = Math.max(limits.r, orig.r + x);\n    }\n    if (vLimits.start < orig.t) {\n        y = (orig.t - vLimits.start) / cos;\n        limits.t = Math.min(limits.t, orig.t - y);\n    } else if (vLimits.end > orig.b) {\n        y = (vLimits.end - orig.b) / cos;\n        limits.b = Math.max(limits.b, orig.b + y);\n    }\n}\nfunction createPointLabelItem(scale, index, itemOpts) {\n    const outerDistance = scale.drawingArea;\n    const { extra , additionalAngle , padding , size  } = itemOpts;\n    const pointLabelPosition = scale.getPointPosition(index, outerDistance + extra + padding, additionalAngle);\n    const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\n    const y = yForAngle(pointLabelPosition.y, size.h, angle);\n    const textAlign = getTextAlignForAngle(angle);\n    const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\n    return {\n        visible: true,\n        x: pointLabelPosition.x,\n        y,\n        textAlign,\n        left,\n        top: y,\n        right: left + size.w,\n        bottom: y + size.h\n    };\n}\nfunction isNotOverlapped(item, area) {\n    if (!area) {\n        return true;\n    }\n    const { left , top , right , bottom  } = item;\n    const apexesInArea = _isPointInArea({\n        x: left,\n        y: top\n    }, area) || _isPointInArea({\n        x: left,\n        y: bottom\n    }, area) || _isPointInArea({\n        x: right,\n        y: top\n    }, area) || _isPointInArea({\n        x: right,\n        y: bottom\n    }, area);\n    return !apexesInArea;\n}\nfunction buildPointLabelItems(scale, labelSizes, padding) {\n    const items = [];\n    const valueCount = scale._pointLabels.length;\n    const opts = scale.options;\n    const { centerPointLabels , display  } = opts.pointLabels;\n    const itemOpts = {\n        extra: getTickBackdropHeight(opts) / 2,\n        additionalAngle: centerPointLabels ? PI / valueCount : 0\n    };\n    let area;\n    for(let i = 0; i < valueCount; i++){\n        itemOpts.padding = padding[i];\n        itemOpts.size = labelSizes[i];\n        const item = createPointLabelItem(scale, i, itemOpts);\n        items.push(item);\n        if (display === 'auto') {\n            item.visible = isNotOverlapped(item, area);\n            if (item.visible) {\n                area = item;\n            }\n        }\n    }\n    return items;\n}\nfunction getTextAlignForAngle(angle) {\n    if (angle === 0 || angle === 180) {\n        return 'center';\n    } else if (angle < 180) {\n        return 'left';\n    }\n    return 'right';\n}\nfunction leftForTextAlign(x, w, align) {\n    if (align === 'right') {\n        x -= w;\n    } else if (align === 'center') {\n        x -= w / 2;\n    }\n    return x;\n}\nfunction yForAngle(y, h, angle) {\n    if (angle === 90 || angle === 270) {\n        y -= h / 2;\n    } else if (angle > 270 || angle < 90) {\n        y -= h;\n    }\n    return y;\n}\nfunction drawPointLabelBox(ctx, opts, item) {\n    const { left , top , right , bottom  } = item;\n    const { backdropColor  } = opts;\n    if (!isNullOrUndef(backdropColor)) {\n        const borderRadius = toTRBLCorners(opts.borderRadius);\n        const padding = toPadding(opts.backdropPadding);\n        ctx.fillStyle = backdropColor;\n        const backdropLeft = left - padding.left;\n        const backdropTop = top - padding.top;\n        const backdropWidth = right - left + padding.width;\n        const backdropHeight = bottom - top + padding.height;\n        if (Object.values(borderRadius).some((v)=>v !== 0)) {\n            ctx.beginPath();\n            addRoundedRectPath(ctx, {\n                x: backdropLeft,\n                y: backdropTop,\n                w: backdropWidth,\n                h: backdropHeight,\n                radius: borderRadius\n            });\n            ctx.fill();\n        } else {\n            ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\n        }\n    }\n}\nfunction drawPointLabels(scale, labelCount) {\n    const { ctx , options: { pointLabels  }  } = scale;\n    for(let i = labelCount - 1; i >= 0; i--){\n        const item = scale._pointLabelItems[i];\n        if (!item.visible) {\n            continue;\n        }\n        const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\n        drawPointLabelBox(ctx, optsAtIndex, item);\n        const plFont = toFont(optsAtIndex.font);\n        const { x , y , textAlign  } = item;\n        renderText(ctx, scale._pointLabels[i], x, y + plFont.lineHeight / 2, plFont, {\n            color: optsAtIndex.color,\n            textAlign: textAlign,\n            textBaseline: 'middle'\n        });\n    }\n}\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\n    const { ctx  } = scale;\n    if (circular) {\n        ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\n    } else {\n        let pointPosition = scale.getPointPosition(0, radius);\n        ctx.moveTo(pointPosition.x, pointPosition.y);\n        for(let i = 1; i < labelCount; i++){\n            pointPosition = scale.getPointPosition(i, radius);\n            ctx.lineTo(pointPosition.x, pointPosition.y);\n        }\n    }\n}\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {\n    const ctx = scale.ctx;\n    const circular = gridLineOpts.circular;\n    const { color , lineWidth  } = gridLineOpts;\n    if (!circular && !labelCount || !color || !lineWidth || radius < 0) {\n        return;\n    }\n    ctx.save();\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.setLineDash(borderOpts.dash || []);\n    ctx.lineDashOffset = borderOpts.dashOffset;\n    ctx.beginPath();\n    pathRadiusLine(scale, radius, circular, labelCount);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.restore();\n}\nfunction createPointLabelContext(parent, index, label) {\n    return createContext(parent, {\n        label,\n        index,\n        type: 'pointLabel'\n    });\n}\nclass RadialLinearScale extends LinearScaleBase {\n    static id = 'radialLinear';\n static defaults = {\n        display: true,\n        animate: true,\n        position: 'chartArea',\n        angleLines: {\n            display: true,\n            lineWidth: 1,\n            borderDash: [],\n            borderDashOffset: 0.0\n        },\n        grid: {\n            circular: false\n        },\n        startAngle: 0,\n        ticks: {\n            showLabelBackdrop: true,\n            callback: Ticks.formatters.numeric\n        },\n        pointLabels: {\n            backdropColor: undefined,\n            backdropPadding: 2,\n            display: true,\n            font: {\n                size: 10\n            },\n            callback (label) {\n                return label;\n            },\n            padding: 5,\n            centerPointLabels: false\n        }\n    };\n    static defaultRoutes = {\n        'angleLines.color': 'borderColor',\n        'pointLabels.color': 'color',\n        'ticks.color': 'color'\n    };\n    static descriptors = {\n        angleLines: {\n            _fallback: 'grid'\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this.xCenter = undefined;\n         this.yCenter = undefined;\n         this.drawingArea = undefined;\n         this._pointLabels = [];\n        this._pointLabelItems = [];\n    }\n    setDimensions() {\n        const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\n        const w = this.width = this.maxWidth - padding.width;\n        const h = this.height = this.maxHeight - padding.height;\n        this.xCenter = Math.floor(this.left + w / 2 + padding.left);\n        this.yCenter = Math.floor(this.top + h / 2 + padding.top);\n        this.drawingArea = Math.floor(Math.min(w, h) / 2);\n    }\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(false);\n        this.min = isNumberFinite(min) && !isNaN(min) ? min : 0;\n        this.max = isNumberFinite(max) && !isNaN(max) ? max : 0;\n        this.handleTickRangeOptions();\n    }\n computeTickLimit() {\n        return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\n    }\n    generateTickLabels(ticks) {\n        LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\n        this._pointLabels = this.getLabels().map((value, index)=>{\n            const label = callback(this.options.pointLabels.callback, [\n                value,\n                index\n            ], this);\n            return label || label === 0 ? label : '';\n        }).filter((v, i)=>this.chart.getDataVisibility(i));\n    }\n    fit() {\n        const opts = this.options;\n        if (opts.display && opts.pointLabels.display) {\n            fitWithPointLabels(this);\n        } else {\n            this.setCenterPoint(0, 0, 0, 0);\n        }\n    }\n    setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\n        this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\n        this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\n        this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\n    }\n    getIndexAngle(index) {\n        const angleMultiplier = TAU / (this._pointLabels.length || 1);\n        const startAngle = this.options.startAngle || 0;\n        return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\n    }\n    getDistanceFromCenterForValue(value) {\n        if (isNullOrUndef(value)) {\n            return NaN;\n        }\n        const scalingFactor = this.drawingArea / (this.max - this.min);\n        if (this.options.reverse) {\n            return (this.max - value) * scalingFactor;\n        }\n        return (value - this.min) * scalingFactor;\n    }\n    getValueForDistanceFromCenter(distance) {\n        if (isNullOrUndef(distance)) {\n            return NaN;\n        }\n        const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\n        return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\n    }\n    getPointLabelContext(index) {\n        const pointLabels = this._pointLabels || [];\n        if (index >= 0 && index < pointLabels.length) {\n            const pointLabel = pointLabels[index];\n            return createPointLabelContext(this.getContext(), index, pointLabel);\n        }\n    }\n    getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\n        const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\n        return {\n            x: Math.cos(angle) * distanceFromCenter + this.xCenter,\n            y: Math.sin(angle) * distanceFromCenter + this.yCenter,\n            angle\n        };\n    }\n    getPointPositionForValue(index, value) {\n        return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n    }\n    getBasePosition(index) {\n        return this.getPointPositionForValue(index || 0, this.getBaseValue());\n    }\n    getPointLabelPosition(index) {\n        const { left , top , right , bottom  } = this._pointLabelItems[index];\n        return {\n            left,\n            top,\n            right,\n            bottom\n        };\n    }\n drawBackground() {\n        const { backgroundColor , grid: { circular  }  } = this.options;\n        if (backgroundColor) {\n            const ctx = this.ctx;\n            ctx.save();\n            ctx.beginPath();\n            pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\n            ctx.closePath();\n            ctx.fillStyle = backgroundColor;\n            ctx.fill();\n            ctx.restore();\n        }\n    }\n drawGrid() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        const { angleLines , grid , border  } = opts;\n        const labelCount = this._pointLabels.length;\n        let i, offset, position;\n        if (opts.pointLabels.display) {\n            drawPointLabels(this, labelCount);\n        }\n        if (grid.display) {\n            this.ticks.forEach((tick, index)=>{\n                if (index !== 0 || index === 0 && this.min < 0) {\n                    offset = this.getDistanceFromCenterForValue(tick.value);\n                    const context = this.getContext(index);\n                    const optsAtIndex = grid.setContext(context);\n                    const optsAtIndexBorder = border.setContext(context);\n                    drawRadiusLine(this, optsAtIndex, offset, labelCount, optsAtIndexBorder);\n                }\n            });\n        }\n        if (angleLines.display) {\n            ctx.save();\n            for(i = labelCount - 1; i >= 0; i--){\n                const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\n                const { color , lineWidth  } = optsAtIndex;\n                if (!lineWidth || !color) {\n                    continue;\n                }\n                ctx.lineWidth = lineWidth;\n                ctx.strokeStyle = color;\n                ctx.setLineDash(optsAtIndex.borderDash);\n                ctx.lineDashOffset = optsAtIndex.borderDashOffset;\n                offset = this.getDistanceFromCenterForValue(opts.reverse ? this.min : this.max);\n                position = this.getPointPosition(i, offset);\n                ctx.beginPath();\n                ctx.moveTo(this.xCenter, this.yCenter);\n                ctx.lineTo(position.x, position.y);\n                ctx.stroke();\n            }\n            ctx.restore();\n        }\n    }\n drawBorder() {}\n drawLabels() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        const tickOpts = opts.ticks;\n        if (!tickOpts.display) {\n            return;\n        }\n        const startAngle = this.getIndexAngle(0);\n        let offset, width;\n        ctx.save();\n        ctx.translate(this.xCenter, this.yCenter);\n        ctx.rotate(startAngle);\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        this.ticks.forEach((tick, index)=>{\n            if (index === 0 && this.min >= 0 && !opts.reverse) {\n                return;\n            }\n            const optsAtIndex = tickOpts.setContext(this.getContext(index));\n            const tickFont = toFont(optsAtIndex.font);\n            offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\n            if (optsAtIndex.showLabelBackdrop) {\n                ctx.font = tickFont.string;\n                width = ctx.measureText(tick.label).width;\n                ctx.fillStyle = optsAtIndex.backdropColor;\n                const padding = toPadding(optsAtIndex.backdropPadding);\n                ctx.fillRect(-width / 2 - padding.left, -offset - tickFont.size / 2 - padding.top, width + padding.width, tickFont.size + padding.height);\n            }\n            renderText(ctx, tick.label, 0, -offset, tickFont, {\n                color: optsAtIndex.color,\n                strokeColor: optsAtIndex.textStrokeColor,\n                strokeWidth: optsAtIndex.textStrokeWidth\n            });\n        });\n        ctx.restore();\n    }\n drawTitle() {}\n}\n\nconst INTERVALS = {\n    millisecond: {\n        common: true,\n        size: 1,\n        steps: 1000\n    },\n    second: {\n        common: true,\n        size: 1000,\n        steps: 60\n    },\n    minute: {\n        common: true,\n        size: 60000,\n        steps: 60\n    },\n    hour: {\n        common: true,\n        size: 3600000,\n        steps: 24\n    },\n    day: {\n        common: true,\n        size: 86400000,\n        steps: 30\n    },\n    week: {\n        common: false,\n        size: 604800000,\n        steps: 4\n    },\n    month: {\n        common: true,\n        size: 2.628e9,\n        steps: 12\n    },\n    quarter: {\n        common: false,\n        size: 7.884e9,\n        steps: 4\n    },\n    year: {\n        common: true,\n        size: 3.154e10\n    }\n};\n const UNITS =  /* #__PURE__ */ Object.keys(INTERVALS);\n function sorter(a, b) {\n    return a - b;\n}\n function parse(scale, input) {\n    if (isNullOrUndef(input)) {\n        return null;\n    }\n    const adapter = scale._adapter;\n    const { parser , round , isoWeekday  } = scale._parseOpts;\n    let value = input;\n    if (typeof parser === 'function') {\n        value = parser(value);\n    }\n    if (!isNumberFinite(value)) {\n        value = typeof parser === 'string' ? adapter.parse(value, parser) : adapter.parse(value);\n    }\n    if (value === null) {\n        return null;\n    }\n    if (round) {\n        value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true) ? adapter.startOf(value, 'isoWeek', isoWeekday) : adapter.startOf(value, round);\n    }\n    return +value;\n}\n function determineUnitForAutoTicks(minUnit, min, max, capacity) {\n    const ilen = UNITS.length;\n    for(let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i){\n        const interval = INTERVALS[UNITS[i]];\n        const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\n        if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\n            return UNITS[i];\n        }\n    }\n    return UNITS[ilen - 1];\n}\n function determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\n    for(let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--){\n        const unit = UNITS[i];\n        if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\n            return unit;\n        }\n    }\n    return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\n}\n function determineMajorUnit(unit) {\n    for(let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i){\n        if (INTERVALS[UNITS[i]].common) {\n            return UNITS[i];\n        }\n    }\n}\n function addTick(ticks, time, timestamps) {\n    if (!timestamps) {\n        ticks[time] = true;\n    } else if (timestamps.length) {\n        const { lo , hi  } = _lookup(timestamps, time);\n        const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\n        ticks[timestamp] = true;\n    }\n}\n function setMajorTicks(scale, ticks, map, majorUnit) {\n    const adapter = scale._adapter;\n    const first = +adapter.startOf(ticks[0].value, majorUnit);\n    const last = ticks[ticks.length - 1].value;\n    let major, index;\n    for(major = first; major <= last; major = +adapter.add(major, 1, majorUnit)){\n        index = map[major];\n        if (index >= 0) {\n            ticks[index].major = true;\n        }\n    }\n    return ticks;\n}\n function ticksFromTimestamps(scale, values, majorUnit) {\n    const ticks = [];\n     const map = {};\n    const ilen = values.length;\n    let i, value;\n    for(i = 0; i < ilen; ++i){\n        value = values[i];\n        map[value] = i;\n        ticks.push({\n            value,\n            major: false\n        });\n    }\n    return ilen === 0 || !majorUnit ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\n}\nclass TimeScale extends Scale {\n    static id = 'time';\n static defaults = {\n bounds: 'data',\n        adapters: {},\n        time: {\n            parser: false,\n            unit: false,\n            round: false,\n            isoWeekday: false,\n            minUnit: 'millisecond',\n            displayFormats: {}\n        },\n        ticks: {\n source: 'auto',\n            callback: false,\n            major: {\n                enabled: false\n            }\n        }\n    };\n constructor(props){\n        super(props);\n         this._cache = {\n            data: [],\n            labels: [],\n            all: []\n        };\n         this._unit = 'day';\n         this._majorUnit = undefined;\n        this._offsets = {};\n        this._normalized = false;\n        this._parseOpts = undefined;\n    }\n    init(scaleOpts, opts = {}) {\n        const time = scaleOpts.time || (scaleOpts.time = {});\n         const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\n        adapter.init(opts);\n        mergeIf(time.displayFormats, adapter.formats());\n        this._parseOpts = {\n            parser: time.parser,\n            round: time.round,\n            isoWeekday: time.isoWeekday\n        };\n        super.init(scaleOpts);\n        this._normalized = opts.normalized;\n    }\n parse(raw, index) {\n        if (raw === undefined) {\n            return null;\n        }\n        return parse(this, raw);\n    }\n    beforeLayout() {\n        super.beforeLayout();\n        this._cache = {\n            data: [],\n            labels: [],\n            all: []\n        };\n    }\n    determineDataLimits() {\n        const options = this.options;\n        const adapter = this._adapter;\n        const unit = options.time.unit || 'day';\n        let { min , max , minDefined , maxDefined  } = this.getUserBounds();\n function _applyBounds(bounds) {\n            if (!minDefined && !isNaN(bounds.min)) {\n                min = Math.min(min, bounds.min);\n            }\n            if (!maxDefined && !isNaN(bounds.max)) {\n                max = Math.max(max, bounds.max);\n            }\n        }\n        if (!minDefined || !maxDefined) {\n            _applyBounds(this._getLabelBounds());\n            if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\n                _applyBounds(this.getMinMax(false));\n            }\n        }\n        min = isNumberFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\n        max = isNumberFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\n        this.min = Math.min(min, max - 1);\n        this.max = Math.max(min + 1, max);\n    }\n _getLabelBounds() {\n        const arr = this.getLabelTimestamps();\n        let min = Number.POSITIVE_INFINITY;\n        let max = Number.NEGATIVE_INFINITY;\n        if (arr.length) {\n            min = arr[0];\n            max = arr[arr.length - 1];\n        }\n        return {\n            min,\n            max\n        };\n    }\n buildTicks() {\n        const options = this.options;\n        const timeOpts = options.time;\n        const tickOpts = options.ticks;\n        const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\n        if (options.bounds === 'ticks' && timestamps.length) {\n            this.min = this._userMin || timestamps[0];\n            this.max = this._userMax || timestamps[timestamps.length - 1];\n        }\n        const min = this.min;\n        const max = this.max;\n        const ticks = _filterBetween(timestamps, min, max);\n        this._unit = timeOpts.unit || (tickOpts.autoSkip ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min)) : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\n        this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined : determineMajorUnit(this._unit);\n        this.initOffsets(timestamps);\n        if (options.reverse) {\n            ticks.reverse();\n        }\n        return ticksFromTimestamps(this, ticks, this._majorUnit);\n    }\n    afterAutoSkip() {\n        if (this.options.offsetAfterAutoskip) {\n            this.initOffsets(this.ticks.map((tick)=>+tick.value));\n        }\n    }\n initOffsets(timestamps = []) {\n        let start = 0;\n        let end = 0;\n        let first, last;\n        if (this.options.offset && timestamps.length) {\n            first = this.getDecimalForValue(timestamps[0]);\n            if (timestamps.length === 1) {\n                start = 1 - first;\n            } else {\n                start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\n            }\n            last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\n            if (timestamps.length === 1) {\n                end = last;\n            } else {\n                end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\n            }\n        }\n        const limit = timestamps.length < 3 ? 0.5 : 0.25;\n        start = _limitValue(start, 0, limit);\n        end = _limitValue(end, 0, limit);\n        this._offsets = {\n            start,\n            end,\n            factor: 1 / (start + 1 + end)\n        };\n    }\n _generate() {\n        const adapter = this._adapter;\n        const min = this.min;\n        const max = this.max;\n        const options = this.options;\n        const timeOpts = options.time;\n        const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\n        const stepSize = valueOrDefault(options.ticks.stepSize, 1);\n        const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\n        const hasWeekday = isNumber(weekday) || weekday === true;\n        const ticks = {};\n        let first = min;\n        let time, count;\n        if (hasWeekday) {\n            first = +adapter.startOf(first, 'isoWeek', weekday);\n        }\n        first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\n        if (adapter.diff(max, min, minor) > 100000 * stepSize) {\n            throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\n        }\n        const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\n        for(time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++){\n            addTick(ticks, time, timestamps);\n        }\n        if (time === max || options.bounds === 'ticks' || count === 1) {\n            addTick(ticks, time, timestamps);\n        }\n        return Object.keys(ticks).sort(sorter).map((x)=>+x);\n    }\n getLabelForValue(value) {\n        const adapter = this._adapter;\n        const timeOpts = this.options.time;\n        if (timeOpts.tooltipFormat) {\n            return adapter.format(value, timeOpts.tooltipFormat);\n        }\n        return adapter.format(value, timeOpts.displayFormats.datetime);\n    }\n format(value, format) {\n        const options = this.options;\n        const formats = options.time.displayFormats;\n        const unit = this._unit;\n        const fmt = format || formats[unit];\n        return this._adapter.format(value, fmt);\n    }\n _tickFormatFunction(time, index, ticks, format) {\n        const options = this.options;\n        const formatter = options.ticks.callback;\n        if (formatter) {\n            return callback(formatter, [\n                time,\n                index,\n                ticks\n            ], this);\n        }\n        const formats = options.time.displayFormats;\n        const unit = this._unit;\n        const majorUnit = this._majorUnit;\n        const minorFormat = unit && formats[unit];\n        const majorFormat = majorUnit && formats[majorUnit];\n        const tick = ticks[index];\n        const major = majorUnit && majorFormat && tick && tick.major;\n        return this._adapter.format(time, format || (major ? majorFormat : minorFormat));\n    }\n generateTickLabels(ticks) {\n        let i, ilen, tick;\n        for(i = 0, ilen = ticks.length; i < ilen; ++i){\n            tick = ticks[i];\n            tick.label = this._tickFormatFunction(tick.value, i, ticks);\n        }\n    }\n getDecimalForValue(value) {\n        return value === null ? NaN : (value - this.min) / (this.max - this.min);\n    }\n getPixelForValue(value) {\n        const offsets = this._offsets;\n        const pos = this.getDecimalForValue(value);\n        return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\n    }\n getValueForPixel(pixel) {\n        const offsets = this._offsets;\n        const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n        return this.min + pos * (this.max - this.min);\n    }\n _getLabelSize(label) {\n        const ticksOpts = this.options.ticks;\n        const tickLabelWidth = this.ctx.measureText(label).width;\n        const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\n        const cosRotation = Math.cos(angle);\n        const sinRotation = Math.sin(angle);\n        const tickFontSize = this._resolveTickFontOptions(0).size;\n        return {\n            w: tickLabelWidth * cosRotation + tickFontSize * sinRotation,\n            h: tickLabelWidth * sinRotation + tickFontSize * cosRotation\n        };\n    }\n _getLabelCapacity(exampleTime) {\n        const timeOpts = this.options.time;\n        const displayFormats = timeOpts.displayFormats;\n        const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\n        const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [\n            exampleTime\n        ], this._majorUnit), format);\n        const size = this._getLabelSize(exampleLabel);\n        const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\n        return capacity > 0 ? capacity : 1;\n    }\n getDataTimestamps() {\n        let timestamps = this._cache.data || [];\n        let i, ilen;\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const metas = this.getMatchingVisibleMetas();\n        if (this._normalized && metas.length) {\n            return this._cache.data = metas[0].controller.getAllParsedValues(this);\n        }\n        for(i = 0, ilen = metas.length; i < ilen; ++i){\n            timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\n        }\n        return this._cache.data = this.normalize(timestamps);\n    }\n getLabelTimestamps() {\n        const timestamps = this._cache.labels || [];\n        let i, ilen;\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const labels = this.getLabels();\n        for(i = 0, ilen = labels.length; i < ilen; ++i){\n            timestamps.push(parse(this, labels[i]));\n        }\n        return this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps);\n    }\n normalize(values) {\n        return _arrayUnique(values.sort(sorter));\n    }\n}\n\nfunction interpolate(table, val, reverse) {\n    let lo = 0;\n    let hi = table.length - 1;\n    let prevSource, nextSource, prevTarget, nextTarget;\n    if (reverse) {\n        if (val >= table[lo].pos && val <= table[hi].pos) {\n            ({ lo , hi  } = _lookupByKey(table, 'pos', val));\n        }\n        ({ pos: prevSource , time: prevTarget  } = table[lo]);\n        ({ pos: nextSource , time: nextTarget  } = table[hi]);\n    } else {\n        if (val >= table[lo].time && val <= table[hi].time) {\n            ({ lo , hi  } = _lookupByKey(table, 'time', val));\n        }\n        ({ time: prevSource , pos: prevTarget  } = table[lo]);\n        ({ time: nextSource , pos: nextTarget  } = table[hi]);\n    }\n    const span = nextSource - prevSource;\n    return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\n}\nclass TimeSeriesScale extends TimeScale {\n    static id = 'timeseries';\n static defaults = TimeScale.defaults;\n constructor(props){\n        super(props);\n         this._table = [];\n         this._minPos = undefined;\n         this._tableRange = undefined;\n    }\n initOffsets() {\n        const timestamps = this._getTimestampsForTable();\n        const table = this._table = this.buildLookupTable(timestamps);\n        this._minPos = interpolate(table, this.min);\n        this._tableRange = interpolate(table, this.max) - this._minPos;\n        super.initOffsets(timestamps);\n    }\n buildLookupTable(timestamps) {\n        const { min , max  } = this;\n        const items = [];\n        const table = [];\n        let i, ilen, prev, curr, next;\n        for(i = 0, ilen = timestamps.length; i < ilen; ++i){\n            curr = timestamps[i];\n            if (curr >= min && curr <= max) {\n                items.push(curr);\n            }\n        }\n        if (items.length < 2) {\n            return [\n                {\n                    time: min,\n                    pos: 0\n                },\n                {\n                    time: max,\n                    pos: 1\n                }\n            ];\n        }\n        for(i = 0, ilen = items.length; i < ilen; ++i){\n            next = items[i + 1];\n            prev = items[i - 1];\n            curr = items[i];\n            if (Math.round((next + prev) / 2) !== curr) {\n                table.push({\n                    time: curr,\n                    pos: i / (ilen - 1)\n                });\n            }\n        }\n        return table;\n    }\n _generate() {\n        const min = this.min;\n        const max = this.max;\n        let timestamps = super.getDataTimestamps();\n        if (!timestamps.includes(min) || !timestamps.length) {\n            timestamps.splice(0, 0, min);\n        }\n        if (!timestamps.includes(max) || timestamps.length === 1) {\n            timestamps.push(max);\n        }\n        return timestamps.sort((a, b)=>a - b);\n    }\n _getTimestampsForTable() {\n        let timestamps = this._cache.all || [];\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const data = this.getDataTimestamps();\n        const label = this.getLabelTimestamps();\n        if (data.length && label.length) {\n            timestamps = this.normalize(data.concat(label));\n        } else {\n            timestamps = data.length ? data : label;\n        }\n        timestamps = this._cache.all = timestamps;\n        return timestamps;\n    }\n getDecimalForValue(value) {\n        return (interpolate(this._table, value) - this._minPos) / this._tableRange;\n    }\n getValueForPixel(pixel) {\n        const offsets = this._offsets;\n        const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n        return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\n    }\n}\n\nvar scales = /*#__PURE__*/Object.freeze({\n__proto__: null,\nCategoryScale: CategoryScale,\nLinearScale: LinearScale,\nLogarithmicScale: LogarithmicScale,\nRadialLinearScale: RadialLinearScale,\nTimeScale: TimeScale,\nTimeSeriesScale: TimeSeriesScale\n});\n\nconst registerables = [\n    controllers,\n    elements,\n    plugins,\n    scales\n];\n\nexport { Animation, Animations, ArcElement, BarController, BarElement, BasePlatform, BasicPlatform, BubbleController, CategoryScale, Chart, plugin_colors as Colors, DatasetController, plugin_decimation as Decimation, DomPlatform, DoughnutController, Element, index as Filler, Interaction, plugin_legend as Legend, LineController, LineElement, LinearScale, LogarithmicScale, PieController, PointElement, PolarAreaController, RadarController, RadialLinearScale, Scale, ScatterController, plugin_subtitle as SubTitle, Ticks, TimeScale, TimeSeriesScale, plugin_title as Title, plugin_tooltip as Tooltip, adapters as _adapters, _detectPlatform, animator, controllers, defaults, elements, layouts, plugins, registerables, registry, scales };\n//# sourceMappingURL=chart.js.map\n","/**\n * DOM utility functions for type-safe element access and result display\n */\n\nexport function setElement(e: HTMLElement, value: string, units: string): void {\n\tif (units === \"\" || value === \"-\") {\n\t\t// no units\n\t\te.textContent = value;\n\t\te.setAttribute(\"title\", value);\n\t} else {\n\t\t// units specified - display value with units\n\t\te.textContent = `${value} ${units}`;\n\t\te.setAttribute(\"title\", `${value} ${units}`);\n\t}\n}\n\nexport function getInputElement(id: string): HTMLInputElement | null {\n\treturn document.getElementById(id) as HTMLInputElement | null;\n}\n\nexport function getCanvasElement(id: string): HTMLCanvasElement | null {\n\treturn document.getElementById(id) as HTMLCanvasElement | null;\n}\n\nexport function getResultElement(id: string): HTMLElement | null {\n\treturn document.getElementById(id);\n}\n\nexport function getButtonElement(id: string): HTMLElement | null {\n\treturn document.getElementById(id);\n}\n","/*!\r\n *  decimal.js v10.6.0\r\n *  An arbitrary-precision Decimal type for JavaScript.\r\n *  https://github.com/MikeMcl/decimal.js\r\n *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *  MIT Licence\r\n */\r\n\r\n\r\n// -----------------------------------  EDITABLE DEFAULTS  ------------------------------------ //\r\n\r\n\r\n  // The maximum exponent magnitude.\r\n  // The limit on the value of `toExpNeg`, `toExpPos`, `minE` and `maxE`.\r\nvar EXP_LIMIT = 9e15,                      // 0 to 9e15\r\n\r\n  // The limit on the value of `precision`, and on the value of the first argument to\r\n  // `toDecimalPlaces`, `toExponential`, `toFixed`, `toPrecision` and `toSignificantDigits`.\r\n  MAX_DIGITS = 1e9,                        // 0 to 1e9\r\n\r\n  // Base conversion alphabet.\r\n  NUMERALS = '0123456789abcdef',\r\n\r\n  // The natural logarithm of 10 (1025 digits).\r\n  LN10 = '2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058',\r\n\r\n  // Pi (1025 digits).\r\n  PI = '3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789',\r\n\r\n\r\n  // The initial configuration properties of the Decimal constructor.\r\n  DEFAULTS = {\r\n\r\n    // These values must be integers within the stated ranges (inclusive).\r\n    // Most of these values can be changed at run-time using the `Decimal.config` method.\r\n\r\n    // The maximum number of significant digits of the result of a calculation or base conversion.\r\n    // E.g. `Decimal.config({ precision: 20 });`\r\n    precision: 20,                         // 1 to MAX_DIGITS\r\n\r\n    // The rounding mode used when rounding to `precision`.\r\n    //\r\n    // ROUND_UP         0 Away from zero.\r\n    // ROUND_DOWN       1 Towards zero.\r\n    // ROUND_CEIL       2 Towards +Infinity.\r\n    // ROUND_FLOOR      3 Towards -Infinity.\r\n    // ROUND_HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n    // ROUND_HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n    // ROUND_HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n    // ROUND_HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n    // ROUND_HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n    //\r\n    // E.g.\r\n    // `Decimal.rounding = 4;`\r\n    // `Decimal.rounding = Decimal.ROUND_HALF_UP;`\r\n    rounding: 4,                           // 0 to 8\r\n\r\n    // The modulo mode used when calculating the modulus: a mod n.\r\n    // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n    // The remainder (r) is calculated as: r = a - n * q.\r\n    //\r\n    // UP         0 The remainder is positive if the dividend is negative, else is negative.\r\n    // DOWN       1 The remainder has the same sign as the dividend (JavaScript %).\r\n    // FLOOR      3 The remainder has the same sign as the divisor (Python %).\r\n    // HALF_EVEN  6 The IEEE 754 remainder function.\r\n    // EUCLID     9 Euclidian division. q = sign(n) * floor(a / abs(n)). Always positive.\r\n    //\r\n    // Truncated division (1), floored division (3), the IEEE 754 remainder (6), and Euclidian\r\n    // division (9) are commonly used for the modulus operation. The other rounding modes can also\r\n    // be used, but they may not give useful results.\r\n    modulo: 1,                             // 0 to 9\r\n\r\n    // The exponent value at and beneath which `toString` returns exponential notation.\r\n    // JavaScript numbers: -7\r\n    toExpNeg: -7,                          // 0 to -EXP_LIMIT\r\n\r\n    // The exponent value at and above which `toString` returns exponential notation.\r\n    // JavaScript numbers: 21\r\n    toExpPos:  21,                         // 0 to EXP_LIMIT\r\n\r\n    // The minimum exponent value, beneath which underflow to zero occurs.\r\n    // JavaScript numbers: -324  (5e-324)\r\n    minE: -EXP_LIMIT,                      // -1 to -EXP_LIMIT\r\n\r\n    // The maximum exponent value, above which overflow to Infinity occurs.\r\n    // JavaScript numbers: 308  (1.7976931348623157e+308)\r\n    maxE: EXP_LIMIT,                       // 1 to EXP_LIMIT\r\n\r\n    // Whether to use cryptographically-secure random number generation, if available.\r\n    crypto: false                          // true/false\r\n  },\r\n\r\n\r\n// ----------------------------------- END OF EDITABLE DEFAULTS ------------------------------- //\r\n\r\n\r\n  inexact, quadrant,\r\n  external = true,\r\n\r\n  decimalError = '[DecimalError] ',\r\n  invalidArgument = decimalError + 'Invalid argument: ',\r\n  precisionLimitExceeded = decimalError + 'Precision limit exceeded',\r\n  cryptoUnavailable = decimalError + 'crypto unavailable',\r\n  tag = '[object Decimal]',\r\n\r\n  mathfloor = Math.floor,\r\n  mathpow = Math.pow,\r\n\r\n  isBinary = /^0b([01]+(\\.[01]*)?|\\.[01]+)(p[+-]?\\d+)?$/i,\r\n  isHex = /^0x([0-9a-f]+(\\.[0-9a-f]*)?|\\.[0-9a-f]+)(p[+-]?\\d+)?$/i,\r\n  isOctal = /^0o([0-7]+(\\.[0-7]*)?|\\.[0-7]+)(p[+-]?\\d+)?$/i,\r\n  isDecimal = /^(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i,\r\n\r\n  BASE = 1e7,\r\n  LOG_BASE = 7,\r\n  MAX_SAFE_INTEGER = 9007199254740991,\r\n\r\n  LN10_PRECISION = LN10.length - 1,\r\n  PI_PRECISION = PI.length - 1,\r\n\r\n  // Decimal.prototype object\r\n  P = { toStringTag: tag };\r\n\r\n\r\n// Decimal prototype methods\r\n\r\n\r\n/*\r\n *  absoluteValue             abs\r\n *  ceil\r\n *  clampedTo                 clamp\r\n *  comparedTo                cmp\r\n *  cosine                    cos\r\n *  cubeRoot                  cbrt\r\n *  decimalPlaces             dp\r\n *  dividedBy                 div\r\n *  dividedToIntegerBy        divToInt\r\n *  equals                    eq\r\n *  floor\r\n *  greaterThan               gt\r\n *  greaterThanOrEqualTo      gte\r\n *  hyperbolicCosine          cosh\r\n *  hyperbolicSine            sinh\r\n *  hyperbolicTangent         tanh\r\n *  inverseCosine             acos\r\n *  inverseHyperbolicCosine   acosh\r\n *  inverseHyperbolicSine     asinh\r\n *  inverseHyperbolicTangent  atanh\r\n *  inverseSine               asin\r\n *  inverseTangent            atan\r\n *  isFinite\r\n *  isInteger                 isInt\r\n *  isNaN\r\n *  isNegative                isNeg\r\n *  isPositive                isPos\r\n *  isZero\r\n *  lessThan                  lt\r\n *  lessThanOrEqualTo         lte\r\n *  logarithm                 log\r\n *  [maximum]                 [max]\r\n *  [minimum]                 [min]\r\n *  minus                     sub\r\n *  modulo                    mod\r\n *  naturalExponential        exp\r\n *  naturalLogarithm          ln\r\n *  negated                   neg\r\n *  plus                      add\r\n *  precision                 sd\r\n *  round\r\n *  sine                      sin\r\n *  squareRoot                sqrt\r\n *  tangent                   tan\r\n *  times                     mul\r\n *  toBinary\r\n *  toDecimalPlaces           toDP\r\n *  toExponential\r\n *  toFixed\r\n *  toFraction\r\n *  toHexadecimal             toHex\r\n *  toNearest\r\n *  toNumber\r\n *  toOctal\r\n *  toPower                   pow\r\n *  toPrecision\r\n *  toSignificantDigits       toSD\r\n *  toString\r\n *  truncated                 trunc\r\n *  valueOf                   toJSON\r\n */\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the absolute value of this Decimal.\r\n *\r\n */\r\nP.absoluteValue = P.abs = function () {\r\n  var x = new this.constructor(this);\r\n  if (x.s < 0) x.s = 1;\r\n  return finalise(x);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a whole number in the\r\n * direction of positive Infinity.\r\n *\r\n */\r\nP.ceil = function () {\r\n  return finalise(new this.constructor(this), this.e + 1, 2);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal clamped to the range\r\n * delineated by `min` and `max`.\r\n *\r\n * min {number|string|bigint|Decimal}\r\n * max {number|string|bigint|Decimal}\r\n *\r\n */\r\nP.clampedTo = P.clamp = function (min, max) {\r\n  var k,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n  min = new Ctor(min);\r\n  max = new Ctor(max);\r\n  if (!min.s || !max.s) return new Ctor(NaN);\r\n  if (min.gt(max)) throw Error(invalidArgument + max);\r\n  k = x.cmp(min);\r\n  return k < 0 ? min : x.cmp(max) > 0 ? max : new Ctor(x);\r\n};\r\n\r\n\r\n/*\r\n * Return\r\n *   1    if the value of this Decimal is greater than the value of `y`,\r\n *  -1    if the value of this Decimal is less than the value of `y`,\r\n *   0    if they have the same value,\r\n *   NaN  if the value of either Decimal is NaN.\r\n *\r\n */\r\nP.comparedTo = P.cmp = function (y) {\r\n  var i, j, xdL, ydL,\r\n    x = this,\r\n    xd = x.d,\r\n    yd = (y = new x.constructor(y)).d,\r\n    xs = x.s,\r\n    ys = y.s;\r\n\r\n  // Either NaN or Infinity?\r\n  if (!xd || !yd) {\r\n    return !xs || !ys ? NaN : xs !== ys ? xs : xd === yd ? 0 : !xd ^ xs < 0 ? 1 : -1;\r\n  }\r\n\r\n  // Either zero?\r\n  if (!xd[0] || !yd[0]) return xd[0] ? xs : yd[0] ? -ys : 0;\r\n\r\n  // Signs differ?\r\n  if (xs !== ys) return xs;\r\n\r\n  // Compare exponents.\r\n  if (x.e !== y.e) return x.e > y.e ^ xs < 0 ? 1 : -1;\r\n\r\n  xdL = xd.length;\r\n  ydL = yd.length;\r\n\r\n  // Compare digit by digit.\r\n  for (i = 0, j = xdL < ydL ? xdL : ydL; i < j; ++i) {\r\n    if (xd[i] !== yd[i]) return xd[i] > yd[i] ^ xs < 0 ? 1 : -1;\r\n  }\r\n\r\n  // Compare lengths.\r\n  return xdL === ydL ? 0 : xdL > ydL ^ xs < 0 ? 1 : -1;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the cosine of the value in radians of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-1, 1]\r\n *\r\n * cos(0)         = 1\r\n * cos(-0)        = 1\r\n * cos(Infinity)  = NaN\r\n * cos(-Infinity) = NaN\r\n * cos(NaN)       = NaN\r\n *\r\n */\r\nP.cosine = P.cos = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.d) return new Ctor(NaN);\r\n\r\n  // cos(0) = cos(-0) = 1\r\n  if (!x.d[0]) return new Ctor(1);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(x.e, x.sd()) + LOG_BASE;\r\n  Ctor.rounding = 1;\r\n\r\n  x = cosine(Ctor, toLessThanHalfPi(Ctor, x));\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(quadrant == 2 || quadrant == 3 ? x.neg() : x, pr, rm, true);\r\n};\r\n\r\n\r\n/*\r\n *\r\n * Return a new Decimal whose value is the cube root of the value of this Decimal, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n *  cbrt(0)  =  0\r\n *  cbrt(-0) = -0\r\n *  cbrt(1)  =  1\r\n *  cbrt(-1) = -1\r\n *  cbrt(N)  =  N\r\n *  cbrt(-I) = -I\r\n *  cbrt(I)  =  I\r\n *\r\n * Math.cbrt(x) = (x < 0 ? -Math.pow(-x, 1/3) : Math.pow(x, 1/3))\r\n *\r\n */\r\nP.cubeRoot = P.cbrt = function () {\r\n  var e, m, n, r, rep, s, sd, t, t3, t3plusx,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite() || x.isZero()) return new Ctor(x);\r\n  external = false;\r\n\r\n  // Initial estimate.\r\n  s = x.s * mathpow(x.s * x, 1 / 3);\r\n\r\n   // Math.cbrt underflow/overflow?\r\n   // Pass x to Math.pow as integer, then adjust the exponent of the result.\r\n  if (!s || Math.abs(s) == 1 / 0) {\r\n    n = digitsToString(x.d);\r\n    e = x.e;\r\n\r\n    // Adjust n exponent so it is a multiple of 3 away from x exponent.\r\n    if (s = (e - n.length + 1) % 3) n += (s == 1 || s == -2 ? '0' : '00');\r\n    s = mathpow(n, 1 / 3);\r\n\r\n    // Rarely, e may be one less than the result exponent value.\r\n    e = mathfloor((e + 1) / 3) - (e % 3 == (e < 0 ? -1 : 2));\r\n\r\n    if (s == 1 / 0) {\r\n      n = '5e' + e;\r\n    } else {\r\n      n = s.toExponential();\r\n      n = n.slice(0, n.indexOf('e') + 1) + e;\r\n    }\r\n\r\n    r = new Ctor(n);\r\n    r.s = x.s;\r\n  } else {\r\n    r = new Ctor(s.toString());\r\n  }\r\n\r\n  sd = (e = Ctor.precision) + 3;\r\n\r\n  // Halley's method.\r\n  // TODO? Compare Newton's method.\r\n  for (;;) {\r\n    t = r;\r\n    t3 = t.times(t).times(t);\r\n    t3plusx = t3.plus(x);\r\n    r = divide(t3plusx.plus(x).times(t), t3plusx.plus(t3), sd + 2, 1);\r\n\r\n    // TODO? Replace with for-loop and checkRoundingDigits.\r\n    if (digitsToString(t.d).slice(0, sd) === (n = digitsToString(r.d)).slice(0, sd)) {\r\n      n = n.slice(sd - 3, sd + 1);\r\n\r\n      // The 4th rounding digit may be in error by -1 so if the 4 rounding digits are 9999 or 4999\r\n      // , i.e. approaching a rounding boundary, continue the iteration.\r\n      if (n == '9999' || !rep && n == '4999') {\r\n\r\n        // On the first iteration only, check to see if rounding up gives the exact result as the\r\n        // nines may infinitely repeat.\r\n        if (!rep) {\r\n          finalise(t, e + 1, 0);\r\n\r\n          if (t.times(t).times(t).eq(x)) {\r\n            r = t;\r\n            break;\r\n          }\r\n        }\r\n\r\n        sd += 4;\r\n        rep = 1;\r\n      } else {\r\n\r\n        // If the rounding digits are null, 0{0,4} or 50{0,3}, check for an exact result.\r\n        // If not, then there are further digits and m will be truthy.\r\n        if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n          // Truncate to the first rounding digit.\r\n          finalise(r, e + 1, 1);\r\n          m = !r.times(r).times(r).eq(x);\r\n        }\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  external = true;\r\n\r\n  return finalise(r, e, Ctor.rounding, m);\r\n};\r\n\r\n\r\n/*\r\n * Return the number of decimal places of the value of this Decimal.\r\n *\r\n */\r\nP.decimalPlaces = P.dp = function () {\r\n  var w,\r\n    d = this.d,\r\n    n = NaN;\r\n\r\n  if (d) {\r\n    w = d.length - 1;\r\n    n = (w - mathfloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last word.\r\n    w = d[w];\r\n    if (w) for (; w % 10 == 0; w /= 10) n--;\r\n    if (n < 0) n = 0;\r\n  }\r\n\r\n  return n;\r\n};\r\n\r\n\r\n/*\r\n *  n / 0 = I\r\n *  n / N = N\r\n *  n / I = 0\r\n *  0 / n = 0\r\n *  0 / 0 = N\r\n *  0 / N = N\r\n *  0 / I = 0\r\n *  N / n = N\r\n *  N / 0 = N\r\n *  N / N = N\r\n *  N / I = N\r\n *  I / n = I\r\n *  I / 0 = I\r\n *  I / N = N\r\n *  I / I = N\r\n *\r\n * Return a new Decimal whose value is the value of this Decimal divided by `y`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.dividedBy = P.div = function (y) {\r\n  return divide(this, new this.constructor(y));\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the integer part of dividing the value of this Decimal\r\n * by the value of `y`, rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.dividedToIntegerBy = P.divToInt = function (y) {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n  return finalise(divide(x, new Ctor(y), 0, 1, 1), Ctor.precision, Ctor.rounding);\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is equal to the value of `y`, otherwise return false.\r\n *\r\n */\r\nP.equals = P.eq = function (y) {\r\n  return this.cmp(y) === 0;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a whole number in the\r\n * direction of negative Infinity.\r\n *\r\n */\r\nP.floor = function () {\r\n  return finalise(new this.constructor(this), this.e + 1, 3);\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is greater than the value of `y`, otherwise return\r\n * false.\r\n *\r\n */\r\nP.greaterThan = P.gt = function (y) {\r\n  return this.cmp(y) > 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is greater than or equal to the value of `y`,\r\n * otherwise return false.\r\n *\r\n */\r\nP.greaterThanOrEqualTo = P.gte = function (y) {\r\n  var k = this.cmp(y);\r\n  return k == 1 || k === 0;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic cosine of the value in radians of this\r\n * Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [1, Infinity]\r\n *\r\n * cosh(x) = 1 + x^2/2! + x^4/4! + x^6/6! + ...\r\n *\r\n * cosh(0)         = 1\r\n * cosh(-0)        = 1\r\n * cosh(Infinity)  = Infinity\r\n * cosh(-Infinity) = Infinity\r\n * cosh(NaN)       = NaN\r\n *\r\n *  x        time taken (ms)   result\r\n * 1000      9                 9.8503555700852349694e+433\r\n * 10000     25                4.4034091128314607936e+4342\r\n * 100000    171               1.4033316802130615897e+43429\r\n * 1000000   3817              1.5166076984010437725e+434294\r\n * 10000000  abandoned after 2 minute wait\r\n *\r\n * TODO? Compare performance of cosh(x) = 0.5 * (exp(x) + exp(-x))\r\n *\r\n */\r\nP.hyperbolicCosine = P.cosh = function () {\r\n  var k, n, pr, rm, len,\r\n    x = this,\r\n    Ctor = x.constructor,\r\n    one = new Ctor(1);\r\n\r\n  if (!x.isFinite()) return new Ctor(x.s ? 1 / 0 : NaN);\r\n  if (x.isZero()) return one;\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(x.e, x.sd()) + 4;\r\n  Ctor.rounding = 1;\r\n  len = x.d.length;\r\n\r\n  // Argument reduction: cos(4x) = 1 - 8cos^2(x) + 8cos^4(x) + 1\r\n  // i.e. cos(x) = 1 - cos^2(x/4)(8 - 8cos^2(x/4))\r\n\r\n  // Estimate the optimum number of times to use the argument reduction.\r\n  // TODO? Estimation reused from cosine() and may not be optimal here.\r\n  if (len < 32) {\r\n    k = Math.ceil(len / 3);\r\n    n = (1 / tinyPow(4, k)).toString();\r\n  } else {\r\n    k = 16;\r\n    n = '2.3283064365386962890625e-10';\r\n  }\r\n\r\n  x = taylorSeries(Ctor, 1, x.times(n), new Ctor(1), true);\r\n\r\n  // Reverse argument reduction\r\n  var cosh2_x,\r\n    i = k,\r\n    d8 = new Ctor(8);\r\n  for (; i--;) {\r\n    cosh2_x = x.times(x);\r\n    x = one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))));\r\n  }\r\n\r\n  return finalise(x, Ctor.precision = pr, Ctor.rounding = rm, true);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic sine of the value in radians of this\r\n * Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-Infinity, Infinity]\r\n *\r\n * sinh(x) = x + x^3/3! + x^5/5! + x^7/7! + ...\r\n *\r\n * sinh(0)         = 0\r\n * sinh(-0)        = -0\r\n * sinh(Infinity)  = Infinity\r\n * sinh(-Infinity) = -Infinity\r\n * sinh(NaN)       = NaN\r\n *\r\n * x        time taken (ms)\r\n * 10       2 ms\r\n * 100      5 ms\r\n * 1000     14 ms\r\n * 10000    82 ms\r\n * 100000   886 ms            1.4033316802130615897e+43429\r\n * 200000   2613 ms\r\n * 300000   5407 ms\r\n * 400000   8824 ms\r\n * 500000   13026 ms          8.7080643612718084129e+217146\r\n * 1000000  48543 ms\r\n *\r\n * TODO? Compare performance of sinh(x) = 0.5 * (exp(x) - exp(-x))\r\n *\r\n */\r\nP.hyperbolicSine = P.sinh = function () {\r\n  var k, pr, rm, len,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite() || x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(x.e, x.sd()) + 4;\r\n  Ctor.rounding = 1;\r\n  len = x.d.length;\r\n\r\n  if (len < 3) {\r\n    x = taylorSeries(Ctor, 2, x, x, true);\r\n  } else {\r\n\r\n    // Alternative argument reduction: sinh(3x) = sinh(x)(3 + 4sinh^2(x))\r\n    // i.e. sinh(x) = sinh(x/3)(3 + 4sinh^2(x/3))\r\n    // 3 multiplications and 1 addition\r\n\r\n    // Argument reduction: sinh(5x) = sinh(x)(5 + sinh^2(x)(20 + 16sinh^2(x)))\r\n    // i.e. sinh(x) = sinh(x/5)(5 + sinh^2(x/5)(20 + 16sinh^2(x/5)))\r\n    // 4 multiplications and 2 additions\r\n\r\n    // Estimate the optimum number of times to use the argument reduction.\r\n    k = 1.4 * Math.sqrt(len);\r\n    k = k > 16 ? 16 : k | 0;\r\n\r\n    x = x.times(1 / tinyPow(5, k));\r\n    x = taylorSeries(Ctor, 2, x, x, true);\r\n\r\n    // Reverse argument reduction\r\n    var sinh2_x,\r\n      d5 = new Ctor(5),\r\n      d16 = new Ctor(16),\r\n      d20 = new Ctor(20);\r\n    for (; k--;) {\r\n      sinh2_x = x.times(x);\r\n      x = x.times(d5.plus(sinh2_x.times(d16.times(sinh2_x).plus(d20))));\r\n    }\r\n  }\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(x, pr, rm, true);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic tangent of the value in radians of this\r\n * Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-1, 1]\r\n *\r\n * tanh(x) = sinh(x) / cosh(x)\r\n *\r\n * tanh(0)         = 0\r\n * tanh(-0)        = -0\r\n * tanh(Infinity)  = 1\r\n * tanh(-Infinity) = -1\r\n * tanh(NaN)       = NaN\r\n *\r\n */\r\nP.hyperbolicTangent = P.tanh = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite()) return new Ctor(x.s);\r\n  if (x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + 7;\r\n  Ctor.rounding = 1;\r\n\r\n  return divide(x.sinh(), x.cosh(), Ctor.precision = pr, Ctor.rounding = rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arccosine (inverse cosine) in radians of the value of\r\n * this Decimal.\r\n *\r\n * Domain: [-1, 1]\r\n * Range: [0, pi]\r\n *\r\n * acos(x) = pi/2 - asin(x)\r\n *\r\n * acos(0)       = pi/2\r\n * acos(-0)      = pi/2\r\n * acos(1)       = 0\r\n * acos(-1)      = pi\r\n * acos(1/2)     = pi/3\r\n * acos(-1/2)    = 2*pi/3\r\n * acos(|x| > 1) = NaN\r\n * acos(NaN)     = NaN\r\n *\r\n */\r\nP.inverseCosine = P.acos = function () {\r\n  var x = this,\r\n    Ctor = x.constructor,\r\n    k = x.abs().cmp(1),\r\n    pr = Ctor.precision,\r\n    rm = Ctor.rounding;\r\n\r\n  if (k !== -1) {\r\n    return k === 0\r\n      // |x| is 1\r\n      ? x.isNeg() ? getPi(Ctor, pr, rm) : new Ctor(0)\r\n      // |x| > 1 or x is NaN\r\n      : new Ctor(NaN);\r\n  }\r\n\r\n  if (x.isZero()) return getPi(Ctor, pr + 4, rm).times(0.5);\r\n\r\n  // TODO? Special case acos(0.5) = pi/3 and acos(-0.5) = 2*pi/3\r\n\r\n  Ctor.precision = pr + 6;\r\n  Ctor.rounding = 1;\r\n\r\n  // See https://github.com/MikeMcl/decimal.js/pull/217\r\n  x = new Ctor(1).minus(x).div(x.plus(1)).sqrt().atan();\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.times(2);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic cosine in radians of the\r\n * value of this Decimal.\r\n *\r\n * Domain: [1, Infinity]\r\n * Range: [0, Infinity]\r\n *\r\n * acosh(x) = ln(x + sqrt(x^2 - 1))\r\n *\r\n * acosh(x < 1)     = NaN\r\n * acosh(NaN)       = NaN\r\n * acosh(Infinity)  = Infinity\r\n * acosh(-Infinity) = NaN\r\n * acosh(0)         = NaN\r\n * acosh(-0)        = NaN\r\n * acosh(1)         = 0\r\n * acosh(-1)        = NaN\r\n *\r\n */\r\nP.inverseHyperbolicCosine = P.acosh = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (x.lte(1)) return new Ctor(x.eq(1) ? 0 : NaN);\r\n  if (!x.isFinite()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(Math.abs(x.e), x.sd()) + 4;\r\n  Ctor.rounding = 1;\r\n  external = false;\r\n\r\n  x = x.times(x).minus(1).sqrt().plus(x);\r\n\r\n  external = true;\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.ln();\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic sine in radians of the value\r\n * of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-Infinity, Infinity]\r\n *\r\n * asinh(x) = ln(x + sqrt(x^2 + 1))\r\n *\r\n * asinh(NaN)       = NaN\r\n * asinh(Infinity)  = Infinity\r\n * asinh(-Infinity) = -Infinity\r\n * asinh(0)         = 0\r\n * asinh(-0)        = -0\r\n *\r\n */\r\nP.inverseHyperbolicSine = P.asinh = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite() || x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + 2 * Math.max(Math.abs(x.e), x.sd()) + 6;\r\n  Ctor.rounding = 1;\r\n  external = false;\r\n\r\n  x = x.times(x).plus(1).sqrt().plus(x);\r\n\r\n  external = true;\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.ln();\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic tangent in radians of the\r\n * value of this Decimal.\r\n *\r\n * Domain: [-1, 1]\r\n * Range: [-Infinity, Infinity]\r\n *\r\n * atanh(x) = 0.5 * ln((1 + x) / (1 - x))\r\n *\r\n * atanh(|x| > 1)   = NaN\r\n * atanh(NaN)       = NaN\r\n * atanh(Infinity)  = NaN\r\n * atanh(-Infinity) = NaN\r\n * atanh(0)         = 0\r\n * atanh(-0)        = -0\r\n * atanh(1)         = Infinity\r\n * atanh(-1)        = -Infinity\r\n *\r\n */\r\nP.inverseHyperbolicTangent = P.atanh = function () {\r\n  var pr, rm, wpr, xsd,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite()) return new Ctor(NaN);\r\n  if (x.e >= 0) return new Ctor(x.abs().eq(1) ? x.s / 0 : x.isZero() ? x : NaN);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  xsd = x.sd();\r\n\r\n  if (Math.max(xsd, pr) < 2 * -x.e - 1) return finalise(new Ctor(x), pr, rm, true);\r\n\r\n  Ctor.precision = wpr = xsd - x.e;\r\n\r\n  x = divide(x.plus(1), new Ctor(1).minus(x), wpr + pr, 1);\r\n\r\n  Ctor.precision = pr + 4;\r\n  Ctor.rounding = 1;\r\n\r\n  x = x.ln();\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.times(0.5);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arcsine (inverse sine) in radians of the value of this\r\n * Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-pi/2, pi/2]\r\n *\r\n * asin(x) = 2*atan(x/(1 + sqrt(1 - x^2)))\r\n *\r\n * asin(0)       = 0\r\n * asin(-0)      = -0\r\n * asin(1/2)     = pi/6\r\n * asin(-1/2)    = -pi/6\r\n * asin(1)       = pi/2\r\n * asin(-1)      = -pi/2\r\n * asin(|x| > 1) = NaN\r\n * asin(NaN)     = NaN\r\n *\r\n * TODO? Compare performance of Taylor series.\r\n *\r\n */\r\nP.inverseSine = P.asin = function () {\r\n  var halfPi, k,\r\n    pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (x.isZero()) return new Ctor(x);\r\n\r\n  k = x.abs().cmp(1);\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n\r\n  if (k !== -1) {\r\n\r\n    // |x| is 1\r\n    if (k === 0) {\r\n      halfPi = getPi(Ctor, pr + 4, rm).times(0.5);\r\n      halfPi.s = x.s;\r\n      return halfPi;\r\n    }\r\n\r\n    // |x| > 1 or x is NaN\r\n    return new Ctor(NaN);\r\n  }\r\n\r\n  // TODO? Special case asin(1/2) = pi/6 and asin(-1/2) = -pi/6\r\n\r\n  Ctor.precision = pr + 6;\r\n  Ctor.rounding = 1;\r\n\r\n  x = x.div(new Ctor(1).minus(x.times(x)).sqrt().plus(1)).atan();\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return x.times(2);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arctangent (inverse tangent) in radians of the value\r\n * of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-pi/2, pi/2]\r\n *\r\n * atan(x) = x - x^3/3 + x^5/5 - x^7/7 + ...\r\n *\r\n * atan(0)         = 0\r\n * atan(-0)        = -0\r\n * atan(1)         = pi/4\r\n * atan(-1)        = -pi/4\r\n * atan(Infinity)  = pi/2\r\n * atan(-Infinity) = -pi/2\r\n * atan(NaN)       = NaN\r\n *\r\n */\r\nP.inverseTangent = P.atan = function () {\r\n  var i, j, k, n, px, t, r, wpr, x2,\r\n    x = this,\r\n    Ctor = x.constructor,\r\n    pr = Ctor.precision,\r\n    rm = Ctor.rounding;\r\n\r\n  if (!x.isFinite()) {\r\n    if (!x.s) return new Ctor(NaN);\r\n    if (pr + 4 <= PI_PRECISION) {\r\n      r = getPi(Ctor, pr + 4, rm).times(0.5);\r\n      r.s = x.s;\r\n      return r;\r\n    }\r\n  } else if (x.isZero()) {\r\n    return new Ctor(x);\r\n  } else if (x.abs().eq(1) && pr + 4 <= PI_PRECISION) {\r\n    r = getPi(Ctor, pr + 4, rm).times(0.25);\r\n    r.s = x.s;\r\n    return r;\r\n  }\r\n\r\n  Ctor.precision = wpr = pr + 10;\r\n  Ctor.rounding = 1;\r\n\r\n  // TODO? if (x >= 1 && pr <= PI_PRECISION) atan(x) = halfPi * x.s - atan(1 / x);\r\n\r\n  // Argument reduction\r\n  // Ensure |x| < 0.42\r\n  // atan(x) = 2 * atan(x / (1 + sqrt(1 + x^2)))\r\n\r\n  k = Math.min(28, wpr / LOG_BASE + 2 | 0);\r\n\r\n  for (i = k; i; --i) x = x.div(x.times(x).plus(1).sqrt().plus(1));\r\n\r\n  external = false;\r\n\r\n  j = Math.ceil(wpr / LOG_BASE);\r\n  n = 1;\r\n  x2 = x.times(x);\r\n  r = new Ctor(x);\r\n  px = x;\r\n\r\n  // atan(x) = x - x^3/3 + x^5/5 - x^7/7 + ...\r\n  for (; i !== -1;) {\r\n    px = px.times(x2);\r\n    t = r.minus(px.div(n += 2));\r\n\r\n    px = px.times(x2);\r\n    r = t.plus(px.div(n += 2));\r\n\r\n    if (r.d[j] !== void 0) for (i = j; r.d[i] === t.d[i] && i--;);\r\n  }\r\n\r\n  if (k) r = r.times(2 << (k - 1));\r\n\r\n  external = true;\r\n\r\n  return finalise(r, Ctor.precision = pr, Ctor.rounding = rm, true);\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is a finite number, otherwise return false.\r\n *\r\n */\r\nP.isFinite = function () {\r\n  return !!this.d;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is an integer, otherwise return false.\r\n *\r\n */\r\nP.isInteger = P.isInt = function () {\r\n  return !!this.d && mathfloor(this.e / LOG_BASE) > this.d.length - 2;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is NaN, otherwise return false.\r\n *\r\n */\r\nP.isNaN = function () {\r\n  return !this.s;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is negative, otherwise return false.\r\n *\r\n */\r\nP.isNegative = P.isNeg = function () {\r\n  return this.s < 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is positive, otherwise return false.\r\n *\r\n */\r\nP.isPositive = P.isPos = function () {\r\n  return this.s > 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is 0 or -0, otherwise return false.\r\n *\r\n */\r\nP.isZero = function () {\r\n  return !!this.d && this.d[0] === 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is less than `y`, otherwise return false.\r\n *\r\n */\r\nP.lessThan = P.lt = function (y) {\r\n  return this.cmp(y) < 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Decimal is less than or equal to `y`, otherwise return false.\r\n *\r\n */\r\nP.lessThanOrEqualTo = P.lte = function (y) {\r\n  return this.cmp(y) < 1;\r\n};\r\n\r\n\r\n/*\r\n * Return the logarithm of the value of this Decimal to the specified base, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * If no base is specified, return log[10](arg).\r\n *\r\n * log[base](arg) = ln(arg) / ln(base)\r\n *\r\n * The result will always be correctly rounded if the base of the log is 10, and 'almost always'\r\n * otherwise:\r\n *\r\n * Depending on the rounding mode, the result may be incorrectly rounded if the first fifteen\r\n * rounding digits are [49]99999999999999 or [50]00000000000000. In that case, the maximum error\r\n * between the result and the correctly rounded result will be one ulp (unit in the last place).\r\n *\r\n * log[-b](a)       = NaN\r\n * log[0](a)        = NaN\r\n * log[1](a)        = NaN\r\n * log[NaN](a)      = NaN\r\n * log[Infinity](a) = NaN\r\n * log[b](0)        = -Infinity\r\n * log[b](-0)       = -Infinity\r\n * log[b](-a)       = NaN\r\n * log[b](1)        = 0\r\n * log[b](Infinity) = Infinity\r\n * log[b](NaN)      = NaN\r\n *\r\n * [base] {number|string|bigint|Decimal} The base of the logarithm.\r\n *\r\n */\r\nP.logarithm = P.log = function (base) {\r\n  var isBase10, d, denominator, k, inf, num, sd, r,\r\n    arg = this,\r\n    Ctor = arg.constructor,\r\n    pr = Ctor.precision,\r\n    rm = Ctor.rounding,\r\n    guard = 5;\r\n\r\n  // Default base is 10.\r\n  if (base == null) {\r\n    base = new Ctor(10);\r\n    isBase10 = true;\r\n  } else {\r\n    base = new Ctor(base);\r\n    d = base.d;\r\n\r\n    // Return NaN if base is negative, or non-finite, or is 0 or 1.\r\n    if (base.s < 0 || !d || !d[0] || base.eq(1)) return new Ctor(NaN);\r\n\r\n    isBase10 = base.eq(10);\r\n  }\r\n\r\n  d = arg.d;\r\n\r\n  // Is arg negative, non-finite, 0 or 1?\r\n  if (arg.s < 0 || !d || !d[0] || arg.eq(1)) {\r\n    return new Ctor(d && !d[0] ? -1 / 0 : arg.s != 1 ? NaN : d ? 0 : 1 / 0);\r\n  }\r\n\r\n  // The result will have a non-terminating decimal expansion if base is 10 and arg is not an\r\n  // integer power of 10.\r\n  if (isBase10) {\r\n    if (d.length > 1) {\r\n      inf = true;\r\n    } else {\r\n      for (k = d[0]; k % 10 === 0;) k /= 10;\r\n      inf = k !== 1;\r\n    }\r\n  }\r\n\r\n  external = false;\r\n  sd = pr + guard;\r\n  num = naturalLogarithm(arg, sd);\r\n  denominator = isBase10 ? getLn10(Ctor, sd + 10) : naturalLogarithm(base, sd);\r\n\r\n  // The result will have 5 rounding digits.\r\n  r = divide(num, denominator, sd, 1);\r\n\r\n  // If at a rounding boundary, i.e. the result's rounding digits are [49]9999 or [50]0000,\r\n  // calculate 10 further digits.\r\n  //\r\n  // If the result is known to have an infinite decimal expansion, repeat this until it is clear\r\n  // that the result is above or below the boundary. Otherwise, if after calculating the 10\r\n  // further digits, the last 14 are nines, round up and assume the result is exact.\r\n  // Also assume the result is exact if the last 14 are zero.\r\n  //\r\n  // Example of a result that will be incorrectly rounded:\r\n  // log[1048576](4503599627370502) = 2.60000000000000009610279511444746...\r\n  // The above result correctly rounded using ROUND_CEIL to 1 decimal place should be 2.7, but it\r\n  // will be given as 2.6 as there are 15 zeros immediately after the requested decimal place, so\r\n  // the exact result would be assumed to be 2.6, which rounded using ROUND_CEIL to 1 decimal\r\n  // place is still 2.6.\r\n  if (checkRoundingDigits(r.d, k = pr, rm)) {\r\n\r\n    do {\r\n      sd += 10;\r\n      num = naturalLogarithm(arg, sd);\r\n      denominator = isBase10 ? getLn10(Ctor, sd + 10) : naturalLogarithm(base, sd);\r\n      r = divide(num, denominator, sd, 1);\r\n\r\n      if (!inf) {\r\n\r\n        // Check for 14 nines from the 2nd rounding digit, as the first may be 4.\r\n        if (+digitsToString(r.d).slice(k + 1, k + 15) + 1 == 1e14) {\r\n          r = finalise(r, pr + 1, 0);\r\n        }\r\n\r\n        break;\r\n      }\r\n    } while (checkRoundingDigits(r.d, k += 10, rm));\r\n  }\r\n\r\n  external = true;\r\n\r\n  return finalise(r, pr, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the maximum of the arguments and the value of this Decimal.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\nP.max = function () {\r\n  Array.prototype.push.call(arguments, this);\r\n  return maxOrMin(this.constructor, arguments, -1);\r\n};\r\n */\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the minimum of the arguments and the value of this Decimal.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\nP.min = function () {\r\n  Array.prototype.push.call(arguments, this);\r\n  return maxOrMin(this.constructor, arguments, 1);\r\n};\r\n */\r\n\r\n\r\n/*\r\n *  n - 0 = n\r\n *  n - N = N\r\n *  n - I = -I\r\n *  0 - n = -n\r\n *  0 - 0 = 0\r\n *  0 - N = N\r\n *  0 - I = -I\r\n *  N - n = N\r\n *  N - 0 = N\r\n *  N - N = N\r\n *  N - I = N\r\n *  I - n = I\r\n *  I - 0 = I\r\n *  I - N = N\r\n *  I - I = N\r\n *\r\n * Return a new Decimal whose value is the value of this Decimal minus `y`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.minus = P.sub = function (y) {\r\n  var d, e, i, j, k, len, pr, rm, xd, xe, xLTy, yd,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  y = new Ctor(y);\r\n\r\n  // If either is not finite...\r\n  if (!x.d || !y.d) {\r\n\r\n    // Return NaN if either is NaN.\r\n    if (!x.s || !y.s) y = new Ctor(NaN);\r\n\r\n    // Return y negated if x is finite and y is Infinity.\r\n    else if (x.d) y.s = -y.s;\r\n\r\n    // Return x if y is finite and x is Infinity.\r\n    // Return x if both are Infinity with different signs.\r\n    // Return NaN if both are Infinity with the same sign.\r\n    else y = new Ctor(y.d || x.s !== y.s ? x : NaN);\r\n\r\n    return y;\r\n  }\r\n\r\n  // If signs differ...\r\n  if (x.s != y.s) {\r\n    y.s = -y.s;\r\n    return x.plus(y);\r\n  }\r\n\r\n  xd = x.d;\r\n  yd = y.d;\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n\r\n  // If either is zero...\r\n  if (!xd[0] || !yd[0]) {\r\n\r\n    // Return y negated if x is zero and y is non-zero.\r\n    if (yd[0]) y.s = -y.s;\r\n\r\n    // Return x if y is zero and x is non-zero.\r\n    else if (xd[0]) y = new Ctor(x);\r\n\r\n    // Return zero if both are zero.\r\n    // From IEEE 754 (2008) 6.3: 0 - 0 = -0 - -0 = -0 when rounding to -Infinity.\r\n    else return new Ctor(rm === 3 ? -0 : 0);\r\n\r\n    return external ? finalise(y, pr, rm) : y;\r\n  }\r\n\r\n  // x and y are finite, non-zero numbers with the same sign.\r\n\r\n  // Calculate base 1e7 exponents.\r\n  e = mathfloor(y.e / LOG_BASE);\r\n  xe = mathfloor(x.e / LOG_BASE);\r\n\r\n  xd = xd.slice();\r\n  k = xe - e;\r\n\r\n  // If base 1e7 exponents differ...\r\n  if (k) {\r\n    xLTy = k < 0;\r\n\r\n    if (xLTy) {\r\n      d = xd;\r\n      k = -k;\r\n      len = yd.length;\r\n    } else {\r\n      d = yd;\r\n      e = xe;\r\n      len = xd.length;\r\n    }\r\n\r\n    // Numbers with massively different exponents would result in a very high number of\r\n    // zeros needing to be prepended, but this can be avoided while still ensuring correct\r\n    // rounding by limiting the number of zeros to `Math.ceil(pr / LOG_BASE) + 2`.\r\n    i = Math.max(Math.ceil(pr / LOG_BASE), len) + 2;\r\n\r\n    if (k > i) {\r\n      k = i;\r\n      d.length = 1;\r\n    }\r\n\r\n    // Prepend zeros to equalise exponents.\r\n    d.reverse();\r\n    for (i = k; i--;) d.push(0);\r\n    d.reverse();\r\n\r\n  // Base 1e7 exponents equal.\r\n  } else {\r\n\r\n    // Check digits to determine which is the bigger number.\r\n\r\n    i = xd.length;\r\n    len = yd.length;\r\n    xLTy = i < len;\r\n    if (xLTy) len = i;\r\n\r\n    for (i = 0; i < len; i++) {\r\n      if (xd[i] != yd[i]) {\r\n        xLTy = xd[i] < yd[i];\r\n        break;\r\n      }\r\n    }\r\n\r\n    k = 0;\r\n  }\r\n\r\n  if (xLTy) {\r\n    d = xd;\r\n    xd = yd;\r\n    yd = d;\r\n    y.s = -y.s;\r\n  }\r\n\r\n  len = xd.length;\r\n\r\n  // Append zeros to `xd` if shorter.\r\n  // Don't add zeros to `yd` if shorter as subtraction only needs to start at `yd` length.\r\n  for (i = yd.length - len; i > 0; --i) xd[len++] = 0;\r\n\r\n  // Subtract yd from xd.\r\n  for (i = yd.length; i > k;) {\r\n\r\n    if (xd[--i] < yd[i]) {\r\n      for (j = i; j && xd[--j] === 0;) xd[j] = BASE - 1;\r\n      --xd[j];\r\n      xd[i] += BASE;\r\n    }\r\n\r\n    xd[i] -= yd[i];\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  for (; xd[--len] === 0;) xd.pop();\r\n\r\n  // Remove leading zeros and adjust exponent accordingly.\r\n  for (; xd[0] === 0; xd.shift()) --e;\r\n\r\n  // Zero?\r\n  if (!xd[0]) return new Ctor(rm === 3 ? -0 : 0);\r\n\r\n  y.d = xd;\r\n  y.e = getBase10Exponent(xd, e);\r\n\r\n  return external ? finalise(y, pr, rm) : y;\r\n};\r\n\r\n\r\n/*\r\n *   n % 0 =  N\r\n *   n % N =  N\r\n *   n % I =  n\r\n *   0 % n =  0\r\n *  -0 % n = -0\r\n *   0 % 0 =  N\r\n *   0 % N =  N\r\n *   0 % I =  0\r\n *   N % n =  N\r\n *   N % 0 =  N\r\n *   N % N =  N\r\n *   N % I =  N\r\n *   I % n =  N\r\n *   I % 0 =  N\r\n *   I % N =  N\r\n *   I % I =  N\r\n *\r\n * Return a new Decimal whose value is the value of this Decimal modulo `y`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * The result depends on the modulo mode.\r\n *\r\n */\r\nP.modulo = P.mod = function (y) {\r\n  var q,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  y = new Ctor(y);\r\n\r\n  // Return NaN if x is Infinity or NaN, or y is NaN or 0.\r\n  if (!x.d || !y.s || y.d && !y.d[0]) return new Ctor(NaN);\r\n\r\n  // Return x if y is Infinity or x is 0.\r\n  if (!y.d || x.d && !x.d[0]) {\r\n    return finalise(new Ctor(x), Ctor.precision, Ctor.rounding);\r\n  }\r\n\r\n  // Prevent rounding of intermediate calculations.\r\n  external = false;\r\n\r\n  if (Ctor.modulo == 9) {\r\n\r\n    // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n    // result = x - q * y    where  0 <= result < abs(y)\r\n    q = divide(x, y.abs(), 0, 3, 1);\r\n    q.s *= y.s;\r\n  } else {\r\n    q = divide(x, y, 0, Ctor.modulo, 1);\r\n  }\r\n\r\n  q = q.times(y);\r\n\r\n  external = true;\r\n\r\n  return x.minus(q);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural exponential of the value of this Decimal,\r\n * i.e. the base e raised to the power the value of this Decimal, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.naturalExponential = P.exp = function () {\r\n  return naturalExponential(this);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural logarithm of the value of this Decimal,\r\n * rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.naturalLogarithm = P.ln = function () {\r\n  return naturalLogarithm(this);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal negated, i.e. as if multiplied by\r\n * -1.\r\n *\r\n */\r\nP.negated = P.neg = function () {\r\n  var x = new this.constructor(this);\r\n  x.s = -x.s;\r\n  return finalise(x);\r\n};\r\n\r\n\r\n/*\r\n *  n + 0 = n\r\n *  n + N = N\r\n *  n + I = I\r\n *  0 + n = n\r\n *  0 + 0 = 0\r\n *  0 + N = N\r\n *  0 + I = I\r\n *  N + n = N\r\n *  N + 0 = N\r\n *  N + N = N\r\n *  N + I = N\r\n *  I + n = I\r\n *  I + 0 = I\r\n *  I + N = N\r\n *  I + I = I\r\n *\r\n * Return a new Decimal whose value is the value of this Decimal plus `y`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.plus = P.add = function (y) {\r\n  var carry, d, e, i, k, len, pr, rm, xd, yd,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  y = new Ctor(y);\r\n\r\n  // If either is not finite...\r\n  if (!x.d || !y.d) {\r\n\r\n    // Return NaN if either is NaN.\r\n    if (!x.s || !y.s) y = new Ctor(NaN);\r\n\r\n    // Return x if y is finite and x is Infinity.\r\n    // Return x if both are Infinity with the same sign.\r\n    // Return NaN if both are Infinity with different signs.\r\n    // Return y if x is finite and y is Infinity.\r\n    else if (!x.d) y = new Ctor(y.d || x.s === y.s ? x : NaN);\r\n\r\n    return y;\r\n  }\r\n\r\n   // If signs differ...\r\n  if (x.s != y.s) {\r\n    y.s = -y.s;\r\n    return x.minus(y);\r\n  }\r\n\r\n  xd = x.d;\r\n  yd = y.d;\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n\r\n  // If either is zero...\r\n  if (!xd[0] || !yd[0]) {\r\n\r\n    // Return x if y is zero.\r\n    // Return y if y is non-zero.\r\n    if (!yd[0]) y = new Ctor(x);\r\n\r\n    return external ? finalise(y, pr, rm) : y;\r\n  }\r\n\r\n  // x and y are finite, non-zero numbers with the same sign.\r\n\r\n  // Calculate base 1e7 exponents.\r\n  k = mathfloor(x.e / LOG_BASE);\r\n  e = mathfloor(y.e / LOG_BASE);\r\n\r\n  xd = xd.slice();\r\n  i = k - e;\r\n\r\n  // If base 1e7 exponents differ...\r\n  if (i) {\r\n\r\n    if (i < 0) {\r\n      d = xd;\r\n      i = -i;\r\n      len = yd.length;\r\n    } else {\r\n      d = yd;\r\n      e = k;\r\n      len = xd.length;\r\n    }\r\n\r\n    // Limit number of zeros prepended to max(ceil(pr / LOG_BASE), len) + 1.\r\n    k = Math.ceil(pr / LOG_BASE);\r\n    len = k > len ? k + 1 : len + 1;\r\n\r\n    if (i > len) {\r\n      i = len;\r\n      d.length = 1;\r\n    }\r\n\r\n    // Prepend zeros to equalise exponents. Note: Faster to use reverse then do unshifts.\r\n    d.reverse();\r\n    for (; i--;) d.push(0);\r\n    d.reverse();\r\n  }\r\n\r\n  len = xd.length;\r\n  i = yd.length;\r\n\r\n  // If yd is longer than xd, swap xd and yd so xd points to the longer array.\r\n  if (len - i < 0) {\r\n    i = len;\r\n    d = yd;\r\n    yd = xd;\r\n    xd = d;\r\n  }\r\n\r\n  // Only start adding at yd.length - 1 as the further digits of xd can be left as they are.\r\n  for (carry = 0; i;) {\r\n    carry = (xd[--i] = xd[i] + yd[i] + carry) / BASE | 0;\r\n    xd[i] %= BASE;\r\n  }\r\n\r\n  if (carry) {\r\n    xd.unshift(carry);\r\n    ++e;\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n  for (len = xd.length; xd[--len] == 0;) xd.pop();\r\n\r\n  y.d = xd;\r\n  y.e = getBase10Exponent(xd, e);\r\n\r\n  return external ? finalise(y, pr, rm) : y;\r\n};\r\n\r\n\r\n/*\r\n * Return the number of significant digits of the value of this Decimal.\r\n *\r\n * [z] {boolean|number} Whether to count integer-part trailing zeros: true, false, 1 or 0.\r\n *\r\n */\r\nP.precision = P.sd = function (z) {\r\n  var k,\r\n    x = this;\r\n\r\n  if (z !== void 0 && z !== !!z && z !== 1 && z !== 0) throw Error(invalidArgument + z);\r\n\r\n  if (x.d) {\r\n    k = getPrecision(x.d);\r\n    if (z && x.e + 1 > k) k = x.e + 1;\r\n  } else {\r\n    k = NaN;\r\n  }\r\n\r\n  return k;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a whole number using\r\n * rounding mode `rounding`.\r\n *\r\n */\r\nP.round = function () {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n\r\n  return finalise(new Ctor(x), x.e + 1, Ctor.rounding);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the sine of the value in radians of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-1, 1]\r\n *\r\n * sin(x) = x - x^3/3! + x^5/5! - ...\r\n *\r\n * sin(0)         = 0\r\n * sin(-0)        = -0\r\n * sin(Infinity)  = NaN\r\n * sin(-Infinity) = NaN\r\n * sin(NaN)       = NaN\r\n *\r\n */\r\nP.sine = P.sin = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite()) return new Ctor(NaN);\r\n  if (x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + Math.max(x.e, x.sd()) + LOG_BASE;\r\n  Ctor.rounding = 1;\r\n\r\n  x = sine(Ctor, toLessThanHalfPi(Ctor, x));\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(quadrant > 2 ? x.neg() : x, pr, rm, true);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the square root of this Decimal, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n *  sqrt(-n) =  N\r\n *  sqrt(N)  =  N\r\n *  sqrt(-I) =  N\r\n *  sqrt(I)  =  I\r\n *  sqrt(0)  =  0\r\n *  sqrt(-0) = -0\r\n *\r\n */\r\nP.squareRoot = P.sqrt = function () {\r\n  var m, n, sd, r, rep, t,\r\n    x = this,\r\n    d = x.d,\r\n    e = x.e,\r\n    s = x.s,\r\n    Ctor = x.constructor;\r\n\r\n  // Negative/NaN/Infinity/zero?\r\n  if (s !== 1 || !d || !d[0]) {\r\n    return new Ctor(!s || s < 0 && (!d || d[0]) ? NaN : d ? x : 1 / 0);\r\n  }\r\n\r\n  external = false;\r\n\r\n  // Initial estimate.\r\n  s = Math.sqrt(+x);\r\n\r\n  // Math.sqrt underflow/overflow?\r\n  // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n  if (s == 0 || s == 1 / 0) {\r\n    n = digitsToString(d);\r\n\r\n    if ((n.length + e) % 2 == 0) n += '0';\r\n    s = Math.sqrt(n);\r\n    e = mathfloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n    if (s == 1 / 0) {\r\n      n = '5e' + e;\r\n    } else {\r\n      n = s.toExponential();\r\n      n = n.slice(0, n.indexOf('e') + 1) + e;\r\n    }\r\n\r\n    r = new Ctor(n);\r\n  } else {\r\n    r = new Ctor(s.toString());\r\n  }\r\n\r\n  sd = (e = Ctor.precision) + 3;\r\n\r\n  // Newton-Raphson iteration.\r\n  for (;;) {\r\n    t = r;\r\n    r = t.plus(divide(x, t, sd + 2, 1)).times(0.5);\r\n\r\n    // TODO? Replace with for-loop and checkRoundingDigits.\r\n    if (digitsToString(t.d).slice(0, sd) === (n = digitsToString(r.d)).slice(0, sd)) {\r\n      n = n.slice(sd - 3, sd + 1);\r\n\r\n      // The 4th rounding digit may be in error by -1 so if the 4 rounding digits are 9999 or\r\n      // 4999, i.e. approaching a rounding boundary, continue the iteration.\r\n      if (n == '9999' || !rep && n == '4999') {\r\n\r\n        // On the first iteration only, check to see if rounding up gives the exact result as the\r\n        // nines may infinitely repeat.\r\n        if (!rep) {\r\n          finalise(t, e + 1, 0);\r\n\r\n          if (t.times(t).eq(x)) {\r\n            r = t;\r\n            break;\r\n          }\r\n        }\r\n\r\n        sd += 4;\r\n        rep = 1;\r\n      } else {\r\n\r\n        // If the rounding digits are null, 0{0,4} or 50{0,3}, check for an exact result.\r\n        // If not, then there are further digits and m will be truthy.\r\n        if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n          // Truncate to the first rounding digit.\r\n          finalise(r, e + 1, 1);\r\n          m = !r.times(r).eq(x);\r\n        }\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  external = true;\r\n\r\n  return finalise(r, e, Ctor.rounding, m);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the tangent of the value in radians of this Decimal.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-Infinity, Infinity]\r\n *\r\n * tan(0)         = 0\r\n * tan(-0)        = -0\r\n * tan(Infinity)  = NaN\r\n * tan(-Infinity) = NaN\r\n * tan(NaN)       = NaN\r\n *\r\n */\r\nP.tangent = P.tan = function () {\r\n  var pr, rm,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (!x.isFinite()) return new Ctor(NaN);\r\n  if (x.isZero()) return new Ctor(x);\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n  Ctor.precision = pr + 10;\r\n  Ctor.rounding = 1;\r\n\r\n  x = x.sin();\r\n  x.s = 1;\r\n  x = divide(x, new Ctor(1).minus(x.times(x)).sqrt(), pr + 10, 0);\r\n\r\n  Ctor.precision = pr;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(quadrant == 2 || quadrant == 4 ? x.neg() : x, pr, rm, true);\r\n};\r\n\r\n\r\n/*\r\n *  n * 0 = 0\r\n *  n * N = N\r\n *  n * I = I\r\n *  0 * n = 0\r\n *  0 * 0 = 0\r\n *  0 * N = N\r\n *  0 * I = N\r\n *  N * n = N\r\n *  N * 0 = N\r\n *  N * N = N\r\n *  N * I = N\r\n *  I * n = I\r\n *  I * 0 = N\r\n *  I * N = N\r\n *  I * I = I\r\n *\r\n * Return a new Decimal whose value is this Decimal times `y`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n */\r\nP.times = P.mul = function (y) {\r\n  var carry, e, i, k, r, rL, t, xdL, ydL,\r\n    x = this,\r\n    Ctor = x.constructor,\r\n    xd = x.d,\r\n    yd = (y = new Ctor(y)).d;\r\n\r\n  y.s *= x.s;\r\n\r\n   // If either is NaN, Infinity or 0...\r\n  if (!xd || !xd[0] || !yd || !yd[0]) {\r\n\r\n    return new Ctor(!y.s || xd && !xd[0] && !yd || yd && !yd[0] && !xd\r\n\r\n      // Return NaN if either is NaN.\r\n      // Return NaN if x is 0 and y is Infinity, or y is 0 and x is Infinity.\r\n      ? NaN\r\n\r\n      // Return Infinity if either is Infinity.\r\n      // Return 0 if either is 0.\r\n      : !xd || !yd ? y.s / 0 : y.s * 0);\r\n  }\r\n\r\n  e = mathfloor(x.e / LOG_BASE) + mathfloor(y.e / LOG_BASE);\r\n  xdL = xd.length;\r\n  ydL = yd.length;\r\n\r\n  // Ensure xd points to the longer array.\r\n  if (xdL < ydL) {\r\n    r = xd;\r\n    xd = yd;\r\n    yd = r;\r\n    rL = xdL;\r\n    xdL = ydL;\r\n    ydL = rL;\r\n  }\r\n\r\n  // Initialise the result array with zeros.\r\n  r = [];\r\n  rL = xdL + ydL;\r\n  for (i = rL; i--;) r.push(0);\r\n\r\n  // Multiply!\r\n  for (i = ydL; --i >= 0;) {\r\n    carry = 0;\r\n    for (k = xdL + i; k > i;) {\r\n      t = r[k] + yd[i] * xd[k - i - 1] + carry;\r\n      r[k--] = t % BASE | 0;\r\n      carry = t / BASE | 0;\r\n    }\r\n\r\n    r[k] = (r[k] + carry) % BASE | 0;\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  for (; !r[--rL];) r.pop();\r\n\r\n  if (carry) ++e;\r\n  else r.shift();\r\n\r\n  y.d = r;\r\n  y.e = getBase10Exponent(r, e);\r\n\r\n  return external ? finalise(y, Ctor.precision, Ctor.rounding) : y;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in base 2, round to `sd` significant\r\n * digits using rounding mode `rm`.\r\n *\r\n * If the optional `sd` argument is present then return binary exponential notation.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toBinary = function (sd, rm) {\r\n  return toStringBinary(this, 2, sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a maximum of `dp`\r\n * decimal places using rounding mode `rm` or `rounding` if `rm` is omitted.\r\n *\r\n * If `dp` is omitted, return a new Decimal whose value is the value of this Decimal.\r\n *\r\n * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toDecimalPlaces = P.toDP = function (dp, rm) {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n\r\n  x = new Ctor(x);\r\n  if (dp === void 0) return x;\r\n\r\n  checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n  if (rm === void 0) rm = Ctor.rounding;\r\n  else checkInt32(rm, 0, 8);\r\n\r\n  return finalise(x, dp + x.e + 1, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in exponential notation rounded to\r\n * `dp` fixed decimal places using rounding mode `rounding`.\r\n *\r\n * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toExponential = function (dp, rm) {\r\n  var str,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (dp === void 0) {\r\n    str = finiteToString(x, true);\r\n  } else {\r\n    checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n\r\n    x = finalise(new Ctor(x), dp + 1, rm);\r\n    str = finiteToString(x, true, dp + 1);\r\n  }\r\n\r\n  return x.isNeg() && !x.isZero() ? '-' + str : str;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in normal (fixed-point) notation to\r\n * `dp` fixed decimal places and rounded using rounding mode `rm` or `rounding` if `rm` is\r\n * omitted.\r\n *\r\n * As with JavaScript numbers, (-0).toFixed(0) is '0', but e.g. (-0.00001).toFixed(0) is '-0'.\r\n *\r\n * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\r\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\r\n * (-0).toFixed(3) is '0.000'.\r\n * (-0.5).toFixed(0) is '-0'.\r\n *\r\n */\r\nP.toFixed = function (dp, rm) {\r\n  var str, y,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (dp === void 0) {\r\n    str = finiteToString(x);\r\n  } else {\r\n    checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n\r\n    y = finalise(new Ctor(x), dp + x.e + 1, rm);\r\n    str = finiteToString(y, false, dp + y.e + 1);\r\n  }\r\n\r\n  // To determine whether to add the minus sign look at the value before it was rounded,\r\n  // i.e. look at `x` rather than `y`.\r\n  return x.isNeg() && !x.isZero() ? '-' + str : str;\r\n};\r\n\r\n\r\n/*\r\n * Return an array representing the value of this Decimal as a simple fraction with an integer\r\n * numerator and an integer denominator.\r\n *\r\n * The denominator will be a positive non-zero value less than or equal to the specified maximum\r\n * denominator. If a maximum denominator is not specified, the denominator will be the lowest\r\n * value necessary to represent the number exactly.\r\n *\r\n * [maxD] {number|string|bigint|Decimal} Maximum denominator. Integer >= 1 and < Infinity.\r\n *\r\n */\r\nP.toFraction = function (maxD) {\r\n  var d, d0, d1, d2, e, k, n, n0, n1, pr, q, r,\r\n    x = this,\r\n    xd = x.d,\r\n    Ctor = x.constructor;\r\n\r\n  if (!xd) return new Ctor(x);\r\n\r\n  n1 = d0 = new Ctor(1);\r\n  d1 = n0 = new Ctor(0);\r\n\r\n  d = new Ctor(d1);\r\n  e = d.e = getPrecision(xd) - x.e - 1;\r\n  k = e % LOG_BASE;\r\n  d.d[0] = mathpow(10, k < 0 ? LOG_BASE + k : k);\r\n\r\n  if (maxD == null) {\r\n\r\n    // d is 10**e, the minimum max-denominator needed.\r\n    maxD = e > 0 ? d : n1;\r\n  } else {\r\n    n = new Ctor(maxD);\r\n    if (!n.isInt() || n.lt(n1)) throw Error(invalidArgument + n);\r\n    maxD = n.gt(d) ? (e > 0 ? d : n1) : n;\r\n  }\r\n\r\n  external = false;\r\n  n = new Ctor(digitsToString(xd));\r\n  pr = Ctor.precision;\r\n  Ctor.precision = e = xd.length * LOG_BASE * 2;\r\n\r\n  for (;;)  {\r\n    q = divide(n, d, 0, 1, 1);\r\n    d2 = d0.plus(q.times(d1));\r\n    if (d2.cmp(maxD) == 1) break;\r\n    d0 = d1;\r\n    d1 = d2;\r\n    d2 = n1;\r\n    n1 = n0.plus(q.times(d2));\r\n    n0 = d2;\r\n    d2 = d;\r\n    d = n.minus(q.times(d2));\r\n    n = d2;\r\n  }\r\n\r\n  d2 = divide(maxD.minus(d0), d1, 0, 1, 1);\r\n  n0 = n0.plus(d2.times(n1));\r\n  d0 = d0.plus(d2.times(d1));\r\n  n0.s = n1.s = x.s;\r\n\r\n  // Determine which fraction is closer to x, n0/d0 or n1/d1?\r\n  r = divide(n1, d1, e, 1).minus(x).abs().cmp(divide(n0, d0, e, 1).minus(x).abs()) < 1\r\n      ? [n1, d1] : [n0, d0];\r\n\r\n  Ctor.precision = pr;\r\n  external = true;\r\n\r\n  return r;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in base 16, round to `sd` significant\r\n * digits using rounding mode `rm`.\r\n *\r\n * If the optional `sd` argument is present then return binary exponential notation.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toHexadecimal = P.toHex = function (sd, rm) {\r\n  return toStringBinary(this, 16, sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Returns a new Decimal whose value is the nearest multiple of `y` in the direction of rounding\r\n * mode `rm`, or `Decimal.rounding` if `rm` is omitted, to the value of this Decimal.\r\n *\r\n * The return value will always have the same sign as this Decimal, unless either this Decimal\r\n * or `y` is NaN, in which case the return value will be also be NaN.\r\n *\r\n * The return value is not affected by the value of `precision`.\r\n *\r\n * y {number|string|bigint|Decimal} The magnitude to round to a multiple of.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n * 'toNearest() rounding mode not an integer: {rm}'\r\n * 'toNearest() rounding mode out of range: {rm}'\r\n *\r\n */\r\nP.toNearest = function (y, rm) {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n\r\n  x = new Ctor(x);\r\n\r\n  if (y == null) {\r\n\r\n    // If x is not finite, return x.\r\n    if (!x.d) return x;\r\n\r\n    y = new Ctor(1);\r\n    rm = Ctor.rounding;\r\n  } else {\r\n    y = new Ctor(y);\r\n    if (rm === void 0) {\r\n      rm = Ctor.rounding;\r\n    } else {\r\n      checkInt32(rm, 0, 8);\r\n    }\r\n\r\n    // If x is not finite, return x if y is not NaN, else NaN.\r\n    if (!x.d) return y.s ? x : y;\r\n\r\n    // If y is not finite, return Infinity with the sign of x if y is Infinity, else NaN.\r\n    if (!y.d) {\r\n      if (y.s) y.s = x.s;\r\n      return y;\r\n    }\r\n  }\r\n\r\n  // If y is not zero, calculate the nearest multiple of y to x.\r\n  if (y.d[0]) {\r\n    external = false;\r\n    x = divide(x, y, 0, rm, 1).times(y);\r\n    external = true;\r\n    finalise(x);\r\n\r\n  // If y is zero, return zero with the sign of x.\r\n  } else {\r\n    y.s = x.s;\r\n    x = y;\r\n  }\r\n\r\n  return x;\r\n};\r\n\r\n\r\n/*\r\n * Return the value of this Decimal converted to a number primitive.\r\n * Zero keeps its sign.\r\n *\r\n */\r\nP.toNumber = function () {\r\n  return +this;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal in base 8, round to `sd` significant\r\n * digits using rounding mode `rm`.\r\n *\r\n * If the optional `sd` argument is present then return binary exponential notation.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toOctal = function (sd, rm) {\r\n  return toStringBinary(this, 8, sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal raised to the power `y`, rounded\r\n * to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * ECMAScript compliant.\r\n *\r\n *   pow(x, NaN)                           = NaN\r\n *   pow(x, 0)                            = 1\r\n\r\n *   pow(NaN, non-zero)                    = NaN\r\n *   pow(abs(x) > 1, +Infinity)            = +Infinity\r\n *   pow(abs(x) > 1, -Infinity)            = +0\r\n *   pow(abs(x) == 1, Infinity)           = NaN\r\n *   pow(abs(x) < 1, +Infinity)            = +0\r\n *   pow(abs(x) < 1, -Infinity)            = +Infinity\r\n *   pow(+Infinity, y > 0)                 = +Infinity\r\n *   pow(+Infinity, y < 0)                 = +0\r\n *   pow(-Infinity, odd integer > 0)       = -Infinity\r\n *   pow(-Infinity, even integer > 0)      = +Infinity\r\n *   pow(-Infinity, odd integer < 0)       = -0\r\n *   pow(-Infinity, even integer < 0)      = +0\r\n *   pow(+0, y > 0)                        = +0\r\n *   pow(+0, y < 0)                        = +Infinity\r\n *   pow(-0, odd integer > 0)              = -0\r\n *   pow(-0, even integer > 0)             = +0\r\n *   pow(-0, odd integer < 0)              = -Infinity\r\n *   pow(-0, even integer < 0)             = +Infinity\r\n *   pow(finite x < 0, finite non-integer) = NaN\r\n *\r\n * For non-integer or very large exponents pow(x, y) is calculated using\r\n *\r\n *   x^y = exp(y*ln(x))\r\n *\r\n * Assuming the first 15 rounding digits are each equally likely to be any digit 0-9, the\r\n * probability of an incorrectly rounded result\r\n * P([49]9{14} | [50]0{14}) = 2 * 0.2 * 10^-14 = 4e-15 = 1/2.5e+14\r\n * i.e. 1 in 250,000,000,000,000\r\n *\r\n * If a result is incorrectly rounded the maximum error will be 1 ulp (unit in last place).\r\n *\r\n * y {number|string|bigint|Decimal} The power to which to raise this Decimal.\r\n *\r\n */\r\nP.toPower = P.pow = function (y) {\r\n  var e, k, pr, r, rm, s,\r\n    x = this,\r\n    Ctor = x.constructor,\r\n    yn = +(y = new Ctor(y));\r\n\r\n  // Either Infinity, NaN or 0?\r\n  if (!x.d || !y.d || !x.d[0] || !y.d[0]) return new Ctor(mathpow(+x, yn));\r\n\r\n  x = new Ctor(x);\r\n\r\n  if (x.eq(1)) return x;\r\n\r\n  pr = Ctor.precision;\r\n  rm = Ctor.rounding;\r\n\r\n  if (y.eq(1)) return finalise(x, pr, rm);\r\n\r\n  // y exponent\r\n  e = mathfloor(y.e / LOG_BASE);\r\n\r\n  // If y is a small integer use the 'exponentiation by squaring' algorithm.\r\n  if (e >= y.d.length - 1 && (k = yn < 0 ? -yn : yn) <= MAX_SAFE_INTEGER) {\r\n    r = intPow(Ctor, x, k, pr);\r\n    return y.s < 0 ? new Ctor(1).div(r) : finalise(r, pr, rm);\r\n  }\r\n\r\n  s = x.s;\r\n\r\n  // if x is negative\r\n  if (s < 0) {\r\n\r\n    // if y is not an integer\r\n    if (e < y.d.length - 1) return new Ctor(NaN);\r\n\r\n    // Result is positive if x is negative and the last digit of integer y is even.\r\n    if ((y.d[e] & 1) == 0) s = 1;\r\n\r\n    // if x.eq(-1)\r\n    if (x.e == 0 && x.d[0] == 1 && x.d.length == 1) {\r\n      x.s = s;\r\n      return x;\r\n    }\r\n  }\r\n\r\n  // Estimate result exponent.\r\n  // x^y = 10^e,  where e = y * log10(x)\r\n  // log10(x) = log10(x_significand) + x_exponent\r\n  // log10(x_significand) = ln(x_significand) / ln(10)\r\n  k = mathpow(+x, yn);\r\n  e = k == 0 || !isFinite(k)\r\n    ? mathfloor(yn * (Math.log('0.' + digitsToString(x.d)) / Math.LN10 + x.e + 1))\r\n    : new Ctor(k + '').e;\r\n\r\n  // Exponent estimate may be incorrect e.g. x: 0.999999999999999999, y: 2.29, e: 0, r.e: -1.\r\n\r\n  // Overflow/underflow?\r\n  if (e > Ctor.maxE + 1 || e < Ctor.minE - 1) return new Ctor(e > 0 ? s / 0 : 0);\r\n\r\n  external = false;\r\n  Ctor.rounding = x.s = 1;\r\n\r\n  // Estimate the extra guard digits needed to ensure five correct rounding digits from\r\n  // naturalLogarithm(x). Example of failure without these extra digits (precision: 10):\r\n  // new Decimal(2.32456).pow('2087987436534566.46411')\r\n  // should be 1.162377823e+764914905173815, but is 1.162355823e+764914905173815\r\n  k = Math.min(12, (e + '').length);\r\n\r\n  // r = x^y = exp(y*ln(x))\r\n  r = naturalExponential(y.times(naturalLogarithm(x, pr + k)), pr);\r\n\r\n  // r may be Infinity, e.g. (0.9999999999999999).pow(-1e+40)\r\n  if (r.d) {\r\n\r\n    // Truncate to the required precision plus five rounding digits.\r\n    r = finalise(r, pr + 5, 1);\r\n\r\n    // If the rounding digits are [49]9999 or [50]0000 increase the precision by 10 and recalculate\r\n    // the result.\r\n    if (checkRoundingDigits(r.d, pr, rm)) {\r\n      e = pr + 10;\r\n\r\n      // Truncate to the increased precision plus five rounding digits.\r\n      r = finalise(naturalExponential(y.times(naturalLogarithm(x, e + k)), e), e + 5, 1);\r\n\r\n      // Check for 14 nines from the 2nd rounding digit (the first rounding digit may be 4 or 9).\r\n      if (+digitsToString(r.d).slice(pr + 1, pr + 15) + 1 == 1e14) {\r\n        r = finalise(r, pr + 1, 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  r.s = s;\r\n  external = true;\r\n  Ctor.rounding = rm;\r\n\r\n  return finalise(r, pr, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal rounded to `sd` significant digits\r\n * using rounding mode `rounding`.\r\n *\r\n * Return exponential notation if `sd` is less than the number of digits necessary to represent\r\n * the integer part of the value in normal notation.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n */\r\nP.toPrecision = function (sd, rm) {\r\n  var str,\r\n    x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (sd === void 0) {\r\n    str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);\r\n  } else {\r\n    checkInt32(sd, 1, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n\r\n    x = finalise(new Ctor(x), sd, rm);\r\n    str = finiteToString(x, sd <= x.e || x.e <= Ctor.toExpNeg, sd);\r\n  }\r\n\r\n  return x.isNeg() && !x.isZero() ? '-' + str : str;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal rounded to a maximum of `sd`\r\n * significant digits using rounding mode `rm`, or to `precision` and `rounding` respectively if\r\n * omitted.\r\n *\r\n * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n *\r\n * 'toSD() digits out of range: {sd}'\r\n * 'toSD() digits not an integer: {sd}'\r\n * 'toSD() rounding mode not an integer: {rm}'\r\n * 'toSD() rounding mode out of range: {rm}'\r\n *\r\n */\r\nP.toSignificantDigits = P.toSD = function (sd, rm) {\r\n  var x = this,\r\n    Ctor = x.constructor;\r\n\r\n  if (sd === void 0) {\r\n    sd = Ctor.precision;\r\n    rm = Ctor.rounding;\r\n  } else {\r\n    checkInt32(sd, 1, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n  }\r\n\r\n  return finalise(new Ctor(x), sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal.\r\n *\r\n * Return exponential notation if this Decimal has a positive exponent equal to or greater than\r\n * `toExpPos`, or a negative exponent equal to or less than `toExpNeg`.\r\n *\r\n */\r\nP.toString = function () {\r\n  var x = this,\r\n    Ctor = x.constructor,\r\n    str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);\r\n\r\n  return x.isNeg() && !x.isZero() ? '-' + str : str;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of this Decimal truncated to a whole number.\r\n *\r\n */\r\nP.truncated = P.trunc = function () {\r\n  return finalise(new this.constructor(this), this.e + 1, 1);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Decimal.\r\n * Unlike `toString`, negative zero will include the minus sign.\r\n *\r\n */\r\nP.valueOf = P.toJSON = function () {\r\n  var x = this,\r\n    Ctor = x.constructor,\r\n    str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);\r\n\r\n  return x.isNeg() ? '-' + str : str;\r\n};\r\n\r\n\r\n// Helper functions for Decimal.prototype (P) and/or Decimal methods, and their callers.\r\n\r\n\r\n/*\r\n *  digitsToString           P.cubeRoot, P.logarithm, P.squareRoot, P.toFraction, P.toPower,\r\n *                           finiteToString, naturalExponential, naturalLogarithm\r\n *  checkInt32               P.toDecimalPlaces, P.toExponential, P.toFixed, P.toNearest,\r\n *                           P.toPrecision, P.toSignificantDigits, toStringBinary, random\r\n *  checkRoundingDigits      P.logarithm, P.toPower, naturalExponential, naturalLogarithm\r\n *  convertBase              toStringBinary, parseOther\r\n *  cos                      P.cos\r\n *  divide                   P.atanh, P.cubeRoot, P.dividedBy, P.dividedToIntegerBy,\r\n *                           P.logarithm, P.modulo, P.squareRoot, P.tan, P.tanh, P.toFraction,\r\n *                           P.toNearest, toStringBinary, naturalExponential, naturalLogarithm,\r\n *                           taylorSeries, atan2, parseOther\r\n *  finalise                 P.absoluteValue, P.atan, P.atanh, P.ceil, P.cos, P.cosh,\r\n *                           P.cubeRoot, P.dividedToIntegerBy, P.floor, P.logarithm, P.minus,\r\n *                           P.modulo, P.negated, P.plus, P.round, P.sin, P.sinh, P.squareRoot,\r\n *                           P.tan, P.times, P.toDecimalPlaces, P.toExponential, P.toFixed,\r\n *                           P.toNearest, P.toPower, P.toPrecision, P.toSignificantDigits,\r\n *                           P.truncated, divide, getLn10, getPi, naturalExponential,\r\n *                           naturalLogarithm, ceil, floor, round, trunc\r\n *  finiteToString           P.toExponential, P.toFixed, P.toPrecision, P.toString, P.valueOf,\r\n *                           toStringBinary\r\n *  getBase10Exponent        P.minus, P.plus, P.times, parseOther\r\n *  getLn10                  P.logarithm, naturalLogarithm\r\n *  getPi                    P.acos, P.asin, P.atan, toLessThanHalfPi, atan2\r\n *  getPrecision             P.precision, P.toFraction\r\n *  getZeroString            digitsToString, finiteToString\r\n *  intPow                   P.toPower, parseOther\r\n *  isOdd                    toLessThanHalfPi\r\n *  maxOrMin                 max, min\r\n *  naturalExponential       P.naturalExponential, P.toPower\r\n *  naturalLogarithm         P.acosh, P.asinh, P.atanh, P.logarithm, P.naturalLogarithm,\r\n *                           P.toPower, naturalExponential\r\n *  nonFiniteToString        finiteToString, toStringBinary\r\n *  parseDecimal             Decimal\r\n *  parseOther               Decimal\r\n *  sin                      P.sin\r\n *  taylorSeries             P.cosh, P.sinh, cos, sin\r\n *  toLessThanHalfPi         P.cos, P.sin\r\n *  toStringBinary           P.toBinary, P.toHexadecimal, P.toOctal\r\n *  truncate                 intPow\r\n *\r\n *  Throws:                  P.logarithm, P.precision, P.toFraction, checkInt32, getLn10, getPi,\r\n *                           naturalLogarithm, config, parseOther, random, Decimal\r\n */\r\n\r\n\r\nfunction digitsToString(d) {\r\n  var i, k, ws,\r\n    indexOfLastWord = d.length - 1,\r\n    str = '',\r\n    w = d[0];\r\n\r\n  if (indexOfLastWord > 0) {\r\n    str += w;\r\n    for (i = 1; i < indexOfLastWord; i++) {\r\n      ws = d[i] + '';\r\n      k = LOG_BASE - ws.length;\r\n      if (k) str += getZeroString(k);\r\n      str += ws;\r\n    }\r\n\r\n    w = d[i];\r\n    ws = w + '';\r\n    k = LOG_BASE - ws.length;\r\n    if (k) str += getZeroString(k);\r\n  } else if (w === 0) {\r\n    return '0';\r\n  }\r\n\r\n  // Remove trailing zeros of last w.\r\n  for (; w % 10 === 0;) w /= 10;\r\n\r\n  return str + w;\r\n}\r\n\r\n\r\nfunction checkInt32(i, min, max) {\r\n  if (i !== ~~i || i < min || i > max) {\r\n    throw Error(invalidArgument + i);\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Check 5 rounding digits if `repeating` is null, 4 otherwise.\r\n * `repeating == null` if caller is `log` or `pow`,\r\n * `repeating != null` if caller is `naturalLogarithm` or `naturalExponential`.\r\n */\r\nfunction checkRoundingDigits(d, i, rm, repeating) {\r\n  var di, k, r, rd;\r\n\r\n  // Get the length of the first word of the array d.\r\n  for (k = d[0]; k >= 10; k /= 10) --i;\r\n\r\n  // Is the rounding digit in the first word of d?\r\n  if (--i < 0) {\r\n    i += LOG_BASE;\r\n    di = 0;\r\n  } else {\r\n    di = Math.ceil((i + 1) / LOG_BASE);\r\n    i %= LOG_BASE;\r\n  }\r\n\r\n  // i is the index (0 - 6) of the rounding digit.\r\n  // E.g. if within the word 3487563 the first rounding digit is 5,\r\n  // then i = 4, k = 1000, rd = 3487563 % 1000 = 563\r\n  k = mathpow(10, LOG_BASE - i);\r\n  rd = d[di] % k | 0;\r\n\r\n  if (repeating == null) {\r\n    if (i < 3) {\r\n      if (i == 0) rd = rd / 100 | 0;\r\n      else if (i == 1) rd = rd / 10 | 0;\r\n      r = rm < 4 && rd == 99999 || rm > 3 && rd == 49999 || rd == 50000 || rd == 0;\r\n    } else {\r\n      r = (rm < 4 && rd + 1 == k || rm > 3 && rd + 1 == k / 2) &&\r\n        (d[di + 1] / k / 100 | 0) == mathpow(10, i - 2) - 1 ||\r\n          (rd == k / 2 || rd == 0) && (d[di + 1] / k / 100 | 0) == 0;\r\n    }\r\n  } else {\r\n    if (i < 4) {\r\n      if (i == 0) rd = rd / 1000 | 0;\r\n      else if (i == 1) rd = rd / 100 | 0;\r\n      else if (i == 2) rd = rd / 10 | 0;\r\n      r = (repeating || rm < 4) && rd == 9999 || !repeating && rm > 3 && rd == 4999;\r\n    } else {\r\n      r = ((repeating || rm < 4) && rd + 1 == k ||\r\n      (!repeating && rm > 3) && rd + 1 == k / 2) &&\r\n        (d[di + 1] / k / 1000 | 0) == mathpow(10, i - 3) - 1;\r\n    }\r\n  }\r\n\r\n  return r;\r\n}\r\n\r\n\r\n// Convert string of `baseIn` to an array of numbers of `baseOut`.\r\n// Eg. convertBase('255', 10, 16) returns [15, 15].\r\n// Eg. convertBase('ff', 16, 10) returns [2, 5, 5].\r\nfunction convertBase(str, baseIn, baseOut) {\r\n  var j,\r\n    arr = [0],\r\n    arrL,\r\n    i = 0,\r\n    strL = str.length;\r\n\r\n  for (; i < strL;) {\r\n    for (arrL = arr.length; arrL--;) arr[arrL] *= baseIn;\r\n    arr[0] += NUMERALS.indexOf(str.charAt(i++));\r\n    for (j = 0; j < arr.length; j++) {\r\n      if (arr[j] > baseOut - 1) {\r\n        if (arr[j + 1] === void 0) arr[j + 1] = 0;\r\n        arr[j + 1] += arr[j] / baseOut | 0;\r\n        arr[j] %= baseOut;\r\n      }\r\n    }\r\n  }\r\n\r\n  return arr.reverse();\r\n}\r\n\r\n\r\n/*\r\n * cos(x) = 1 - x^2/2! + x^4/4! - ...\r\n * |x| < pi/2\r\n *\r\n */\r\nfunction cosine(Ctor, x) {\r\n  var k, len, y;\r\n\r\n  if (x.isZero()) return x;\r\n\r\n  // Argument reduction: cos(4x) = 8*(cos^4(x) - cos^2(x)) + 1\r\n  // i.e. cos(x) = 8*(cos^4(x/4) - cos^2(x/4)) + 1\r\n\r\n  // Estimate the optimum number of times to use the argument reduction.\r\n  len = x.d.length;\r\n  if (len < 32) {\r\n    k = Math.ceil(len / 3);\r\n    y = (1 / tinyPow(4, k)).toString();\r\n  } else {\r\n    k = 16;\r\n    y = '2.3283064365386962890625e-10';\r\n  }\r\n\r\n  Ctor.precision += k;\r\n\r\n  x = taylorSeries(Ctor, 1, x.times(y), new Ctor(1));\r\n\r\n  // Reverse argument reduction\r\n  for (var i = k; i--;) {\r\n    var cos2x = x.times(x);\r\n    x = cos2x.times(cos2x).minus(cos2x).times(8).plus(1);\r\n  }\r\n\r\n  Ctor.precision -= k;\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Perform division in the specified base.\r\n */\r\nvar divide = (function () {\r\n\r\n  // Assumes non-zero x and k, and hence non-zero result.\r\n  function multiplyInteger(x, k, base) {\r\n    var temp,\r\n      carry = 0,\r\n      i = x.length;\r\n\r\n    for (x = x.slice(); i--;) {\r\n      temp = x[i] * k + carry;\r\n      x[i] = temp % base | 0;\r\n      carry = temp / base | 0;\r\n    }\r\n\r\n    if (carry) x.unshift(carry);\r\n\r\n    return x;\r\n  }\r\n\r\n  function compare(a, b, aL, bL) {\r\n    var i, r;\r\n\r\n    if (aL != bL) {\r\n      r = aL > bL ? 1 : -1;\r\n    } else {\r\n      for (i = r = 0; i < aL; i++) {\r\n        if (a[i] != b[i]) {\r\n          r = a[i] > b[i] ? 1 : -1;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return r;\r\n  }\r\n\r\n  function subtract(a, b, aL, base) {\r\n    var i = 0;\r\n\r\n    // Subtract b from a.\r\n    for (; aL--;) {\r\n      a[aL] -= i;\r\n      i = a[aL] < b[aL] ? 1 : 0;\r\n      a[aL] = i * base + a[aL] - b[aL];\r\n    }\r\n\r\n    // Remove leading zeros.\r\n    for (; !a[0] && a.length > 1;) a.shift();\r\n  }\r\n\r\n  return function (x, y, pr, rm, dp, base) {\r\n    var cmp, e, i, k, logBase, more, prod, prodL, q, qd, rem, remL, rem0, sd, t, xi, xL, yd0,\r\n      yL, yz,\r\n      Ctor = x.constructor,\r\n      sign = x.s == y.s ? 1 : -1,\r\n      xd = x.d,\r\n      yd = y.d;\r\n\r\n    // Either NaN, Infinity or 0?\r\n    if (!xd || !xd[0] || !yd || !yd[0]) {\r\n\r\n      return new Ctor(// Return NaN if either NaN, or both Infinity or 0.\r\n        !x.s || !y.s || (xd ? yd && xd[0] == yd[0] : !yd) ? NaN :\r\n\r\n        // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.\r\n        xd && xd[0] == 0 || !yd ? sign * 0 : sign / 0);\r\n    }\r\n\r\n    if (base) {\r\n      logBase = 1;\r\n      e = x.e - y.e;\r\n    } else {\r\n      base = BASE;\r\n      logBase = LOG_BASE;\r\n      e = mathfloor(x.e / logBase) - mathfloor(y.e / logBase);\r\n    }\r\n\r\n    yL = yd.length;\r\n    xL = xd.length;\r\n    q = new Ctor(sign);\r\n    qd = q.d = [];\r\n\r\n    // Result exponent may be one less than e.\r\n    // The digit array of a Decimal from toStringBinary may have trailing zeros.\r\n    for (i = 0; yd[i] == (xd[i] || 0); i++);\r\n\r\n    if (yd[i] > (xd[i] || 0)) e--;\r\n\r\n    if (pr == null) {\r\n      sd = pr = Ctor.precision;\r\n      rm = Ctor.rounding;\r\n    } else if (dp) {\r\n      sd = pr + (x.e - y.e) + 1;\r\n    } else {\r\n      sd = pr;\r\n    }\r\n\r\n    if (sd < 0) {\r\n      qd.push(1);\r\n      more = true;\r\n    } else {\r\n\r\n      // Convert precision in number of base 10 digits to base 1e7 digits.\r\n      sd = sd / logBase + 2 | 0;\r\n      i = 0;\r\n\r\n      // divisor < 1e7\r\n      if (yL == 1) {\r\n        k = 0;\r\n        yd = yd[0];\r\n        sd++;\r\n\r\n        // k is the carry.\r\n        for (; (i < xL || k) && sd--; i++) {\r\n          t = k * base + (xd[i] || 0);\r\n          qd[i] = t / yd | 0;\r\n          k = t % yd | 0;\r\n        }\r\n\r\n        more = k || i < xL;\r\n\r\n      // divisor >= 1e7\r\n      } else {\r\n\r\n        // Normalise xd and yd so highest order digit of yd is >= base/2\r\n        k = base / (yd[0] + 1) | 0;\r\n\r\n        if (k > 1) {\r\n          yd = multiplyInteger(yd, k, base);\r\n          xd = multiplyInteger(xd, k, base);\r\n          yL = yd.length;\r\n          xL = xd.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xd.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL;) rem[remL++] = 0;\r\n\r\n        yz = yd.slice();\r\n        yz.unshift(0);\r\n        yd0 = yd[0];\r\n\r\n        if (yd[1] >= base / 2) ++yd0;\r\n\r\n        do {\r\n          k = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yd, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, k.\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n            // k will be how many times the divisor goes into the current remainder.\r\n            k = rem0 / yd0 | 0;\r\n\r\n            //  Algorithm:\r\n            //  1. product = divisor * trial digit (k)\r\n            //  2. if product > remainder: product -= divisor, k--\r\n            //  3. remainder -= product\r\n            //  4. if product was < remainder at 2:\r\n            //    5. compare new remainder and divisor\r\n            //    6. If remainder > divisor: remainder -= divisor, k++\r\n\r\n            if (k > 1) {\r\n              if (k >= base) k = base - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiplyInteger(yd, k, base);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              cmp = compare(prod, rem, prodL, remL);\r\n\r\n              // product > remainder.\r\n              if (cmp == 1) {\r\n                k--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yd, prodL, base);\r\n              }\r\n            } else {\r\n\r\n              // cmp is -1.\r\n              // If k is 0, there is no need to compare yd and rem again below, so change cmp to 1\r\n              // to avoid it. If k is 1 there is a need to compare yd and rem again below.\r\n              if (k == 0) cmp = k = 1;\r\n              prod = yd.slice();\r\n            }\r\n\r\n            prodL = prod.length;\r\n            if (prodL < remL) prod.unshift(0);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL, base);\r\n\r\n            // If product was < previous remainder.\r\n            if (cmp == -1) {\r\n              remL = rem.length;\r\n\r\n              // Compare divisor and new remainder.\r\n              cmp = compare(yd, rem, yL, remL);\r\n\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              if (cmp < 1) {\r\n                k++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yd, remL, base);\r\n              }\r\n            }\r\n\r\n            remL = rem.length;\r\n          } else if (cmp === 0) {\r\n            k++;\r\n            rem = [0];\r\n          }    // if cmp === 1, k will be 0\r\n\r\n          // Add the next digit, k, to the result array.\r\n          qd[i++] = k;\r\n\r\n          // Update the remainder.\r\n          if (cmp && rem[0]) {\r\n            rem[remL++] = xd[xi] || 0;\r\n          } else {\r\n            rem = [xd[xi]];\r\n            remL = 1;\r\n          }\r\n\r\n        } while ((xi++ < xL || rem[0] !== void 0) && sd--);\r\n\r\n        more = rem[0] !== void 0;\r\n      }\r\n\r\n      // Leading zero?\r\n      if (!qd[0]) qd.shift();\r\n    }\r\n\r\n    // logBase is 1 when divide is being used for base conversion.\r\n    if (logBase == 1) {\r\n      q.e = e;\r\n      inexact = more;\r\n    } else {\r\n\r\n      // To calculate q.e, first get the number of digits of qd[0].\r\n      for (i = 1, k = qd[0]; k >= 10; k /= 10) i++;\r\n      q.e = i + e * logBase - 1;\r\n\r\n      finalise(q, dp ? pr + q.e + 1 : pr, rm, more);\r\n    }\r\n\r\n    return q;\r\n  };\r\n})();\r\n\r\n\r\n/*\r\n * Round `x` to `sd` significant digits using rounding mode `rm`.\r\n * Check for over/under-flow.\r\n */\r\n function finalise(x, sd, rm, isTruncated) {\r\n  var digits, i, j, k, rd, roundUp, w, xd, xdi,\r\n    Ctor = x.constructor;\r\n\r\n  // Don't round if sd is null or undefined.\r\n  out: if (sd != null) {\r\n    xd = x.d;\r\n\r\n    // Infinity/NaN.\r\n    if (!xd) return x;\r\n\r\n    // rd: the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n    // w: the word of xd containing rd, a base 1e7 number.\r\n    // xdi: the index of w within xd.\r\n    // digits: the number of digits of w.\r\n    // i: what would be the index of rd within w if all the numbers were 7 digits long (i.e. if\r\n    // they had leading zeros)\r\n    // j: if > 0, the actual index of rd within w (if < 0, rd is a leading zero).\r\n\r\n    // Get the length of the first word of the digits array xd.\r\n    for (digits = 1, k = xd[0]; k >= 10; k /= 10) digits++;\r\n    i = sd - digits;\r\n\r\n    // Is the rounding digit in the first word of xd?\r\n    if (i < 0) {\r\n      i += LOG_BASE;\r\n      j = sd;\r\n      w = xd[xdi = 0];\r\n\r\n      // Get the rounding digit at index j of w.\r\n      rd = w / mathpow(10, digits - j - 1) % 10 | 0;\r\n    } else {\r\n      xdi = Math.ceil((i + 1) / LOG_BASE);\r\n      k = xd.length;\r\n      if (xdi >= k) {\r\n        if (isTruncated) {\r\n\r\n          // Needed by `naturalExponential`, `naturalLogarithm` and `squareRoot`.\r\n          for (; k++ <= xdi;) xd.push(0);\r\n          w = rd = 0;\r\n          digits = 1;\r\n          i %= LOG_BASE;\r\n          j = i - LOG_BASE + 1;\r\n        } else {\r\n          break out;\r\n        }\r\n      } else {\r\n        w = k = xd[xdi];\r\n\r\n        // Get the number of digits of w.\r\n        for (digits = 1; k >= 10; k /= 10) digits++;\r\n\r\n        // Get the index of rd within w.\r\n        i %= LOG_BASE;\r\n\r\n        // Get the index of rd within w, adjusted for leading zeros.\r\n        // The number of leading zeros of w is given by LOG_BASE - digits.\r\n        j = i - LOG_BASE + digits;\r\n\r\n        // Get the rounding digit at index j of w.\r\n        rd = j < 0 ? 0 : w / mathpow(10, digits - j - 1) % 10 | 0;\r\n      }\r\n    }\r\n\r\n    // Are there any non-zero digits after the rounding digit?\r\n    isTruncated = isTruncated || sd < 0 ||\r\n      xd[xdi + 1] !== void 0 || (j < 0 ? w : w % mathpow(10, digits - j - 1));\r\n\r\n    // The expression `w % mathpow(10, digits - j - 1)` returns all the digits of w to the right\r\n    // of the digit at (left-to-right) index j, e.g. if w is 908714 and j is 2, the expression\r\n    // will give 714.\r\n\r\n    roundUp = rm < 4\r\n      ? (rd || isTruncated) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n      : rd > 5 || rd == 5 && (rm == 4 || isTruncated || rm == 6 &&\r\n\r\n        // Check whether the digit to the left of the rounding digit is odd.\r\n        ((i > 0 ? j > 0 ? w / mathpow(10, digits - j) : 0 : xd[xdi - 1]) % 10) & 1 ||\r\n          rm == (x.s < 0 ? 8 : 7));\r\n\r\n    if (sd < 1 || !xd[0]) {\r\n      xd.length = 0;\r\n      if (roundUp) {\r\n\r\n        // Convert sd to decimal places.\r\n        sd -= x.e + 1;\r\n\r\n        // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n        xd[0] = mathpow(10, (LOG_BASE - sd % LOG_BASE) % LOG_BASE);\r\n        x.e = -sd || 0;\r\n      } else {\r\n\r\n        // Zero.\r\n        xd[0] = x.e = 0;\r\n      }\r\n\r\n      return x;\r\n    }\r\n\r\n    // Remove excess digits.\r\n    if (i == 0) {\r\n      xd.length = xdi;\r\n      k = 1;\r\n      xdi--;\r\n    } else {\r\n      xd.length = xdi + 1;\r\n      k = mathpow(10, LOG_BASE - i);\r\n\r\n      // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n      // j > 0 means i > number of leading zeros of w.\r\n      xd[xdi] = j > 0 ? (w / mathpow(10, digits - j) % mathpow(10, j) | 0) * k : 0;\r\n    }\r\n\r\n    if (roundUp) {\r\n      for (;;) {\r\n\r\n        // Is the digit to be rounded up in the first word of xd?\r\n        if (xdi == 0) {\r\n\r\n          // i will be the length of xd[0] before k is added.\r\n          for (i = 1, j = xd[0]; j >= 10; j /= 10) i++;\r\n          j = xd[0] += k;\r\n          for (k = 1; j >= 10; j /= 10) k++;\r\n\r\n          // if i != k the length has increased.\r\n          if (i != k) {\r\n            x.e++;\r\n            if (xd[0] == BASE) xd[0] = 1;\r\n          }\r\n\r\n          break;\r\n        } else {\r\n          xd[xdi] += k;\r\n          if (xd[xdi] != BASE) break;\r\n          xd[xdi--] = 0;\r\n          k = 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (i = xd.length; xd[--i] === 0;) xd.pop();\r\n  }\r\n\r\n  if (external) {\r\n\r\n    // Overflow?\r\n    if (x.e > Ctor.maxE) {\r\n\r\n      // Infinity.\r\n      x.d = null;\r\n      x.e = NaN;\r\n\r\n    // Underflow?\r\n    } else if (x.e < Ctor.minE) {\r\n\r\n      // Zero.\r\n      x.e = 0;\r\n      x.d = [0];\r\n      // Ctor.underflow = true;\r\n    } // else Ctor.underflow = false;\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\nfunction finiteToString(x, isExp, sd) {\r\n  if (!x.isFinite()) return nonFiniteToString(x);\r\n  var k,\r\n    e = x.e,\r\n    str = digitsToString(x.d),\r\n    len = str.length;\r\n\r\n  if (isExp) {\r\n    if (sd && (k = sd - len) > 0) {\r\n      str = str.charAt(0) + '.' + str.slice(1) + getZeroString(k);\r\n    } else if (len > 1) {\r\n      str = str.charAt(0) + '.' + str.slice(1);\r\n    }\r\n\r\n    str = str + (x.e < 0 ? 'e' : 'e+') + x.e;\r\n  } else if (e < 0) {\r\n    str = '0.' + getZeroString(-e - 1) + str;\r\n    if (sd && (k = sd - len) > 0) str += getZeroString(k);\r\n  } else if (e >= len) {\r\n    str += getZeroString(e + 1 - len);\r\n    if (sd && (k = sd - e - 1) > 0) str = str + '.' + getZeroString(k);\r\n  } else {\r\n    if ((k = e + 1) < len) str = str.slice(0, k) + '.' + str.slice(k);\r\n    if (sd && (k = sd - len) > 0) {\r\n      if (e + 1 === len) str += '.';\r\n      str += getZeroString(k);\r\n    }\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n\r\n// Calculate the base 10 exponent from the base 1e7 exponent.\r\nfunction getBase10Exponent(digits, e) {\r\n  var w = digits[0];\r\n\r\n  // Add the number of digits of the first word of the digits array.\r\n  for ( e *= LOG_BASE; w >= 10; w /= 10) e++;\r\n  return e;\r\n}\r\n\r\n\r\nfunction getLn10(Ctor, sd, pr) {\r\n  if (sd > LN10_PRECISION) {\r\n\r\n    // Reset global state in case the exception is caught.\r\n    external = true;\r\n    if (pr) Ctor.precision = pr;\r\n    throw Error(precisionLimitExceeded);\r\n  }\r\n  return finalise(new Ctor(LN10), sd, 1, true);\r\n}\r\n\r\n\r\nfunction getPi(Ctor, sd, rm) {\r\n  if (sd > PI_PRECISION) throw Error(precisionLimitExceeded);\r\n  return finalise(new Ctor(PI), sd, rm, true);\r\n}\r\n\r\n\r\nfunction getPrecision(digits) {\r\n  var w = digits.length - 1,\r\n    len = w * LOG_BASE + 1;\r\n\r\n  w = digits[w];\r\n\r\n  // If non-zero...\r\n  if (w) {\r\n\r\n    // Subtract the number of trailing zeros of the last word.\r\n    for (; w % 10 == 0; w /= 10) len--;\r\n\r\n    // Add the number of digits of the first word.\r\n    for (w = digits[0]; w >= 10; w /= 10) len++;\r\n  }\r\n\r\n  return len;\r\n}\r\n\r\n\r\nfunction getZeroString(k) {\r\n  var zs = '';\r\n  for (; k--;) zs += '0';\r\n  return zs;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the value of Decimal `x` to the power `n`, where `n` is an\r\n * integer of type number.\r\n *\r\n * Implements 'exponentiation by squaring'. Called by `pow` and `parseOther`.\r\n *\r\n */\r\nfunction intPow(Ctor, x, n, pr) {\r\n  var isTruncated,\r\n    r = new Ctor(1),\r\n\r\n    // Max n of 9007199254740991 takes 53 loop iterations.\r\n    // Maximum digits array length; leaves [28, 34] guard digits.\r\n    k = Math.ceil(pr / LOG_BASE + 4);\r\n\r\n  external = false;\r\n\r\n  for (;;) {\r\n    if (n % 2) {\r\n      r = r.times(x);\r\n      if (truncate(r.d, k)) isTruncated = true;\r\n    }\r\n\r\n    n = mathfloor(n / 2);\r\n    if (n === 0) {\r\n\r\n      // To ensure correct rounding when r.d is truncated, increment the last word if it is zero.\r\n      n = r.d.length - 1;\r\n      if (isTruncated && r.d[n] === 0) ++r.d[n];\r\n      break;\r\n    }\r\n\r\n    x = x.times(x);\r\n    truncate(x.d, k);\r\n  }\r\n\r\n  external = true;\r\n\r\n  return r;\r\n}\r\n\r\n\r\nfunction isOdd(n) {\r\n  return n.d[n.d.length - 1] & 1;\r\n}\r\n\r\n\r\n/*\r\n * Handle `max` (`n` is -1) and `min` (`n` is 1).\r\n */\r\nfunction maxOrMin(Ctor, args, n) {\r\n  var k, y,\r\n    x = new Ctor(args[0]),\r\n    i = 0;\r\n\r\n  for (; ++i < args.length;) {\r\n    y = new Ctor(args[i]);\r\n\r\n    // NaN?\r\n    if (!y.s) {\r\n      x = y;\r\n      break;\r\n    }\r\n\r\n    k = x.cmp(y);\r\n\r\n    if (k === n || k === 0 && x.s === n) {\r\n      x = y;\r\n    }\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural exponential of `x` rounded to `sd` significant\r\n * digits.\r\n *\r\n * Taylor/Maclaurin series.\r\n *\r\n * exp(x) = x^0/0! + x^1/1! + x^2/2! + x^3/3! + ...\r\n *\r\n * Argument reduction:\r\n *   Repeat x = x / 32, k += 5, until |x| < 0.1\r\n *   exp(x) = exp(x / 2^k)^(2^k)\r\n *\r\n * Previously, the argument was initially reduced by\r\n * exp(x) = exp(r) * 10^k  where r = x - k * ln10, k = floor(x / ln10)\r\n * to first put r in the range [0, ln10], before dividing by 32 until |x| < 0.1, but this was\r\n * found to be slower than just dividing repeatedly by 32 as above.\r\n *\r\n * Max integer argument: exp('20723265836946413') = 6.3e+9000000000000000\r\n * Min integer argument: exp('-20723265836946411') = 1.2e-9000000000000000\r\n * (Math object integer min/max: Math.exp(709) = 8.2e+307, Math.exp(-745) = 5e-324)\r\n *\r\n *  exp(Infinity)  = Infinity\r\n *  exp(-Infinity) = 0\r\n *  exp(NaN)       = NaN\r\n *  exp(0)        = 1\r\n *\r\n *  exp(x) is non-terminating for any finite, non-zero x.\r\n *\r\n *  The result will always be correctly rounded.\r\n *\r\n */\r\nfunction naturalExponential(x, sd) {\r\n  var denominator, guard, j, pow, sum, t, wpr,\r\n    rep = 0,\r\n    i = 0,\r\n    k = 0,\r\n    Ctor = x.constructor,\r\n    rm = Ctor.rounding,\r\n    pr = Ctor.precision;\r\n\r\n  // 0/NaN/Infinity?\r\n  if (!x.d || !x.d[0] || x.e > 17) {\r\n\r\n    return new Ctor(x.d\r\n      ? !x.d[0] ? 1 : x.s < 0 ? 0 : 1 / 0\r\n      : x.s ? x.s < 0 ? 0 : x : 0 / 0);\r\n  }\r\n\r\n  if (sd == null) {\r\n    external = false;\r\n    wpr = pr;\r\n  } else {\r\n    wpr = sd;\r\n  }\r\n\r\n  t = new Ctor(0.03125);\r\n\r\n  // while abs(x) >= 0.1\r\n  while (x.e > -2) {\r\n\r\n    // x = x / 2^5\r\n    x = x.times(t);\r\n    k += 5;\r\n  }\r\n\r\n  // Use 2 * log10(2^k) + 5 (empirically derived) to estimate the increase in precision\r\n  // necessary to ensure the first 4 rounding digits are correct.\r\n  guard = Math.log(mathpow(2, k)) / Math.LN10 * 2 + 5 | 0;\r\n  wpr += guard;\r\n  denominator = pow = sum = new Ctor(1);\r\n  Ctor.precision = wpr;\r\n\r\n  for (;;) {\r\n    pow = finalise(pow.times(x), wpr, 1);\r\n    denominator = denominator.times(++i);\r\n    t = sum.plus(divide(pow, denominator, wpr, 1));\r\n\r\n    if (digitsToString(t.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {\r\n      j = k;\r\n      while (j--) sum = finalise(sum.times(sum), wpr, 1);\r\n\r\n      // Check to see if the first 4 rounding digits are [49]999.\r\n      // If so, repeat the summation with a higher precision, otherwise\r\n      // e.g. with precision: 18, rounding: 1\r\n      // exp(18.404272462595034083567793919843761) = 98372560.1229999999 (should be 98372560.123)\r\n      // `wpr - guard` is the index of first rounding digit.\r\n      if (sd == null) {\r\n\r\n        if (rep < 3 && checkRoundingDigits(sum.d, wpr - guard, rm, rep)) {\r\n          Ctor.precision = wpr += 10;\r\n          denominator = pow = t = new Ctor(1);\r\n          i = 0;\r\n          rep++;\r\n        } else {\r\n          return finalise(sum, Ctor.precision = pr, rm, external = true);\r\n        }\r\n      } else {\r\n        Ctor.precision = pr;\r\n        return sum;\r\n      }\r\n    }\r\n\r\n    sum = t;\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural logarithm of `x` rounded to `sd` significant\r\n * digits.\r\n *\r\n *  ln(-n)        = NaN\r\n *  ln(0)         = -Infinity\r\n *  ln(-0)        = -Infinity\r\n *  ln(1)         = 0\r\n *  ln(Infinity)  = Infinity\r\n *  ln(-Infinity) = NaN\r\n *  ln(NaN)       = NaN\r\n *\r\n *  ln(n) (n != 1) is non-terminating.\r\n *\r\n */\r\nfunction naturalLogarithm(y, sd) {\r\n  var c, c0, denominator, e, numerator, rep, sum, t, wpr, x1, x2,\r\n    n = 1,\r\n    guard = 10,\r\n    x = y,\r\n    xd = x.d,\r\n    Ctor = x.constructor,\r\n    rm = Ctor.rounding,\r\n    pr = Ctor.precision;\r\n\r\n  // Is x negative or Infinity, NaN, 0 or 1?\r\n  if (x.s < 0 || !xd || !xd[0] || !x.e && xd[0] == 1 && xd.length == 1) {\r\n    return new Ctor(xd && !xd[0] ? -1 / 0 : x.s != 1 ? NaN : xd ? 0 : x);\r\n  }\r\n\r\n  if (sd == null) {\r\n    external = false;\r\n    wpr = pr;\r\n  } else {\r\n    wpr = sd;\r\n  }\r\n\r\n  Ctor.precision = wpr += guard;\r\n  c = digitsToString(xd);\r\n  c0 = c.charAt(0);\r\n\r\n  if (Math.abs(e = x.e) < 1.5e15) {\r\n\r\n    // Argument reduction.\r\n    // The series converges faster the closer the argument is to 1, so using\r\n    // ln(a^b) = b * ln(a),   ln(a) = ln(a^b) / b\r\n    // multiply the argument by itself until the leading digits of the significand are 7, 8, 9,\r\n    // 10, 11, 12 or 13, recording the number of multiplications so the sum of the series can\r\n    // later be divided by this number, then separate out the power of 10 using\r\n    // ln(a*10^b) = ln(a) + b*ln(10).\r\n\r\n    // max n is 21 (gives 0.9, 1.0 or 1.1) (9e15 / 21 = 4.2e14).\r\n    //while (c0 < 9 && c0 != 1 || c0 == 1 && c.charAt(1) > 1) {\r\n    // max n is 6 (gives 0.7 - 1.3)\r\n    while (c0 < 7 && c0 != 1 || c0 == 1 && c.charAt(1) > 3) {\r\n      x = x.times(y);\r\n      c = digitsToString(x.d);\r\n      c0 = c.charAt(0);\r\n      n++;\r\n    }\r\n\r\n    e = x.e;\r\n\r\n    if (c0 > 1) {\r\n      x = new Ctor('0.' + c);\r\n      e++;\r\n    } else {\r\n      x = new Ctor(c0 + '.' + c.slice(1));\r\n    }\r\n  } else {\r\n\r\n    // The argument reduction method above may result in overflow if the argument y is a massive\r\n    // number with exponent >= 1500000000000000 (9e15 / 6 = 1.5e15), so instead recall this\r\n    // function using ln(x*10^e) = ln(x) + e*ln(10).\r\n    t = getLn10(Ctor, wpr + 2, pr).times(e + '');\r\n    x = naturalLogarithm(new Ctor(c0 + '.' + c.slice(1)), wpr - guard).plus(t);\r\n    Ctor.precision = pr;\r\n\r\n    return sd == null ? finalise(x, pr, rm, external = true) : x;\r\n  }\r\n\r\n  // x1 is x reduced to a value near 1.\r\n  x1 = x;\r\n\r\n  // Taylor series.\r\n  // ln(y) = ln((1 + x)/(1 - x)) = 2(x + x^3/3 + x^5/5 + x^7/7 + ...)\r\n  // where x = (y - 1)/(y + 1)    (|x| < 1)\r\n  sum = numerator = x = divide(x.minus(1), x.plus(1), wpr, 1);\r\n  x2 = finalise(x.times(x), wpr, 1);\r\n  denominator = 3;\r\n\r\n  for (;;) {\r\n    numerator = finalise(numerator.times(x2), wpr, 1);\r\n    t = sum.plus(divide(numerator, new Ctor(denominator), wpr, 1));\r\n\r\n    if (digitsToString(t.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {\r\n      sum = sum.times(2);\r\n\r\n      // Reverse the argument reduction. Check that e is not 0 because, besides preventing an\r\n      // unnecessary calculation, -0 + 0 = +0 and to ensure correct rounding -0 needs to stay -0.\r\n      if (e !== 0) sum = sum.plus(getLn10(Ctor, wpr + 2, pr).times(e + ''));\r\n      sum = divide(sum, new Ctor(n), wpr, 1);\r\n\r\n      // Is rm > 3 and the first 4 rounding digits 4999, or rm < 4 (or the summation has\r\n      // been repeated previously) and the first 4 rounding digits 9999?\r\n      // If so, restart the summation with a higher precision, otherwise\r\n      // e.g. with precision: 12, rounding: 1\r\n      // ln(135520028.6126091714265381533) = 18.7246299999 when it should be 18.72463.\r\n      // `wpr - guard` is the index of first rounding digit.\r\n      if (sd == null) {\r\n        if (checkRoundingDigits(sum.d, wpr - guard, rm, rep)) {\r\n          Ctor.precision = wpr += guard;\r\n          t = numerator = x = divide(x1.minus(1), x1.plus(1), wpr, 1);\r\n          x2 = finalise(x.times(x), wpr, 1);\r\n          denominator = rep = 1;\r\n        } else {\r\n          return finalise(sum, Ctor.precision = pr, rm, external = true);\r\n        }\r\n      } else {\r\n        Ctor.precision = pr;\r\n        return sum;\r\n      }\r\n    }\r\n\r\n    sum = t;\r\n    denominator += 2;\r\n  }\r\n}\r\n\r\n\r\n// Infinity, NaN.\r\nfunction nonFiniteToString(x) {\r\n  // Unsigned.\r\n  return String(x.s * x.s / 0);\r\n}\r\n\r\n\r\n/*\r\n * Parse the value of a new Decimal `x` from string `str`.\r\n */\r\nfunction parseDecimal(x, str) {\r\n  var e, i, len;\r\n\r\n  // TODO BigInt str: no need to check for decimal point, exponential form or leading zeros.\r\n  // Decimal point?\r\n  if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n  // Exponential form?\r\n  if ((i = str.search(/e/i)) > 0) {\r\n\r\n    // Determine exponent.\r\n    if (e < 0) e = i;\r\n    e += +str.slice(i + 1);\r\n    str = str.substring(0, i);\r\n  } else if (e < 0) {\r\n\r\n    // Integer.\r\n    e = str.length;\r\n  }\r\n\r\n  // Determine leading zeros.\r\n  for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n  // Determine trailing zeros.\r\n  for (len = str.length; str.charCodeAt(len - 1) === 48; --len);\r\n  str = str.slice(i, len);\r\n\r\n  if (str) {\r\n    len -= i;\r\n    x.e = e = e - i - 1;\r\n    x.d = [];\r\n\r\n    // Transform base\r\n\r\n    // e is the base 10 exponent.\r\n    // i is where to slice str to get the first word of the digits array.\r\n    i = (e + 1) % LOG_BASE;\r\n    if (e < 0) i += LOG_BASE;\r\n\r\n    if (i < len) {\r\n      if (i) x.d.push(+str.slice(0, i));\r\n      for (len -= LOG_BASE; i < len;) x.d.push(+str.slice(i, i += LOG_BASE));\r\n      str = str.slice(i);\r\n      i = LOG_BASE - str.length;\r\n    } else {\r\n      i -= len;\r\n    }\r\n\r\n    for (; i--;) str += '0';\r\n    x.d.push(+str);\r\n\r\n    if (external) {\r\n\r\n      // Overflow?\r\n      if (x.e > x.constructor.maxE) {\r\n\r\n        // Infinity.\r\n        x.d = null;\r\n        x.e = NaN;\r\n\r\n      // Underflow?\r\n      } else if (x.e < x.constructor.minE) {\r\n\r\n        // Zero.\r\n        x.e = 0;\r\n        x.d = [0];\r\n        // x.constructor.underflow = true;\r\n      } // else x.constructor.underflow = false;\r\n    }\r\n  } else {\r\n\r\n    // Zero.\r\n    x.e = 0;\r\n    x.d = [0];\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Parse the value of a new Decimal `x` from a string `str`, which is not a decimal value.\r\n */\r\nfunction parseOther(x, str) {\r\n  var base, Ctor, divisor, i, isFloat, len, p, xd, xe;\r\n\r\n  if (str.indexOf('_') > -1) {\r\n    str = str.replace(/(\\d)_(?=\\d)/g, '$1');\r\n    if (isDecimal.test(str)) return parseDecimal(x, str);\r\n  } else if (str === 'Infinity' || str === 'NaN') {\r\n    if (!+str) x.s = NaN;\r\n    x.e = NaN;\r\n    x.d = null;\r\n    return x;\r\n  }\r\n\r\n  if (isHex.test(str))  {\r\n    base = 16;\r\n    str = str.toLowerCase();\r\n  } else if (isBinary.test(str))  {\r\n    base = 2;\r\n  } else if (isOctal.test(str))  {\r\n    base = 8;\r\n  } else {\r\n    throw Error(invalidArgument + str);\r\n  }\r\n\r\n  // Is there a binary exponent part?\r\n  i = str.search(/p/i);\r\n\r\n  if (i > 0) {\r\n    p = +str.slice(i + 1);\r\n    str = str.substring(2, i);\r\n  } else {\r\n    str = str.slice(2);\r\n  }\r\n\r\n  // Convert `str` as an integer then divide the result by `base` raised to a power such that the\r\n  // fraction part will be restored.\r\n  i = str.indexOf('.');\r\n  isFloat = i >= 0;\r\n  Ctor = x.constructor;\r\n\r\n  if (isFloat) {\r\n    str = str.replace('.', '');\r\n    len = str.length;\r\n    i = len - i;\r\n\r\n    // log[10](16) = 1.2041... , log[10](88) = 1.9444....\r\n    divisor = intPow(Ctor, new Ctor(base), i, i * 2);\r\n  }\r\n\r\n  xd = convertBase(str, base, BASE);\r\n  xe = xd.length - 1;\r\n\r\n  // Remove trailing zeros.\r\n  for (i = xe; xd[i] === 0; --i) xd.pop();\r\n  if (i < 0) return new Ctor(x.s * 0);\r\n  x.e = getBase10Exponent(xd, xe);\r\n  x.d = xd;\r\n  external = false;\r\n\r\n  // At what precision to perform the division to ensure exact conversion?\r\n  // maxDecimalIntegerPartDigitCount = ceil(log[10](b) * otherBaseIntegerPartDigitCount)\r\n  // log[10](2) = 0.30103, log[10](8) = 0.90309, log[10](16) = 1.20412\r\n  // E.g. ceil(1.2 * 3) = 4, so up to 4 decimal digits are needed to represent 3 hex int digits.\r\n  // maxDecimalFractionPartDigitCount = {Hex:4|Oct:3|Bin:1} * otherBaseFractionPartDigitCount\r\n  // Therefore using 4 * the number of digits of str will always be enough.\r\n  if (isFloat) x = divide(x, divisor, len * 4);\r\n\r\n  // Multiply by the binary exponent part if present.\r\n  if (p) x = x.times(Math.abs(p) < 54 ? mathpow(2, p) : Decimal.pow(2, p));\r\n  external = true;\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * sin(x) = x - x^3/3! + x^5/5! - ...\r\n * |x| < pi/2\r\n *\r\n */\r\nfunction sine(Ctor, x) {\r\n  var k,\r\n    len = x.d.length;\r\n\r\n  if (len < 3) {\r\n    return x.isZero() ? x : taylorSeries(Ctor, 2, x, x);\r\n  }\r\n\r\n  // Argument reduction: sin(5x) = 16*sin^5(x) - 20*sin^3(x) + 5*sin(x)\r\n  // i.e. sin(x) = 16*sin^5(x/5) - 20*sin^3(x/5) + 5*sin(x/5)\r\n  // and  sin(x) = sin(x/5)(5 + sin^2(x/5)(16sin^2(x/5) - 20))\r\n\r\n  // Estimate the optimum number of times to use the argument reduction.\r\n  k = 1.4 * Math.sqrt(len);\r\n  k = k > 16 ? 16 : k | 0;\r\n\r\n  x = x.times(1 / tinyPow(5, k));\r\n  x = taylorSeries(Ctor, 2, x, x);\r\n\r\n  // Reverse argument reduction\r\n  var sin2_x,\r\n    d5 = new Ctor(5),\r\n    d16 = new Ctor(16),\r\n    d20 = new Ctor(20);\r\n  for (; k--;) {\r\n    sin2_x = x.times(x);\r\n    x = x.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))));\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n// Calculate Taylor series for `cos`, `cosh`, `sin` and `sinh`.\r\nfunction taylorSeries(Ctor, n, x, y, isHyperbolic) {\r\n  var j, t, u, x2,\r\n    i = 1,\r\n    pr = Ctor.precision,\r\n    k = Math.ceil(pr / LOG_BASE);\r\n\r\n  external = false;\r\n  x2 = x.times(x);\r\n  u = new Ctor(y);\r\n\r\n  for (;;) {\r\n    t = divide(u.times(x2), new Ctor(n++ * n++), pr, 1);\r\n    u = isHyperbolic ? y.plus(t) : y.minus(t);\r\n    y = divide(t.times(x2), new Ctor(n++ * n++), pr, 1);\r\n    t = u.plus(y);\r\n\r\n    if (t.d[k] !== void 0) {\r\n      for (j = k; t.d[j] === u.d[j] && j--;);\r\n      if (j == -1) break;\r\n    }\r\n\r\n    j = u;\r\n    u = y;\r\n    y = t;\r\n    t = j;\r\n    i++;\r\n  }\r\n\r\n  external = true;\r\n  t.d.length = k + 1;\r\n\r\n  return t;\r\n}\r\n\r\n\r\n// Exponent e must be positive and non-zero.\r\nfunction tinyPow(b, e) {\r\n  var n = b;\r\n  while (--e) n *= b;\r\n  return n;\r\n}\r\n\r\n\r\n// Return the absolute value of `x` reduced to less than or equal to half pi.\r\nfunction toLessThanHalfPi(Ctor, x) {\r\n  var t,\r\n    isNeg = x.s < 0,\r\n    pi = getPi(Ctor, Ctor.precision, 1),\r\n    halfPi = pi.times(0.5);\r\n\r\n  x = x.abs();\r\n\r\n  if (x.lte(halfPi)) {\r\n    quadrant = isNeg ? 4 : 1;\r\n    return x;\r\n  }\r\n\r\n  t = x.divToInt(pi);\r\n\r\n  if (t.isZero()) {\r\n    quadrant = isNeg ? 3 : 2;\r\n  } else {\r\n    x = x.minus(t.times(pi));\r\n\r\n    // 0 <= x < pi\r\n    if (x.lte(halfPi)) {\r\n      quadrant = isOdd(t) ? (isNeg ? 2 : 3) : (isNeg ? 4 : 1);\r\n      return x;\r\n    }\r\n\r\n    quadrant = isOdd(t) ? (isNeg ? 1 : 4) : (isNeg ? 3 : 2);\r\n  }\r\n\r\n  return x.minus(pi).abs();\r\n}\r\n\r\n\r\n/*\r\n * Return the value of Decimal `x` as a string in base `baseOut`.\r\n *\r\n * If the optional `sd` argument is present include a binary exponent suffix.\r\n */\r\nfunction toStringBinary(x, baseOut, sd, rm) {\r\n  var base, e, i, k, len, roundUp, str, xd, y,\r\n    Ctor = x.constructor,\r\n    isExp = sd !== void 0;\r\n\r\n  if (isExp) {\r\n    checkInt32(sd, 1, MAX_DIGITS);\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n  } else {\r\n    sd = Ctor.precision;\r\n    rm = Ctor.rounding;\r\n  }\r\n\r\n  if (!x.isFinite()) {\r\n    str = nonFiniteToString(x);\r\n  } else {\r\n    str = finiteToString(x);\r\n    i = str.indexOf('.');\r\n\r\n    // Use exponential notation according to `toExpPos` and `toExpNeg`? No, but if required:\r\n    // maxBinaryExponent = floor((decimalExponent + 1) * log[2](10))\r\n    // minBinaryExponent = floor(decimalExponent * log[2](10))\r\n    // log[2](10) = 3.321928094887362347870319429489390175864\r\n\r\n    if (isExp) {\r\n      base = 2;\r\n      if (baseOut == 16) {\r\n        sd = sd * 4 - 3;\r\n      } else if (baseOut == 8) {\r\n        sd = sd * 3 - 2;\r\n      }\r\n    } else {\r\n      base = baseOut;\r\n    }\r\n\r\n    // Convert the number as an integer then divide the result by its base raised to a power such\r\n    // that the fraction part will be restored.\r\n\r\n    // Non-integer.\r\n    if (i >= 0) {\r\n      str = str.replace('.', '');\r\n      y = new Ctor(1);\r\n      y.e = str.length - i;\r\n      y.d = convertBase(finiteToString(y), 10, base);\r\n      y.e = y.d.length;\r\n    }\r\n\r\n    xd = convertBase(str, 10, base);\r\n    e = len = xd.length;\r\n\r\n    // Remove trailing zeros.\r\n    for (; xd[--len] == 0;) xd.pop();\r\n\r\n    if (!xd[0]) {\r\n      str = isExp ? '0p+0' : '0';\r\n    } else {\r\n      if (i < 0) {\r\n        e--;\r\n      } else {\r\n        x = new Ctor(x);\r\n        x.d = xd;\r\n        x.e = e;\r\n        x = divide(x, y, sd, rm, 0, base);\r\n        xd = x.d;\r\n        e = x.e;\r\n        roundUp = inexact;\r\n      }\r\n\r\n      // The rounding digit, i.e. the digit after the digit that may be rounded up.\r\n      i = xd[sd];\r\n      k = base / 2;\r\n      roundUp = roundUp || xd[sd + 1] !== void 0;\r\n\r\n      roundUp = rm < 4\r\n        ? (i !== void 0 || roundUp) && (rm === 0 || rm === (x.s < 0 ? 3 : 2))\r\n        : i > k || i === k && (rm === 4 || roundUp || rm === 6 && xd[sd - 1] & 1 ||\r\n          rm === (x.s < 0 ? 8 : 7));\r\n\r\n      xd.length = sd;\r\n\r\n      if (roundUp) {\r\n\r\n        // Rounding up may mean the previous digit has to be rounded up and so on.\r\n        for (; ++xd[--sd] > base - 1;) {\r\n          xd[sd] = 0;\r\n          if (!sd) {\r\n            ++e;\r\n            xd.unshift(1);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Determine trailing zeros.\r\n      for (len = xd.length; !xd[len - 1]; --len);\r\n\r\n      // E.g. [4, 11, 15] becomes 4bf.\r\n      for (i = 0, str = ''; i < len; i++) str += NUMERALS.charAt(xd[i]);\r\n\r\n      // Add binary exponent suffix?\r\n      if (isExp) {\r\n        if (len > 1) {\r\n          if (baseOut == 16 || baseOut == 8) {\r\n            i = baseOut == 16 ? 4 : 3;\r\n            for (--len; len % i; len++) str += '0';\r\n            xd = convertBase(str, base, baseOut);\r\n            for (len = xd.length; !xd[len - 1]; --len);\r\n\r\n            // xd[0] will always be be 1\r\n            for (i = 1, str = '1.'; i < len; i++) str += NUMERALS.charAt(xd[i]);\r\n          } else {\r\n            str = str.charAt(0) + '.' + str.slice(1);\r\n          }\r\n        }\r\n\r\n        str =  str + (e < 0 ? 'p' : 'p+') + e;\r\n      } else if (e < 0) {\r\n        for (; ++e;) str = '0' + str;\r\n        str = '0.' + str;\r\n      } else {\r\n        if (++e > len) for (e -= len; e-- ;) str += '0';\r\n        else if (e < len) str = str.slice(0, e) + '.' + str.slice(e);\r\n      }\r\n    }\r\n\r\n    str = (baseOut == 16 ? '0x' : baseOut == 2 ? '0b' : baseOut == 8 ? '0o' : '') + str;\r\n  }\r\n\r\n  return x.s < 0 ? '-' + str : str;\r\n}\r\n\r\n\r\n// Does not strip trailing zeros.\r\nfunction truncate(arr, len) {\r\n  if (arr.length > len) {\r\n    arr.length = len;\r\n    return true;\r\n  }\r\n}\r\n\r\n\r\n// Decimal methods\r\n\r\n\r\n/*\r\n *  abs\r\n *  acos\r\n *  acosh\r\n *  add\r\n *  asin\r\n *  asinh\r\n *  atan\r\n *  atanh\r\n *  atan2\r\n *  cbrt\r\n *  ceil\r\n *  clamp\r\n *  clone\r\n *  config\r\n *  cos\r\n *  cosh\r\n *  div\r\n *  exp\r\n *  floor\r\n *  hypot\r\n *  ln\r\n *  log\r\n *  log2\r\n *  log10\r\n *  max\r\n *  min\r\n *  mod\r\n *  mul\r\n *  pow\r\n *  random\r\n *  round\r\n *  set\r\n *  sign\r\n *  sin\r\n *  sinh\r\n *  sqrt\r\n *  sub\r\n *  sum\r\n *  tan\r\n *  tanh\r\n *  trunc\r\n */\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the absolute value of `x`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction abs(x) {\r\n  return new this(x).abs();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arccosine in radians of `x`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction acos(x) {\r\n  return new this(x).acos();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic cosine of `x`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction acosh(x) {\r\n  return new this(x).acosh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the sum of `x` and `y`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction add(x, y) {\r\n  return new this(x).plus(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arcsine in radians of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction asin(x) {\r\n  return new this(x).asin();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic sine of `x`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction asinh(x) {\r\n  return new this(x).asinh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arctangent in radians of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction atan(x) {\r\n  return new this(x).atan();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the inverse of the hyperbolic tangent of `x`, rounded to\r\n * `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction atanh(x) {\r\n  return new this(x).atanh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the arctangent in radians of `y/x` in the range -pi to pi\r\n * (inclusive), rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * Domain: [-Infinity, Infinity]\r\n * Range: [-pi, pi]\r\n *\r\n * y {number|string|bigint|Decimal} The y-coordinate.\r\n * x {number|string|bigint|Decimal} The x-coordinate.\r\n *\r\n * atan2(0, -0)               = pi\r\n * atan2(0, +0)               = 0\r\n * atan2(0, -x)               = pi for x > 0\r\n * atan2(0, x)                = 0 for x > 0\r\n * atan2(-y, 0)               = -pi/2 for y > 0\r\n * atan2(y, 0)                = pi/2 for y > 0\r\n * atan2(y, -Infinity)        = pi for finite y > 0\r\n * atan2(y, +Infinity)        = 0 for finite y > 0\r\n * atan2(Infinity, x)         = pi/2 for finite x\r\n * atan2(Infinity, -Infinity) = 3*pi/4\r\n * atan2(Infinity, +Infinity) = pi/4\r\n * atan2(NaN, x) = NaN\r\n * atan2(y, NaN) = NaN\r\n *\r\n */\r\nfunction atan2(y, x) {\r\n  y = new this(y);\r\n  x = new this(x);\r\n  var r,\r\n    pr = this.precision,\r\n    rm = this.rounding,\r\n    wpr = pr + 4;\r\n\r\n  // Either NaN\r\n  if (!y.s || !x.s) {\r\n    r = new this(NaN);\r\n\r\n  // Both Infinity\r\n  } else if (!y.d && !x.d) {\r\n    r = getPi(this, wpr, 1).times(x.s > 0 ? 0.25 : 0.75);\r\n    r.s = y.s;\r\n\r\n  // x is Infinity or y is 0\r\n  } else if (!x.d || y.isZero()) {\r\n    r = x.s < 0 ? getPi(this, pr, rm) : new this(0);\r\n    r.s = y.s;\r\n\r\n  // y is Infinity or x is 0\r\n  } else if (!y.d || x.isZero()) {\r\n    r = getPi(this, wpr, 1).times(0.5);\r\n    r.s = y.s;\r\n\r\n  // Both non-zero and finite\r\n  } else if (x.s < 0) {\r\n    this.precision = wpr;\r\n    this.rounding = 1;\r\n    r = this.atan(divide(y, x, wpr, 1));\r\n    x = getPi(this, wpr, 1);\r\n    this.precision = pr;\r\n    this.rounding = rm;\r\n    r = y.s < 0 ? r.minus(x) : r.plus(x);\r\n  } else {\r\n    r = this.atan(divide(y, x, wpr, 1));\r\n  }\r\n\r\n  return r;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the cube root of `x`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction cbrt(x) {\r\n  return new this(x).cbrt();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` rounded to an integer using `ROUND_CEIL`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction ceil(x) {\r\n  return finalise(x = new this(x), x.e + 1, 2);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` clamped to the range delineated by `min` and `max`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * min {number|string|bigint|Decimal}\r\n * max {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction clamp(x, min, max) {\r\n  return new this(x).clamp(min, max);\r\n}\r\n\r\n\r\n/*\r\n * Configure global settings for a Decimal constructor.\r\n *\r\n * `obj` is an object with one or more of the following properties,\r\n *\r\n *   precision  {number}\r\n *   rounding   {number}\r\n *   toExpNeg   {number}\r\n *   toExpPos   {number}\r\n *   maxE       {number}\r\n *   minE       {number}\r\n *   modulo     {number}\r\n *   crypto     {boolean|number}\r\n *   defaults   {true}\r\n *\r\n * E.g. Decimal.config({ precision: 20, rounding: 4 })\r\n *\r\n */\r\nfunction config(obj) {\r\n  if (!obj || typeof obj !== 'object') throw Error(decimalError + 'Object expected');\r\n  var i, p, v,\r\n    useDefaults = obj.defaults === true,\r\n    ps = [\r\n      'precision', 1, MAX_DIGITS,\r\n      'rounding', 0, 8,\r\n      'toExpNeg', -EXP_LIMIT, 0,\r\n      'toExpPos', 0, EXP_LIMIT,\r\n      'maxE', 0, EXP_LIMIT,\r\n      'minE', -EXP_LIMIT, 0,\r\n      'modulo', 0, 9\r\n    ];\r\n\r\n  for (i = 0; i < ps.length; i += 3) {\r\n    if (p = ps[i], useDefaults) this[p] = DEFAULTS[p];\r\n    if ((v = obj[p]) !== void 0) {\r\n      if (mathfloor(v) === v && v >= ps[i + 1] && v <= ps[i + 2]) this[p] = v;\r\n      else throw Error(invalidArgument + p + ': ' + v);\r\n    }\r\n  }\r\n\r\n  if (p = 'crypto', useDefaults) this[p] = DEFAULTS[p];\r\n  if ((v = obj[p]) !== void 0) {\r\n    if (v === true || v === false || v === 0 || v === 1) {\r\n      if (v) {\r\n        if (typeof crypto != 'undefined' && crypto &&\r\n          (crypto.getRandomValues || crypto.randomBytes)) {\r\n          this[p] = true;\r\n        } else {\r\n          throw Error(cryptoUnavailable);\r\n        }\r\n      } else {\r\n        this[p] = false;\r\n      }\r\n    } else {\r\n      throw Error(invalidArgument + p + ': ' + v);\r\n    }\r\n  }\r\n\r\n  return this;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the cosine of `x`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction cos(x) {\r\n  return new this(x).cos();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic cosine of `x`, rounded to precision\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction cosh(x) {\r\n  return new this(x).cosh();\r\n}\r\n\r\n\r\n/*\r\n * Create and return a Decimal constructor with the same configuration properties as this Decimal\r\n * constructor.\r\n *\r\n */\r\nfunction clone(obj) {\r\n  var i, p, ps;\r\n\r\n  /*\r\n   * The Decimal constructor and exported function.\r\n   * Return a new Decimal instance.\r\n   *\r\n   * v {number|string|bigint|Decimal} A numeric value.\r\n   *\r\n   */\r\n  function Decimal(v) {\r\n    var e, i, t,\r\n      x = this;\r\n\r\n    // Decimal called without new.\r\n    if (!(x instanceof Decimal)) return new Decimal(v);\r\n\r\n    // Retain a reference to this Decimal constructor, and shadow Decimal.prototype.constructor\r\n    // which points to Object.\r\n    x.constructor = Decimal;\r\n\r\n    if (isDecimalInstance(v)) {\r\n      x.s = v.s;\r\n\r\n      if (external) {\r\n        if (!v.d || v.e > Decimal.maxE) {\r\n\r\n          // Infinity.\r\n          x.e = NaN;\r\n          x.d = null;\r\n        } else if (v.e < Decimal.minE) {\r\n\r\n          // Zero.\r\n          x.e = 0;\r\n          x.d = [0];\r\n        } else {\r\n          x.e = v.e;\r\n          x.d = v.d.slice();\r\n        }\r\n      } else {\r\n        x.e = v.e;\r\n        x.d = v.d ? v.d.slice() : v.d;\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    t = typeof v;\r\n\r\n    if (t === 'number') {\r\n      if (v === 0) {\r\n        x.s = 1 / v < 0 ? -1 : 1;\r\n        x.e = 0;\r\n        x.d = [0];\r\n        return;\r\n      }\r\n\r\n      if (v < 0) {\r\n        v = -v;\r\n        x.s = -1;\r\n      } else {\r\n        x.s = 1;\r\n      }\r\n\r\n      // Fast path for small integers.\r\n      if (v === ~~v && v < 1e7) {\r\n        for (e = 0, i = v; i >= 10; i /= 10) e++;\r\n\r\n        if (external) {\r\n          if (e > Decimal.maxE) {\r\n            x.e = NaN;\r\n            x.d = null;\r\n          } else if (e < Decimal.minE) {\r\n            x.e = 0;\r\n            x.d = [0];\r\n          } else {\r\n            x.e = e;\r\n            x.d = [v];\r\n          }\r\n        } else {\r\n          x.e = e;\r\n          x.d = [v];\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      // Infinity or NaN?\r\n      if (v * 0 !== 0) {\r\n        if (!v) x.s = NaN;\r\n        x.e = NaN;\r\n        x.d = null;\r\n        return;\r\n      }\r\n\r\n      return parseDecimal(x, v.toString());\r\n    }\r\n\r\n    if (t === 'string') {\r\n      if ((i = v.charCodeAt(0)) === 45) {  // minus sign\r\n        v = v.slice(1);\r\n        x.s = -1;\r\n      } else {\r\n        if (i === 43) v = v.slice(1);  // plus sign\r\n        x.s = 1;\r\n      }\r\n\r\n      return isDecimal.test(v) ? parseDecimal(x, v) : parseOther(x, v);\r\n    }\r\n\r\n    if (t === 'bigint') {\r\n      if (v < 0) {\r\n        v = -v;\r\n        x.s = -1;\r\n      } else {\r\n        x.s = 1;\r\n      }\r\n\r\n      return parseDecimal(x, v.toString());\r\n    }\r\n\r\n    throw Error(invalidArgument + v);\r\n  }\r\n\r\n  Decimal.prototype = P;\r\n\r\n  Decimal.ROUND_UP = 0;\r\n  Decimal.ROUND_DOWN = 1;\r\n  Decimal.ROUND_CEIL = 2;\r\n  Decimal.ROUND_FLOOR = 3;\r\n  Decimal.ROUND_HALF_UP = 4;\r\n  Decimal.ROUND_HALF_DOWN = 5;\r\n  Decimal.ROUND_HALF_EVEN = 6;\r\n  Decimal.ROUND_HALF_CEIL = 7;\r\n  Decimal.ROUND_HALF_FLOOR = 8;\r\n  Decimal.EUCLID = 9;\r\n\r\n  Decimal.config = Decimal.set = config;\r\n  Decimal.clone = clone;\r\n  Decimal.isDecimal = isDecimalInstance;\r\n\r\n  Decimal.abs = abs;\r\n  Decimal.acos = acos;\r\n  Decimal.acosh = acosh;        // ES6\r\n  Decimal.add = add;\r\n  Decimal.asin = asin;\r\n  Decimal.asinh = asinh;        // ES6\r\n  Decimal.atan = atan;\r\n  Decimal.atanh = atanh;        // ES6\r\n  Decimal.atan2 = atan2;\r\n  Decimal.cbrt = cbrt;          // ES6\r\n  Decimal.ceil = ceil;\r\n  Decimal.clamp = clamp;\r\n  Decimal.cos = cos;\r\n  Decimal.cosh = cosh;          // ES6\r\n  Decimal.div = div;\r\n  Decimal.exp = exp;\r\n  Decimal.floor = floor;\r\n  Decimal.hypot = hypot;        // ES6\r\n  Decimal.ln = ln;\r\n  Decimal.log = log;\r\n  Decimal.log10 = log10;        // ES6\r\n  Decimal.log2 = log2;          // ES6\r\n  Decimal.max = max;\r\n  Decimal.min = min;\r\n  Decimal.mod = mod;\r\n  Decimal.mul = mul;\r\n  Decimal.pow = pow;\r\n  Decimal.random = random;\r\n  Decimal.round = round;\r\n  Decimal.sign = sign;          // ES6\r\n  Decimal.sin = sin;\r\n  Decimal.sinh = sinh;          // ES6\r\n  Decimal.sqrt = sqrt;\r\n  Decimal.sub = sub;\r\n  Decimal.sum = sum;\r\n  Decimal.tan = tan;\r\n  Decimal.tanh = tanh;          // ES6\r\n  Decimal.trunc = trunc;        // ES6\r\n\r\n  if (obj === void 0) obj = {};\r\n  if (obj) {\r\n    if (obj.defaults !== true) {\r\n      ps = ['precision', 'rounding', 'toExpNeg', 'toExpPos', 'maxE', 'minE', 'modulo', 'crypto'];\r\n      for (i = 0; i < ps.length;) if (!obj.hasOwnProperty(p = ps[i++])) obj[p] = this[p];\r\n    }\r\n  }\r\n\r\n  Decimal.config(obj);\r\n\r\n  return Decimal;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` divided by `y`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction div(x, y) {\r\n  return new this(x).div(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural exponential of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} The power to which to raise the base of the natural log.\r\n *\r\n */\r\nfunction exp(x) {\r\n  return new this(x).exp();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` round to an integer using `ROUND_FLOOR`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction floor(x) {\r\n  return finalise(x = new this(x), x.e + 1, 3);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the square root of the sum of the squares of the arguments,\r\n * rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * hypot(a, b, ...) = sqrt(a^2 + b^2 + ...)\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction hypot() {\r\n  var i, n,\r\n    t = new this(0);\r\n\r\n  external = false;\r\n\r\n  for (i = 0; i < arguments.length;) {\r\n    n = new this(arguments[i++]);\r\n    if (!n.d) {\r\n      if (n.s) {\r\n        external = true;\r\n        return new this(1 / 0);\r\n      }\r\n      t = n;\r\n    } else if (t.d) {\r\n      t = t.plus(n.times(n));\r\n    }\r\n  }\r\n\r\n  external = true;\r\n\r\n  return t.sqrt();\r\n}\r\n\r\n\r\n/*\r\n * Return true if object is a Decimal instance (where Decimal is any Decimal constructor),\r\n * otherwise return false.\r\n *\r\n */\r\nfunction isDecimalInstance(obj) {\r\n  return obj instanceof Decimal || obj && obj.toStringTag === tag || false;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the natural logarithm of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction ln(x) {\r\n  return new this(x).ln();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the log of `x` to the base `y`, or to base 10 if no base\r\n * is specified, rounded to `precision` significant digits using rounding mode `rounding`.\r\n *\r\n * log[y](x)\r\n *\r\n * x {number|string|bigint|Decimal} The argument of the logarithm.\r\n * y {number|string|bigint|Decimal} The base of the logarithm.\r\n *\r\n */\r\nfunction log(x, y) {\r\n  return new this(x).log(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the base 2 logarithm of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction log2(x) {\r\n  return new this(x).log(2);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the base 10 logarithm of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction log10(x) {\r\n  return new this(x).log(10);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the maximum of the arguments.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction max() {\r\n  return maxOrMin(this, arguments, -1);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the minimum of the arguments.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction min() {\r\n  return maxOrMin(this, arguments, 1);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` modulo `y`, rounded to `precision` significant digits\r\n * using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction mod(x, y) {\r\n  return new this(x).mod(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` multiplied by `y`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction mul(x, y) {\r\n  return new this(x).mul(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` raised to the power `y`, rounded to precision\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} The base.\r\n * y {number|string|bigint|Decimal} The exponent.\r\n *\r\n */\r\nfunction pow(x, y) {\r\n  return new this(x).pow(y);\r\n}\r\n\r\n\r\n/*\r\n * Returns a new Decimal with a random value equal to or greater than 0 and less than 1, and with\r\n * `sd`, or `Decimal.precision` if `sd` is omitted, significant digits (or less if trailing zeros\r\n * are produced).\r\n *\r\n * [sd] {number} Significant digits. Integer, 0 to MAX_DIGITS inclusive.\r\n *\r\n */\r\nfunction random(sd) {\r\n  var d, e, k, n,\r\n    i = 0,\r\n    r = new this(1),\r\n    rd = [];\r\n\r\n  if (sd === void 0) sd = this.precision;\r\n  else checkInt32(sd, 1, MAX_DIGITS);\r\n\r\n  k = Math.ceil(sd / LOG_BASE);\r\n\r\n  if (!this.crypto) {\r\n    for (; i < k;) rd[i++] = Math.random() * 1e7 | 0;\r\n\r\n  // Browsers supporting crypto.getRandomValues.\r\n  } else if (crypto.getRandomValues) {\r\n    d = crypto.getRandomValues(new Uint32Array(k));\r\n\r\n    for (; i < k;) {\r\n      n = d[i];\r\n\r\n      // 0 <= n < 4294967296\r\n      // Probability n >= 4.29e9, is 4967296 / 4294967296 = 0.00116 (1 in 865).\r\n      if (n >= 4.29e9) {\r\n        d[i] = crypto.getRandomValues(new Uint32Array(1))[0];\r\n      } else {\r\n\r\n        // 0 <= n <= 4289999999\r\n        // 0 <= (n % 1e7) <= 9999999\r\n        rd[i++] = n % 1e7;\r\n      }\r\n    }\r\n\r\n  // Node.js supporting crypto.randomBytes.\r\n  } else if (crypto.randomBytes) {\r\n\r\n    // buffer\r\n    d = crypto.randomBytes(k *= 4);\r\n\r\n    for (; i < k;) {\r\n\r\n      // 0 <= n < 2147483648\r\n      n = d[i] + (d[i + 1] << 8) + (d[i + 2] << 16) + ((d[i + 3] & 0x7f) << 24);\r\n\r\n      // Probability n >= 2.14e9, is 7483648 / 2147483648 = 0.0035 (1 in 286).\r\n      if (n >= 2.14e9) {\r\n        crypto.randomBytes(4).copy(d, i);\r\n      } else {\r\n\r\n        // 0 <= n <= 2139999999\r\n        // 0 <= (n % 1e7) <= 9999999\r\n        rd.push(n % 1e7);\r\n        i += 4;\r\n      }\r\n    }\r\n\r\n    i = k / 4;\r\n  } else {\r\n    throw Error(cryptoUnavailable);\r\n  }\r\n\r\n  k = rd[--i];\r\n  sd %= LOG_BASE;\r\n\r\n  // Convert trailing digits to zeros according to sd.\r\n  if (k && sd) {\r\n    n = mathpow(10, LOG_BASE - sd);\r\n    rd[i] = (k / n | 0) * n;\r\n  }\r\n\r\n  // Remove trailing words which are zero.\r\n  for (; rd[i] === 0; i--) rd.pop();\r\n\r\n  // Zero?\r\n  if (i < 0) {\r\n    e = 0;\r\n    rd = [0];\r\n  } else {\r\n    e = -1;\r\n\r\n    // Remove leading words which are zero and adjust exponent accordingly.\r\n    for (; rd[0] === 0; e -= LOG_BASE) rd.shift();\r\n\r\n    // Count the digits of the first word of rd to determine leading zeros.\r\n    for (k = 1, n = rd[0]; n >= 10; n /= 10) k++;\r\n\r\n    // Adjust the exponent for leading zeros of the first word of rd.\r\n    if (k < LOG_BASE) e -= LOG_BASE - k;\r\n  }\r\n\r\n  r.e = e;\r\n  r.d = rd;\r\n\r\n  return r;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` rounded to an integer using rounding mode `rounding`.\r\n *\r\n * To emulate `Math.round`, set rounding to 7 (ROUND_HALF_CEIL).\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction round(x) {\r\n  return finalise(x = new this(x), x.e + 1, this.rounding);\r\n}\r\n\r\n\r\n/*\r\n * Return\r\n *   1    if x > 0,\r\n *  -1    if x < 0,\r\n *   0    if x is 0,\r\n *  -0    if x is -0,\r\n *   NaN  otherwise\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction sign(x) {\r\n  x = new this(x);\r\n  return x.d ? (x.d[0] ? x.s : 0 * x.s) : x.s || NaN;\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the sine of `x`, rounded to `precision` significant digits\r\n * using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction sin(x) {\r\n  return new this(x).sin();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic sine of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction sinh(x) {\r\n  return new this(x).sinh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the square root of `x`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction sqrt(x) {\r\n  return new this(x).sqrt();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` minus `y`, rounded to `precision` significant digits\r\n * using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n * y {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction sub(x, y) {\r\n  return new this(x).sub(y);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the sum of the arguments, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * Only the result is rounded, not the intermediate calculations.\r\n *\r\n * arguments {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction sum() {\r\n  var i = 0,\r\n    args = arguments,\r\n    x = new this(args[i]);\r\n\r\n  external = false;\r\n  for (; x.s && ++i < args.length;) x = x.plus(args[i]);\r\n  external = true;\r\n\r\n  return finalise(x, this.precision, this.rounding);\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the tangent of `x`, rounded to `precision` significant\r\n * digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction tan(x) {\r\n  return new this(x).tan();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is the hyperbolic tangent of `x`, rounded to `precision`\r\n * significant digits using rounding mode `rounding`.\r\n *\r\n * x {number|string|bigint|Decimal} A value in radians.\r\n *\r\n */\r\nfunction tanh(x) {\r\n  return new this(x).tanh();\r\n}\r\n\r\n\r\n/*\r\n * Return a new Decimal whose value is `x` truncated to an integer.\r\n *\r\n * x {number|string|bigint|Decimal}\r\n *\r\n */\r\nfunction trunc(x) {\r\n  return finalise(x = new this(x), x.e + 1, 1);\r\n}\r\n\r\n\r\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toString;\r\nP[Symbol.toStringTag] = 'Decimal';\r\n\r\n// Create and configure initial Decimal constructor.\r\nexport var Decimal = P.constructor = clone(DEFAULTS);\r\n\r\n// Create the internal constants from their string values.\r\nLN10 = new Decimal(LN10);\r\nPI = new Decimal(PI);\r\n\r\nexport default Decimal;\r\n","import Decimal from \"decimal.js\";\n\nexport type NumberInput = number | string | Decimal;\nexport type SimplifiedInterval = [NumberInput, NumberInput]; // time, x\nexport type Interval = [NumberInput, NumberInput, NumberInput, NumberInput]; // time, x, y, z\n\nexport interface IFlipAndBurn {\n\tproperTime: Decimal;\n\tpeakVelocity: Decimal;\n\tlorentzFactor: Decimal;\n\tcoordTime: Decimal;\n}\n\nexport interface ITwinParadox {\n\tproperTime: Decimal;\n\tearthTime: Decimal;\n\tageDifference: Decimal;\n\tlorentzFactor: Decimal;\n\toneWayDistance: Decimal;\n\ttotalDistance: Decimal;\n\tvelocity: Decimal;\n}\n\nexport interface IWarpDriveTimeTravel {\n\ttimeDisplacement: Decimal; // net time travel in seconds (negative = past)\n\tsimultaneityShift: Decimal; // relativistic effect in seconds\n\tearthTimeElapsed: Decimal; // coordinate time in seconds\n\ttravelerTime: Decimal; // proper time in seconds\n}\n\n// Physical constants\nexport const DecimalNaN: Decimal = new Decimal(NaN);\nexport const DecimalInfinity: Decimal = new Decimal(Infinity);\nexport let c: Decimal;\nexport let g: Decimal;\nexport let lightYear: Decimal;\nexport let au: Decimal;\nexport let secondsPerYear: Decimal;\nexport let everestMass: Decimal;\nexport let moonMass: Decimal;\nexport let earthMass: Decimal;\nexport let solarMass: Decimal;\nexport let milkyWayMass: Decimal;\nexport let superclusterMass: Decimal;\nexport let observableUniverseMass: Decimal;\n\n// constants for calculations\nexport let one: Decimal;\nlet cSquared: Decimal;\nlet half: Decimal;\n\n// previously configured precision\nlet precisionConfigured: number = -1;\n\n// Configure the precision to 100 decimal places\nconfigure(150);\n\nexport function configure(precision: number): void {\n\tDecimal.set({ precision: precision, defaults: true });\n\tprecisionConfigured = precision;\n\n\tc = new Decimal(\"299792458\"); // speed of light in m/s\n\tg = new Decimal(\"9.80665\"); // acceleration due to standard gravity\n\tlightYear = new Decimal(\"9460730472580800\"); // meters in a light year\n\tau = new Decimal(\"149597870700\"); // meters in an astronomical unit\n\tsecondsPerYear = new Decimal(60 * 60 * 24).mul(\"365.25\"); // seconds in a year\n\teverestMass = new Decimal(\"8.1e14\"); // kg (approximate mass of Mount Everest)\n\tmoonMass = new Decimal(\"7.342e22\"); // kg (mass of the Moon)\n\tearthMass = new Decimal(\"5.972e24\"); // kg\n\tsolarMass = new Decimal(\"1.98892e30\"); // kg\n\tmilkyWayMass = new Decimal(\"1.5e12\").mul(solarMass); // kg (approximately 1.5 trillion solar masses)\n\tsuperclusterMass = new Decimal(\"1e17\").mul(solarMass); // kg (Laniakea Supercluster: ~100,000 Milky Ways)\n\tobservableUniverseMass = new Decimal(\"1e53\"); // kg (observable universe: ordinary matter)\n\n\tcSquared = c.pow(2); // speed of light squared\n\tone = new Decimal(1);\n\thalf = new Decimal(\"0.5\");\n}\n\n/**\n * Ensure this is a Decimal, convert numbers and strings as required\n */\nexport function ensure(v: NumberInput): Decimal {\n\tif (precisionConfigured === -1) {\n\t\tthrow new Error(\"Precision not configured\");\n\t}\n\tif (typeof v === \"number\" || typeof v === \"string\") {\n\t\treturn new Decimal(v); // easily convertible\n\t} else if (v instanceof Decimal) {\n\t\treturn v; // already a Decimal\n\t} else {\n\t\tthrow new Error(\"Invalid input type\");\n\t}\n}\n\n/**\n * Ensure this value is a Decimal and check it is a valid number, throw if not\n */\nexport function check(v: NumberInput, msg: string = \"Invalid number\"): Decimal {\n\tconst v1 = ensure(v);\n\tif (v1.isNaN() || !v1.isFinite()) {\n\t\tthrow new Error(msg);\n\t}\n\treturn v1;\n}\n\n/**\n * Convert to Decimal and check velocity is less than c\n * @param velocity The velocity in m/s\n * @param msg The error message to display\n * @returns The velocity as a Decimal\n */\nexport function checkVelocity(velocity: NumberInput): Decimal {\n\tconst v = ensure(velocity);\n\tif (v.abs().gte(c)) {\n\t\treturn DecimalNaN;\n\t}\n\treturn v;\n}\n\n/**\n * Calculate proper time (sec) to reach a given velocity under constant proper acceleration\n * @param accel The acceleration in m/s^2\n * @param velocity The required velocity in m/s\n * @returns Proper time tau in seconds as a Decimal\n */\nexport function tauToVelocity(accel: NumberInput, velocity: NumberInput): Decimal {\n\t// (c / a) * atanh(velocity / c)\n\tconst aD = ensure(accel);\n\tconst vD = checkVelocity(velocity);\n\treturn c.div(aD).mul(vD.div(c).atanh());\n}\n\n/**\n * Calculate the relativistic velocity as a function of proper time tau\n * @param accel The acceleration in m/s^2\n * @param tau The proper time in seconds\n * @returns The velocity in m/s as Decimal\n */\nexport function relativisticVelocity(accel: NumberInput, tau: NumberInput): Decimal {\n\t// c * tanh(a * tau / c)\n\tconst aD = ensure(accel);\n\tconst tauD = ensure(tau);\n\treturn c.mul(aD.mul(tauD).div(c).tanh());\n}\n\n/**\n * Calculate the distance travelled under constant proper acceleration. Relativistic\n * @param accel The acceleration in m/s^2\n * @param tau The proper time in seconds\n * @returns The coordinate distance travelled in meters as Decimal\n */\nexport function relativisticDistance(accel: NumberInput, tau: NumberInput): Decimal {\n\t// (csquared / a) * (cosh(a * tau / c) - one)\n\tconst aD = ensure(accel);\n\tconst tauD = ensure(tau);\n\treturn cSquared.div(aD).mul(aD.mul(tauD).div(c).cosh().minus(one));\n}\n\n/**\n * Given acceleration and required distance, calculate seconds required in proper time to reach that coord distance.\n * @param accel The acceleration in m/s^2\n * @param dist The coord distance in meters\n * @returns The proper time elapsed (s) as a Decimal\n */\nexport function relativisticTimeForDistance(accel: NumberInput, dist: NumberInput): Decimal {\n\t// (c / a) * acosh((dist * a) / csquared + one)\n\tconst aD = ensure(accel);\n\tconst distD = ensure(dist);\n\treturn c.div(aD).mul(distD.mul(aD).div(cSquared).plus(one).acosh());\n}\n\n/**\n * Calculate 4-tuple of proper time (s), peak velocity (m/s), Lorentz factor, and coord time (s) for a flip and burn maneuver at given constant acceleration\n * @param accel Proper acceleration in m/s^2\n * @param dist Coord distance in meters\n * @returns IFlipAndBurn containing proper time (s), peak velocity (m/s), peak Lorentz, and Coord time (s) as Decimals\n */\nexport function flipAndBurn(accel: NumberInput, dist: NumberInput): IFlipAndBurn {\n\tconst accelD = ensure(accel);\n\tconst totalDist = ensure(dist);\n\tconst halfDist = totalDist.div(2);\n\n\tconst timeToHalfProper = relativisticTimeForDistance(accelD, halfDist);\n\tconst timeToHalfCoord = coordinateTime(accelD, timeToHalfProper);\n\tconst peakVelocity = relativisticVelocity(accelD, timeToHalfProper);\n\tconst lorentz = lorentzFactor(peakVelocity);\n\treturn {\n\t\tproperTime: timeToHalfProper.mul(2),\n\t\tpeakVelocity,\n\t\tlorentzFactor: lorentz,\n\t\tcoordTime: timeToHalfCoord.mul(2),\n\t};\n}\n\n/**\n * Calculate the twin paradox scenario: traveling twin at constant velocity with instant turnaround\n * @param velocity The velocity in m/s\n * @param properTime The proper time in seconds for the traveling twin (total journey)\n * @returns ITwinParadox containing ages (seconds), distances (meters), velocity (m/s), and Lorentz factor\n */\nexport function twinParadox(velocity: NumberInput, properTime: NumberInput): ITwinParadox {\n\tconst vel = ensure(velocity);\n\tconst properTimeS = ensure(properTime);\n\n\t// Validate velocity is less than c\n\tif (vel.abs().gte(c)) {\n\t\treturn {\n\t\t\tproperTime: DecimalNaN,\n\t\t\tearthTime: DecimalNaN,\n\t\t\tageDifference: DecimalNaN,\n\t\t\tlorentzFactor: DecimalNaN,\n\t\t\toneWayDistance: DecimalNaN,\n\t\t\ttotalDistance: DecimalNaN,\n\t\t\tvelocity: DecimalNaN,\n\t\t};\n\t}\n\n\t// Calculate Lorentz factor\n\tconst gamma = lorentzFactor(vel);\n\n\t// Earth time elapsed\n\tconst earthTimeS = gamma.mul(properTimeS);\n\n\t// Age difference (Earth twin is older)\n\tconst ageDiff = earthTimeS.minus(properTimeS);\n\n\t// Distance calculations\n\t// One way distance = v * (earth_time / 2)\n\tconst oneWayDist = vel.mul(earthTimeS.div(2));\n\tconst totalDist = oneWayDist.mul(2);\n\n\treturn {\n\t\tproperTime: properTimeS,\n\t\tearthTime: earthTimeS,\n\t\tageDifference: ageDiff,\n\t\tlorentzFactor: gamma,\n\t\toneWayDistance: oneWayDist,\n\t\ttotalDistance: totalDist,\n\t\tvelocity: vel,\n\t};\n}\n\n/**\n * Calculate time travel effects from FTL travel combined with relativistic boost\n * Based on the relativity of simultaneity paradox (Tachyonic Antitelephone)\n *\n * The scenario:\n * 1. Travel distance d at FTL speed (taking transitTimeSeconds ONE-WAY)\n * 2. Boost to velocity v and optionally remain for boostDurationSeconds\n * 3. Return at FTL speed (taking transitTimeSeconds again)\n *\n * Due to relativity of simultaneity, the boosted frame's \"now\" corresponds to\n * an earlier time at the origin, potentially allowing travel into the past.\n *\n * @param distanceMeters Distance traveled at FTL, one-way (in metres)\n * @param boostVelocityC Boost velocity as fraction of c (0 to 1, exclusive)\n * @param transitTimeSeconds Time spent in FTL transit, ONE-WAY (in seconds)\n * @param boostDurationSeconds Proper time spent at boost velocity (in seconds, default 0)\n * @returns Time travel results including displacement and simultaneity shift\n */\nexport function warpDriveTimeTravel(\n\tdistanceMeters: NumberInput,\n\tboostVelocityC: NumberInput,\n\ttransitTimeSeconds: NumberInput,\n\tboostDurationSeconds: NumberInput = 0\n): IWarpDriveTimeTravel {\n\tconst dist = ensure(distanceMeters);\n\tconst boostC = ensure(boostVelocityC);\n\tconst transitTime = ensure(transitTimeSeconds);\n\tconst boostDuration = ensure(boostDurationSeconds);\n\n\t// Validate boost velocity is in valid range [0, 1)\n\tif (boostC.lt(0) || boostC.gte(one)) {\n\t\treturn {\n\t\t\ttimeDisplacement: DecimalNaN,\n\t\t\tsimultaneityShift: DecimalNaN,\n\t\t\tearthTimeElapsed: DecimalNaN,\n\t\t\ttravelerTime: DecimalNaN,\n\t\t};\n\t}\n\n\t// Calculate boost velocity in m/s\n\tconst boostVelocity = boostC.mul(c);\n\n\t// Calculate Lorentz factor for time dilation during boost phase\n\tconst gamma = lorentzFactor(boostVelocity);\n\n\t// Simultaneity shift: t = (v * d) / c\n\t// This is the key to the time travel paradox\n\tconst cSquared = c.mul(c);\n\tconst simultaneityShift = boostVelocity.mul(dist).div(cSquared);\n\n\t// Earth time includes outbound transit, boost phase, and return transit\n\t// We treat transitTime as the one-way time, so the round trip takes 2  transitTime\n\t// Earth time = (2  transit time) + (  boost duration)\n\tconst earthTime = transitTime.mul(2).plus(gamma.mul(boostDuration));\n\n\t// Traveler proper time (what they actually experience)\n\t// Traveler time = (2  transit time) + boost duration\n\tconst travelerTime = transitTime.mul(2).plus(boostDuration);\n\n\t// Time displacement = Earth time - simultaneity shift\n\t// Negative values mean travel into the past\n\tconst timeDisplacement = earthTime.minus(simultaneityShift);\n\n\treturn {\n\t\ttimeDisplacement,\n\t\tsimultaneityShift,\n\t\tearthTimeElapsed: earthTime,\n\t\ttravelerTime,\n\t};\n}\n\n/**\n * Calculate the distance travelled under constant acceleration. Not relativistic\n * @param accel The acceleration in m/s^2\n * @param tau The time in seconds\n * @returns The distance travelled in meters as Decimal\n */\nexport function simpleDistance(accel: NumberInput, t: NumberInput): Decimal {\n\t// 0.5 * a * t^2\n\tconst aD = ensure(accel);\n\tconst tD = ensure(t);\n\treturn half.mul(aD).mul(tD.pow(2));\n}\n\n/**\n * Calculate the rapidity from velocity. Rapidity is an alternative to velocity that adds linearly\n * @param velocity The velocity of the object in m/s\n * @returns The rapidity as a Decimal\n */\nexport function rapidityFromVelocity(velocity: NumberInput): Decimal {\n\t// atanh(v / c)\n\tconst v = checkVelocity(velocity);\n\treturn v.div(c).atanh();\n}\n\n/**\n * Calculate the relativistic velocity from rapidity. Checks for precision failure\n * @param rapidity The rapidity of the object\n * @returns The velocity as a Decimal\n */\nexport function velocityFromRapidity(rapidity: NumberInput): Decimal {\n\t// velocity = c * tanh(ensure(rapidity))\n\tconst velocity = c.mul(ensure(rapidity).tanh());\n\treturn checkVelocity(velocity);\n}\n\n/**\n * Add two velocities (m/s) relativistically. The velocities must be less than c\n * @param v1 The first velocity in m/s\n * @param v2 The second velocity in m/s\n * @returns The combined velocity as a Decimal\n */\nexport function addVelocities(v1: NumberInput, v2: NumberInput): Decimal {\n\t// (v1 + v2) / (one + (v1 * v2) / csquared)\n\tconst v1D = checkVelocity(v1);\n\tconst v2D = checkVelocity(v2);\n\treturn v1D.plus(v2D).div(one.plus(v1D.mul(v2D).div(cSquared)));\n}\n\n/**\n * Add two velocities (fraction of c) relativistically. The velocities must be less than 1.0\n * @param v1 The first velocity as fraction of c\n * @param v2 The second velocity as fraction of c\n * @returns The combined velocity as a fraction of c\n */\nexport function addVelocitiesC(v1: NumberInput, v2: NumberInput): Decimal {\n\t// (v1 + v2) / (one + v1 * v2)\n\tconst v1D = ensure(v1);\n\tconst v2D = ensure(v2);\n\tif (v1D.abs().gte(one) || v2D.abs().gte(one)) {\n\t\treturn DecimalNaN;\n\t}\n\treturn v1D.plus(v2D).div(one.plus(v1D.mul(v2D)));\n}\n\n/**\n * Calculate the coordinate time (lab time) elapsed for a stationary observer\n * @param accel The acceleration in m/s^2\n * @param tau The proper time in seconds\n * @returns The coordinate time elapsed in seconds as a Decimal\n */\nexport function coordinateTime(accel: NumberInput, tau: NumberInput): Decimal {\n\t// (c / a) * sinh(a * tau / c)\n\tconst aD = ensure(accel);\n\tconst tauD = ensure(tau);\n\treturn c.div(aD).mul(aD.mul(tauD).div(c).sinh());\n}\n\n/**\n * Calculate the length contraction factor for a given length and velocity\n * @param len The proper length in meters\n * @param velocity The velocity of the object in m/s\n * @returns The contracted length in metres as a Decimal\n */\nexport function lengthContractionVelocity(len: NumberInput, velocity: NumberInput): Decimal {\n\t// len * sqrt(one - (velocity / c) ** 2)\n\tconst lenD = ensure(len);\n\tconst v = checkVelocity(velocity);\n\treturn lenD.mul(one.minus(v.div(c).pow(2)).sqrt());\n}\n\n/**\n * Lorentz factor calculation\n * @param velocity The velocity of the object in m/s\n * @returns The Lorentz factor as a Decimal\n */\nexport function lorentzFactor(velocity: NumberInput): Decimal {\n\tconst v = checkVelocity(velocity);\n\treturn one.div(one.minus(v.pow(2).div(cSquared)).sqrt());\n}\n\n/**\n * Calculate the velocity under constant proper acceleration and coordinate time\n * @param accel The acceleration in m/s^2\n * @param t The coordinate time in seconds\n * @returns The velocity (m/s) as a Decimal\n */\nexport function relativisticVelocityCoord(accel: NumberInput, t: NumberInput): Decimal {\n\t// (a * t) / sqrt(one + (a * t / c) ** 2)\n\tconst aD = ensure(accel);\n\tconst tD = ensure(t);\n\treturn aD.mul(tD).div(one.plus(aD.mul(tD).div(c).pow(2)).sqrt());\n}\n\n/**\n * Calculate the distance traveled under constant proper acceleration and coordinate time\n * @param accel The acceleration in m/s^2\n * @param t The coordinate time in seconds\n * @returns The coordinate distance traveled in meters as a Decimal\n */\nexport function relativisticDistanceCoord(accel: NumberInput, t: NumberInput): Decimal {\n\t// (csquared / a) * (sqrt(one + (a * t / c) ** 2) - one)\n\tconst aD = ensure(accel);\n\tconst tD = ensure(t);\n\treturn cSquared.div(aD).mul(one.plus(aD.mul(tD).div(c).pow(2)).sqrt().minus(one));\n}\n\n/**\n * Calculate the relativistic momentum\n * @param mass The rest mass of the object in kg\n * @param velocity The velocity of the object in m/s\n * @returns The momentum in kg m/s as a Decimal\n */\nexport function relativisticMomentum(mass: NumberInput, velocity: NumberInput): Decimal {\n\t// mass * velocity * gamma\n\tconst m = ensure(mass);\n\tconst v = checkVelocity(velocity);\n\tconst gamma = lorentzFactor(v);\n\treturn m.mul(v).mul(gamma);\n}\n\n/**\n * Calculate the relativistic energy\n * @param mass The rest mass of the object in kg\n * @param velocity The velocity of the object in m/s\n * @returns The energy in Joules as a Decimal\n */\nexport function relativisticEnergy(mass: NumberInput, velocity: NumberInput): Decimal {\n\t// mass * csquared * gamma\n\tconst m = ensure(mass);\n\tconst gamma = lorentzFactor(velocity);\n\treturn m.mul(cSquared).mul(gamma);\n}\n\n/**\n * Calculate the relativistic Doppler shift for light\n * @param frequency The frequency of the light in Hz\n * @param velocity The velocity of the source in m/s\n * @param source_moving_towards True if the source is moving towards the observer\n * @returns The shifted frequency in Hz as a Decimal\n */\nexport function dopplerShift(\n\tfrequency: NumberInput,\n\tvelocity: NumberInput,\n\tsource_moving_towards: boolean = true\n): Decimal {\n\t//  towards: frequency * sqrt((one + beta) / (one - beta))\n\t//  away: frequency * sqrt((one - beta) / (one + beta))\n\tconst f = ensure(frequency);\n\tconst beta = checkVelocity(velocity).div(c);\n\tif (source_moving_towards) {\n\t\treturn f.mul(one.plus(beta).div(one.minus(beta)).sqrt());\n\t} else {\n\t\treturn f.mul(one.minus(beta).div(one.plus(beta)).sqrt());\n\t}\n}\n\n/**\n * Calculate the invariant (proper) mass of a system from energy and momentum\n * @param energy The energy of the system in Joules\n * @param p The momentum of the system in kg m/s\n * @returns The rest mass in kg as a Decimal\n */\nexport function invariantMassFromEnergyMomentum(energy: NumberInput, p: NumberInput): Decimal {\n\t// sqrt((energy / csquared) ** 2 - (p / csquared) ** 2)\n\tconst e = ensure(energy);\n\tconst pD = ensure(p);\n\treturn e.div(cSquared).pow(2).minus(pD.div(cSquared).pow(2)).sqrt();\n}\n\n/**\n * Calculate the four-momentum of a particle\n * @param mass The rest mass of the particle in kg\n * @param velocity The velocity of the particle in m/s\n * @returns A tuple of energy (j), momentum (kgm/s) as Decimals\n */\nexport function fourMomentum(mass: NumberInput, velocity: NumberInput): [Decimal, Decimal] {\n\tconst m = ensure(mass);\n\tconst v = checkVelocity(velocity);\n\tconst gamma = lorentzFactor(v);\n\tconst energy = m.mul(cSquared).mul(gamma);\n\tconst momentum = m.mul(v).mul(gamma);\n\treturn [energy, momentum];\n}\n\n/**\n * Calculate the invariant spacetime interval between two events in 1D space\n * @param event1 The first event as a tuple of time, x\n * @param event2 The second event as a tuple of time, x\n * @returns The invariant interval (spacetime interval squared, or seconds^2 - meters^2 / c^2)\n */\nexport function spacetimeInterval1d(\n\tevent1: SimplifiedInterval,\n\tevent2: SimplifiedInterval\n): Decimal {\n\t// sqrt(csquared * delta_ts - delta_xs)\n\tconst [time1, x1] = event1;\n\tconst [time2, x2] = event2;\n\tconst delta_ts = ensure(time2).sub(ensure(time1)).pow(2);\n\tconst delta_xs = ensure(x2).sub(ensure(x1)).pow(2);\n\treturn cSquared.mul(delta_ts).minus(delta_xs).sqrt();\n}\n\n/**\n * Calculate the invariant spacetime interval between two events in 3D space\n * @param event1 The first event as a tuple of time, x, y, z\n * @param event2 The second event as a tuple of time, x, y, z\n * @returns The invariant interval (spacetime interval squared, or seconds^2 - meters^2 / c^2)\n */\nexport function spacetimeInterval3d(event1: Interval, event2: Interval): Decimal {\n\t// sqrt((ct) ^ 2 - (x) ^ 2 - (y) ^ 2 - (z) ^ 2)\n\t// normal intervals are time-like\n\t// zero is light-like\n\t// imaginary is space-like, not causally connected\n\tconst [time1, x1, y1, z1] = event1;\n\tconst [time2, x2, y2, z2] = event2;\n\tconst delta_ts = ensure(time2).sub(ensure(time1)).pow(2);\n\tconst delta_xs = ensure(x2).sub(ensure(x1)).pow(2);\n\tconst delta_ys = ensure(y2).sub(ensure(y1)).pow(2);\n\tconst delta_zs = ensure(z2).sub(ensure(z1)).pow(2);\n\treturn cSquared.mul(delta_ts).minus(delta_xs).minus(delta_ys).minus(delta_zs).sqrt();\n}\n\n/**\n * Compute the time (in seconds) that a rocket can maintain constant proper acceleration\n * using matter-antimatter annihilation with charged-pion exhaust.\n *\n * Physics: Proton-antiproton annihilation produces multiple pions and other mesons.\n * Experimental data shows ~40% of annihilation energy appears as charged pion\n * kinetic energy that can be magnetically redirected for thrust. The remaining\n * ~60% goes to neutral pions (which decay to gamma rays), pion rest mass energy,\n * and other particles that cannot be efficiently directed.\n *\n * Assumptions:\n * - Charged pions have ~0.94c exhaust speed before decay.\n * - Nozzle efficiency reduces axial momentum (collimation), not particle speed.\n * - chargedFraction (~0.40) represents usable annihilation energy in charged pions;\n *   it scales available thrust/power, not exhaust speed.\n *\n * References:\n * - NASA studies: https://ntrs.nasa.gov/api/citations/20200001904/downloads/20200001904.pdf\n * - NASA contractor report: https://ntrs.nasa.gov/api/citations/19890018329/downloads/19890018329.pdf\n * - Experimental data: https://link.springer.com/article/10.1140/epja/s10050-024-01428-x\n *\n * @param fuelMass Combined matter + antimatter mass (kg) that will be annihilated\n * @param dryMass Dry mass of the spacecraft after all fuel is gone (kg)\n * @param nozzleEfficiency Magnetic nozzle effectiveness at collimating charged pions (01).\n *                         Default = 0.85 (realistic for magnetic nozzles).\n * @param chargedFraction Fraction of annihilation energy in charged pions (01).\n *                        Default = 0.4 (40%, from NASA experimental studies).\n *                        Note: Total system efficiency  chargedFraction  nozzleEfficiency  0.34 at defaults.\n * @param accel Acceleration to maintain (m/s). Default = 1g (9.80665 m/s)\n * @returns Acceleration time in seconds as a Decimal\n */\nexport function pionRocketAccelTime(\n\tfuelMass: NumberInput,\n\tdryMass: NumberInput,\n\tnozzleEfficiency: NumberInput = 0.85,\n\tchargedFraction: NumberInput = 0.4,\n\taccel: NumberInput = g\n): Decimal {\n\tconst fuelD = check(fuelMass, \"Invalid fuel mass\");\n\tconst dryD = check(dryMass, \"Invalid dry mass\");\n\tconst nozzleEffD = check(nozzleEfficiency, \"Invalid nozzle efficiency\");\n\tconst chargedFractionD = check(chargedFraction, \"Invalid charged fraction\");\n\tconst accelD = check(accel, \"Invalid acceleration\");\n\n\t// Charged pion exhaust velocity (actual particle velocity, not including energy fraction)\n\t// Nozzle efficiency affects momentum collimation\n\tconst ve = c.mul(0.94).mul(nozzleEffD);\n\n\t// Apply charged fraction as thrust efficiency: only this fraction of fuel energy\n\t// becomes usable momentum at velocity ve\n\tconst veEffective = ve.mul(chargedFractionD);\n\n\tconst m0 = dryD.plus(fuelD);\n\tconst mf = dryD;\n\n\tif (m0.lte(mf) || veEffective.lte(0)) {\n\t\treturn new Decimal(0);\n\t}\n\n\t// t = (v_e_effective / a) * ln(M0/Mf)\n\treturn veEffective.div(accelD).mul(m0.div(mf).ln());\n}\n\n/**\n * Compute the propellant mass fraction required for a charged-pion antimatter rocket\n * to maintain constant proper acceleration for a given time.\n *\n * Physics: Proton-antiproton annihilation produces multiple pions and other mesons.\n * Experimental data shows ~40% of annihilation energy appears as charged pion\n * kinetic energy that can be magnetically redirected for thrust. The remaining\n * ~60% goes to neutral pions (which decay to gamma rays), pion rest mass energy,\n * and other particles that cannot be efficiently directed.\n *\n * Assumptions:\n * - Charged pions have ~0.94c exhaust speed before decay.\n * - Nozzle efficiency reduces axial momentum (collimation), not particle speed.\n * - chargedFraction (~0.40) represents usable annihilation energy in charged pions;\n *   it scales available thrust/power, not exhaust speed.\n *\n * References:\n * - NASA studies: https://ntrs.nasa.gov/api/citations/20200001904/downloads/20200001904.pdf\n * - NASA contractor report: https://ntrs.nasa.gov/api/citations/19890018329/downloads/19890018329.pdf\n * - Experimental data: https://link.springer.com/article/10.1140/epja/s10050-024-01428-x\n *\n * @param thrustTime Duration of thrust in seconds\n * @param accel Constant proper acceleration (m/s). Default = 1g\n * @param nozzleEfficiency Magnetic nozzle effectiveness at collimating charged pions (01).\n *                         Default = 0.85 (realistic for magnetic nozzles).\n * @param chargedFraction Fraction of annihilation energy in charged pions (01).\n *                        Default = 0.4 (40%, from NASA experimental studies).\n *                        Note: Total system efficiency  chargedFraction  nozzleEfficiency  0.34 at defaults.\n * @returns Propellant mass fraction (fuel_mass / initial_mass), range 0.0 to 1.0\n */\nexport function pionRocketFuelFraction(\n\tthrustTime: NumberInput,\n\taccel: NumberInput = g,\n\tnozzleEfficiency: NumberInput = 0.85,\n\tchargedFraction: NumberInput = 0.4\n): Decimal {\n\tconst timeD = check(thrustTime, \"Invalid thrust time\");\n\tconst accelD = check(accel, \"Invalid acceleration\");\n\tconst nozzleEffD = check(nozzleEfficiency, \"Invalid nozzle efficiency\");\n\tconst chargedFractionD = check(chargedFraction, \"Invalid charged fraction\");\n\n\t// Charged pion exhaust velocity (actual particle velocity, not including energy fraction)\n\t// Nozzle efficiency affects momentum collimation\n\tconst ve = c.mul(0.94).mul(nozzleEffD);\n\n\t// Apply charged fraction as thrust efficiency: only this fraction of fuel energy\n\t// becomes usable momentum at velocity ve\n\tconst veEffective = ve.mul(chargedFractionD);\n\n\tif (veEffective.lte(0)) {\n\t\treturn new Decimal(0);\n\t}\n\n\t// Mass ratio M0/Mf = exp(a*t / v_e_effective)\n\tconst massRatio = accelD.mul(timeD).div(veEffective).exp();\n\n\t// Propellant fraction = 1 - (Mf/M0) = 1 - 1/mass_ratio\n\treturn one.minus(one.div(massRatio));\n}\n\n/**\n * Calculate fuel fractions at multiple nozzle efficiency levels\n * @param thrustTime Duration of thrust in seconds\n * @param accel Constant proper acceleration (m/s)\n * @param nozzleEfficiencies Array of nozzle efficiency values (0-1)\n * @returns Array of fuel fractions as percentages (0-100) for each nozzle efficiency level\n */\nexport function pionRocketFuelFractionsMultiple(\n\tthrustTime: NumberInput,\n\taccel: NumberInput,\n\tnozzleEfficiencies: number[]\n): Decimal[] {\n\treturn nozzleEfficiencies.map(nozzleEff =>\n\t\tpionRocketFuelFraction(thrustTime, accel, nozzleEff).mul(100)\n\t);\n}\n\n/**\n * Format a Decimal value with specified decimal places and thousand separators.\n *\n * **BREAKING CHANGE (v2.0.0):** This function now formats all numbers in decimal notation\n * instead of preserving scientific notation. Previously, values like \"1e100\" would be\n * returned as-is in scientific notation. Now they are expanded to full decimal format\n * with thousand separators (e.g., \"10,000,000,000...\").\n *\n * Features:\n * - Rounds to specified decimal places using banker's rounding\n * - Adds thousand separators (commas) to integer part\n * - Strips trailing zeros from decimal part\n * - Supports ignoreChar for selective digit formatting (useful for sequences like \"0.999...\")\n * - Normalizes -0 to 0\n *\n * @param value The Decimal value to format\n * @param ignoreChar Optional single character to skip when counting significant places.\n *                   If the decimal part starts with this character, those digits are\n *                   copied but not counted toward the significantDecimalPlaces limit.\n *                   Useful for formatting values like 0.9999999123 with ignoreChar='9'.\n * @param significantDecimalPlaces Number of decimal places to include (default: 2).\n *                                 Set to 0 to return only the integer part (rounded).\n * @returns Formatted string with thousand separators and specified decimal places\n * @throws Error if ignoreChar is more than one character\n *\n * @example\n * formatSignificant(new Decimal(\"1234.5678\"))           // \"1,234.57\"\n * formatSignificant(new Decimal(\"0.999123\"), \"9\", 3)    // \"0.999123\"\n * formatSignificant(new Decimal(\"1e100\"), \"\", 2)        // \"10,000,000,000...\" (full decimal)\n * formatSignificant(new Decimal(\"1234.5678\"), \"\", 0)    // \"1,235\" (rounded integer)\n */\nexport function formatSignificant(\n\tvalue: Decimal,\n\tignoreChar: string = \"\",\n\tsignificantDecimalPlaces: number = 2,\n\tpreserveTrailingZeros: boolean = false\n): string {\n\tif (ignoreChar.length > 1) {\n\t\tthrow new Error(\"ignoreChar must be a single character or empty\");\n\t}\n\n\t// If 0 decimal places requested, return just the integer part (rounded)\n\tif (significantDecimalPlaces === 0) {\n\t\tconst integerStr = value.toFixed(0);\n\t\t// Add thousand separators\n\t\tconst result = integerStr.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\t\treturn result === \"-0\" ? \"0\" : result;\n\t}\n\n\t// For ignoreChar case, we need full precision to scan for the character\n\t// For normal case, we can use exact rounding\n\tconst needsFullPrecision = ignoreChar.length > 0;\n\tconst maxDecimalPlaces = needsFullPrecision\n\t\t? Math.max(precisionConfigured, significantDecimalPlaces + 50)\n\t\t: significantDecimalPlaces;\n\n\tconst str = value.toFixed(maxDecimalPlaces);\n\tconst parts = str.split(\".\", 2);\n\n\t// Handle integers (no decimal part)\n\tif (parts.length !== 2) {\n\t\tconst integerPart = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\t\t// If preserving trailing zeros and we want decimal places, add them\n\t\tif (preserveTrailingZeros && significantDecimalPlaces > 0) {\n\t\t\tconst zeros = \"0\".repeat(significantDecimalPlaces);\n\t\t\treturn integerPart === \"-0\" ? `0.${zeros}` : `${integerPart}.${zeros}`;\n\t\t}\n\t\treturn integerPart === \"-0\" ? \"0\" : integerPart;\n\t}\n\n\tlet decOutput = \"\"; // output buffer\n\tlet remainingPlaces = significantDecimalPlaces;\n\n\tif (needsFullPrecision) {\n\t\t// Scan for ignoreChar, then take significant digits\n\t\tlet sigPart = true;\n\t\tfor (let i = 0; i < parts[1].length; ++i) {\n\t\t\tconst digit = parts[1][i];\n\t\t\tif (sigPart && digit === ignoreChar) {\n\t\t\t\t// in the ignoreChar part, just copy the digit\n\t\t\t\tdecOutput += digit;\n\t\t\t} else if (remainingPlaces > 0) {\n\t\t\t\t// now include a fixed number of digits\n\t\t\t\tsigPart = false; // we've passed the ignoreChars\n\t\t\t\tdecOutput += digit;\n\t\t\t\t--remainingPlaces;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// No ignoreChar - toFixed already rounded correctly\n\t\tdecOutput = parts[1];\n\t}\n\n\t// Strip trailing zeros to match Decimal.toString() behavior (unless preserving)\n\tif (!preserveTrailingZeros) {\n\t\tdecOutput = decOutput.replace(/0+$/, \"\");\n\t} else {\n\t\t// Pad with zeros if needed to reach significantDecimalPlaces\n\t\twhile (decOutput.length < significantDecimalPlaces) {\n\t\t\tdecOutput += \"0\";\n\t\t}\n\t}\n\n\t// Add thousand separators (commas) to the integer part\n\tconst integerPart = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\n\tconst result = decOutput.length === 0 ? integerPart : `${integerPart}.${decOutput}`;\n\n\t// Normalize -0 to 0\n\treturn result === \"-0\" ? \"0\" : result;\n}\n\n/**\n * Format a mass value with appropriate unit scaling (kg, tons, Everest masses, Moon masses, Earth masses, Solar masses, Milky Way masses, Supercluster masses, Observable Universe masses)\n * Uses 0.1x thresholds for unit transitions to provide human-readable output\n *\n * @param fuelMass - The mass value in kilograms\n * @returns Formatted string with smart unit and scientific notation in parentheses\n *\n * @example\n * formatMassWithUnit(new Decimal(500))             // \"500 kg (5.0e+2 kg)\"\n * formatMassWithUnit(new Decimal(5000))            // \"5,000 tons (5.0e+3 kg)\"\n * formatMassWithUnit(everestMass)                  // \"1.00 Everest masses (8.10e+14 kg)\"\n * formatMassWithUnit(moonMass)                     // \"1.00 Moon masses (7.34e+22 kg)\"\n * formatMassWithUnit(earthMass)                    // \"1.00 Earth masses (5.97e+24 kg)\"\n * formatMassWithUnit(superclusterMass)             // \"1.00 Supercluster masses (1.99e+47 kg)\"\n * formatMassWithUnit(observableUniverseMass)       // \"1.00 Observable Universe masses (1.00e+53 kg)\"\n */\nexport function formatMassWithUnit(fuelMass: Decimal): string {\n\tconst fuelMassScientific = fuelMass.toExponential(2);\n\n\tif (fuelMass.lt(1000)) {\n\t\t// Show in kg for very small masses (< 1 ton)\n\t\treturn `${formatSignificant(fuelMass, \"0\", 2)} kg (${fuelMassScientific} kg)`;\n\t}\n\n\tconst everestMasses = fuelMass.div(everestMass);\n\tif (everestMasses.lt(0.1)) {\n\t\t// Show in tons for small masses (whole number)\n\t\tconst tons = fuelMass.div(1000);\n\t\treturn `${formatSignificant(tons, \"0\", 0)} tons (${fuelMassScientific} kg)`;\n\t}\n\n\tconst moonMasses = fuelMass.div(moonMass);\n\tif (moonMasses.lt(0.1)) {\n\t\t// Show in Everest masses (use empty ignoreChar with preserveTrailingZeros to avoid bug with \"0\")\n\t\treturn `${formatSignificant(everestMasses, \"\", 2, true)} Everest masses (${fuelMassScientific} kg)`;\n\t}\n\n\tconst earthMasses = fuelMass.div(earthMass);\n\tif (earthMasses.lt(0.1)) {\n\t\t// Show in Moon masses (use empty ignoreChar with preserveTrailingZeros to avoid bug with \"0\")\n\t\treturn `${formatSignificant(moonMasses, \"\", 2, true)} Moon masses (${fuelMassScientific} kg)`;\n\t}\n\n\tconst solarMasses = fuelMass.div(solarMass);\n\tif (solarMasses.lt(0.1)) {\n\t\t// Show in Earth masses (use empty ignoreChar with preserveTrailingZeros to avoid bug with \"0\")\n\t\treturn `${formatSignificant(earthMasses, \"\", 2, true)} Earth masses (${fuelMassScientific} kg)`;\n\t}\n\n\tconst milkyWayMasses = fuelMass.div(milkyWayMass);\n\tif (milkyWayMasses.lt(0.1)) {\n\t\t// Show in Solar masses (use empty ignoreChar with preserveTrailingZeros to avoid bug with \"0\")\n\t\treturn `${formatSignificant(solarMasses, \"\", 2, true)} Solar masses (${fuelMassScientific} kg)`;\n\t}\n\n\tconst superclusterMasses = fuelMass.div(superclusterMass);\n\tif (superclusterMasses.lt(0.1)) {\n\t\t// Show in Milky Way masses (use empty ignoreChar with preserveTrailingZeros to avoid bug with \"0\")\n\t\treturn `${formatSignificant(milkyWayMasses, \"\", 2, true)} Milky Way masses (${fuelMassScientific} kg)`;\n\t}\n\n\tconst observableUniverseMasses = fuelMass.div(observableUniverseMass);\n\tif (observableUniverseMasses.lt(0.1)) {\n\t\t// Show in Supercluster masses (use empty ignoreChar with preserveTrailingZeros to avoid bug with \"0\")\n\t\treturn `${formatSignificant(superclusterMasses, \"\", 2, true)} Supercluster masses (${fuelMassScientific} kg)`;\n\t}\n\n\t// Show in Observable Universe masses (use empty ignoreChar with preserveTrailingZeros to avoid bug with \"0\")\n\treturn `${formatSignificant(observableUniverseMasses, \"\", 2, true)} Observable Universe masses (${fuelMassScientific} kg)`;\n}\n\n/**\n * Format distance with automatic unit selection based on magnitude\n * Uses light years for distances >= 0.1 ly, kilometers for smaller distances\n *\n * @param distanceInLightYears - Distance in light years (Decimal)\n * @param distanceInKm - Distance in kilometers (Decimal)\n * @returns Object with formatted value and units\n */\nexport function formatDistanceAutoUnit(\n\tdistanceInLightYears: Decimal,\n\tdistanceInKm: Decimal\n): { value: string; units: string } {\n\tconst threshold = new Decimal(\"0.1\");\n\n\tif (distanceInLightYears.gte(threshold)) {\n\t\treturn {\n\t\t\tvalue: formatSignificant(distanceInLightYears, \"0\", 3, true),\n\t\t\tunits: \"ly\",\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tvalue: formatSignificant(distanceInKm, \"0\", 1),\n\t\t\tunits: \"km\",\n\t\t};\n\t}\n}\n\n/**\n * Format time with automatic unit selection based on magnitude\n * - Minutes if < 120 minutes (2 hours)\n * - Hours (1 dp) if < 1 day (1440 minutes)\n * - Days (1 dp) if < 365 days\n * - Years otherwise\n *\n * @param timeInMinutes - Time in minutes (Decimal)\n * @returns Object with formatted value and units\n */\nexport function formatTimeWithUnit(timeInMinutes: Decimal): { value: string; units: string } {\n\tconst absTime = timeInMinutes.abs();\n\n\tif (absTime.lt(120)) {\n\t\t// Less than 2 hours: show in minutes with 2 decimal places\n\t\treturn {\n\t\t\tvalue: formatSignificant(timeInMinutes, \"\", 2),\n\t\t\tunits: \"minutes\",\n\t\t};\n\t}\n\n\tconst timeInHours = timeInMinutes.div(60);\n\tif (absTime.lt(1440)) {\n\t\t// Less than 1 day: show in hours with 1 decimal place\n\t\treturn {\n\t\t\tvalue: formatSignificant(timeInHours, \"\", 1, true),\n\t\t\tunits: \"hours\",\n\t\t};\n\t}\n\n\tconst timeInDays = timeInMinutes.div(1440);\n\tif (absTime.lt(365 * 1440)) {\n\t\t// Less than 365 days: show in days with 1 decimal place\n\t\treturn {\n\t\t\tvalue: formatSignificant(timeInDays, \"\", 1, true),\n\t\t\tunits: \"days\",\n\t\t};\n\t}\n\n\t// 365 days or more: show in years with 1 decimal place\n\tconst timeInYears = timeInDays.div(365);\n\treturn {\n\t\tvalue: formatSignificant(timeInYears, \"\", 1, true),\n\t\tunits: \"years\",\n\t};\n}\n","// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Franois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","export default {}","/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by Franois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n","import seedrandom from \"seedrandom\";\n\n/**\n * Result of estimating stars in a sphere\n */\nexport interface StarEstimationResult {\n\tstars: number;\n\tfraction: number;\n}\n\n// Cache for model's total galaxy star count (computed once at 200,000 ly)\nlet _modelTotalStars: number | null = null;\n\n/**\n * Estimate the number of stars within a sphere of radius radiusLy centered on the Sun.\n *\n * This function models the Milky Way galaxy from Earth's perspective using a\n * three-component density model:\n * - Exponential thin disk (main stellar population)\n * - Gaussian bulge (central concentration)\n * - Power-law halo (diffuse outer component)\n *\n * The estimation uses shell-based Monte Carlo integration, sampling each radial\n * shell independently and accumulating stars outward. This guarantees that larger\n * spheres always contain at least as many stars as smaller ones (monotonicity).\n *\n * @param radiusLy - Radius of the sphere in light-years (must be positive)\n * @param nShells - Number of radial shells for integration (default: 200)\n * @param samplesPerShell - Monte Carlo samples per shell (default: 2000)\n * @returns Object with estimated_stars and fraction_of_galaxy\n * @throws Error if radiusLy <= 0 or nShells <= 0 or samplesPerShell <= 0\n */\nexport function estimateStarsInSphere(\n\tradiusLy: number,\n\tnShells: number = 200,\n\tsamplesPerShell: number = 2000\n): StarEstimationResult {\n\t// Input validation\n\tif (radiusLy <= 0) {\n\t\tthrow new Error(`Sphere radius must be positive, got ${radiusLy}`);\n\t}\n\tif (nShells <= 0) {\n\t\tthrow new Error(`Number of shells must be positive, got ${nShells}`);\n\t}\n\tif (samplesPerShell <= 0) {\n\t\tthrow new Error(`Samples per shell must be positive, got ${samplesPerShell}`);\n\t}\n\n\t// --- Galactic Model Parameters ---\n\t// All measurements from Sun's position at R_sun from galactic center\n\t// See docs/galactic-stellar-density-research.md for sources and derivations\n\n\t// Thin disk: Exponential profile (R,z) =  * exp(-R/h_R) * exp(-|z|/h_z)\n\t// Local stellar density from RECONS/Gaia/HIPPARCOS surveys: 0.10-0.14 stars/pc\n\t// Unit conversion: 1 pc = 34.71 ly, so 0.12 stars/pc = 0.0034 stars/ly\n\tconst rhoLocal = 0.0034; // Local stellar density at Sun's position (stars/ly)\n\n\t// Disk scale length: meta-analysis gives 2.6-3.5 kpc (Licquia & Newman 2016)\n\tconst hR = 11500.0; // Radial scale length: 3.5 kpc = 11,500 ly\n\n\t// Disk scale height: Effective value combining thin disk (~300 pc) and thick disk (~1 kpc)\n\t// The thick disk contains ~10-15% of disk stars but extends much higher\n\t// Using effective scale height of ~860 pc captures both populations\n\tconst hZ = 2800.0; // Effective vertical scale height: ~860 pc = 2,800 ly\n\n\t// Bulge: Gaussian spheroid centered on galaxy\n\t// Research shows bulge is 10-15% of stellar mass\n\t// Central density tuned to produce ~16% of total galaxy stars (~30B of 200B)\n\tconst rhoBulgeCenter = 0.14; // Central bulge density (stars/ly)\n\tconst rBulge = 3500.0; // Bulge scale radius: ~1 kpc\n\n\t// Halo: Power-law profile with core (minor component, ~1-2% of galaxy)\n\t// Reduced from original to match observational ~1% stellar halo fraction\n\tconst rhoHaloNorm = 3e-6; // Halo normalization constant (stars/ly)\n\tconst rHalo = 25000.0; // Halo reference radius (ly)\n\tconst rCore = 500.0; // Core radius to prevent singularity at r=0 (ly)\n\n\t// Sun's galactocentric distance\n\tconst rSun = 27000.0; // Distance from galactic center to Sun (ly)\n\n\t// Compute disk central density from local density\n\t// At Sun: rhoLocal = rhoDiskCenter * exp(-R_sun/h_R)\n\tconst rhoDiskCenter = rhoLocal * Math.exp(rSun / hR);\n\n\t// --- Shell-based Monte Carlo integration ---\n\t// Use FIXED shell width across all calls to ensure shells align and samples match\n\t// This guarantees monotonicity: estimate(R1) <= estimate(R2) when R1 < R2\n\tconst SHELL_WIDTH_LY = 500.0; // Fixed shell width in light-years\n\tconst nActualShells = Math.ceil(radiusLy / SHELL_WIDTH_LY);\n\tlet totalStars = 0.0;\n\n\t// Use deterministic seeding for reproducibility across calls\n\tconst rng = seedrandom(\"42\");\n\n\tfor (let i = 0; i < nActualShells; i++) {\n\t\tconst rInner = i * SHELL_WIDTH_LY;\n\t\tconst rOuter = Math.min((i + 1) * SHELL_WIDTH_LY, radiusLy);\n\n\t\t// Arrays to hold sample densities\n\t\tconst densities: number[] = [];\n\n\t\tfor (let j = 0; j < samplesPerShell; j++) {\n\t\t\t// Sample uniformly within this shell\n\t\t\t// Use inverse transform: r uniform in [r_inner, r_outer]\n\t\t\tconst u = rng();\n\t\t\tconst r = Math.cbrt(rInner ** 3 + u * (rOuter ** 3 - rInner ** 3));\n\n\t\t\t// Random angles for uniform distribution on sphere\n\t\t\tconst costheta = 2 * rng() - 1; // uniform in [-1, 1]\n\t\t\tconst phi = 2 * Math.PI * rng();\n\t\t\tconst theta = Math.acos(costheta);\n\n\t\t\t// Convert to Cartesian coordinates centered on Sun\n\t\t\tconst x = r * Math.sin(theta) * Math.cos(phi);\n\t\t\tconst y = r * Math.sin(theta) * Math.sin(phi);\n\t\t\tconst z = r * Math.cos(theta);\n\n\t\t\t// Transform to galactocentric coordinates\n\t\t\tconst rGal = Math.sqrt((rSun + x) ** 2 + y ** 2);\n\t\t\tconst zGal = z;\n\t\t\tconst rGalSph = Math.sqrt((rSun + x) ** 2 + y ** 2 + z ** 2);\n\n\t\t\t// Compute stellar density at each sample point\n\t\t\tconst diskDensity = rhoDiskCenter * Math.exp(-rGal / hR) * Math.exp(-Math.abs(zGal) / hZ);\n\t\t\tconst bulgeDensity = rhoBulgeCenter * Math.exp(-((rGalSph / rBulge) ** 2));\n\t\t\tconst haloDensity = rhoHaloNorm * ((rGalSph + rCore) / rHalo) ** -3.5;\n\n\t\t\tconst rhoTotal = diskDensity + bulgeDensity + haloDensity;\n\t\t\tdensities.push(rhoTotal);\n\t\t}\n\n\t\t// Shell volume and star count\n\t\tconst shellVolume = (4 / 3) * Math.PI * (rOuter ** 3 - rInner ** 3);\n\t\tconst meanDensity = densities.reduce((sum, d) => sum + d, 0) / densities.length;\n\t\tconst shellStars = meanDensity * shellVolume;\n\t\ttotalStars += shellStars;\n\t}\n\n\t// Compute model's total galaxy star count for normalization (cache it)\n\tif (_modelTotalStars === null) {\n\t\t// Estimate total by integrating to 200,000 ly (captures essentially all stars)\n\t\tconst temp = _computeStarsWithoutNormalization(200000, samplesPerShell);\n\t\t_modelTotalStars = temp.stars;\n\t}\n\n\tconst fraction = totalStars / _modelTotalStars;\n\treturn { stars: totalStars, fraction };\n}\n\n/**\n * Format star count for display with appropriate units\n * @param stars - Number of stars to format\n * @returns Formatted string like \"~866,200\", \"~12,600,000\", \"~5\"\n */\nexport function formatStarCount(stars: number): string {\n\tif (stars < 0.5) return \"< 1 star\";\n\tif (stars >= 1e3) {\n\t\t// Round to nearest hundred for thousands and above\n\t\tconst rounded = Math.round(stars / 100) * 100;\n\t\treturn `~${rounded.toLocaleString(\"en-US\")}`;\n\t}\n\treturn `~${Math.round(stars)}`;\n}\n\n/**\n * Helper function to compute star count without normalization (avoids recursion).\n */\nfunction _computeStarsWithoutNormalization(\n\tradiusLy: number,\n\tsamplesPerShell: number\n): StarEstimationResult {\n\t// Same model parameters as main function - MUST be kept in sync!\n\tconst rhoLocal = 0.0034;\n\tconst hR = 11500.0;\n\tconst hZ = 2800.0;\n\tconst rhoBulgeCenter = 0.14;\n\tconst rBulge = 3500.0;\n\tconst rhoHaloNorm = 3e-6;\n\tconst rHalo = 25000.0;\n\tconst rCore = 500.0;\n\tconst rSun = 27000.0;\n\tconst rhoDiskCenter = rhoLocal * Math.exp(rSun / hR);\n\n\tconst SHELL_WIDTH_LY = 500.0; // Must match main function\n\tconst nActualShells = Math.ceil(radiusLy / SHELL_WIDTH_LY);\n\tlet totalStars = 0.0;\n\tconst rng = seedrandom(\"42\");\n\n\tfor (let i = 0; i < nActualShells; i++) {\n\t\tconst rInner = i * SHELL_WIDTH_LY;\n\t\tconst rOuter = Math.min((i + 1) * SHELL_WIDTH_LY, radiusLy);\n\n\t\tconst densities: number[] = [];\n\n\t\tfor (let j = 0; j < samplesPerShell; j++) {\n\t\t\tconst u = rng();\n\t\t\tconst r = Math.cbrt(rInner ** 3 + u * (rOuter ** 3 - rInner ** 3));\n\n\t\t\tconst costheta = 2 * rng() - 1;\n\t\t\tconst phi = 2 * Math.PI * rng();\n\t\t\tconst theta = Math.acos(costheta);\n\n\t\t\tconst x = r * Math.sin(theta) * Math.cos(phi);\n\t\t\tconst y = r * Math.sin(theta) * Math.sin(phi);\n\t\t\tconst z = r * Math.cos(theta);\n\n\t\t\tconst rGal = Math.sqrt((rSun + x) ** 2 + y ** 2);\n\t\t\tconst zGal = z;\n\t\t\tconst rGalSph = Math.sqrt((rSun + x) ** 2 + y ** 2 + z ** 2);\n\n\t\t\tconst diskDensity = rhoDiskCenter * Math.exp(-rGal / hR) * Math.exp(-Math.abs(zGal) / hZ);\n\t\t\tconst bulgeDensity = rhoBulgeCenter * Math.exp(-((rGalSph / rBulge) ** 2));\n\t\t\tconst haloDensity = rhoHaloNorm * ((rGalSph + rCore) / rHalo) ** -3.5;\n\n\t\t\tconst rhoTotal = diskDensity + bulgeDensity + haloDensity;\n\t\t\tdensities.push(rhoTotal);\n\t\t}\n\n\t\tconst shellVolume = (4 / 3) * Math.PI * (rOuter ** 3 - rInner ** 3);\n\t\tconst meanDensity = densities.reduce((sum, d) => sum + d, 0) / densities.length;\n\t\tconst shellStars = meanDensity * shellVolume;\n\t\ttotalStars += shellStars;\n\t}\n\n\treturn { stars: totalStars, fraction: 1.0 };\n}\n","/**\n * Pure functions for generating chart-ready data from physics calculations\n * Converts Decimal.js results to numbers for Chart.js compatibility\n */\n\nimport Decimal from \"decimal.js\";\nimport * as rl from \"../relativity_lib\";\n\nexport type ChartDataPoint = {\n\tx: number;\n\ty: number;\n\txDecimal: Decimal;\n\tyDecimal: Decimal;\n};\nexport type ChartDataPointWithVelocity = {\n\tx: number;\n\ty: number;\n\tvelocity: number;\n\txDecimal: Decimal;\n\tyDecimal: Decimal;\n\tvelocityDecimal: Decimal;\n};\n\nexport function generateAccelChartData(\n\taccelG: number,\n\tdurationDays: number,\n\tnozzleEfficiency: number\n): {\n\tproperTimeVelocity: ChartDataPoint[];\n\tcoordTimeVelocity: ChartDataPoint[];\n\tproperTimeRapidity: ChartDataPoint[];\n\tcoordTimeRapidity: ChartDataPoint[];\n\tproperTimeTimeDilation: ChartDataPoint[];\n\tcoordTimeTimeDilation: ChartDataPoint[];\n\tproperTimeMassRemaining: ChartDataPoint[];\n\tpositionVelocity: ChartDataPoint[]; // NEW: {x: distance_ly, y: velocity_c}\n\tspacetimeWorldline: ChartDataPointWithVelocity[]; // NEW: {x: coord_time_years, y: distance_ly, velocity}\n} {\n\tconst accel = rl.g.mul(accelG);\n\tconst durationSeconds = durationDays * 60 * 60 * 24;\n\tconst numPoints = 100;\n\n\tconst properTimeVelocity: ChartDataPoint[] = [];\n\tconst coordTimeVelocity: ChartDataPoint[] = [];\n\tconst properTimeRapidity: ChartDataPoint[] = [];\n\tconst coordTimeRapidity: ChartDataPoint[] = [];\n\tconst properTimeTimeDilation: ChartDataPoint[] = [];\n\tconst coordTimeTimeDilation: ChartDataPoint[] = [];\n\tconst properTimeMassRemaining: ChartDataPoint[] = [];\n\tconst positionVelocity: ChartDataPoint[] = [];\n\tconst spacetimeWorldline: ChartDataPointWithVelocity[] = [];\n\n\tfor (let i = 0; i <= numPoints; i++) {\n\t\tconst tauDecimal = rl.ensure((i / numPoints) * durationSeconds);\n\t\tconst tauDaysDecimal = tauDecimal.div(rl.ensure(60 * 60 * 24));\n\t\tconst tauDays = tauDaysDecimal.toNumber();\n\n\t\tconst velocity = rl.relativisticVelocity(accel, tauDecimal);\n\t\tconst velocityCDecimal = velocity.div(rl.c);\n\t\tconst velocityC = velocityCDecimal.toNumber();\n\n\t\tconst rapidityDecimal = rl.rapidityFromVelocity(velocity);\n\t\tconst rapidity = rapidityDecimal.toNumber();\n\t\tconst lorentz = rl.lorentzFactor(velocity);\n\t\tconst timeDilationDecimal = rl.one.div(lorentz);\n\t\tconst timeDilation = timeDilationDecimal.toNumber();\n\n\t\tconst t = rl.coordinateTime(accel, tauDecimal);\n\t\tconst tDaysDecimal = t.div(rl.ensure(60 * 60 * 24));\n\t\tconst tDays = tDaysDecimal.toNumber();\n\n\t\t// Calculate mass remaining as percentage for selected nozzle efficiency\n\t\tconst fuelFraction = rl.pionRocketFuelFraction(tauDecimal, accel, nozzleEfficiency);\n\t\tconst massRemainingDecimal = rl.one.minus(fuelFraction).mul(100);\n\t\tconst massRemaining = massRemainingDecimal.toNumber();\n\n\t\tproperTimeVelocity.push({\n\t\t\tx: tauDays,\n\t\t\ty: velocityC,\n\t\t\txDecimal: tauDaysDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\tcoordTimeVelocity.push({\n\t\t\tx: tDays,\n\t\t\ty: velocityC,\n\t\t\txDecimal: tDaysDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\tproperTimeRapidity.push({\n\t\t\tx: tauDays,\n\t\t\ty: rapidity,\n\t\t\txDecimal: tauDaysDecimal,\n\t\t\tyDecimal: rapidityDecimal,\n\t\t});\n\n\t\tcoordTimeRapidity.push({\n\t\t\tx: tDays,\n\t\t\ty: rapidity,\n\t\t\txDecimal: tDaysDecimal,\n\t\t\tyDecimal: rapidityDecimal,\n\t\t});\n\n\t\tproperTimeTimeDilation.push({\n\t\t\tx: tauDays,\n\t\t\ty: timeDilation,\n\t\t\txDecimal: tauDaysDecimal,\n\t\t\tyDecimal: timeDilationDecimal,\n\t\t});\n\n\t\tcoordTimeTimeDilation.push({\n\t\t\tx: tDays,\n\t\t\ty: timeDilation,\n\t\t\txDecimal: tDaysDecimal,\n\t\t\tyDecimal: timeDilationDecimal,\n\t\t});\n\t\tproperTimeMassRemaining.push({\n\t\t\tx: tauDays,\n\t\t\ty: massRemaining,\n\t\t\txDecimal: tauDaysDecimal,\n\t\t\tyDecimal: massRemainingDecimal,\n\t\t});\n\n\t\t// Calculate distance for phase space plots\n\t\tconst distance = rl.relativisticDistance(accel, tauDecimal);\n\t\tconst distanceLyDecimal = distance.div(rl.lightYear);\n\t\tconst distanceLy = distanceLyDecimal.toNumber();\n\n\t\t// Position-velocity phase space\n\t\tpositionVelocity.push({\n\t\t\tx: distanceLy,\n\t\t\ty: velocityC,\n\t\t\txDecimal: distanceLyDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\t// Spacetime worldline (coord time vs distance) with velocity for gradient\n\t\tconst tYearsDecimal = tDaysDecimal.div(rl.ensure(365.25));\n\t\tconst tYears = tYearsDecimal.toNumber();\n\n\t\tspacetimeWorldline.push({\n\t\t\tx: tYears,\n\t\t\ty: distanceLy,\n\t\t\tvelocity: velocityC,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: distanceLyDecimal,\n\t\t\tvelocityDecimal: velocityCDecimal,\n\t\t});\n\t}\n\n\treturn {\n\t\tproperTimeVelocity,\n\t\tcoordTimeVelocity,\n\t\tproperTimeRapidity,\n\t\tcoordTimeRapidity,\n\t\tproperTimeTimeDilation,\n\t\tcoordTimeTimeDilation,\n\t\tproperTimeMassRemaining,\n\t\tpositionVelocity,\n\t\tspacetimeWorldline,\n\t};\n}\n\nexport function generateFlipBurnChartData(\n\taccelG: number,\n\tdistanceLightYears: number,\n\tnozzleEfficiency: number\n): {\n\tproperTimeVelocity: ChartDataPoint[];\n\tcoordTimeVelocity: ChartDataPoint[];\n\tproperTimeRapidity: ChartDataPoint[];\n\tcoordTimeRapidity: ChartDataPoint[];\n\tproperTimeLorentz: ChartDataPoint[];\n\tcoordTimeLorentz: ChartDataPoint[];\n\tproperTimeMassRemaining: ChartDataPoint[];\n\tpositionVelocityAccel: ChartDataPoint[]; // NEW: acceleration phase\n\tpositionVelocityDecel: ChartDataPoint[]; // NEW: deceleration phase\n\tspacetimeWorldline: ChartDataPointWithVelocity[]; // NEW: S-curve with velocity\n} {\n\tconst accel = rl.g.mul(accelG);\n\tconst m = rl.ensure(distanceLightYears).mul(rl.lightYear);\n\tconst res = rl.flipAndBurn(accel, m);\n\tconst halfProperTimeSeconds = res.properTime.div(2);\n\tconst numPointsPerPhase = 50;\n\n\tconst properTimeVelocity: ChartDataPoint[] = [];\n\tconst coordTimeVelocity: ChartDataPoint[] = [];\n\tconst properTimeRapidity: ChartDataPoint[] = [];\n\tconst coordTimeRapidity: ChartDataPoint[] = [];\n\tconst properTimeLorentz: ChartDataPoint[] = [];\n\tconst coordTimeLorentz: ChartDataPoint[] = [];\n\tconst properTimeMassRemaining: ChartDataPoint[] = [];\n\tconst positionVelocityAccel: ChartDataPoint[] = [];\n\tconst positionVelocityDecel: ChartDataPoint[] = [];\n\tconst spacetimeWorldline: ChartDataPointWithVelocity[] = [];\n\n\t// Acceleration phase (0 to half proper time)\n\tfor (let i = 0; i <= numPointsPerPhase; i++) {\n\t\tconst tau = halfProperTimeSeconds.mul(i / numPointsPerPhase);\n\t\tconst tauYearsDecimal = tau.div(rl.secondsPerYear);\n\t\tconst tauYears = tauYearsDecimal.toNumber();\n\n\t\tconst velocity = rl.relativisticVelocity(accel, tau);\n\t\tconst velocityCDecimal = velocity.div(rl.c);\n\t\tconst velocityC = velocityCDecimal.toNumber();\n\n\t\tconst rapidityDecimal = rl.rapidityFromVelocity(velocity);\n\t\tconst rapidity = rapidityDecimal.toNumber();\n\n\t\tconst lorentz = rl.lorentzFactor(velocity);\n\t\tconst timeDilationDecimal = rl.one.div(lorentz);\n\t\tconst timeDilation = timeDilationDecimal.toNumber();\n\n\t\tconst t = rl.coordinateTime(accel, tau);\n\t\tconst tYearsDecimal = t.div(rl.secondsPerYear);\n\t\tconst tYears = tYearsDecimal.toNumber();\n\n\t\t// Calculate mass remaining (fuel burned for thrust time so far)\n\t\tconst fuelFraction = rl.pionRocketFuelFraction(tau, accel, nozzleEfficiency);\n\t\tconst massRemainingDecimal = rl.one.minus(fuelFraction).mul(100);\n\t\tconst massRemaining = massRemainingDecimal.toNumber();\n\n\t\tproperTimeVelocity.push({\n\t\t\tx: tauYears,\n\t\t\ty: velocityC,\n\t\t\txDecimal: tauYearsDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\tcoordTimeVelocity.push({\n\t\t\tx: tYears,\n\t\t\ty: velocityC,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\tproperTimeRapidity.push({\n\t\t\tx: tauYears,\n\t\t\ty: rapidity,\n\t\t\txDecimal: tauYearsDecimal,\n\t\t\tyDecimal: rapidityDecimal,\n\t\t});\n\n\t\tcoordTimeRapidity.push({\n\t\t\tx: tYears,\n\t\t\ty: rapidity,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: rapidityDecimal,\n\t\t});\n\n\t\tproperTimeLorentz.push({\n\t\t\tx: tauYears,\n\t\t\ty: timeDilation,\n\t\t\txDecimal: tauYearsDecimal,\n\t\t\tyDecimal: timeDilationDecimal,\n\t\t});\n\n\t\tcoordTimeLorentz.push({\n\t\t\tx: tYears,\n\t\t\ty: timeDilation,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: timeDilationDecimal,\n\t\t});\n\n\t\tproperTimeMassRemaining.push({\n\t\t\tx: tauYears,\n\t\t\ty: massRemaining,\n\t\t\txDecimal: tauYearsDecimal,\n\t\t\tyDecimal: massRemainingDecimal,\n\t\t});\n\n\t\t// Calculate distance traveled so far\n\t\tconst distance = rl.relativisticDistance(accel, tau);\n\t\tconst distanceLyDecimal = distance.div(rl.lightYear);\n\t\tconst distanceLy = distanceLyDecimal.toNumber();\n\n\t\t// Position-velocity phase space (acceleration phase)\n\t\tpositionVelocityAccel.push({\n\t\t\tx: distanceLy,\n\t\t\ty: velocityC,\n\t\t\txDecimal: distanceLyDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\t// Spacetime worldline with velocity for gradient\n\t\tspacetimeWorldline.push({\n\t\t\tx: tYears,\n\t\t\ty: distanceLy,\n\t\t\tvelocity: velocityC,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: distanceLyDecimal,\n\t\t\tvelocityDecimal: velocityCDecimal,\n\t\t});\n\t}\n\n\t// Deceleration phase - mirror the acceleration phase\n\t// Start from i=50 down to i=0 to connect smoothly with acceleration phase\n\tfor (let i = numPointsPerPhase; i >= 0; i--) {\n\t\tconst tauAccel = halfProperTimeSeconds.mul(i / numPointsPerPhase);\n\t\tconst tauDecel = res.properTime.sub(tauAccel);\n\t\tconst tauYearsDecimal = tauDecel.div(rl.secondsPerYear);\n\t\tconst tauYears = tauYearsDecimal.toNumber();\n\n\t\tconst velocity = rl.relativisticVelocity(accel, tauAccel);\n\t\tconst velocityCDecimal = velocity.div(rl.c);\n\t\tconst velocityC = velocityCDecimal.toNumber();\n\n\t\tconst rapidityDecimal = rl.rapidityFromVelocity(velocity);\n\t\tconst rapidity = rapidityDecimal.toNumber();\n\n\t\tconst lorentz = rl.lorentzFactor(velocity);\n\t\tconst timeDilationDecimal = rl.one.div(lorentz);\n\t\tconst timeDilation = timeDilationDecimal.toNumber();\n\n\t\t// Total thrust time = half (accel) + time into decel phase\n\t\tconst decelThrust = halfProperTimeSeconds.sub(tauAccel);\n\t\tconst totalThrustTime = halfProperTimeSeconds.plus(decelThrust);\n\t\tconst fuelFraction = rl.pionRocketFuelFraction(totalThrustTime, accel, nozzleEfficiency);\n\t\tconst massRemainingDecimal = rl.one.minus(fuelFraction).mul(100);\n\t\tconst massRemaining = massRemainingDecimal.toNumber();\n\n\t\tconst tAccel = rl.coordinateTime(accel, tauAccel);\n\t\tconst tDecel = res.coordTime.sub(tAccel);\n\t\tconst tYearsDecimal = tDecel.div(rl.secondsPerYear);\n\t\tconst tYears = tYearsDecimal.toNumber();\n\n\t\tproperTimeVelocity.push({\n\t\t\tx: tauYears,\n\t\t\ty: velocityC,\n\t\t\txDecimal: tauYearsDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\tcoordTimeVelocity.push({\n\t\t\tx: tYears,\n\t\t\ty: velocityC,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\tproperTimeRapidity.push({\n\t\t\tx: tauYears,\n\t\t\ty: rapidity,\n\t\t\txDecimal: tauYearsDecimal,\n\t\t\tyDecimal: rapidityDecimal,\n\t\t});\n\n\t\tcoordTimeRapidity.push({\n\t\t\tx: tYears,\n\t\t\ty: rapidity,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: rapidityDecimal,\n\t\t});\n\n\t\tproperTimeLorentz.push({\n\t\t\tx: tauYears,\n\t\t\ty: timeDilation,\n\t\t\txDecimal: tauYearsDecimal,\n\t\t\tyDecimal: timeDilationDecimal,\n\t\t});\n\n\t\tcoordTimeLorentz.push({\n\t\t\tx: tYears,\n\t\t\ty: timeDilation,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: timeDilationDecimal,\n\t\t});\n\n\t\tproperTimeMassRemaining.push({\n\t\t\tx: tauYears,\n\t\t\ty: massRemaining,\n\t\t\txDecimal: tauYearsDecimal,\n\t\t\tyDecimal: massRemainingDecimal,\n\t\t});\n\n\t\t// During deceleration, distance continues increasing from halfDistance to totalDistance\n\t\t// tauAccel represents equivalent accel time for current velocity\n\t\tconst remainingAccelDistance = rl.relativisticDistance(accel, tauAccel);\n\t\tconst totalDistance = rl.ensure(distanceLightYears).mul(rl.lightYear);\n\t\tconst currentDistance = totalDistance.minus(remainingAccelDistance);\n\t\tconst currentDistanceLyDecimal = currentDistance.div(rl.lightYear);\n\t\tconst currentDistanceLy = currentDistanceLyDecimal.toNumber();\n\n\t\t// Position-velocity phase space (deceleration phase - creates return path of loop)\n\t\tpositionVelocityDecel.push({\n\t\t\tx: currentDistanceLy,\n\t\t\ty: velocityC,\n\t\t\txDecimal: currentDistanceLyDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\t// Spacetime worldline with velocity for gradient\n\t\tspacetimeWorldline.push({\n\t\t\tx: tYears,\n\t\t\ty: currentDistanceLy,\n\t\t\tvelocity: velocityC,\n\t\t\txDecimal: tYearsDecimal,\n\t\t\tyDecimal: currentDistanceLyDecimal,\n\t\t\tvelocityDecimal: velocityCDecimal,\n\t\t});\n\t}\n\n\treturn {\n\t\tproperTimeVelocity,\n\t\tcoordTimeVelocity,\n\t\tproperTimeRapidity,\n\t\tcoordTimeRapidity,\n\t\tproperTimeLorentz,\n\t\tcoordTimeLorentz,\n\t\tproperTimeMassRemaining,\n\t\tpositionVelocityAccel,\n\t\tpositionVelocityDecel,\n\t\tspacetimeWorldline,\n\t};\n}\n\nexport function generateVisualizationChartData(\n\taccelG: number,\n\tdurationDays: number\n): {\n\ttimePoints: number[];\n\tvelocityC: number[];\n\tdistanceLy: number[];\n\trapidity: number[];\n\ttimeDilation: number[];\n} {\n\tconst accel = rl.g.mul(accelG);\n\tconst durationSeconds = durationDays * 60 * 60 * 24;\n\tconst numPoints = 100;\n\n\tconst timePoints: number[] = [];\n\tconst velocityC: number[] = [];\n\tconst distanceLy: number[] = [];\n\tconst rapidity: number[] = [];\n\tconst timeDilation: number[] = [];\n\n\tfor (let i = 0; i <= numPoints; i++) {\n\t\tconst tau = (i / numPoints) * durationSeconds;\n\t\tconst timeDays = tau / (60 * 60 * 24);\n\n\t\tconst tauDecimal = rl.ensure(tau);\n\t\tconst velocity = rl.relativisticVelocity(accel, tauDecimal);\n\t\tconst velocityCValue = velocity.div(rl.c).toNumber();\n\t\tconst distance = rl.relativisticDistance(accel, tauDecimal);\n\t\tconst distanceLyValue = distance.div(rl.lightYear).toNumber();\n\t\tconst rapidityValue = rl.rapidityFromVelocity(velocity).toNumber();\n\t\tconst lorentz = rl.lorentzFactor(velocity);\n\t\tconst timeDilationValue = rl.one.div(lorentz).toNumber();\n\n\t\ttimePoints.push(timeDays);\n\t\tvelocityC.push(velocityCValue);\n\t\tdistanceLy.push(distanceLyValue);\n\t\trapidity.push(rapidityValue);\n\t\ttimeDilation.push(timeDilationValue);\n\t}\n\n\treturn {\n\t\ttimePoints,\n\t\tvelocityC,\n\t\tdistanceLy,\n\t\trapidity,\n\t\ttimeDilation,\n\t};\n}\n\nexport function generateTwinParadoxChartData(\n\tvelocityC: number,\n\tproperTimeYears: number\n): {\n\tvelocityProfile: ChartDataPoint[];\n\ttravelingTwinAging: ChartDataPoint[];\n\tearthTwinAging: ChartDataPoint[];\n\tdistanceProfile: ChartDataPoint[];\n\tproperTimeDistance: ChartDataPoint[];\n\tcoordTimeDistance: ChartDataPoint[];\n} {\n\tconst numPoints = 100;\n\tconst halfTimeDecimal = rl.ensure(properTimeYears / 2);\n\n\t// Calculate key physics values\n\tconst velocityDecimal = rl.c.mul(velocityC);\n\tconst gammaDecimal = rl.lorentzFactor(velocityDecimal);\n\n\tconst velocityCDecimal = rl.ensure(velocityC);\n\n\tconst velocityProfile: ChartDataPoint[] = [];\n\tconst travelingTwinAging: ChartDataPoint[] = [];\n\tconst earthTwinAging: ChartDataPoint[] = [];\n\tconst distanceProfile: ChartDataPoint[] = [];\n\tconst properTimeDistance: ChartDataPoint[] = [];\n\tconst coordTimeDistance: ChartDataPoint[] = [];\n\n\t// First half: outbound journey\n\tfor (let i = 0; i <= numPoints / 2; i++) {\n\t\tconst tauDecimal = rl.ensure((i / numPoints) * properTimeYears); // Proper time (traveling twin's clock)\n\t\tconst tau = tauDecimal.toNumber();\n\t\tconst earthTimeDecimal = tauDecimal.mul(gammaDecimal); // Earth time\n\t\tconst earthTime = earthTimeDecimal.toNumber();\n\n\t\t// Velocity is constant at +v during outbound\n\t\tvelocityProfile.push({\n\t\t\tx: tau,\n\t\t\ty: velocityC,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: velocityCDecimal,\n\t\t});\n\n\t\t// Aging: traveling twin ages linearly, Earth twin ages faster\n\t\ttravelingTwinAging.push({\n\t\t\tx: tau,\n\t\t\ty: tau,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: tauDecimal,\n\t\t});\n\t\tearthTwinAging.push({\n\t\t\tx: tau,\n\t\t\ty: earthTime,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: earthTimeDecimal,\n\t\t});\n\n\t\t// Distance increases linearly\n\t\tconst distanceDecimal = velocityCDecimal.mul(earthTimeDecimal); // distance in light years (since v is in c and t in years)\n\t\tconst distance = distanceDecimal.toNumber();\n\t\tdistanceProfile.push({\n\t\t\tx: tau,\n\t\t\ty: distance,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: distanceDecimal,\n\t\t});\n\t\tproperTimeDistance.push({\n\t\t\tx: tau,\n\t\t\ty: distance,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: distanceDecimal,\n\t\t});\n\t\tcoordTimeDistance.push({\n\t\t\tx: earthTime,\n\t\t\ty: distance,\n\t\t\txDecimal: earthTimeDecimal,\n\t\t\tyDecimal: distanceDecimal,\n\t\t});\n\t}\n\n\t// Second half: return journey\n\tfor (let i = Math.floor(numPoints / 2) + 1; i <= numPoints; i++) {\n\t\tconst tauDecimal = rl.ensure((i / numPoints) * properTimeYears);\n\t\tconst tau = tauDecimal.toNumber();\n\t\tconst earthTimeDecimal = tauDecimal.mul(gammaDecimal);\n\t\tconst earthTime = earthTimeDecimal.toNumber();\n\n\t\t// Velocity is constant at -v during return\n\t\tconst negativeVelocityCDecimal = velocityCDecimal.neg();\n\t\tconst negativeVelocityC = negativeVelocityCDecimal.toNumber();\n\t\tvelocityProfile.push({\n\t\t\tx: tau,\n\t\t\ty: negativeVelocityC,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: negativeVelocityCDecimal,\n\t\t});\n\n\t\t// Aging continues\n\t\ttravelingTwinAging.push({\n\t\t\tx: tau,\n\t\t\ty: tau,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: tauDecimal,\n\t\t});\n\t\tearthTwinAging.push({\n\t\t\tx: tau,\n\t\t\ty: earthTime,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: earthTimeDecimal,\n\t\t});\n\n\t\t// Distance decreases back to zero\n\t\tconst tauSinceTurnaroundDecimal = tauDecimal.minus(halfTimeDecimal);\n\t\tconst maxDistanceDecimal = velocityCDecimal.mul(halfTimeDecimal).mul(gammaDecimal);\n\t\tconst distanceDecimal = maxDistanceDecimal.minus(\n\t\t\tvelocityCDecimal.mul(tauSinceTurnaroundDecimal).mul(gammaDecimal)\n\t\t);\n\t\tconst distance = distanceDecimal.toNumber();\n\t\tdistanceProfile.push({\n\t\t\tx: tau,\n\t\t\ty: distance,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: distanceDecimal,\n\t\t});\n\t\tproperTimeDistance.push({\n\t\t\tx: tau,\n\t\t\ty: distance,\n\t\t\txDecimal: tauDecimal,\n\t\t\tyDecimal: distanceDecimal,\n\t\t});\n\t\tcoordTimeDistance.push({\n\t\t\tx: earthTime,\n\t\t\ty: distance,\n\t\t\txDecimal: earthTimeDecimal,\n\t\t\tyDecimal: distanceDecimal,\n\t\t});\n\t}\n\n\treturn {\n\t\tvelocityProfile,\n\t\ttravelingTwinAging,\n\t\tearthTwinAging,\n\t\tdistanceProfile,\n\t\tproperTimeDistance,\n\t\tcoordTimeDistance,\n\t};\n}\n","/**\n * Functional chart management with Chart.js\n * Provides configuration factories and lifecycle management\n */\n\nimport { Chart, ChartOptions } from \"chart.js\";\nimport type {\n\tgenerateAccelChartData,\n\tgenerateFlipBurnChartData,\n\tgenerateVisualizationChartData,\n} from \"./dataGeneration\";\n\nexport type ChartRegistry = Map<string, Chart>;\n\nexport type ChartStyleConfig = {\n\tprimaryColor: string;\n\tsecondaryColor: string;\n\txAxisLabel: string;\n\tyAxisLabel: string;\n\txMax?: number;\n\tyMax?: number;\n\tyMin?: number;\n\ty1AxisLabel?: string;\n\ty1Max?: number;\n};\n\ntype GradientColors = {\n\thigh: string;\n\tmid: string;\n\tlow: string;\n};\n\ntype ChartDataset = {\n\tlabel: string;\n\tdata: { x: number; y: number }[];\n\tborderColor: string | CanvasGradient;\n\tbackgroundColor: string;\n\tborderWidth: number;\n\tfill: boolean;\n\ttension: number;\n\tpointRadius?: number | number[];\n\tpointStyle?: \"circle\" | \"triangle\" | (\"circle\" | \"triangle\")[];\n\tpointRotation?: number | number[];\n\tpointBackgroundColor?: string | CanvasGradient | (string | CanvasGradient)[];\n\tborderDash?: number[];\n\tyAxisID?: string;\n};\n\n/**\n * Create a vertical velocity-based gradient for charts\n */\nfunction createVelocityGradient(\n\tctx: CanvasRenderingContext2D,\n\theight: number,\n\tcolors: GradientColors\n): CanvasGradient {\n\tconst gradient = ctx.createLinearGradient(0, 0, 0, height);\n\tgradient.addColorStop(0, colors.high);\n\tgradient.addColorStop(0.5, colors.mid);\n\tgradient.addColorStop(1, colors.low);\n\treturn gradient;\n}\n\n/**\n * Calculate arrow indicator properties for trajectory visualization\n */\nfunction createArrowIndicators(\n\tdata: { x: number; y: number }[],\n\tarrowIndices: number[]\n): {\n\tpointRadii: number[];\n\tpointStyles: (\"triangle\" | \"circle\")[];\n\tpointRotations: number[];\n} {\n\tconst arrowSet = new Set(arrowIndices);\n\tconst indexMap = new Map(arrowIndices.map((idx, pos) => [idx, pos]));\n\n\tconst pointRadii = data.map((_, i) => (arrowSet.has(i) ? 4 : 0));\n\tconst pointStyles = data.map((_, i) =>\n\t\tarrowSet.has(i) ? (\"triangle\" as const) : (\"circle\" as const)\n\t);\n\tconst pointRotations = data.map((_, i) => {\n\t\tif (!arrowSet.has(i)) return 0;\n\t\tconst pos = indexMap.get(i)!;\n\t\tif (pos === arrowIndices.length - 1) return 0;\n\t\tconst nextArrowIdx = arrowIndices[pos + 1];\n\t\tconst dx = data[nextArrowIdx].x - data[i].x;\n\t\tconst dy = data[nextArrowIdx].y - data[i].y;\n\t\treturn Math.atan2(dy, dx) + Math.PI / 2;\n\t});\n\treturn { pointRadii, pointStyles, pointRotations };\n}\n\n/**\n * Create standard mass remaining dataset configuration for fuel charts\n */\nfunction createMassRemainingDatasets(\n\tdata: { x: number; y: number }[],\n\tnozzleEfficiency: number\n): ChartDataset[] {\n\tconst efficiencyPercent = Math.round(nozzleEfficiency * 100);\n\treturn [\n\t\t{\n\t\t\tlabel: `${efficiencyPercent}% Nozzle Efficiency`,\n\t\t\tdata: data,\n\t\t\tborderColor: \"#ffaa00\",\n\t\t\tbackgroundColor: \"rgba(255, 170, 0, 0.1)\",\n\t\t\tborderWidth: 2,\n\t\t\tfill: false,\n\t\t\ttension: 0.4,\n\t\t\tpointRadius: 0,\n\t\t},\n\t];\n}\n\n/**\n * Create dual-time dataset configuration (proper time vs coordinate time)\n */\nfunction createDualTimeDatasets(\n\tproperTimeData: { x: number; y: number }[],\n\tcoordTimeData: { x: number; y: number }[],\n\tproperLabel: string,\n\tcoordLabel: string\n): ChartDataset[] {\n\treturn [\n\t\t{\n\t\t\tlabel: properLabel,\n\t\t\tdata: properTimeData,\n\t\t\tborderColor: \"#00d9ff\",\n\t\t\tbackgroundColor: \"rgba(0, 217, 255, 0.1)\",\n\t\t\tborderWidth: 2,\n\t\t\tfill: true,\n\t\t\ttension: 0.4,\n\t\t\tpointRadius: 0,\n\t\t\tclip: true,\n\t\t} as ChartDataset,\n\t\t{\n\t\t\tlabel: coordLabel,\n\t\t\tdata: coordTimeData,\n\t\t\tborderColor: \"#00ff9f\",\n\t\t\tbackgroundColor: \"rgba(0, 255, 159, 0.1)\",\n\t\t\tborderWidth: 2,\n\t\t\tfill: true,\n\t\t\ttension: 0.4,\n\t\t\tpointRadius: 0,\n\t\t\tclip: true,\n\t\t} as ChartDataset,\n\t];\n}\n\nfunction createChartOptions(config: ChartStyleConfig): ChartOptions {\n\tconst baseOptions: ChartOptions = {\n\t\tresponsive: true,\n\t\tplugins: {\n\t\t\tlegend: {\n\t\t\t\tdisplay: true,\n\t\t\t\tlabels: {\n\t\t\t\t\tcolor: \"#e8f1f5\",\n\t\t\t\t\tfont: { family: \"IBM Plex Mono\", size: 12 },\n\t\t\t\t},\n\t\t\t},\n\t\t\ttitle: { display: false },\n\t\t},\n\t\tscales: {\n\t\t\tx: {\n\t\t\t\ttype: \"linear\",\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttext: config.xAxisLabel,\n\t\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\t\tfont: { family: \"IBM Plex Mono\", size: 11, weight: 600 },\n\t\t\t\t},\n\t\t\t\tmax: config.xMax,\n\t\t\t\tticks: {\n\t\t\t\t\tmaxTicksLimit: 10,\n\t\t\t\t\tcolor: \"#e8f1f5\",\n\t\t\t\t\tfont: { family: \"IBM Plex Mono\" },\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tcolor: \"rgba(0, 217, 255, 0.15)\",\n\t\t\t\t},\n\t\t\t},\n\t\t\ty: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttext: config.yAxisLabel,\n\t\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\t\tfont: { family: \"IBM Plex Mono\", size: 11, weight: 600 },\n\t\t\t\t},\n\t\t\t\tbeginAtZero: config.yMin === undefined,\n\t\t\t\tmax: config.yMax,\n\t\t\t\tmin: config.yMin,\n\t\t\t\tticks: {\n\t\t\t\t\tcolor: \"#e8f1f5\",\n\t\t\t\t\tfont: { family: \"IBM Plex Mono\" },\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tcolor: \"rgba(0, 217, 255, 0.15)\",\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t};\n\n\t// Add second y-axis if configured\n\tif (config.y1AxisLabel && baseOptions.scales) {\n\t\tbaseOptions.scales.y1 = {\n\t\t\ttype: \"linear\",\n\t\t\tdisplay: true,\n\t\t\tposition: \"right\",\n\t\t\ttitle: {\n\t\t\t\tdisplay: true,\n\t\t\t\ttext: config.y1AxisLabel,\n\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\tfont: { family: \"IBM Plex Mono\", size: 11, weight: 600 },\n\t\t\t},\n\t\t\tbeginAtZero: true,\n\t\t\tmax: config.y1Max,\n\t\t\tticks: {\n\t\t\t\tcolor: \"#e8f1f5\",\n\t\t\t\tfont: { family: \"IBM Plex Mono\" },\n\t\t\t},\n\t\t\tgrid: {\n\t\t\t\tdrawOnChartArea: false,\n\t\t\t},\n\t\t};\n\t}\n\n\treturn baseOptions;\n}\n\nexport function updateChart(\n\tregistry: ChartRegistry,\n\tcanvasId: string,\n\tdatasets: ChartDataset[],\n\tconfig: ChartStyleConfig\n): ChartRegistry {\n\tconst newRegistry = new Map(registry);\n\n\t// Destroy old chart if exists\n\tnewRegistry.get(canvasId)?.destroy();\n\n\t// Create new chart\n\tconst canvas = document.getElementById(canvasId) as HTMLCanvasElement;\n\tconst ctx = canvas?.getContext(\"2d\");\n\tif (ctx) {\n\t\tconst chart = new Chart(ctx, {\n\t\t\ttype: \"line\",\n\t\t\tdata: { datasets },\n\t\t\toptions: createChartOptions(config),\n\t\t});\n\t\tnewRegistry.set(canvasId, chart);\n\n\t\t// Trigger an immediate update to fix initial rendering artifacts\n\t\t// This ensures the chart renders correctly with the same path as toggle updates\n\t\tchart.update(\"none\");\n\t}\n\n\treturn newRegistry;\n}\n\nexport function destroyAll(registry: ChartRegistry): ChartRegistry {\n\tregistry.forEach(chart => chart.destroy());\n\treturn new Map();\n}\n\nexport function updateAccelCharts(\n\tregistry: ChartRegistry,\n\tdata: ReturnType<typeof generateAccelChartData>,\n\tnozzleEfficiency: number,\n\ttimeModes: {\n\t\tvelocity: \"proper\" | \"coordinate\";\n\t\tlorentz: \"proper\" | \"coordinate\";\n\t\trapidity: \"proper\" | \"coordinate\";\n\t} = { velocity: \"proper\", lorentz: \"proper\", rapidity: \"proper\" }\n): ChartRegistry {\n\tlet newRegistry = registry;\n\n\t// Calculate max times for both proper and coordinate\n\tconst maxProperTime = Math.max(...data.properTimeVelocity.map(d => d.x));\n\tconst maxCoordTime = Math.max(...data.coordTimeVelocity.map(d => d.x));\n\n\t// Velocity Chart - x-axis based on selected mode\n\tconst velocityXMax = timeModes.velocity === \"proper\" ? maxProperTime : maxCoordTime;\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"accelVelocityChart\",\n\t\tcreateDualTimeDatasets(\n\t\t\tdata.properTimeVelocity,\n\t\t\tdata.coordTimeVelocity,\n\t\t\t\"Velocity vs Proper Time\",\n\t\t\t\"Velocity vs Coordinate Time\"\n\t\t),\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Time (days)\",\n\t\t\tyAxisLabel: \"Velocity (fraction of c)\",\n\t\t\txMax: velocityXMax,\n\t\t}\n\t);\n\n\t// Lorentz/Time Dilation Chart - x-axis based on selected mode\n\tconst lorentzXMax = timeModes.lorentz === \"proper\" ? maxProperTime : maxCoordTime;\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"accelLorentzChart\",\n\t\tcreateDualTimeDatasets(\n\t\t\tdata.properTimeTimeDilation,\n\t\t\tdata.coordTimeTimeDilation,\n\t\t\t\"Time Dilation vs Proper Time (1/)\",\n\t\t\t\"Time Dilation vs Coordinate Time (1/)\"\n\t\t),\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Time (days)\",\n\t\t\tyAxisLabel: \"Time Rate (1 = normal)\",\n\t\t\txMax: lorentzXMax,\n\t\t\tyMax: 1,\n\t\t}\n\t);\n\n\t// Rapidity Chart - x-axis based on selected mode\n\tconst rapidityXMax = timeModes.rapidity === \"proper\" ? maxProperTime : maxCoordTime;\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"accelRapidityChart\",\n\t\tcreateDualTimeDatasets(\n\t\t\tdata.properTimeRapidity,\n\t\t\tdata.coordTimeRapidity,\n\t\t\t\"Rapidity vs Proper Time\",\n\t\t\t\"Rapidity vs Coordinate Time\"\n\t\t),\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Time (days)\",\n\t\t\tyAxisLabel: \"Rapidity\",\n\t\t\txMax: rapidityXMax,\n\t\t}\n\t);\n\n\t// Mass Remaining Chart\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"accelMassChart\",\n\t\tcreateMassRemainingDatasets(data.properTimeMassRemaining, nozzleEfficiency),\n\t\t{\n\t\t\tprimaryColor: \"#ffaa00\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Proper Time (days)\",\n\t\t\tyAxisLabel: \"% of Initial Mass\",\n\t\t\txMax: maxProperTime,\n\t\t\tyMax: 100,\n\t\t}\n\t);\n\n\t// Velocity over Distance\n\tconst posVelCanvas = document.getElementById(\n\t\t\"accelPositionVelocityChart\"\n\t) as HTMLCanvasElement | null;\n\tif (posVelCanvas) {\n\t\tif (newRegistry.has(\"accelPositionVelocity\")) {\n\t\t\tnewRegistry.get(\"accelPositionVelocity\")?.destroy();\n\t\t}\n\t\tnewRegistry.set(\n\t\t\t\"accelPositionVelocity\",\n\t\t\tcreatePositionVelocityChart(posVelCanvas, data.positionVelocity)\n\t\t);\n\t}\n\n\t// Spacetime Worldline\n\tconst spacetimeCanvas = document.getElementById(\n\t\t\"accelSpacetimeChart\"\n\t) as HTMLCanvasElement | null;\n\tif (spacetimeCanvas) {\n\t\tif (newRegistry.has(\"accelSpacetime\")) {\n\t\t\tnewRegistry.get(\"accelSpacetime\")?.destroy();\n\t\t}\n\t\tnewRegistry.set(\n\t\t\t\"accelSpacetime\",\n\t\t\tcreateSpacetimeChart(spacetimeCanvas, data.spacetimeWorldline)\n\t\t);\n\t}\n\n\treturn newRegistry;\n}\n\nexport function updateFlipBurnCharts(\n\tregistry: ChartRegistry,\n\tdata: ReturnType<typeof generateFlipBurnChartData>,\n\tnozzleEfficiency: number,\n\ttimeModes: {\n\t\tvelocity: \"proper\" | \"coordinate\";\n\t\tlorentz: \"proper\" | \"coordinate\";\n\t\trapidity: \"proper\" | \"coordinate\";\n\t} = { velocity: \"proper\", lorentz: \"proper\", rapidity: \"proper\" }\n): ChartRegistry {\n\tlet newRegistry = registry;\n\n\t// Calculate max x values for both proper and coordinate time\n\tconst maxProperTime = Math.max(...data.properTimeVelocity.map(d => d.x));\n\tconst maxCoordTime = Math.max(...data.coordTimeVelocity.map(d => d.x));\n\tconst maxMassProperTime = Math.max(...data.properTimeMassRemaining.map(d => d.x));\n\n\t// Velocity Chart - x-axis based on selected mode\n\tconst velocityChartXMax = timeModes.velocity === \"proper\" ? maxProperTime : maxCoordTime;\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"flipVelocityChart\",\n\t\tcreateDualTimeDatasets(\n\t\t\tdata.properTimeVelocity,\n\t\t\tdata.coordTimeVelocity,\n\t\t\t\"Velocity vs Proper Time\",\n\t\t\t\"Velocity vs Coordinate Time\"\n\t\t),\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Time (years)\",\n\t\t\tyAxisLabel: \"Velocity (fraction of c)\",\n\t\t\txMax: velocityChartXMax,\n\t\t}\n\t);\n\n\t// Time Dilation / Lorentz Chart - x-axis based on selected mode\n\tconst lorentzChartXMax = timeModes.lorentz === \"proper\" ? maxProperTime : maxCoordTime;\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"flipLorentzChart\",\n\t\tcreateDualTimeDatasets(\n\t\t\tdata.properTimeLorentz,\n\t\t\tdata.coordTimeLorentz,\n\t\t\t\"Time Dilation vs Proper Time (1/)\",\n\t\t\t\"Time Dilation vs Coordinate Time (1/)\"\n\t\t),\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Time (years)\",\n\t\t\tyAxisLabel: \"Time Rate (1 = normal)\",\n\t\t\txMax: lorentzChartXMax,\n\t\t\tyMax: 1,\n\t\t}\n\t);\n\n\t// Rapidity Chart - x-axis based on selected mode\n\tconst rapidityChartXMax = timeModes.rapidity === \"proper\" ? maxProperTime : maxCoordTime;\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"flipRapidityChart\",\n\t\tcreateDualTimeDatasets(\n\t\t\tdata.properTimeRapidity,\n\t\t\tdata.coordTimeRapidity,\n\t\t\t\"Rapidity vs Proper Time\",\n\t\t\t\"Rapidity vs Coordinate Time\"\n\t\t),\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Time (years)\",\n\t\t\tyAxisLabel: \"Rapidity\",\n\t\t\txMax: rapidityChartXMax,\n\t\t}\n\t);\n\n\t// Mass Remaining Chart\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"flipMassChart\",\n\t\tcreateMassRemainingDatasets(data.properTimeMassRemaining, nozzleEfficiency),\n\t\t{\n\t\t\tprimaryColor: \"#ffaa00\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Proper Time (years)\",\n\t\t\tyAxisLabel: \"% of Initial Mass\",\n\t\t\txMax: maxMassProperTime,\n\t\t\tyMax: 100,\n\t\t}\n\t);\n\n\t// Velocity over Distance (with separate accel/decel phases)\n\tconst posVelCanvas = document.getElementById(\n\t\t\"flipPositionVelocityChart\"\n\t) as HTMLCanvasElement | null;\n\tif (posVelCanvas) {\n\t\tif (newRegistry.has(\"flipPositionVelocity\")) {\n\t\t\tnewRegistry.get(\"flipPositionVelocity\")?.destroy();\n\t\t}\n\t\tnewRegistry.set(\n\t\t\t\"flipPositionVelocity\",\n\t\t\tcreatePositionVelocityFlipBurnChart(\n\t\t\t\tposVelCanvas,\n\t\t\t\tdata.positionVelocityAccel,\n\t\t\t\tdata.positionVelocityDecel\n\t\t\t)\n\t\t);\n\t}\n\n\t// Spacetime Worldline\n\tconst spacetimeCanvas = document.getElementById(\"flipSpacetimeChart\") as HTMLCanvasElement | null;\n\tif (spacetimeCanvas) {\n\t\tif (newRegistry.has(\"flipSpacetime\")) {\n\t\t\tnewRegistry.get(\"flipSpacetime\")?.destroy();\n\t\t}\n\t\tnewRegistry.set(\n\t\t\t\"flipSpacetime\",\n\t\t\tcreateSpacetimeChart(spacetimeCanvas, data.spacetimeWorldline)\n\t\t);\n\t}\n\n\treturn newRegistry;\n}\n\nexport function updateVisualizationCharts(\n\tregistry: ChartRegistry,\n\tdata: ReturnType<typeof generateVisualizationChartData>\n): ChartRegistry {\n\tlet newRegistry = registry;\n\tconst maxTime = data.timePoints[data.timePoints.length - 1];\n\n\t// Velocity Chart\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"velocityChart\",\n\t\t[\n\t\t\t{\n\t\t\t\tlabel: \"Velocity (fraction of c)\",\n\t\t\t\tdata: data.timePoints.map((x, i) => ({ x, y: data.velocityC[i] })),\n\t\t\t\tborderColor: \"#00d9ff\",\n\t\t\t\tbackgroundColor: \"rgba(0, 217, 255, 0.15)\",\n\t\t\t\tborderWidth: 2,\n\t\t\t\tfill: true,\n\t\t\t\ttension: 0.4,\n\t\t\t},\n\t\t],\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00d9ff\",\n\t\t\txAxisLabel: \"Proper Time (days)\",\n\t\t\tyAxisLabel: \"Velocity (c)\",\n\t\t\txMax: maxTime,\n\t\t\tyMax: 1,\n\t\t}\n\t);\n\n\t// Distance Chart\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"distanceChart\",\n\t\t[\n\t\t\t{\n\t\t\t\tlabel: \"Distance (light years)\",\n\t\t\t\tdata: data.timePoints.map((x, i) => ({ x, y: data.distanceLy[i] })),\n\t\t\t\tborderColor: \"#00ff9f\",\n\t\t\t\tbackgroundColor: \"rgba(0, 255, 159, 0.15)\",\n\t\t\t\tborderWidth: 2,\n\t\t\t\tfill: true,\n\t\t\t\ttension: 0.4,\n\t\t\t},\n\t\t],\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Proper Time (days)\",\n\t\t\tyAxisLabel: \"Distance (ly)\",\n\t\t\txMax: maxTime,\n\t\t}\n\t);\n\n\t// Rapidity Chart\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"rapidityChart\",\n\t\t[\n\t\t\t{\n\t\t\t\tlabel: \"Rapidity\",\n\t\t\t\tdata: data.timePoints.map((x, i) => ({ x, y: data.rapidity[i] })),\n\t\t\t\tborderColor: \"#ffaa00\",\n\t\t\t\tbackgroundColor: \"rgba(255, 170, 0, 0.15)\",\n\t\t\t\tborderWidth: 2,\n\t\t\t\tfill: true,\n\t\t\t\ttension: 0.4,\n\t\t\t},\n\t\t],\n\t\t{\n\t\t\tprimaryColor: \"#ffaa00\",\n\t\t\tsecondaryColor: \"#ffaa00\",\n\t\t\txAxisLabel: \"Proper Time (days)\",\n\t\t\tyAxisLabel: \"Rapidity\",\n\t\t\txMax: maxTime,\n\t\t}\n\t);\n\n\t// Time Dilation & Length Contraction Chart\n\tconst timeDilationData = data.timePoints.map((x, i) => ({ x, y: data.timeDilation[i] }));\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"lorentzChart\",\n\t\t[\n\t\t\t{\n\t\t\t\tlabel: \"Time Dilation (1/)\",\n\t\t\t\tdata: timeDilationData,\n\t\t\t\tborderColor: \"#00ff9f\",\n\t\t\t\tbackgroundColor: \"rgba(0, 255, 159, 0.15)\",\n\t\t\t\tborderWidth: 2,\n\t\t\t\tfill: true,\n\t\t\t\ttension: 0.4,\n\t\t\t\tyAxisID: \"y\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Length Contraction (1/)\",\n\t\t\t\tdata: timeDilationData,\n\t\t\t\tborderColor: \"#ffaa00\",\n\t\t\t\tbackgroundColor: \"rgba(255, 170, 0, 0.1)\",\n\t\t\t\tborderWidth: 2,\n\t\t\t\tfill: false,\n\t\t\t\ttension: 0.4,\n\t\t\t\tborderDash: [5, 5],\n\t\t\t\tyAxisID: \"y1\",\n\t\t\t},\n\t\t],\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Proper Time (days)\",\n\t\t\tyAxisLabel: \"Time Rate (1 = normal)\",\n\t\t\txMax: maxTime,\n\t\t\tyMax: 1,\n\t\t\ty1AxisLabel: \"Length (1 = no contraction)\",\n\t\t\ty1Max: 1,\n\t\t}\n\t);\n\n\treturn newRegistry;\n}\n\nfunction createPositionVelocityChart(\n\tcanvas: HTMLCanvasElement,\n\tdata: { x: number; y: number }[]\n): Chart {\n\tconst ctx = canvas.getContext(\"2d\");\n\tif (!ctx) throw new Error(\"Could not get canvas context\");\n\n\t// Create velocity-based gradient\n\tconst gradient = createVelocityGradient(ctx, canvas.height, {\n\t\thigh: \"#ffaa00\", // amber at high velocity (top)\n\t\tmid: \"#00ff9f\", // scientific green at mid\n\t\tlow: \"#00d9ff\", // electric cyan at low velocity (bottom)\n\t});\n\n\t// Add directional arrow indicators at intervals\n\tconst { pointRadii, pointStyles, pointRotations } = createArrowIndicators(data, [0, 25, 50, 75]);\n\n\treturn new Chart(ctx, {\n\t\ttype: \"line\",\n\t\tdata: {\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Trajectory\",\n\t\t\t\t\tdata: data,\n\t\t\t\t\tborderColor: gradient,\n\t\t\t\t\tbackgroundColor: \"rgba(0, 217, 255, 0.15)\",\n\t\t\t\t\tborderWidth: 3,\n\t\t\t\t\tpointRadius: pointRadii,\n\t\t\t\t\tpointStyle: pointStyles,\n\t\t\t\t\tpointRotation: pointRotations,\n\t\t\t\t\tpointBackgroundColor: \"#00d9ff\",\n\t\t\t\t\ttension: 0.4,\n\t\t\t\t\tfill: true,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: {\n\t\t\tresponsive: true,\n\t\t\tmaintainAspectRatio: true,\n\t\t\taspectRatio: 2.5,\n\t\t\tplugins: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tlegend: { display: false },\n\t\t\t},\n\t\t\tscales: {\n\t\t\t\tx: {\n\t\t\t\t\ttype: \"linear\",\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\ttext: \"Distance (light years)\",\n\t\t\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\t\t\tfont: { size: 14 },\n\t\t\t\t\t},\n\t\t\t\t\tgrid: { color: \"rgba(0, 217, 255, 0.1)\" },\n\t\t\t\t\tticks: { color: \"#e8f1f5\" },\n\t\t\t\t},\n\t\t\t\ty: {\n\t\t\t\t\ttype: \"linear\",\n\t\t\t\t\tmin: 0,\n\t\t\t\t\tmax: 1,\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\ttext: \"Velocity (c)\",\n\t\t\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\t\t\tfont: { size: 14 },\n\t\t\t\t\t},\n\t\t\t\t\tgrid: { color: \"rgba(0, 217, 255, 0.1)\" },\n\t\t\t\t\tticks: { color: \"#e8f1f5\" },\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}) as Chart;\n}\n\nfunction createPositionVelocityFlipBurnChart(\n\tcanvas: HTMLCanvasElement,\n\taccelData: { x: number; y: number }[],\n\tdecelData: { x: number; y: number }[]\n): Chart {\n\tconst ctx = canvas.getContext(\"2d\");\n\tif (!ctx) throw new Error(\"Could not get canvas context\");\n\n\t// Create velocity-based gradients with different color schemes for each phase\n\tconst accelGradient = createVelocityGradient(ctx, canvas.height, {\n\t\thigh: \"#ffaa00\", // amber at high velocity (top)\n\t\tmid: \"#00ff9f\", // scientific green at mid\n\t\tlow: \"#00d9ff\", // electric cyan at low velocity (bottom)\n\t});\n\n\tconst decelGradient = createVelocityGradient(ctx, canvas.height, {\n\t\thigh: \"#ff55aa\", // magenta at high velocity (top)\n\t\tmid: \"#aa55ff\", // purple at mid\n\t\tlow: \"#5588ff\", // blue at low velocity (bottom)\n\t});\n\n\t// Add directional indicators for acceleration and deceleration phases\n\tconst {\n\t\tpointRadii: accelPointRadii,\n\t\tpointStyles: accelPointStyles,\n\t\tpointRotations: accelPointRotations,\n\t} = createArrowIndicators(accelData, [0, 17, 34, 50]);\n\tconst {\n\t\tpointRadii: decelPointRadii,\n\t\tpointStyles: decelPointStyles,\n\t\tpointRotations: decelPointRotations,\n\t} = createArrowIndicators(decelData, [0, 16, 33, 49]);\n\n\treturn new Chart(ctx, {\n\t\ttype: \"line\",\n\t\tdata: {\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Acceleration\",\n\t\t\t\t\tdata: accelData,\n\t\t\t\t\tborderColor: accelGradient,\n\t\t\t\t\tbackgroundColor: \"rgba(0, 217, 255, 0.2)\",\n\t\t\t\t\tborderWidth: 3,\n\t\t\t\t\tpointRadius: accelPointRadii,\n\t\t\t\t\tpointStyle: accelPointStyles,\n\t\t\t\t\tpointRotation: accelPointRotations,\n\t\t\t\t\tpointBackgroundColor: accelGradient,\n\t\t\t\t\ttension: 0.4,\n\t\t\t\t\tfill: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Deceleration\",\n\t\t\t\t\tdata: decelData,\n\t\t\t\t\tborderColor: decelGradient,\n\t\t\t\t\tbackgroundColor: \"rgba(170, 85, 255, 0.15)\",\n\t\t\t\t\tborderWidth: 3,\n\t\t\t\t\tpointRadius: decelPointRadii,\n\t\t\t\t\tpointStyle: decelPointStyles,\n\t\t\t\t\tpointRotation: decelPointRotations,\n\t\t\t\t\tpointBackgroundColor: decelGradient,\n\t\t\t\t\ttension: 0.4,\n\t\t\t\t\tfill: true,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: {\n\t\t\tresponsive: true,\n\t\t\tmaintainAspectRatio: true,\n\t\t\taspectRatio: 2.5,\n\t\t\tplugins: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tlabels: {\n\t\t\t\t\t\tcolor: \"#e8f1f5\",\n\t\t\t\t\t\tfont: { family: \"IBM Plex Mono\", size: 11 },\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tscales: {\n\t\t\t\tx: {\n\t\t\t\t\ttype: \"linear\",\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\ttext: \"Distance (light years)\",\n\t\t\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\t\t\tfont: { size: 14 },\n\t\t\t\t\t},\n\t\t\t\t\tgrid: { color: \"rgba(0, 217, 255, 0.1)\" },\n\t\t\t\t\tticks: { color: \"#e8f1f5\" },\n\t\t\t\t},\n\t\t\t\ty: {\n\t\t\t\t\ttype: \"linear\",\n\t\t\t\t\tmin: 0,\n\t\t\t\t\tmax: 1,\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\ttext: \"Velocity (c)\",\n\t\t\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\t\t\tfont: { size: 14 },\n\t\t\t\t\t},\n\t\t\t\t\tgrid: { color: \"rgba(0, 217, 255, 0.1)\" },\n\t\t\t\t\tticks: { color: \"#e8f1f5\" },\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}) as Chart;\n}\n\nfunction createSpacetimeChart(\n\tcanvas: HTMLCanvasElement,\n\tdata: { x: number; y: number; velocity?: number }[]\n): Chart {\n\tconst ctx = canvas.getContext(\"2d\");\n\tif (!ctx) throw new Error(\"Could not get canvas context\");\n\n\t// Find max values for light cone\n\tconst maxTime = Math.max(...data.map(d => d.x));\n\n\t// Create velocity-based gradient (vertical, since distance is on y-axis)\n\tconst gradient = createVelocityGradient(ctx, canvas.height, {\n\t\thigh: \"#ffaa00\", // amber at far distance (high velocity region)\n\t\tmid: \"#00ff9f\", // scientific green at mid\n\t\tlow: \"#00d9ff\", // electric cyan at near distance (low velocity)\n\t});\n\n\treturn new Chart(ctx, {\n\t\ttype: \"line\",\n\t\tdata: {\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Worldline\",\n\t\t\t\t\tdata: data,\n\t\t\t\t\tborderColor: gradient,\n\t\t\t\t\tbackgroundColor: \"rgba(0, 217, 255, 0.15)\",\n\t\t\t\t\tborderWidth: 3,\n\t\t\t\t\tpointRadius: 0,\n\t\t\t\t\ttension: 0.4,\n\t\t\t\t\tfill: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Light Cone\",\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{ x: 0, y: 0 },\n\t\t\t\t\t\t{ x: maxTime, y: maxTime },\n\t\t\t\t\t],\n\t\t\t\t\tborderColor: \"rgba(255, 170, 0, 0.3)\",\n\t\t\t\t\tborderWidth: 1,\n\t\t\t\t\tborderDash: [5, 5],\n\t\t\t\t\tpointRadius: 0,\n\t\t\t\t\tfill: false,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: {\n\t\t\tresponsive: true,\n\t\t\tmaintainAspectRatio: true,\n\t\t\taspectRatio: 2.5,\n\t\t\tplugins: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tlegend: { display: false },\n\t\t\t},\n\t\t\tscales: {\n\t\t\t\tx: {\n\t\t\t\t\ttype: \"linear\",\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\ttext: \"Coordinate Time (years)\",\n\t\t\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\t\t\tfont: { size: 14 },\n\t\t\t\t\t},\n\t\t\t\t\tgrid: { color: \"rgba(0, 217, 255, 0.1)\" },\n\t\t\t\t\tticks: { color: \"#e8f1f5\" },\n\t\t\t\t},\n\t\t\t\ty: {\n\t\t\t\t\ttype: \"linear\",\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\ttext: \"Distance (light years)\",\n\t\t\t\t\t\tcolor: \"#00d9ff\",\n\t\t\t\t\t\tfont: { size: 14 },\n\t\t\t\t\t},\n\t\t\t\t\tgrid: { color: \"rgba(0, 217, 255, 0.1)\" },\n\t\t\t\t\tticks: { color: \"#e8f1f5\" },\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}) as Chart;\n}\n\nexport function updateTwinParadoxCharts(\n\tregistry: ChartRegistry,\n\tdata: ReturnType<typeof import(\"./dataGeneration\").generateTwinParadoxChartData>\n): ChartRegistry {\n\tlet newRegistry = registry;\n\n\t// Calculate max values\n\tconst maxProperTime = Math.max(...data.travelingTwinAging.map(d => d.x));\n\tconst maxEarthTime = Math.max(...data.earthTwinAging.map(d => d.y));\n\n\t// Comparative Aging (Dual Timeline) Chart\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"twinsAgingChart\",\n\t\t[\n\t\t\t{\n\t\t\t\tlabel: \"Traveling Twin\",\n\t\t\t\tdata: data.travelingTwinAging,\n\t\t\t\tborderColor: \"#00d9ff\",\n\t\t\t\tbackgroundColor: \"rgba(0, 217, 255, 0.1)\",\n\t\t\t\tborderWidth: 2,\n\t\t\t\tfill: false,\n\t\t\t\ttension: 0,\n\t\t\t\tpointRadius: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Earth Twin\",\n\t\t\t\tdata: data.earthTwinAging,\n\t\t\t\tborderColor: \"#00ff9f\",\n\t\t\t\tbackgroundColor: \"rgba(0, 255, 159, 0.1)\",\n\t\t\t\tborderWidth: 2,\n\t\t\t\tfill: false,\n\t\t\t\ttension: 0,\n\t\t\t\tpointRadius: 0,\n\t\t\t},\n\t\t],\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Proper Time - Traveling Twin (years)\",\n\t\t\tyAxisLabel: \"Age (years)\",\n\t\t\txMax: maxProperTime,\n\t\t\tyMax: maxEarthTime,\n\t\t}\n\t);\n\n\t// Distance from Earth Chart\n\tnewRegistry = updateChart(\n\t\tnewRegistry,\n\t\t\"twinsDistanceChart\",\n\t\tcreateDualTimeDatasets(\n\t\t\tdata.properTimeDistance,\n\t\t\tdata.coordTimeDistance,\n\t\t\t\"Distance vs Proper Time\",\n\t\t\t\"Distance vs Coordinate Time\"\n\t\t),\n\t\t{\n\t\t\tprimaryColor: \"#00d9ff\",\n\t\t\tsecondaryColor: \"#00ff9f\",\n\t\t\txAxisLabel: \"Time (years)\",\n\t\t\tyAxisLabel: \"Distance (light years)\",\n\t\t\tyMin: 0,\n\t\t}\n\t);\n\n\t// Spacetime worldline now rendered with Minkowski diagram (D3)\n\t// See minkowski-twins.ts\n\n\treturn newRegistry;\n}\n","/**\n * Event handler factory functions\n * Coordinate between DOM, physics, data generation, and charts\n */\n\nimport Decimal from \"decimal.js\";\nimport * as rl from \"../relativity_lib\";\nimport * as extra from \"../extra_lib\";\nimport { setElement } from \"./domUtils\";\nimport {\n\tgenerateAccelChartData,\n\tgenerateFlipBurnChartData,\n\tgenerateVisualizationChartData,\n\tgenerateTwinParadoxChartData,\n} from \"../charts/dataGeneration\";\nimport {\n\tupdateAccelCharts,\n\tupdateFlipBurnCharts,\n\tupdateVisualizationCharts,\n\tupdateTwinParadoxCharts,\n\ttype ChartRegistry,\n} from \"../charts/charts\";\nimport { drawMinkowskiDiagramD3, type MinkowskiData } from \"../charts/minkowski\";\nimport { drawTwinParadoxMinkowski, type TwinParadoxMinkowskiData } from \"../charts/minkowski-twins\";\n\n// Per-chart time mode state\nconst chartTimeModes: Record<string, \"proper\" | \"coordinate\"> = {\n\taccelVelocity: \"proper\",\n\taccelLorentz: \"proper\",\n\taccelRapidity: \"proper\",\n\tflipVelocity: \"proper\",\n\tflipLorentz: \"proper\",\n\tflipRapidity: \"proper\",\n};\n\nexport function createLorentzHandler(\n\tgetInput: () => HTMLInputElement | null,\n\tgetResult: () => HTMLElement | null\n): () => void {\n\treturn () => {\n\t\tconst input = getInput();\n\t\tconst result = getResult();\n\t\tif (!input || !result) return;\n\n\t\tconst vel = rl.checkVelocity(input.value ?? 0);\n\t\tconst lorentz = rl.lorentzFactor(vel);\n\t\tsetElement(result, rl.formatSignificant(lorentz, \"0\", 3), \"\");\n\t};\n}\n\nexport function createRapidityFromVelocityHandler(\n\tgetInput: () => HTMLInputElement | null,\n\tgetResult: () => HTMLElement | null\n): () => void {\n\treturn () => {\n\t\tconst input = getInput();\n\t\tconst result = getResult();\n\t\tif (!input || !result) return;\n\n\t\tconst rapidity = rl.rapidityFromVelocity(input.value ?? 0);\n\t\tsetElement(result, rl.formatSignificant(rapidity, \"0\", 3), \"\");\n\t};\n}\n\nexport function createVelocityFromRapidityHandler(\n\tgetInput: () => HTMLInputElement | null,\n\tgetResult: () => HTMLElement | null\n): () => void {\n\treturn () => {\n\t\tconst input = getInput();\n\t\tconst result = getResult();\n\t\tif (!input || !result) return;\n\n\t\tconst velocity = rl.velocityFromRapidity(input.value ?? 0);\n\t\tsetElement(result, rl.formatSignificant(velocity, \"9\", 3), \"m/s\");\n\t};\n}\n\nexport function createAddVelocitiesHandler(\n\tgetV1Input: () => HTMLInputElement | null,\n\tgetV2Input: () => HTMLInputElement | null,\n\tgetResult: () => HTMLElement | null\n): () => void {\n\treturn () => {\n\t\tconst v1Input = getV1Input();\n\t\tconst v2Input = getV2Input();\n\t\tconst result = getResult();\n\t\tif (!v1Input || !v2Input || !result) return;\n\n\t\tconst v1 = rl.ensure(v1Input.value ?? 0);\n\t\tconst v2 = rl.ensure(v2Input.value ?? 0);\n\t\tconst added = rl.addVelocitiesC(v1, v2);\n\n\t\tsetElement(result, rl.formatSignificant(added, \"9\", 3), \"c\");\n\t};\n}\n\nexport function createWarpDriveHandler(\n\tgetDistanceInput: () => HTMLInputElement | null,\n\tgetBoostInput: () => HTMLInputElement | null,\n\tgetTransitInput: () => HTMLInputElement | null,\n\tgetBoostDurationInput: () => HTMLInputElement | null,\n\tgetResults: () => (HTMLElement | null)[]\n): () => void {\n\treturn () => {\n\t\tconst distanceInput = getDistanceInput();\n\t\tconst boostInput = getBoostInput();\n\t\tconst transitInput = getTransitInput();\n\t\tconst boostDurationInput = getBoostDurationInput();\n\t\tconst results = getResults();\n\t\tif (!distanceInput || !boostInput || !transitInput || !boostDurationInput) return;\n\t\tif (results.length < 4 || results.some(r => r === null)) return;\n\n\t\t// Convert inputs from user units to SI units\n\t\t// Distance: light-minutes -> metres (multiply by c * 60)\n\t\tconst distanceLightMinutes = rl.ensure(distanceInput.value ?? 30);\n\t\tconst distanceMetres = distanceLightMinutes.mul(rl.c).mul(60);\n\n\t\t// Boost velocity: already fraction of c\n\t\tconst boostVelocityC = rl.ensure(boostInput.value ?? 0.9);\n\n\t\t// Transit time: minutes -> seconds\n\t\tconst transitMinutes = rl.ensure(transitInput.value ?? 0);\n\t\tconst transitSeconds = transitMinutes.mul(60);\n\n\t\t// Boost duration: minutes -> seconds\n\t\tconst boostDurationMinutes = rl.ensure(boostDurationInput.value ?? 0);\n\t\tconst boostDurationSeconds = boostDurationMinutes.mul(60);\n\n\t\t// Calculate\n\t\tconst result = rl.warpDriveTimeTravel(\n\t\t\tdistanceMetres,\n\t\t\tboostVelocityC,\n\t\t\ttransitSeconds,\n\t\t\tboostDurationSeconds\n\t\t);\n\n\t\t// Calculate Lorentz factor for the boost velocity\n\t\tconst boostVelocityMs = boostVelocityC.mul(rl.c);\n\t\tconst lorentzFactor = rl.lorentzFactor(boostVelocityMs);\n\n\t\t// Convert results back to user-friendly units (seconds -> minutes)\n\t\tconst displacementMinutes = result.timeDisplacement.div(60);\n\t\tconst simultaneityMinutes = result.simultaneityShift.div(60);\n\t\tconst travelerTimeMinutes = result.travelerTime.div(60);\n\n\t\t// Format and display\n\t\tconst [dispResult, simResult, lorentzResult, travelerResult] = results;\n\n\t\t// Time displacement with descriptive text and auto-scaled units\n\t\tconst dispFormatted = rl.formatTimeWithUnit(displacementMinutes.abs());\n\t\tconst direction = displacementMinutes.isNegative() ? \"into the past\" : \"into the future\";\n\t\tsetElement(dispResult!, `${dispFormatted.value} ${dispFormatted.units} ${direction}`, \"\");\n\n\t\t// Other results with auto-scaled units\n\t\tconst simFormatted = rl.formatTimeWithUnit(simultaneityMinutes);\n\t\tsetElement(simResult!, simFormatted.value, simFormatted.units);\n\n\t\t// Lorentz factor (dimensionless, show 3 significant figures)\n\t\tsetElement(lorentzResult!, rl.formatSignificant(lorentzFactor, \"\", 3), \"\");\n\n\t\tconst travelerFormatted = rl.formatTimeWithUnit(travelerTimeMinutes);\n\t\tsetElement(travelerResult!, travelerFormatted.value, travelerFormatted.units);\n\t};\n}\n\nexport function createAccelHandler(\n\tgetAccelInput: () => HTMLInputElement | null,\n\tgetTimeInput: () => HTMLInputElement | null,\n\tgetDryMassInput: () => HTMLInputElement | null,\n\tgetEfficiencyInput: () => HTMLInputElement | null,\n\tgetResults: () => (HTMLElement | null)[],\n\tchartRegistry: { current: ChartRegistry }\n): () => void {\n\tlet pendingRAF: number | null = null;\n\tlet pendingCalculation: number | null = null;\n\n\treturn () => {\n\t\tconst accelInput = getAccelInput();\n\t\tconst timeInput = getTimeInput();\n\t\tconst dryMassInput = getDryMassInput();\n\t\tconst efficiencyInput = getEfficiencyInput();\n\t\tconst [\n\t\t\tresultA1,\n\t\t\tresultA2,\n\t\t\tresultA1b,\n\t\t\tresultA2b,\n\t\t\tresultAFuel,\n\t\t\tresultAFuelFraction,\n\t\t\tresultAStars,\n\t\t\tresultAGalaxyFraction,\n\t\t] = getResults();\n\t\tif (!accelInput || !timeInput || !dryMassInput || !efficiencyInput) return;\n\n\t\t// Cancel pending calculation to prevent race condition\n\t\tif (pendingRAF !== null) {\n\t\t\tcancelAnimationFrame(pendingRAF);\n\t\t\tpendingRAF = null;\n\t\t}\n\t\tif (pendingCalculation !== null) {\n\t\t\tclearTimeout(pendingCalculation);\n\t\t\tpendingCalculation = null;\n\t\t}\n\n\t\t// Validate and clamp inputs immediately (before showing \"Working...\")\n\t\tlet accelGStr = accelInput.value ?? \"1\";\n\t\ttry {\n\t\t\tconst accelGDec = rl.ensure(accelGStr);\n\t\t\tif (accelGDec.lt(0.1)) {\n\t\t\t\taccelGStr = \"0.1\";\n\t\t\t\taccelInput.value = \"0.1\";\n\t\t\t} else if (accelGDec.gt(100)) {\n\t\t\t\taccelGStr = \"100\";\n\t\t\t\taccelInput.value = \"100\";\n\t\t\t}\n\t\t} catch {\n\t\t\taccelGStr = \"1\";\n\t\t\taccelInput.value = \"1\";\n\t\t}\n\n\t\tlet timeStr = timeInput.value ?? \"0\";\n\t\ttry {\n\t\t\tconst timeDaysDec = rl.ensure(timeStr);\n\t\t\tif (timeDaysDec.lt(0.1)) {\n\t\t\t\ttimeStr = \"0.1\";\n\t\t\t\ttimeInput.value = \"0.1\";\n\t\t\t} else if (timeDaysDec.gt(60000)) {\n\t\t\t\ttimeStr = \"60000\";\n\t\t\t\ttimeInput.value = \"60000\";\n\t\t\t}\n\t\t} catch {\n\t\t\ttimeStr = \"365\";\n\t\t\ttimeInput.value = \"365\";\n\t\t}\n\n\t\tlet dryMassStr = dryMassInput.value ?? \"500\";\n\t\ttry {\n\t\t\tconst dryMassDec = rl.ensure(dryMassStr);\n\t\t\tif (dryMassDec.lt(1)) {\n\t\t\t\tdryMassStr = \"1\";\n\t\t\t\tdryMassInput.value = \"1\";\n\t\t\t} else if (dryMassDec.gt(100000000)) {\n\t\t\t\tdryMassStr = \"100000000\";\n\t\t\t\tdryMassInput.value = \"100000000\";\n\t\t\t}\n\t\t} catch {\n\t\t\tdryMassStr = \"500\";\n\t\t\tdryMassInput.value = \"500\";\n\t\t}\n\n\t\tlet efficiencyStr = efficiencyInput.value ?? \"0.85\";\n\t\ttry {\n\t\t\tconst efficiencyDec = rl.ensure(efficiencyStr);\n\t\t\tif (efficiencyDec.lt(0.01)) {\n\t\t\t\tefficiencyStr = \"0.01\";\n\t\t\t\tefficiencyInput.value = \"0.01\";\n\t\t\t} else if (efficiencyDec.gt(0.99)) {\n\t\t\t\tefficiencyStr = \"0.99\";\n\t\t\t\tefficiencyInput.value = \"0.99\";\n\t\t\t}\n\t\t} catch {\n\t\t\tefficiencyStr = \"0.85\";\n\t\t\tefficiencyInput.value = \"0.85\";\n\t\t}\n\n\t\t// Show working message\n\t\tif (resultA1) resultA1.textContent = \"\";\n\t\tif (resultA2) resultA2.textContent = \"Working...\";\n\t\tif (resultA1b) resultA1b.textContent = \"\";\n\t\tif (resultA2b) resultA2b.textContent = \"\";\n\t\tif (resultAFuel) resultAFuel.textContent = \"\";\n\t\tif (resultAFuelFraction) resultAFuelFraction.textContent = \"\";\n\t\tif (resultAStars) resultAStars.textContent = \"\";\n\t\tif (resultAGalaxyFraction) resultAGalaxyFraction.textContent = \"\";\n\n\t\t// Allow UI to update before heavy calculation\n\t\tpendingRAF = requestAnimationFrame(() => {\n\t\t\tpendingRAF = null;\n\t\t\tpendingCalculation = window.setTimeout(() => {\n\t\t\t\t// Use validated values from above\n\t\t\t\tconst accel = rl.g.mul(accelGStr);\n\t\t\t\tconst secs = rl.ensure(timeStr).mul(60 * 60 * 24);\n\n\t\t\t\tconst relVel = rl.relativisticVelocity(accel, secs);\n\t\t\t\tconst relDist = rl.relativisticDistance(accel, secs);\n\t\t\t\tconst relVelC = relVel.div(rl.c);\n\t\t\t\tconst relDistC = relDist.div(rl.lightYear);\n\t\t\t\tconst relDistKm = relDist.div(1000);\n\t\t\t\tconst coordTimeSec = rl.coordinateTime(accel, secs);\n\t\t\t\tconst coordTimeDays = coordTimeSec.div(86400);\n\n\t\t\t\t// Calculate fuel fraction using user-provided efficiency\n\t\t\t\tconst dryMass = rl.ensure(dryMassStr);\n\t\t\t\tconst efficiency = rl.ensure(efficiencyStr);\n\t\t\t\tconst fuelFraction = rl.pionRocketFuelFraction(secs, accel, efficiency);\n\t\t\t\tconst fuelMass = fuelFraction.mul(dryMass).div(rl.one.minus(fuelFraction));\n\t\t\t\tconst fuelPercent = fuelFraction.mul(100);\n\n\t\t\t\tif (resultA1) setElement(resultA1, rl.formatSignificant(relVel, \"9\", 2), \"m/s\");\n\t\t\t\tif (resultA2) {\n\t\t\t\t\t// Auto-switch between days and years for coordinate time\n\t\t\t\t\tif (coordTimeDays.gte(1000)) {\n\t\t\t\t\t\tconst coordTimeYears = coordTimeDays.div(365.25);\n\t\t\t\t\t\tsetElement(resultA2, rl.formatSignificant(coordTimeYears, \"\", 1), \"yrs\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetElement(resultA2, rl.formatSignificant(coordTimeDays, \"\", 1), \"days\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (resultA1b) setElement(resultA1b, rl.formatSignificant(relVelC, \"9\", 3), \"c\");\n\t\t\t\tif (resultA2b) {\n\t\t\t\t\tconst distanceFormatted = rl.formatDistanceAutoUnit(relDistC, relDistKm);\n\t\t\t\t\tsetElement(resultA2b, distanceFormatted.value, distanceFormatted.units);\n\t\t\t\t}\n\t\t\t\tif (resultAFuel) setElement(resultAFuel, rl.formatMassWithUnit(fuelMass), \"\");\n\t\t\t\tif (resultAFuelFraction)\n\t\t\t\t\tsetElement(resultAFuelFraction, rl.formatSignificant(fuelPercent, \"9\", 2), \"%\");\n\n\t\t\t\t// Estimate stars in range - use distance in light years\n\t\t\t\tconst distanceLightYears = relDistC.toNumber();\n\t\t\t\tif (distanceLightYears >= 100000) {\n\t\t\t\t\t// At or above 100k ly, show \"Entire galaxy\"\n\t\t\t\t\tif (resultAStars) setElement(resultAStars, \"Entire galaxy\", \"\");\n\t\t\t\t\tif (resultAGalaxyFraction) setElement(resultAGalaxyFraction, \"100\", \"%\");\n\t\t\t\t} else {\n\t\t\t\t\tconst starEstimate = extra.estimateStarsInSphere(distanceLightYears);\n\t\t\t\t\tconst starsFormatted = extra.formatStarCount(starEstimate.stars);\n\t\t\t\t\tconst fractionPercent = rl.formatSignificant(\n\t\t\t\t\t\tnew Decimal(starEstimate.fraction * 100),\n\t\t\t\t\t\t\"0\",\n\t\t\t\t\t\t1\n\t\t\t\t\t);\n\t\t\t\t\tif (resultAStars) setElement(resultAStars, starsFormatted, \"\");\n\t\t\t\t\tif (resultAGalaxyFraction) setElement(resultAGalaxyFraction, fractionPercent, \"%\");\n\t\t\t\t}\n\n\t\t\t\t// Update charts - parseFloat is OK here as Chart.js only needs limited precision for display\n\t\t\t\tconst accelG = parseFloat(accelGStr);\n\t\t\t\tconst durationDays = parseFloat(timeStr);\n\t\t\t\tconst efficiencyNum = parseFloat(efficiencyStr);\n\t\t\t\tconst data = generateAccelChartData(accelG, durationDays, efficiencyNum);\n\t\t\t\tchartRegistry.current = updateAccelCharts(chartRegistry.current, data, efficiencyNum, {\n\t\t\t\t\tvelocity: chartTimeModes.accelVelocity,\n\t\t\t\t\tlorentz: chartTimeModes.accelLorentz,\n\t\t\t\t\trapidity: chartTimeModes.accelRapidity,\n\t\t\t\t});\n\t\t\t\tpendingCalculation = null;\n\t\t\t}, 0);\n\t\t});\n\t};\n}\n\nexport function createFlipBurnHandler(\n\tgetAccelInput: () => HTMLInputElement | null,\n\tgetDistanceInput: () => HTMLInputElement | null,\n\tgetDryMassInput: () => HTMLInputElement | null,\n\tgetEfficiencyInput: () => HTMLInputElement | null,\n\tgetResults: () => (HTMLElement | null)[],\n\tchartRegistry: { current: ChartRegistry }\n): () => void {\n\tlet pendingRAF: number | null = null;\n\tlet pendingCalculation: number | null = null;\n\n\treturn () => {\n\t\tconst accelInput = getAccelInput();\n\t\tconst distanceInput = getDistanceInput();\n\t\tconst dryMassInput = getDryMassInput();\n\t\tconst efficiencyInput = getEfficiencyInput();\n\t\tconst [\n\t\t\tresultFlip1,\n\t\t\tresultFlip2,\n\t\t\tresultFlip3,\n\t\t\tresultFlip4,\n\t\t\tresultFlip5,\n\t\t\tresultFlip6,\n\t\t\tresultFlipFuel,\n\t\t\tresultFlipFuelFraction,\n\t\t\tresultFlipStars,\n\t\t\tresultFlipGalaxyFraction,\n\t\t] = getResults();\n\t\tif (!accelInput || !distanceInput || !dryMassInput || !efficiencyInput) return;\n\n\t\t// Cancel pending calculation to prevent race condition\n\t\tif (pendingRAF !== null) {\n\t\t\tcancelAnimationFrame(pendingRAF);\n\t\t\tpendingRAF = null;\n\t\t}\n\t\tif (pendingCalculation !== null) {\n\t\t\tclearTimeout(pendingCalculation);\n\t\t\tpendingCalculation = null;\n\t\t}\n\n\t\t// Validate and clamp inputs immediately (before showing \"Working...\")\n\t\tlet accelGStr = accelInput.value ?? \"1\";\n\t\ttry {\n\t\t\tconst accelGDec = rl.ensure(accelGStr);\n\t\t\tif (accelGDec.lt(0.1)) {\n\t\t\t\taccelGStr = \"0.1\";\n\t\t\t\taccelInput.value = \"0.1\";\n\t\t\t} else if (accelGDec.gt(100)) {\n\t\t\t\taccelGStr = \"100\";\n\t\t\t\taccelInput.value = \"100\";\n\t\t\t}\n\t\t} catch {\n\t\t\taccelGStr = \"1\";\n\t\t\taccelInput.value = \"1\";\n\t\t}\n\n\t\tlet distanceLightYearsStr = distanceInput.value ?? \"0\";\n\t\ttry {\n\t\t\tconst distanceLYDec = rl.ensure(distanceLightYearsStr);\n\t\t\tif (distanceLYDec.lt(0.0001)) {\n\t\t\t\tdistanceLightYearsStr = \"0.0001\";\n\t\t\t\tdistanceInput.value = \"0.0001\";\n\t\t\t} else if (distanceLYDec.gt(50000000000)) {\n\t\t\t\tdistanceLightYearsStr = \"50000000000\";\n\t\t\t\tdistanceInput.value = \"50000000000\";\n\t\t\t}\n\t\t} catch {\n\t\t\tdistanceLightYearsStr = \"4\";\n\t\t\tdistanceInput.value = \"4\";\n\t\t}\n\n\t\tlet dryMassStr = dryMassInput.value ?? \"500\";\n\t\ttry {\n\t\t\tconst dryMassDec = rl.ensure(dryMassStr);\n\t\t\tif (dryMassDec.lt(1)) {\n\t\t\t\tdryMassStr = \"1\";\n\t\t\t\tdryMassInput.value = \"1\";\n\t\t\t} else if (dryMassDec.gt(100000000)) {\n\t\t\t\tdryMassStr = \"100000000\";\n\t\t\t\tdryMassInput.value = \"100000000\";\n\t\t\t}\n\t\t} catch {\n\t\t\tdryMassStr = \"500\";\n\t\t\tdryMassInput.value = \"500\";\n\t\t}\n\n\t\tlet efficiencyStr = efficiencyInput.value ?? \"0.85\";\n\t\ttry {\n\t\t\tconst efficiencyDec = rl.ensure(efficiencyStr);\n\t\t\tif (efficiencyDec.lt(0.01)) {\n\t\t\t\tefficiencyStr = \"0.01\";\n\t\t\t\tefficiencyInput.value = \"0.01\";\n\t\t\t} else if (efficiencyDec.gt(0.99)) {\n\t\t\t\tefficiencyStr = \"0.99\";\n\t\t\t\tefficiencyInput.value = \"0.99\";\n\t\t\t}\n\t\t} catch {\n\t\t\tefficiencyStr = \"0.85\";\n\t\t\tefficiencyInput.value = \"0.85\";\n\t\t}\n\n\t\t// Show working message\n\t\tif (resultFlip1) resultFlip1.textContent = \"Working...\";\n\t\tif (resultFlip2) resultFlip2.textContent = \"\";\n\t\tif (resultFlip3) resultFlip3.textContent = \"\";\n\t\tif (resultFlip4) resultFlip4.textContent = \"\";\n\t\tif (resultFlip5) resultFlip5.textContent = \"\";\n\t\tif (resultFlip6) resultFlip6.textContent = \"\";\n\t\tif (resultFlipFuel) resultFlipFuel.textContent = \"\";\n\t\tif (resultFlipFuelFraction) resultFlipFuelFraction.textContent = \"\";\n\t\tif (resultFlipStars) resultFlipStars.textContent = \"\";\n\t\tif (resultFlipGalaxyFraction) resultFlipGalaxyFraction.textContent = \"\";\n\n\t\t// Allow UI to update before heavy calculation\n\t\tpendingRAF = requestAnimationFrame(() => {\n\t\t\tpendingRAF = null;\n\t\t\tpendingCalculation = window.setTimeout(() => {\n\t\t\t\t// Use validated values from above\n\t\t\t\tconst accel = rl.g.mul(accelGStr);\n\t\t\t\tconst m = rl.ensure(distanceLightYearsStr).mul(rl.lightYear);\n\t\t\t\tconst res = rl.flipAndBurn(accel, m);\n\t\t\t\tconst properTime = res.properTime.div(rl.secondsPerYear);\n\t\t\t\tconst coordTime = res.coordTime.div(rl.secondsPerYear);\n\t\t\t\tconst peak = res.peakVelocity.div(rl.c);\n\t\t\t\tconst lorentz = res.lorentzFactor;\n\t\t\t\tconst metre = rl.formatSignificant(rl.one.div(lorentz), \"0\", 2);\n\t\t\t\tconst sec = rl.formatSignificant(rl.one.mul(lorentz), \"0\", 2);\n\n\t\t\t\t// Calculate fuel mass\n\t\t\t\tconst dryMass = rl.ensure(dryMassStr);\n\t\t\t\tconst efficiency = rl.ensure(efficiencyStr);\n\t\t\t\tconst fuelFraction = rl.pionRocketFuelFraction(res.properTime, accel, efficiency);\n\t\t\t\tconst fuelMass = fuelFraction.mul(dryMass).div(rl.one.minus(fuelFraction));\n\t\t\t\tconst fuelPercent = fuelFraction.mul(100);\n\n\t\t\t\tif (resultFlip1) setElement(resultFlip1, rl.formatSignificant(properTime, \"0\", 2), \"yrs\");\n\t\t\t\tif (resultFlip2) setElement(resultFlip2, rl.formatSignificant(peak, \"9\", 2), \"c\");\n\t\t\t\tif (resultFlip4) setElement(resultFlip4, rl.formatSignificant(coordTime, \"\", 1), \"yrs\");\n\t\t\t\tif (resultFlip3) setElement(resultFlip3, rl.formatSignificant(lorentz, \"0\", 2), \"\");\n\t\t\t\tif (resultFlip5) setElement(resultFlip5, `1m becomes ${metre}m`, \"\");\n\t\t\t\tif (resultFlip6) setElement(resultFlip6, `1s becomes ${sec}s`, \"\");\n\t\t\t\tif (resultFlipFuel) setElement(resultFlipFuel, rl.formatMassWithUnit(fuelMass), \"\");\n\t\t\t\tif (resultFlipFuelFraction)\n\t\t\t\t\tsetElement(resultFlipFuelFraction, rl.formatSignificant(fuelPercent, \"9\", 2), \"%\");\n\n\t\t\t\t// Update charts - parseFloat is OK here as Chart.js only needs limited precision for display\n\t\t\t\tconst accelG = parseFloat(accelGStr);\n\t\t\t\tconst distanceLightYears = parseFloat(distanceLightYearsStr);\n\n\t\t\t\t// Estimate stars in range\n\t\t\t\tif (distanceLightYears >= 100000) {\n\t\t\t\t\t// At or above 100k ly, show \"Entire galaxy\"\n\t\t\t\t\tif (resultFlipStars) setElement(resultFlipStars, \"Entire galaxy\", \"\");\n\t\t\t\t\tif (resultFlipGalaxyFraction) setElement(resultFlipGalaxyFraction, \"100\", \"%\");\n\t\t\t\t} else {\n\t\t\t\t\tconst starEstimate = extra.estimateStarsInSphere(distanceLightYears);\n\t\t\t\t\tconst starsFormatted = extra.formatStarCount(starEstimate.stars);\n\t\t\t\t\tconst fractionPercent = rl.formatSignificant(\n\t\t\t\t\t\tnew Decimal(starEstimate.fraction * 100),\n\t\t\t\t\t\t\"0\",\n\t\t\t\t\t\t1\n\t\t\t\t\t);\n\t\t\t\t\tif (resultFlipStars) setElement(resultFlipStars, starsFormatted, \"\");\n\t\t\t\t\tif (resultFlipGalaxyFraction) setElement(resultFlipGalaxyFraction, fractionPercent, \"%\");\n\t\t\t\t}\n\t\t\t\tconst efficiencyNum = parseFloat(efficiencyStr);\n\t\t\t\tconst data = generateFlipBurnChartData(accelG, distanceLightYears, efficiencyNum);\n\t\t\t\tchartRegistry.current = updateFlipBurnCharts(chartRegistry.current, data, efficiencyNum, {\n\t\t\t\t\tvelocity: chartTimeModes.flipVelocity,\n\t\t\t\t\tlorentz: chartTimeModes.flipLorentz,\n\t\t\t\t\trapidity: chartTimeModes.flipRapidity,\n\t\t\t\t});\n\t\t\t\tpendingCalculation = null;\n\t\t\t}, 0);\n\t\t});\n\t};\n}\n\nexport function createTwinParadoxHandler(\n\tgetVelocityInput: () => HTMLInputElement | null,\n\tgetTimeInput: () => HTMLInputElement | null,\n\tgetResults: () => (HTMLElement | null)[],\n\tchartRegistry: { current: ChartRegistry },\n\tonDiagramDrawn?: (\n\t\tcontainer: HTMLElement,\n\t\tdata: TwinParadoxMinkowskiData,\n\t\tcontroller: ReturnType<typeof drawTwinParadoxMinkowski> | null\n\t) => void\n): (silent?: boolean) => void {\n\tlet pendingRAF: number | null = null;\n\tlet pendingCalculation: number | null = null;\n\n\treturn (silent = false) => {\n\t\tconst velocityInput = getVelocityInput();\n\t\tconst timeInput = getTimeInput();\n\t\tconst [\n\t\t\tresultTwins1,\n\t\t\tresultTwins2,\n\t\t\tresultTwins3,\n\t\t\tresultTwins4,\n\t\t\tresultTwins5,\n\t\t\tresultTwins6,\n\t\t\tresultTwins7,\n\t\t\tresultTwins8,\n\t\t] = getResults();\n\t\tif (!velocityInput || !timeInput) return;\n\n\t\t// Cancel pending calculation to prevent race condition\n\t\tif (pendingRAF !== null) {\n\t\t\tcancelAnimationFrame(pendingRAF);\n\t\t\tpendingRAF = null;\n\t\t}\n\t\tif (pendingCalculation !== null) {\n\t\t\tclearTimeout(pendingCalculation);\n\t\t\tpendingCalculation = null;\n\t\t}\n\n\t\t// Validate and clamp inputs immediately (before showing \"Working...\")\n\t\tlet velocityCStr = velocityInput.value ?? \"0.8\";\n\t\ttry {\n\t\t\tconst velocityCDec = rl.ensure(velocityCStr);\n\t\t\tif (velocityCDec.lt(0.001)) {\n\t\t\t\tvelocityCStr = \"0.001\";\n\t\t\t\tvelocityInput.value = \"0.001\";\n\t\t\t} else if (velocityCDec.gte(1.0)) {\n\t\t\t\tvelocityCStr = \"0.999\";\n\t\t\t\tvelocityInput.value = \"0.999\";\n\t\t\t}\n\t\t} catch {\n\t\t\tvelocityCStr = \"0.8\";\n\t\t\tvelocityInput.value = \"0.8\";\n\t\t}\n\n\t\tlet properTimeYearsStr = timeInput.value ?? \"4\";\n\t\ttry {\n\t\t\tconst properTimeYearsDec = rl.ensure(properTimeYearsStr);\n\t\t\tif (properTimeYearsDec.lt(0.01)) {\n\t\t\t\tproperTimeYearsStr = \"0.01\";\n\t\t\t\ttimeInput.value = \"0.01\";\n\t\t\t} else if (properTimeYearsDec.gt(1000)) {\n\t\t\t\tproperTimeYearsStr = \"1000\";\n\t\t\t\ttimeInput.value = \"1000\";\n\t\t\t}\n\t\t} catch {\n\t\t\tproperTimeYearsStr = \"4\";\n\t\t\ttimeInput.value = \"4\";\n\t\t}\n\n\t\t// Show working message (unless silent mode)\n\t\tif (!silent) {\n\t\t\tif (resultTwins1) resultTwins1.textContent = \"Working...\";\n\t\t\tif (resultTwins2) resultTwins2.textContent = \"\";\n\t\t\tif (resultTwins3) resultTwins3.textContent = \"\";\n\t\t\tif (resultTwins4) resultTwins4.textContent = \"\";\n\t\t\tif (resultTwins5) resultTwins5.textContent = \"\";\n\t\t\tif (resultTwins6) resultTwins6.textContent = \"\";\n\t\t\tif (resultTwins7) resultTwins7.textContent = \"\";\n\t\t\tif (resultTwins8) resultTwins8.textContent = \"\";\n\t\t}\n\n\t\t// Allow UI to update before heavy calculation (skip delay in silent mode)\n\t\tconst execute = () => {\n\t\t\t// Use validated values from above\n\n\t\t\t// Convert UI inputs to SI units using string values to preserve precision\n\t\t\t// parseFloat loses precision for values like 0.99999999999999999 (becomes 1.0)\n\t\t\tconst velocity = rl.c.mul(velocityCStr); // m/s\n\t\t\tconst properTime = rl.ensure(properTimeYearsStr).mul(rl.secondsPerYear); // seconds\n\n\t\t\t// Call function with SI units\n\t\t\tconst res = rl.twinParadox(velocity, properTime);\n\n\t\t\t// Convert results from SI units to display units\n\t\t\tconst travelingAge = res.properTime.div(rl.secondsPerYear); // seconds to years\n\t\t\tconst earthAge = res.earthTime.div(rl.secondsPerYear); // seconds to years\n\t\t\tconst ageDiff = res.ageDifference.div(rl.secondsPerYear); // seconds to years\n\t\t\tconst lorentz = res.lorentzFactor;\n\t\t\tconst velocityMs = res.velocity; // Already in m/s\n\t\t\tconst oneWayLy = res.oneWayDistance.div(rl.lightYear); // meters to light years\n\t\t\tconst totalLy = res.totalDistance.div(rl.lightYear); // meters to light years\n\n\t\t\tif (resultTwins1) setElement(resultTwins1, rl.formatSignificant(travelingAge, \"0\", 2), \"yrs\");\n\t\t\tif (resultTwins2) setElement(resultTwins2, rl.formatSignificant(earthAge, \"0\", 2), \"yrs\");\n\t\t\tif (resultTwins3) setElement(resultTwins3, rl.formatSignificant(ageDiff, \"0\", 2), \"yrs\");\n\t\t\tif (resultTwins4) setElement(resultTwins4, rl.formatSignificant(lorentz, \"0\", 3), \"\");\n\t\t\tif (resultTwins5) setElement(resultTwins5, rl.formatSignificant(velocityMs, \"9\", 2), \"m/s\");\n\t\t\tif (resultTwins6) setElement(resultTwins6, rl.formatSignificant(oneWayLy, \"0\", 3), \"ly\");\n\t\t\tif (resultTwins7) setElement(resultTwins7, rl.formatSignificant(totalLy, \"0\", 3), \"ly\");\n\n\t\t\t// Calculate and display rapidity\n\t\t\tconst rapidityValue = rl.rapidityFromVelocity(velocityMs);\n\t\t\tif (resultTwins8) setElement(resultTwins8, rl.formatSignificant(rapidityValue, \"0\", 2), \"\");\n\n\t\t\t// Update charts - parseFloat is OK here as Chart.js only needs limited precision for display\n\t\t\tconst velocityCNum = parseFloat(velocityCStr);\n\t\t\tconst properTimeYearsNum = parseFloat(properTimeYearsStr);\n\t\t\tconst data = generateTwinParadoxChartData(velocityCNum, properTimeYearsNum);\n\t\t\tchartRegistry.current = updateTwinParadoxCharts(chartRegistry.current, data);\n\n\t\t\t// Draw Minkowski diagram\n\t\t\tconst container = document.getElementById(\"twinsMinkowskiContainer\");\n\t\t\tif (container && onDiagramDrawn) {\n\t\t\t\tconst minkowskiData: TwinParadoxMinkowskiData = {\n\t\t\t\t\tvelocityC: velocityCNum,\n\t\t\t\t\tproperTimeYears: properTimeYearsNum,\n\t\t\t\t\tearthTimeYears: earthAge.toNumber(),\n\t\t\t\t\tdistanceLY: oneWayLy.toNumber(),\n\t\t\t\t\tgamma: lorentz.toNumber(),\n\t\t\t\t\t// Decimal versions for display\n\t\t\t\t\tvelocityCDecimal: rl.ensure(velocityCNum),\n\t\t\t\t\tproperTimeYearsDecimal: rl.ensure(properTimeYearsNum),\n\t\t\t\t\tearthTimeYearsDecimal: earthAge,\n\t\t\t\t\tdistanceLYDecimal: oneWayLy,\n\t\t\t\t\tgammaDecimal: lorentz,\n\t\t\t\t};\n\n\t\t\t\tonDiagramDrawn(container, minkowskiData, null);\n\t\t\t}\n\n\t\t\tpendingCalculation = null;\n\t\t};\n\n\t\tif (silent) {\n\t\t\texecute();\n\t\t} else {\n\t\t\tpendingRAF = requestAnimationFrame(() => {\n\t\t\t\tpendingRAF = null;\n\t\t\t\tpendingCalculation = window.setTimeout(execute, 0);\n\t\t\t});\n\t\t}\n\t};\n}\n\nexport function createGraphUpdateHandler(\n\tgetAccelInput: () => HTMLInputElement | null,\n\tgetDurationInput: () => HTMLInputElement | null,\n\tgetStatus: () => HTMLElement | null,\n\tchartRegistry: { current: ChartRegistry }\n): () => void {\n\tlet pendingRAF: number | null = null;\n\tlet pendingCalculation: number | null = null;\n\n\treturn () => {\n\t\tconst accelInput = getAccelInput();\n\t\tconst durationInput = getDurationInput();\n\t\tconst status = getStatus();\n\t\tif (!accelInput || !durationInput) return;\n\n\t\t// Cancel pending calculation to prevent race condition\n\t\tif (pendingRAF !== null) {\n\t\t\tcancelAnimationFrame(pendingRAF);\n\t\t\tpendingRAF = null;\n\t\t}\n\t\tif (pendingCalculation !== null) {\n\t\t\tclearTimeout(pendingCalculation);\n\t\t\tpendingCalculation = null;\n\t\t}\n\n\t\t// Show working message\n\t\tif (status) status.textContent = \"Working...\";\n\n\t\t// Allow UI to update before heavy calculation\n\t\tpendingRAF = requestAnimationFrame(() => {\n\t\t\tpendingRAF = null;\n\t\t\tpendingCalculation = window.setTimeout(() => {\n\t\t\t\t// Use string values to preserve precision for Decimal.js calculations\n\t\t\t\tconst accelGStr = accelInput.value ?? \"1\";\n\t\t\t\tconst durationDaysStr = durationInput.value ?? \"365\";\n\n\t\t\t\t// parseFloat is OK here as Chart.js only needs limited precision for display\n\t\t\t\tconst accelG = parseFloat(accelGStr);\n\t\t\t\tconst durationDays = parseFloat(durationDaysStr);\n\n\t\t\t\tconst data = generateVisualizationChartData(accelG, durationDays);\n\t\t\t\tchartRegistry.current = updateVisualizationCharts(chartRegistry.current, data);\n\n\t\t\t\tif (status) status.textContent = \"Done\";\n\t\t\t\tpendingCalculation = null;\n\t\t\t}, 0);\n\t\t});\n\t};\n}\n\nexport function createPionAccelTimeHandler(\n\tgetFuelMassInput: () => HTMLInputElement | null,\n\tgetDryMassInput: () => HTMLInputElement | null,\n\tgetEfficiencyInput: () => HTMLInputElement | null,\n\tgetResult: () => HTMLElement | null\n): () => void {\n\treturn () => {\n\t\tconst fuelMassInput = getFuelMassInput();\n\t\tconst dryMassInput = getDryMassInput();\n\t\tconst efficiencyInput = getEfficiencyInput();\n\t\tconst result = getResult();\n\t\tif (!fuelMassInput || !dryMassInput || !efficiencyInput || !result) return;\n\n\t\tconst fuelMass = rl.ensure(fuelMassInput.value ?? 0);\n\t\tconst dryMass = rl.ensure(dryMassInput.value ?? 0);\n\t\tconst efficiency = rl.ensure(efficiencyInput.value ?? 0.85);\n\n\t\t// Validate efficiency range\n\t\tif (efficiency.lt(0.01) || efficiency.gt(1.0)) {\n\t\t\tsetElement(result, \"Efficiency must be between 0.01 and 1.0\", \"\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst accelTimeSeconds = rl.pionRocketAccelTime(fuelMass, dryMass, efficiency);\n\t\tconst accelTimeDays = accelTimeSeconds.div(60 * 60 * 24);\n\n\t\tsetElement(result, rl.formatSignificant(accelTimeDays, \"0\", 3), \"days\");\n\t};\n}\n\nexport function createPionFuelFractionHandler(\n\tgetAccelInput: () => HTMLInputElement | null,\n\tgetThrustTimeInput: () => HTMLInputElement | null,\n\tgetEfficiencyInput: () => HTMLInputElement | null,\n\tgetDryMassInput: () => HTMLInputElement | null,\n\tgetResultFraction: () => HTMLElement | null,\n\tgetResultMass: () => HTMLElement | null\n): () => void {\n\treturn () => {\n\t\tconst accelInput = getAccelInput();\n\t\tconst thrustTimeInput = getThrustTimeInput();\n\t\tconst efficiencyInput = getEfficiencyInput();\n\t\tconst dryMassInput = getDryMassInput();\n\t\tconst resultFraction = getResultFraction();\n\t\tconst resultMass = getResultMass();\n\t\tif (\n\t\t\t!accelInput ||\n\t\t\t!thrustTimeInput ||\n\t\t\t!efficiencyInput ||\n\t\t\t!dryMassInput ||\n\t\t\t!resultFraction ||\n\t\t\t!resultMass\n\t\t)\n\t\t\treturn;\n\n\t\tconst accelG = rl.ensure(accelInput.value ?? 1);\n\t\tconst thrustTimeDays = rl.ensure(thrustTimeInput.value ?? 365);\n\t\tconst thrustTimeSeconds = thrustTimeDays.mul(60 * 60 * 24);\n\t\tconst efficiency = rl.ensure(efficiencyInput.value ?? 0.85);\n\t\tconst dryMass = rl.ensure(dryMassInput.value ?? 1000);\n\n\t\t// Validate acceleration range\n\t\tif (accelG.lt(0.01) || accelG.gt(100)) {\n\t\t\tsetElement(resultFraction, \"Acceleration must be between 0.01 and 100 g\", \"\");\n\t\t\tsetElement(resultMass, \"-\", \"\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Validate efficiency range\n\t\tif (efficiency.lt(0.01) || efficiency.gt(1.0)) {\n\t\t\tsetElement(resultFraction, \"Efficiency must be between 0.01 and 1.0\", \"\");\n\t\t\tsetElement(resultMass, \"-\", \"\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Validate dry mass\n\t\tif (dryMass.lte(0)) {\n\t\t\tsetElement(resultFraction, \"Dry mass must be positive\", \"\");\n\t\t\tsetElement(resultMass, \"-\", \"\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst accel = rl.g.mul(accelG);\n\t\tconst fuelFraction = rl.pionRocketFuelFraction(thrustTimeSeconds, accel, efficiency);\n\t\tconst fuelFractionPercent = fuelFraction.mul(100);\n\n\t\t// Calculate fuel mass: fuel_mass = (fuel_fraction  dry_mass) / (1 - fuel_fraction)\n\t\tconst fuelMass = fuelFraction.mul(dryMass).div(rl.one.minus(fuelFraction));\n\n\t\tsetElement(resultFraction, rl.formatSignificant(fuelFractionPercent, \"9\", 2), \"%\");\n\t\tsetElement(resultMass, rl.formatMassWithUnit(fuelMass), \"\");\n\t};\n}\n\nexport function createSpacetimeIntervalHandler(\n\tgetTime2Input: () => HTMLInputElement | null,\n\tgetX2Input: () => HTMLInputElement | null,\n\tgetVelocityInput: () => HTMLInputElement | null,\n\tgetResultSquared: () => HTMLElement | null,\n\tgetResultType: () => HTMLElement | null,\n\tgetResultDeltaT: () => HTMLElement | null,\n\tgetResultDeltaX: () => HTMLElement | null,\n\tgetResultMinSep: () => HTMLElement | null,\n\tgetResultVelocity: () => HTMLElement | null,\n\tonDiagramDrawn?: (\n\t\tcontainer: HTMLElement,\n\t\tdata: MinkowskiData,\n\t\tcontroller: ReturnType<typeof drawMinkowskiDiagramD3> | null\n\t) => void\n): () => void {\n\treturn () => {\n\t\tconst time2Input = getTime2Input();\n\t\tconst x2Input = getX2Input();\n\t\tconst velocityInput = getVelocityInput();\n\t\tconst resultSquared = getResultSquared();\n\t\tconst resultType = getResultType();\n\t\tconst resultDeltaT = getResultDeltaT();\n\t\tconst resultDeltaX = getResultDeltaX();\n\t\tconst resultMinSep = getResultMinSep();\n\t\tconst resultVelocity = getResultVelocity();\n\t\tif (\n\t\t\t!time2Input ||\n\t\t\t!x2Input ||\n\t\t\t!velocityInput ||\n\t\t\t!resultSquared ||\n\t\t\t!resultType ||\n\t\t\t!resultDeltaT ||\n\t\t\t!resultDeltaX ||\n\t\t\t!resultMinSep ||\n\t\t\t!resultVelocity\n\t\t)\n\t\t\treturn;\n\n\t\t// Validate and clamp inputs\n\t\tlet t2Str = time2Input.value ?? \"2\";\n\t\ttry {\n\t\t\tconst t2Dec = rl.ensure(t2Str);\n\t\t\tif (t2Dec.lt(0.001)) {\n\t\t\t\tt2Str = \"0.001\";\n\t\t\t\ttime2Input.value = \"0.001\";\n\t\t\t} else if (t2Dec.gt(1000000)) {\n\t\t\t\tt2Str = \"1000000\";\n\t\t\t\ttime2Input.value = \"1000000\";\n\t\t\t}\n\t\t} catch {\n\t\t\tt2Str = \"2\";\n\t\t\ttime2Input.value = \"2\";\n\t\t}\n\n\t\tlet x2KmStr = x2Input.value ?? \"299792.458\";\n\t\ttry {\n\t\t\tconst x2KmDec = rl.ensure(x2KmStr);\n\t\t\tif (x2KmDec.lt(1)) {\n\t\t\t\tx2KmStr = \"1\";\n\t\t\t\tx2Input.value = \"1\";\n\t\t\t} else if (x2KmDec.gt(10000000000)) {\n\t\t\t\tx2KmStr = \"10000000000\";\n\t\t\t\tx2Input.value = \"10000000000\";\n\t\t\t}\n\t\t} catch {\n\t\t\tx2KmStr = \"299792.458\";\n\t\t\tx2Input.value = \"299792.458\";\n\t\t}\n\n\t\tlet velocityCStr = velocityInput.value ?? \"0.99\";\n\t\ttry {\n\t\t\tconst velocityCDec = rl.ensure(velocityCStr);\n\t\t\tif (velocityCDec.lt(-0.999)) {\n\t\t\t\tvelocityCStr = \"-0.999\";\n\t\t\t\tvelocityInput.value = \"-0.999\";\n\t\t\t} else if (velocityCDec.gt(0.999)) {\n\t\t\t\tvelocityCStr = \"0.999\";\n\t\t\t\tvelocityInput.value = \"0.999\";\n\t\t\t}\n\t\t} catch {\n\t\t\tvelocityCStr = \"0.99\";\n\t\t\tvelocityInput.value = \"0.99\";\n\t\t}\n\n\t\t// Event 1 is always at (0, 0)\n\t\tconst t1 = new Decimal(0);\n\t\tconst x1 = new Decimal(0);\n\n\t\tconst t2 = rl.ensure(t2Str);\n\t\tconst x2Km = rl.ensure(x2KmStr);\n\t\tconst velocityC = rl.ensure(velocityCStr);\n\n\t\t// Convert km to m for calculations\n\t\tconst x2 = x2Km.mul(1000);\n\n\t\t// Calculate interval squared: s = c(t) - (x)\n\t\tconst deltaT = t2.minus(t1);\n\t\tconst deltaX = x2.minus(x1);\n\t\tconst intervalSquared = rl.c.pow(2).mul(deltaT.pow(2)).minus(deltaX.pow(2));\n\n\t\t// Display interval squared in km\n\t\tconst intervalSquaredKm = intervalSquared.div(1000000);\n\t\tsetElement(resultSquared, rl.formatSignificant(intervalSquaredKm, \"0\", 1), \"km\");\n\n\t\t// Interpret the interval\n\t\tconst tolerance = new Decimal(1e-10);\n\t\tif (intervalSquared.abs().lt(tolerance)) {\n\t\t\t// Lightlike interval\n\t\t\tsetElement(resultType, \"Lightlike: Light-speed connection\", \"\");\n\t\t\tsetElement(resultMinSep, \"N/A (lightlike)\", \"\");\n\t\t\tsetElement(resultVelocity, \"1c\", \"\");\n\t\t} else if (intervalSquared.gt(0)) {\n\t\t\t// Timelike interval - causally connected\n\t\t\tconst properTime = intervalSquared.sqrt().div(rl.c);\n\t\t\tsetElement(\n\t\t\t\tresultType,\n\t\t\t\t`Timelike: ${rl.formatSignificant(properTime, \"0\", 3)} s - Events are causally connected`,\n\t\t\t\t\"\"\n\t\t\t);\n\n\t\t\t// For timelike: minimum separation is proper time (in frame where events occur at same place)\n\t\t\tsetElement(resultMinSep, rl.formatSignificant(properTime, \"0\", 3), \"s\");\n\n\t\t\t// Required velocity: v = x/t\n\t\t\tconst requiredVel = deltaX.div(deltaT);\n\t\t\tconst requiredVelC = requiredVel.div(rl.c);\n\t\t\tsetElement(resultVelocity, rl.formatSignificant(requiredVelC, \"9\", 3), \"c\");\n\t\t} else {\n\t\t\t// Spacelike interval - not causally connected\n\t\t\tconst properDistanceM = intervalSquared.abs().sqrt();\n\t\t\tconst properDistanceKm = properDistanceM.div(1000);\n\t\t\tsetElement(\n\t\t\t\tresultType,\n\t\t\t\t`Spacelike: ${rl.formatSignificant(properDistanceKm, \"0\", 1)} km - Events cannot be causally connected`,\n\t\t\t\t\"\"\n\t\t\t);\n\n\t\t\t// For spacelike: minimum separation is proper distance (in frame where events are simultaneous)\n\t\t\tsetElement(resultMinSep, rl.formatSignificant(properDistanceKm, \"0\", 3), \"km\");\n\n\t\t\t// Required velocity to make events simultaneous: v = ct/x\n\t\t\tconst requiredVel = rl.c.pow(2).mul(deltaT).div(deltaX);\n\t\t\tconst requiredVelC = requiredVel.div(rl.c);\n\t\t\tsetElement(resultVelocity, rl.formatSignificant(requiredVelC, \"9\", 3), \"c\");\n\t\t}\n\n\t\t// Calculate Lorentz transformation\n\t\tconst v = velocityC.mul(rl.c); // Convert from c to m/s\n\t\tconst gamma = rl.lorentzFactor(v);\n\n\t\t// t' = (t - vx/c)\n\t\tconst deltaTprime = gamma.mul(deltaT.minus(v.mul(deltaX).div(rl.c.pow(2))));\n\n\t\t// x' = (x - vt)\n\t\tconst deltaXprimeM = gamma.mul(deltaX.minus(v.mul(deltaT)));\n\t\tconst deltaXprimeKm = deltaXprimeM.div(1000);\n\n\t\tsetElement(resultDeltaT, rl.formatSignificant(deltaTprime, \"0\", 3), \"s\");\n\t\tsetElement(resultDeltaX, rl.formatSignificant(deltaXprimeKm, \"0\", 1), \"km\");\n\n\t\t// Draw Minkowski diagram\n\t\tconst container = document.getElementById(\"minkowskiContainer\");\n\t\tif (container) {\n\t\t\t// Determine interval type\n\t\t\tlet intervalType: \"timelike\" | \"spacelike\" | \"lightlike\";\n\t\t\tif (intervalSquared.abs().lt(tolerance)) {\n\t\t\t\tintervalType = \"lightlike\";\n\t\t\t} else if (intervalSquared.gt(0)) {\n\t\t\t\tintervalType = \"timelike\";\n\t\t\t} else {\n\t\t\t\tintervalType = \"spacelike\";\n\t\t\t}\n\n\t\t\tconst diagramData: MinkowskiData = {\n\t\t\t\ttime: t2.toNumber(),\n\t\t\t\tdistance: x2Km.toNumber(),\n\t\t\t\tvelocity: velocityC.toNumber(),\n\t\t\t\tdeltaTPrime: deltaTprime.toNumber(),\n\t\t\t\tdeltaXPrime: deltaXprimeKm.toNumber(),\n\t\t\t\tintervalType,\n\t\t\t\t// Decimal versions for display\n\t\t\t\ttimeDecimal: t2,\n\t\t\t\tdistanceDecimal: x2Km,\n\t\t\t\tvelocityDecimal: velocityC,\n\t\t\t\tdeltaTPrimeDecimal: deltaTprime,\n\t\t\t\tdeltaXPrimeDecimal: deltaXprimeKm,\n\t\t\t};\n\n\t\t\t// Notify caller that diagram was drawn (for resize handling)\n\t\t\t// The callback will handle creating or updating the diagram\n\t\t\tif (onDiagramDrawn) {\n\t\t\t\tonDiagramDrawn(container, diagramData, null);\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Create handler for chart time mode toggle buttons\n */\nexport function createChartTimeModeHandler(\n\tchartId: string,\n\tchartRegistry: { current: ChartRegistry }\n): (mode: \"proper\" | \"coordinate\") => void {\n\treturn (mode: \"proper\" | \"coordinate\") => {\n\t\t// Update state\n\t\tchartTimeModes[chartId] = mode;\n\n\t\t// Update button states\n\t\tconst buttons = document.querySelectorAll(`[data-chart=\"${chartId}\"]`);\n\t\tbuttons.forEach(btn => {\n\t\t\tconst btnElement = btn as HTMLButtonElement;\n\t\t\tif (btnElement.dataset.mode === mode) {\n\t\t\t\tbtnElement.classList.add(\"active\");\n\t\t\t} else {\n\t\t\t\tbtnElement.classList.remove(\"active\");\n\t\t\t}\n\t\t});\n\n\t\t// Update the chart's x-axis max directly without recalculating\n\t\tconst chartName = chartId + \"Chart\";\n\t\tconst chart = chartRegistry.current.get(chartName);\n\n\t\tif (chart && chart.data.datasets.length >= 2) {\n\t\t\t// Get max x values from the existing datasets\n\t\t\t// Dataset 0 is proper time, Dataset 1 is coordinate time\n\t\t\tconst properTimeData = chart.data.datasets[0].data as Array<{ x: number; y: number }>;\n\t\t\tconst coordTimeData = chart.data.datasets[1].data as Array<{ x: number; y: number }>;\n\n\t\t\tconst maxProperTime = Math.max(...properTimeData.map(d => d.x));\n\t\t\tconst maxCoordTime = Math.max(...coordTimeData.map(d => d.x));\n\n\t\t\t// Update x-axis max based on mode\n\t\t\tconst newXMax = mode === \"proper\" ? maxProperTime : maxCoordTime;\n\n\t\t\tif (chart.options.scales?.x) {\n\t\t\t\tchart.options.scales.x.max = newXMax;\n\t\t\t\tchart.update(\"none\"); // Update without animation for instant response\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Get current chart time modes\n */\nexport function getChartTimeModes() {\n\treturn { ...chartTimeModes };\n}\n\n/**\n * Set chart time mode\n */\nexport function setChartTimeMode(chartId: string, mode: \"proper\" | \"coordinate\") {\n\tif (chartId in chartTimeModes) {\n\t\tchartTimeModes[chartId] = mode;\n\t}\n}\n\n/**\n * Create handler for mass chart time scale slider\n */\nexport function createMassChartSliderHandler(\n\tchartId: string,\n\tgetSlider: () => HTMLInputElement | null,\n\tgetValueDisplay: () => HTMLElement | null,\n\tunit: \"days\" | \"years\",\n\tchartRegistry: { current: ChartRegistry }\n): () => void {\n\treturn () => {\n\t\tconst slider = getSlider();\n\t\tconst valueDisplay = getValueDisplay();\n\t\tif (!slider || !valueDisplay) return;\n\n\t\tconst newMax = parseFloat(slider.value);\n\n\t\t// Update display value\n\t\tvalueDisplay.textContent = `${newMax.toFixed(unit === \"days\" ? 0 : 1)} ${unit}`;\n\n\t\t// Update the chart's x-axis max directly without recalculating\n\t\tconst chart = chartRegistry.current.get(chartId);\n\t\tif (chart && chart.options.scales?.x) {\n\t\t\tchart.options.scales.x.max = newMax;\n\t\t\tchart.update(\"none\"); // Update without animation for instant response\n\t\t}\n\t};\n}\n\n/**\n * Initialize mass chart slider with correct range from data\n */\nexport function initializeMassChartSlider(\n\tchartId: string,\n\tsliderId: string,\n\tvalueDisplayId: string,\n\tunit: \"days\" | \"years\",\n\tchartRegistry: { current: ChartRegistry }\n): void {\n\tconst chart = chartRegistry.current.get(chartId);\n\tif (!chart || !chart.data.datasets.length) return;\n\n\t// Get max x value from first dataset (all mass datasets have same x range)\n\tconst data = chart.data.datasets[0].data as Array<{ x: number; y: number }>;\n\tconst dataMax = Math.max(...data.map(d => d.x));\n\t// Round up to nearest 0.5 to encompass the full calculation result\n\tconst maxValue = Math.ceil(dataMax * 2) / 2;\n\n\t// Update slider attributes\n\tconst slider = document.getElementById(sliderId) as HTMLInputElement;\n\tconst valueDisplay = document.getElementById(valueDisplayId);\n\tif (slider && valueDisplay) {\n\t\tslider.max = maxValue.toString();\n\t\tslider.value = maxValue.toString();\n\t\tvalueDisplay.textContent = `${maxValue.toFixed(unit === \"days\" ? 0 : 1)} ${unit}`;\n\t}\n}\n\n/**\n * Calculate adaptive exponent based on max distance\n * - Small distances (<10 ly): exponent ~1.5 for more even distribution\n * - Large distances (>1000 ly): exponent ~3 for fine control at start\n */\nfunction getDistanceExponent(maxDistance: number): number {\n\tif (maxDistance <= 1) return 1.5;\n\tif (maxDistance >= 1000) return 3;\n\t// Logarithmic interpolation between 1.5 and 3\n\tconst logMin = Math.log10(1);\n\tconst logMax = Math.log10(1000);\n\tconst logDist = Math.log10(maxDistance);\n\tconst t = (logDist - logMin) / (logMax - logMin);\n\treturn 1.5 + t * 1.5; // Ranges from 1.5 to 3\n}\n\n/**\n * Convert slider percentage (0-100) to actual distance using adaptive power scale\n * Exponent varies based on max distance for optimal responsiveness\n */\nexport function sliderToDistance(percentage: number, maxDistance: number): number {\n\tconst exponent = getDistanceExponent(maxDistance);\n\treturn maxDistance * Math.pow(percentage / 100, exponent);\n}\n\n/**\n * Convert actual distance to slider percentage (0-100) using inverse power scale\n */\nexport function distanceToSlider(distance: number, maxDistance: number): number {\n\tif (maxDistance <= 0) return 100;\n\tconst exponent = getDistanceExponent(maxDistance);\n\treturn 100 * Math.pow(distance / maxDistance, 1 / exponent);\n}\n\n/**\n * Create handler for position/velocity chart distance scale slider\n * Uses power scale for fine control at small distances\n */\nexport function createPositionVelocitySliderHandler(\n\tchartId: string,\n\tgetSlider: () => HTMLInputElement | null,\n\tgetValueDisplay: () => HTMLElement | null,\n\tchartRegistry: { current: ChartRegistry }\n): () => void {\n\treturn () => {\n\t\tconst slider = getSlider();\n\t\tconst valueDisplay = getValueDisplay();\n\t\tif (!slider || !valueDisplay) return;\n\n\t\t// Get max distance from data attribute\n\t\tconst maxDistance = parseFloat(slider.dataset.maxDistance || slider.max);\n\t\tconst sliderPercent = parseFloat(slider.value);\n\n\t\t// Convert slider percentage to actual distance using power scale\n\t\tconst distance = sliderToDistance(sliderPercent, maxDistance);\n\n\t\t// Ensure minimum chart range to prevent negative x-axis values\n\t\tconst chartDistance = Math.max(0.01, distance);\n\n\t\t// Update display value with appropriate precision\n\t\tconst displayValue = distance < 10 ? distance.toFixed(2) : distance.toFixed(1);\n\t\tvalueDisplay.textContent = `${displayValue} ly`;\n\n\t\t// Update the chart's x-axis max directly without recalculating\n\t\tconst chart = chartRegistry.current.get(chartId);\n\t\tif (chart && chart.options.scales?.x) {\n\t\t\tchart.options.scales.x.max = chartDistance;\n\t\t\tchart.options.scales.x.min = 0; // Ensure axis starts at 0\n\t\t\tchart.update(\"none\"); // Update without animation for instant response\n\t\t}\n\t};\n}\n\n/**\n * Initialize position/velocity chart slider with correct range from data\n * Uses power scale (0-100%) internally for fine control at small distances\n */\nexport function initializePositionVelocitySlider(\n\tchartId: string,\n\tsliderId: string,\n\tvalueDisplayId: string,\n\tchartRegistry: { current: ChartRegistry }\n): void {\n\tconst chart = chartRegistry.current.get(chartId);\n\tif (!chart || !chart.data.datasets.length) return;\n\n\t// Get max x value across all datasets (flip-and-burn has accel + decel phases)\n\tconst maxValue = Math.max(\n\t\t...chart.data.datasets.flatMap(dataset => {\n\t\t\tconst data = dataset.data as Array<{ x: number; y: number }>;\n\t\t\treturn data.map(d => d.x);\n\t\t})\n\t);\n\n\t// Update slider to use percentage scale (0-100)\n\t// Store actual max distance in data attribute for conversion\n\tconst slider = document.getElementById(sliderId) as HTMLInputElement;\n\tconst valueDisplay = document.getElementById(valueDisplayId);\n\tif (slider && valueDisplay) {\n\t\tslider.min = \"0\";\n\t\tslider.max = \"100\";\n\t\tslider.step = \"0.5\"; // 0.5% steps for smooth sliding\n\t\tslider.value = \"100\"; // Start at max (100%)\n\t\tslider.dataset.maxDistance = maxValue.toString();\n\t\tvalueDisplay.textContent = `${maxValue.toFixed(1)} ly`;\n\t}\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","/**\n * Modernized color palette for Minkowski diagram\n * All colors meet WCAG AA contrast requirements\n */\n\nexport const COLORS = {\n\t// Primary frame colors\n\telectricBlue: \"#00B4D8\", // Original frame (ct, x)\n\tquantumGreen: \"#06FFA5\", // Moving frame (ct', x')\n\tphotonGold: \"#FFB703\", // Light cones\n\tplasmaWhite: \"#F8F9FA\", // Events, labels\n\n\t// Interval type indicators\n\ttimelike: \"#4CC9F0\", // Causally connected\n\tspacelike: \"#FB8500\", // Not causally connected\n\tlightlike: \"#FFD60A\", // On light cone\n\n\t// UI elements\n\tbackground: \"rgba(0, 0, 0, 0)\",\n\ttooltipBg: \"rgba(10, 14, 39, 0.95)\",\n\ttooltipBorder: \"#00B4D8\",\n\n\t// Opacity modifiers\n\tlightConeFill: \"15\", // Hex opacity for fills\n\tdashedLine: \"80\", // Hex opacity for dashed lines\n\tsimultaneity: \"50\", // Hex opacity for simultaneity lines\n} as const;\n\nexport type ColorKey = keyof typeof COLORS;\n","// Core D3-based Minkowski diagram functions - shared between implementations\nimport { select, Selection } from \"d3-selection\";\nimport { COLORS as D3_COLORS } from \"./minkowski-colors\";\nimport type { ScaleSet, TooltipController } from \"./minkowski-types\";\nimport Decimal from \"decimal.js\";\nimport * as rl from \"../relativity_lib\";\n\n// Speed of light constant\nexport const C = 299792.458; // km/s\n\n/**\n * Speed of light as Decimal (m/s) - re-export from relativity_lib for convenience\n */\nexport const C_DECIMAL = rl.c;\n\n/**\n * Debounce helper for resize events\n */\nexport function debounce<T extends (...args: any[]) => any>(\n\tfunc: T,\n\twait: number\n): (...args: Parameters<T>) => void {\n\tlet timeout: number | undefined;\n\treturn (...args: Parameters<T>) => {\n\t\tclearTimeout(timeout);\n\t\ttimeout = window.setTimeout(() => func(...args), wait);\n\t};\n}\n\n/**\n * Format coordinate value for display using Decimal precision\n */\nexport function formatCoordinate(value: Decimal): string {\n\tconst abs = value.abs();\n\tif (abs.lt(0.001) || abs.gt(10000)) {\n\t\treturn rl.formatSignificant(value, \"0\", 2);\n\t}\n\treturn rl.formatSignificant(value, \"0\", 2);\n}\n\n/**\n * Calculate Lorentz factor (gamma)\n */\nexport function calculateGamma(beta: number): number {\n\treturn 1 / Math.sqrt(1 - beta * beta);\n}\n\n/**\n * Perform Lorentz transformation\n */\nexport function lorentzTransform(\n\tct: number,\n\tx: number,\n\tbeta: number\n): { ctPrime: number; xPrime: number } {\n\tconst gamma = calculateGamma(beta);\n\treturn {\n\t\tctPrime: gamma * (ct - beta * x),\n\t\txPrime: gamma * (x - beta * ct),\n\t};\n}\n\n/**\n * Calculate light cone geometry at the origin (x=0)\n * Returns coordinates for future and past light cone boundaries at 45 degrees\n */\nexport function calculateLightConeAtOrigin(\n\tcurrentCt: number,\n\textent: number\n): {\n\tfutureCone: { x1: number; ct1: number; x2: number; ct2: number };\n\tpastCone: { x1: number; ct1: number; x2: number; ct2: number };\n} {\n\t// Future light cone: ct increases as |x| increases from origin\n\t// Line from (-extent, currentCt - extent) to (+extent, currentCt + extent)\n\tconst futureCone = {\n\t\tx1: -extent,\n\t\tct1: currentCt - extent,\n\t\tx2: extent,\n\t\tct2: currentCt + extent,\n\t};\n\n\t// Past light cone: ct decreases as |x| increases from origin\n\t// Line from (-extent, currentCt + extent) to (+extent, currentCt - extent)\n\tconst pastCone = {\n\t\tx1: -extent,\n\t\tct1: currentCt + extent,\n\t\tx2: extent,\n\t\tct2: currentCt - extent,\n\t};\n\n\treturn { futureCone, pastCone };\n}\n\n/**\n * Create coordinate scales for spacetime diagram\n * @param maxCoord Maximum coordinate value for scaling\n * @param size Canvas size in pixels\n */\nexport function createScaleSet(maxCoord: number, size: number): ScaleSet {\n\tconst centerX = size / 2;\n\tconst centerY = size / 2;\n\tconst scale = size / 2 / maxCoord;\n\n\treturn {\n\t\txScale: (xCoord: number) => centerX + xCoord * scale,\n\t\tyScale: (ctCoord: number) => centerY - ctCoord * scale,\n\t\tmaxCoord,\n\t};\n}\n\n/**\n * Setup SVG element with proper structure and definitions\n */\nexport function setupSVG(\n\tcontainer: HTMLElement,\n\tsize: number = 900\n): Selection<SVGSVGElement, unknown, null, undefined> {\n\tconst padding = 10; // Padding to prevent arrow markers from being clipped\n\n\t// Remove existing SVG if present\n\tselect(container).select(\"svg\").remove();\n\n\t// Create new SVG with viewBox\n\tconst svg = select(container)\n\t\t.append(\"svg\")\n\t\t.attr(\"viewBox\", `${-padding} ${-padding} ${size + 2 * padding} ${size + 2 * padding}`)\n\t\t.attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n\t\t.style(\"width\", \"100%\")\n\t\t.style(\"height\", \"auto\")\n\t\t.style(\"display\", \"block\");\n\n\t// Add style block for text\n\tsvg.append(\"defs\").append(\"style\").text(`\n            text {\n                font-family: 'IBM Plex Mono', monospace;\n                user-select: none;\n                pointer-events: none;\n            }\n            text.label { font-size: 11px; }\n            text.header { font-size: 13px; font-weight: bold; }\n            text.secondary { font-size: 10px; }\n\n            @media (max-width: 768px) {\n                text.label { font-size: 10px; }\n                text.header { font-size: 12px; }\n            }\n\n            @media (max-width: 480px) {\n                text.label { font-size: 10px; }\n                text.header { font-size: 11px; }\n                text.secondary { display: none; }\n            }\n        `);\n\n\treturn svg;\n}\n\n/**\n * Create gradient and marker definitions for axes\n */\nexport function createAxisDefinitions(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>\n): void {\n\tconst defs = svg.select(\"defs\");\n\n\t// Gradient for blue axes\n\tdefs\n\t\t.append(\"linearGradient\")\n\t\t.attr(\"id\", \"axisGradientBlue\")\n\t\t.attr(\"x1\", \"0%\")\n\t\t.attr(\"y1\", \"0%\")\n\t\t.attr(\"x2\", \"0%\")\n\t\t.attr(\"y2\", \"100%\")\n\t\t.selectAll(\"stop\")\n\t\t.data([\n\t\t\t{ offset: \"0%\", color: D3_COLORS.electricBlue, opacity: 0.3 },\n\t\t\t{ offset: \"50%\", color: D3_COLORS.electricBlue, opacity: 1 },\n\t\t\t{ offset: \"100%\", color: D3_COLORS.electricBlue, opacity: 0.3 },\n\t\t])\n\t\t.join(\"stop\")\n\t\t.attr(\"offset\", d => d.offset)\n\t\t.attr(\"stop-color\", d => d.color)\n\t\t.attr(\"stop-opacity\", d => d.opacity);\n\n\t// Gradient for green axes\n\tdefs\n\t\t.append(\"linearGradient\")\n\t\t.attr(\"id\", \"axisGradientGreen\")\n\t\t.attr(\"x1\", \"0%\")\n\t\t.attr(\"y1\", \"0%\")\n\t\t.attr(\"x2\", \"0%\")\n\t\t.attr(\"y2\", \"100%\")\n\t\t.selectAll(\"stop\")\n\t\t.data([\n\t\t\t{ offset: \"0%\", color: D3_COLORS.quantumGreen, opacity: 0.3 },\n\t\t\t{ offset: \"50%\", color: D3_COLORS.quantumGreen, opacity: 1 },\n\t\t\t{ offset: \"100%\", color: D3_COLORS.quantumGreen, opacity: 0.3 },\n\t\t])\n\t\t.join(\"stop\")\n\t\t.attr(\"offset\", d => d.offset)\n\t\t.attr(\"stop-color\", d => d.color)\n\t\t.attr(\"stop-opacity\", d => d.opacity);\n\n\t// Gradient for amber axes\n\tdefs\n\t\t.append(\"linearGradient\")\n\t\t.attr(\"id\", \"axisGradientAmber\")\n\t\t.attr(\"x1\", \"0%\")\n\t\t.attr(\"y1\", \"0%\")\n\t\t.attr(\"x2\", \"0%\")\n\t\t.attr(\"y2\", \"100%\")\n\t\t.selectAll(\"stop\")\n\t\t.data([\n\t\t\t{ offset: \"0%\", color: D3_COLORS.photonGold, opacity: 0.3 },\n\t\t\t{ offset: \"50%\", color: D3_COLORS.photonGold, opacity: 1 },\n\t\t\t{ offset: \"100%\", color: D3_COLORS.photonGold, opacity: 0.3 },\n\t\t])\n\t\t.join(\"stop\")\n\t\t.attr(\"offset\", d => d.offset)\n\t\t.attr(\"stop-color\", d => d.color)\n\t\t.attr(\"stop-opacity\", d => d.opacity);\n\n\t// Glow filter for interactive elements\n\tconst filter = defs\n\t\t.append(\"filter\")\n\t\t.attr(\"id\", \"glow\")\n\t\t.attr(\"x\", \"-50%\")\n\t\t.attr(\"y\", \"-50%\")\n\t\t.attr(\"width\", \"200%\")\n\t\t.attr(\"height\", \"200%\");\n\n\tfilter.append(\"feGaussianBlur\").attr(\"stdDeviation\", \"3\").attr(\"result\", \"coloredBlur\");\n\n\tconst feMerge = filter.append(\"feMerge\");\n\tfeMerge.append(\"feMergeNode\").attr(\"in\", \"coloredBlur\");\n\tfeMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\n\n\t// Arrow markers for different colored axes\n\tconst markerColors = [\n\t\t{ id: \"arrowBlue\", color: D3_COLORS.electricBlue },\n\t\t{ id: \"arrowGreen\", color: D3_COLORS.quantumGreen },\n\t\t{ id: \"arrowAmber\", color: D3_COLORS.photonGold },\n\t];\n\n\tmarkerColors.forEach(({ id, color }) => {\n\t\tdefs\n\t\t\t.append(\"marker\")\n\t\t\t.attr(\"id\", id)\n\t\t\t.attr(\"viewBox\", \"0 0 10 10\")\n\t\t\t.attr(\"refX\", \"5\")\n\t\t\t.attr(\"refY\", \"5\")\n\t\t\t.attr(\"markerWidth\", \"6\")\n\t\t\t.attr(\"markerHeight\", \"6\")\n\t\t\t.attr(\"orient\", \"auto-start-reverse\")\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"d\", \"M 0 0 L 10 5 L 0 10 z\")\n\t\t\t.attr(\"fill\", color);\n\t});\n}\n\n/**\n * Create standard layer groups for Minkowski diagram\n */\nexport function createLayerGroups(svg: Selection<SVGSVGElement, unknown, null, undefined>): void {\n\tsvg.append(\"g\").attr(\"class\", \"background\");\n\tsvg.append(\"g\").attr(\"class\", \"light-cones\");\n\tsvg.append(\"g\").attr(\"class\", \"simultaneity-lines\");\n\tsvg.append(\"g\").attr(\"class\", \"axes\");\n\tsvg.append(\"g\").attr(\"class\", \"worldlines\");\n\tsvg.append(\"g\").attr(\"class\", \"events\");\n\tsvg.append(\"g\").attr(\"class\", \"labels\");\n}\n\n/**\n * Render standard orthogonal axes (ct, x)\n */\nexport function renderStandardAxes(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tlabels: { ctLabel: string; xLabel: string } = { ctLabel: \"ct\", xLabel: \"x\" }\n): void {\n\tconst extent = scales.maxCoord;\n\tconst axesGroup = svg.select(\"g.axes\");\n\n\tconst axesData = [\n\t\t{ x1: 0, y1: -extent, x2: 0, y2: extent, axis: labels.ctLabel, isTimeAxis: true },\n\t\t{ x1: -extent, y1: 0, x2: extent, y2: 0, axis: labels.xLabel, isTimeAxis: false },\n\t];\n\n\taxesGroup\n\t\t.selectAll(\"line.axis-standard\")\n\t\t.data(axesData)\n\t\t.join(\"line\")\n\t\t.attr(\"class\", \"axis-standard\")\n\t\t.attr(\"data-axis\", d => d.axis)\n\t\t.attr(\"stroke\", D3_COLORS.electricBlue)\n\t\t.attr(\"stroke-width\", 3)\n\t\t.attr(\"stroke-dasharray\", d => (d.isTimeAxis ? \"10,5\" : null))\n\t\t.attr(\"marker-start\", \"url(#arrowBlue)\")\n\t\t.attr(\"marker-end\", \"url(#arrowBlue)\")\n\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t.attr(\"y2\", d => scales.yScale(d.y2))\n\t\t.style(\"cursor\", \"pointer\");\n}\n\n/**\n * Render Lorentz-transformed axes (ct', x') at given velocity\n */\nexport function renderTransformedAxes(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tbeta: number,\n\tlabels: { ctLabel: string; xLabel: string },\n\tcolor: string,\n\tmarkerUrl: string,\n\tcssClass: string,\n\torigin: { x: number; ct: number } = { x: 0, ct: 0 }\n): void {\n\tconst extent = scales.maxCoord;\n\tconst angle = Math.atan(beta);\n\tconst cosAngle = Math.cos(angle);\n\tconst sinAngle = Math.sin(angle);\n\n\tconst axesGroup = svg.select(\"g.axes\");\n\n\t// Calculate axis lengths\n\tconst ctPrimeLength = extent / cosAngle;\n\tconst xPrimeLength = extent / cosAngle;\n\n\tconst axesData = [\n\t\t{\n\t\t\tx1: origin.x + -ctPrimeLength * sinAngle,\n\t\t\ty1: origin.ct + -ctPrimeLength * cosAngle,\n\t\t\tx2: origin.x + ctPrimeLength * sinAngle,\n\t\t\ty2: origin.ct + ctPrimeLength * cosAngle,\n\t\t\taxis: labels.ctLabel,\n\t\t\tisTimeAxis: true,\n\t\t},\n\t\t{\n\t\t\tx1: origin.x + -xPrimeLength * cosAngle,\n\t\t\ty1: origin.ct + -xPrimeLength * sinAngle,\n\t\t\tx2: origin.x + xPrimeLength * cosAngle,\n\t\t\ty2: origin.ct + xPrimeLength * sinAngle,\n\t\t\taxis: labels.xLabel,\n\t\t\tisTimeAxis: false,\n\t\t},\n\t];\n\n\taxesGroup\n\t\t.selectAll(`line.${cssClass}`)\n\t\t.data(axesData)\n\t\t.join(\"line\")\n\t\t.attr(\"class\", cssClass)\n\t\t.attr(\"data-axis\", d => d.axis)\n\t\t.attr(\"stroke\", color)\n\t\t.attr(\"stroke-width\", 3)\n\t\t.attr(\"stroke-dasharray\", d => (d.isTimeAxis ? \"10,5\" : null))\n\t\t.attr(\"marker-start\", markerUrl)\n\t\t.attr(\"marker-end\", markerUrl)\n\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t.attr(\"y2\", d => scales.yScale(d.y2))\n\t\t.style(\"cursor\", \"pointer\");\n}\n\n/**\n * Render light cone from a point\n */\nexport function renderLightCone(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tct: number,\n\tx: number,\n\textent: number,\n\tcssClass: string = \"light-cone\"\n): void {\n\tconst lightConesGroup = svg.select(\"g.light-cones\");\n\tconst largeExtent = extent * 2;\n\n\tconst lineData = [\n\t\t{ x1: x - largeExtent, y1: ct - largeExtent, x2: x + largeExtent, y2: ct + largeExtent },\n\t\t{ x1: x - largeExtent, y1: ct + largeExtent, x2: x + largeExtent, y2: ct - largeExtent },\n\t];\n\n\tlightConesGroup\n\t\t.selectAll(`line.${cssClass}`)\n\t\t.data(lineData)\n\t\t.join(\"line\")\n\t\t.attr(\"class\", cssClass)\n\t\t.attr(\"stroke\", `${D3_COLORS.photonGold}${D3_COLORS.dashedLine}`)\n\t\t.attr(\"stroke-width\", 2)\n\t\t.attr(\"stroke-dasharray\", \"5,5\")\n\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t.attr(\"y2\", d => scales.yScale(d.y2))\n\t\t.style(\"cursor\", \"pointer\");\n}\n\n/**\n * Render background grid\n */\nexport function renderGrid(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet\n): void {\n\tconst backgroundGroup = svg.select(\"g.background\");\n\tconst maxCoord = scales.maxCoord;\n\tconst gridSpacing = Math.pow(10, Math.floor(Math.log10(maxCoord / 5)));\n\n\tconst gridLines: Array<{ x1: number; y1: number; x2: number; y2: number }> = [];\n\n\t// Vertical grid lines\n\tfor (let x = -maxCoord; x <= maxCoord; x += gridSpacing) {\n\t\tif (Math.abs(x) > 0.01) {\n\t\t\t// Skip origin\n\t\t\tgridLines.push({ x1: x, y1: -maxCoord, x2: x, y2: maxCoord });\n\t\t}\n\t}\n\n\t// Horizontal grid lines\n\tfor (let ct = -maxCoord; ct <= maxCoord; ct += gridSpacing) {\n\t\tif (Math.abs(ct) > 0.01) {\n\t\t\t// Skip origin\n\t\t\tgridLines.push({ x1: -maxCoord, y1: ct, x2: maxCoord, y2: ct });\n\t\t}\n\t}\n\n\tbackgroundGroup\n\t\t.selectAll(\"line.grid\")\n\t\t.data(gridLines)\n\t\t.join(\"line\")\n\t\t.attr(\"class\", \"grid\")\n\t\t.attr(\"stroke\", `${D3_COLORS.electricBlue}15`)\n\t\t.attr(\"stroke-width\", 1)\n\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n}\n\n/**\n * Create tooltip system for Minkowski diagram\n */\nexport function createTooltip(container: HTMLElement): TooltipController {\n\tconst tooltip = select(container)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"minkowski-tooltip\")\n\t\t.style(\"position\", \"fixed\")\n\t\t.style(\"background\", D3_COLORS.tooltipBg)\n\t\t.style(\"border\", `1px solid ${D3_COLORS.tooltipBorder}`)\n\t\t.style(\"padding\", \"8px 12px\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"12px\")\n\t\t.style(\"color\", D3_COLORS.plasmaWhite)\n\t\t.style(\"pointer-events\", \"none\")\n\t\t.style(\"opacity\", \"0\")\n\t\t.style(\"z-index\", \"10000\")\n\t\t.style(\"box-shadow\", `0 0 15px ${D3_COLORS.tooltipBorder}80`)\n\t\t.style(\"transition\", \"opacity 200ms\");\n\n\treturn {\n\t\tshow(content: string, x: number, y: number) {\n\t\t\ttooltip.html(content).style(\"left\", `${x}px`).style(\"top\", `${y}px`).style(\"opacity\", \"1\");\n\t\t},\n\t\thide() {\n\t\t\ttooltip.style(\"opacity\", \"0\");\n\t\t},\n\t\tdestroy() {\n\t\t\ttooltip.remove();\n\t\t},\n\t\treattach() {\n\t\t\t// To be implemented by specific diagram types\n\t\t},\n\t};\n}\n","// D3 imports for new implementation\nimport { select, Selection } from \"d3-selection\";\nimport \"d3-transition\"; // Enables .transition() method on selections\nimport { easeCubicInOut } from \"d3-ease\";\nimport { timer } from \"d3-timer\";\nimport Decimal from \"decimal.js\";\nimport { COLORS as D3_COLORS } from \"./minkowski-colors\";\nimport type {\n\tMinkowskiDiagramController,\n\tScaleSet,\n\tTooltipController,\n\tAnimationController,\n\tMinkowskiData,\n} from \"./minkowski-types\";\nimport { C, debounce, formatCoordinate } from \"./minkowski-core\";\nimport * as rl from \"../relativity_lib\";\n\n/**\n * Re-export types for external use. This module serves as the public API for\n * the standard Minkowski diagram - consumers should import types from here\n * rather than directly from minkowski-types.ts.\n */\nexport type {\n\tMinkowskiData,\n\tMinkowskiDiagramController,\n\tScaleSet,\n\tTooltipController,\n\tAnimationController,\n};\n\n/**\n * Create coordinate scales for spacetime diagram\n */\nfunction createScales(data: MinkowskiData, size: number): ScaleSet {\n\tconst ct = data.time * C;\n\tconst x = data.distance;\n\t// Calculate extent with 20% padding - use only original frame for fixed scale\n\tconst maxCoord = Math.max(Math.abs(ct), Math.abs(x)) * 1.2;\n\n\tconst centerX = size / 2;\n\tconst centerY = size / 2;\n\tconst scale = size / 2 / maxCoord;\n\n\treturn {\n\t\txScale: (xCoord: number) => centerX + xCoord * scale,\n\t\tyScale: (ctCoord: number) => centerY - ctCoord * scale,\n\t\tmaxCoord,\n\t};\n}\n\n/**\n * Setup or select SVG element with proper structure\n */\nexport function setupSVG(\n\tcontainer: HTMLElement\n): Selection<SVGSVGElement, unknown, null, undefined> {\n\tconst size = 900;\n\tconst padding = 10; // Padding to prevent arrow markers from being clipped\n\n\t// Remove existing SVG if present\n\tselect(container).select(\"svg\").remove();\n\n\t// Create new SVG with viewBox (with padding for arrow markers)\n\tconst svg = select(container)\n\t\t.append(\"svg\")\n\t\t.attr(\"viewBox\", `${-padding} ${-padding} ${size + 2 * padding} ${size + 2 * padding}`)\n\t\t.attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n\t\t.style(\"width\", \"100%\")\n\t\t.style(\"height\", \"auto\")\n\t\t.style(\"display\", \"block\");\n\n\t// Add style block for text\n\tsvg.append(\"defs\").append(\"style\").text(`\n            text {\n                font-family: 'IBM Plex Mono', monospace;\n                user-select: none;\n                pointer-events: none;\n            }\n            text.label { font-size: 11px; }\n            text.header { font-size: 13px; font-weight: bold; }\n            text.secondary { font-size: 10px; }\n\n            @media (max-width: 768px) {\n                text.label { font-size: 10px; }\n                text.header { font-size: 12px; }\n            }\n\n            @media (max-width: 480px) {\n                text.label { font-size: 10px; }\n                text.header { font-size: 11px; }\n                text.secondary { display: none; }\n            }\n        `);\n\n\t// Add gradient definitions\n\tconst defs = svg.select(\"defs\");\n\n\t// Gradient for original frame axis\n\tdefs\n\t\t.append(\"linearGradient\")\n\t\t.attr(\"id\", \"axisGradientBlue\")\n\t\t.attr(\"x1\", \"0%\")\n\t\t.attr(\"y1\", \"0%\")\n\t\t.attr(\"x2\", \"0%\")\n\t\t.attr(\"y2\", \"100%\")\n\t\t.selectAll(\"stop\")\n\t\t.data([\n\t\t\t{ offset: \"0%\", color: D3_COLORS.electricBlue, opacity: 0.3 },\n\t\t\t{ offset: \"50%\", color: D3_COLORS.electricBlue, opacity: 1 },\n\t\t\t{ offset: \"100%\", color: D3_COLORS.electricBlue, opacity: 0.3 },\n\t\t])\n\t\t.join(\"stop\")\n\t\t.attr(\"offset\", d => d.offset)\n\t\t.attr(\"stop-color\", d => d.color)\n\t\t.attr(\"stop-opacity\", d => d.opacity);\n\n\t// Gradient for moving frame axis\n\tdefs\n\t\t.append(\"linearGradient\")\n\t\t.attr(\"id\", \"axisGradientGreen\")\n\t\t.attr(\"x1\", \"0%\")\n\t\t.attr(\"y1\", \"0%\")\n\t\t.attr(\"x2\", \"0%\")\n\t\t.attr(\"y2\", \"100%\")\n\t\t.selectAll(\"stop\")\n\t\t.data([\n\t\t\t{ offset: \"0%\", color: D3_COLORS.quantumGreen, opacity: 0.3 },\n\t\t\t{ offset: \"50%\", color: D3_COLORS.quantumGreen, opacity: 1 },\n\t\t\t{ offset: \"100%\", color: D3_COLORS.quantumGreen, opacity: 0.3 },\n\t\t])\n\t\t.join(\"stop\")\n\t\t.attr(\"offset\", d => d.offset)\n\t\t.attr(\"stop-color\", d => d.color)\n\t\t.attr(\"stop-opacity\", d => d.opacity);\n\n\t// Glow filter for interactive elements\n\tconst filter = defs\n\t\t.append(\"filter\")\n\t\t.attr(\"id\", \"glow\")\n\t\t.attr(\"x\", \"-50%\")\n\t\t.attr(\"y\", \"-50%\")\n\t\t.attr(\"width\", \"200%\")\n\t\t.attr(\"height\", \"200%\");\n\n\tfilter.append(\"feGaussianBlur\").attr(\"stdDeviation\", \"3\").attr(\"result\", \"coloredBlur\");\n\n\tconst feMerge = filter.append(\"feMerge\");\n\tfeMerge.append(\"feMergeNode\").attr(\"in\", \"coloredBlur\");\n\tfeMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\n\n\t// Arrow marker for axes\n\tdefs\n\t\t.append(\"marker\")\n\t\t.attr(\"id\", \"arrowBlue\")\n\t\t.attr(\"viewBox\", \"0 0 10 10\")\n\t\t.attr(\"refX\", \"5\")\n\t\t.attr(\"refY\", \"5\")\n\t\t.attr(\"markerWidth\", \"6\")\n\t\t.attr(\"markerHeight\", \"6\")\n\t\t.attr(\"orient\", \"auto-start-reverse\")\n\t\t.append(\"path\")\n\t\t.attr(\"d\", \"M 0 0 L 10 5 L 0 10 z\")\n\t\t.attr(\"fill\", D3_COLORS.electricBlue);\n\n\tdefs\n\t\t.append(\"marker\")\n\t\t.attr(\"id\", \"arrowGreen\")\n\t\t.attr(\"viewBox\", \"0 0 10 10\")\n\t\t.attr(\"refX\", \"5\")\n\t\t.attr(\"refY\", \"5\")\n\t\t.attr(\"markerWidth\", \"6\")\n\t\t.attr(\"markerHeight\", \"6\")\n\t\t.attr(\"orient\", \"auto-start-reverse\")\n\t\t.append(\"path\")\n\t\t.attr(\"d\", \"M 0 0 L 10 5 L 0 10 z\")\n\t\t.attr(\"fill\", D3_COLORS.quantumGreen);\n\n\t// Create layer groups\n\tsvg.append(\"g\").attr(\"class\", \"background\");\n\tsvg.append(\"g\").attr(\"class\", \"light-cones\");\n\tsvg.append(\"g\").attr(\"class\", \"simultaneity-lines\");\n\tsvg.append(\"g\").attr(\"class\", \"axes\");\n\tsvg.append(\"g\").attr(\"class\", \"interval\");\n\tsvg.append(\"g\").attr(\"class\", \"events\");\n\tsvg.append(\"g\").attr(\"class\", \"labels\");\n\tsvg.append(\"g\").attr(\"class\", \"controls\");\n\n\treturn svg;\n}\n\n/**\n * Render light cones\n */\nfunction renderLightCones(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdata: MinkowskiData,\n\twithTransition: boolean\n): void {\n\tconst ct = data.time * C;\n\tconst x = data.distance;\n\tconst extent = scales.maxCoord;\n\tconst largeExtent = extent * 2; // Use a larger extent for event cone\n\n\tconst lightConesGroup = svg.select(\"g.light-cones\");\n\tconst backgroundGroup = svg.select(\"g.background\");\n\n\t// Main light cone fill data\n\tconst mainFillData =\n\t\tct !== 0 || x !== 0\n\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\tpoints: [\n\t\t\t\t\t\t\t[0, 0],\n\t\t\t\t\t\t\t[extent, extent],\n\t\t\t\t\t\t\t[extent, -extent],\n\t\t\t\t\t\t],\n\t\t\t\t\t\tclass: \"future\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tpoints: [\n\t\t\t\t\t\t\t[0, 0],\n\t\t\t\t\t\t\t[-extent, -extent],\n\t\t\t\t\t\t\t[-extent, extent],\n\t\t\t\t\t\t],\n\t\t\t\t\t\tclass: \"past\",\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t: [];\n\n\tbackgroundGroup\n\t\t.selectAll(\"polygon.main-cone-fill\")\n\t\t.data(mainFillData)\n\t\t.join(\"polygon\")\n\t\t.attr(\"class\", \"main-cone-fill\")\n\t\t.attr(\"points\", d =>\n\t\t\td.points.map(p => `${scales.xScale(p[0])},${scales.yScale(p[1])}`).join(\" \")\n\t\t)\n\t\t.attr(\"fill\", `${D3_COLORS.photonGold}${D3_COLORS.lightConeFill}`)\n\t\t.attr(\"stroke\", \"none\");\n\n\t// Event light cone fill data\n\tconst eventFillData =\n\t\tct !== 0 || x !== 0\n\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\tpoints: [\n\t\t\t\t\t\t\t[x, ct],\n\t\t\t\t\t\t\t[x + largeExtent, ct + largeExtent],\n\t\t\t\t\t\t\t[x + largeExtent, ct - largeExtent],\n\t\t\t\t\t\t],\n\t\t\t\t\t\tclass: \"future\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tpoints: [\n\t\t\t\t\t\t\t[x, ct],\n\t\t\t\t\t\t\t[x - largeExtent, ct - largeExtent],\n\t\t\t\t\t\t\t[x - largeExtent, ct + largeExtent],\n\t\t\t\t\t\t],\n\t\t\t\t\t\tclass: \"past\",\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t: [];\n\n\tbackgroundGroup\n\t\t.selectAll(\"polygon.event-cone-fill\")\n\t\t.data(eventFillData)\n\t\t.join(\"polygon\")\n\t\t.attr(\"class\", \"event-cone-fill\")\n\t\t.attr(\"points\", d =>\n\t\t\td.points.map(p => `${scales.xScale(p[0])},${scales.yScale(p[1])}`).join(\" \")\n\t\t)\n\t\t.attr(\"fill\", `${D3_COLORS.electricBlue}${D3_COLORS.lightConeFill}`)\n\t\t.attr(\"stroke\", \"none\");\n\n\t// Light cone lines\n\tconst lineData = [\n\t\t{ x1: -extent, y1: -extent, x2: extent, y2: extent, from: \"origin\" },\n\t\t{ x1: -extent, y1: extent, x2: extent, y2: -extent, from: \"origin\" },\n\t];\n\n\tif (ct !== 0 || x !== 0) {\n\t\tlineData.push(\n\t\t\t{\n\t\t\t\tx1: x - largeExtent,\n\t\t\t\ty1: ct - largeExtent,\n\t\t\t\tx2: x + largeExtent,\n\t\t\t\ty2: ct + largeExtent,\n\t\t\t\tfrom: \"event\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tx1: x - largeExtent,\n\t\t\t\ty1: ct + largeExtent,\n\t\t\t\tx2: x + largeExtent,\n\t\t\t\ty2: ct - largeExtent,\n\t\t\t\tfrom: \"event\",\n\t\t\t}\n\t\t);\n\t}\n\n\tconst lines = lightConesGroup\n\t\t.selectAll(\"line\")\n\t\t.data(lineData)\n\t\t.join(\"line\")\n\t\t.attr(\"data-from\", d => d.from)\n\t\t.attr(\"stroke\", `${D3_COLORS.photonGold}${D3_COLORS.dashedLine}`)\n\t\t.attr(\"stroke-width\", 2)\n\t\t.attr(\"stroke-dasharray\", d => (d.from === \"event\" ? \"2,3\" : \"5,5\"))\n\t\t.style(\"cursor\", \"pointer\");\n\n\tif (withTransition) {\n\t\tlines\n\t\t\t.transition()\n\t\t\t.duration(600)\n\t\t\t.ease(easeCubicInOut)\n\t\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n\t} else {\n\t\tlines\n\t\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n\t}\n}\n\n/**\n * Render reference frame axes\n */\nfunction renderAxes(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdata: MinkowskiData,\n\twithTransition: boolean\n): void {\n\tconst extent = scales.maxCoord;\n\tconst beta = data.velocity;\n\tconst angle = Math.atan(beta);\n\tconst cosAngle = Math.cos(angle);\n\tconst sinAngle = Math.sin(angle);\n\n\tconst axesGroup = svg.select(\"g.axes\");\n\n\t// Original frame axes (orthogonal)\n\tconst originalAxes = [\n\t\t{\n\t\t\tx1: 0,\n\t\t\ty1: -extent,\n\t\t\tx2: 0,\n\t\t\ty2: extent,\n\t\t\tcolor: D3_COLORS.electricBlue,\n\t\t\tframe: \"original\",\n\t\t\taxis: \"ct\",\n\t\t\tisTimeAxis: true,\n\t\t},\n\t\t{\n\t\t\tx1: -extent,\n\t\t\ty1: 0,\n\t\t\tx2: extent,\n\t\t\ty2: 0,\n\t\t\tcolor: D3_COLORS.electricBlue,\n\t\t\tframe: \"original\",\n\t\t\taxis: \"x\",\n\t\t\tisTimeAxis: false,\n\t\t},\n\t];\n\n\t// Moving frame axes (tilted)\n\tconst ctPrimeLength = extent / cosAngle;\n\tconst xPrimeLength = extent / cosAngle;\n\n\tconst movingAxes = [\n\t\t{\n\t\t\tx1: -ctPrimeLength * sinAngle,\n\t\t\ty1: -ctPrimeLength * cosAngle,\n\t\t\tx2: ctPrimeLength * sinAngle,\n\t\t\ty2: ctPrimeLength * cosAngle,\n\t\t\tcolor: D3_COLORS.quantumGreen,\n\t\t\tframe: \"moving\",\n\t\t\taxis: \"ct'\",\n\t\t\tisTimeAxis: true,\n\t\t},\n\t\t{\n\t\t\tx1: -xPrimeLength * cosAngle,\n\t\t\ty1: -xPrimeLength * sinAngle,\n\t\t\tx2: xPrimeLength * cosAngle,\n\t\t\ty2: xPrimeLength * sinAngle,\n\t\t\tcolor: D3_COLORS.quantumGreen,\n\t\t\tframe: \"moving\",\n\t\t\taxis: \"x'\",\n\t\t\tisTimeAxis: false,\n\t\t},\n\t];\n\n\tconst allAxes = [...originalAxes, ...movingAxes];\n\n\tconst axisLines = axesGroup\n\t\t.selectAll(\"line\")\n\t\t.data(allAxes)\n\t\t.join(\"line\")\n\t\t.attr(\"class\", d => `axis-${d.frame}`)\n\t\t.attr(\"data-axis\", d => d.axis)\n\t\t.attr(\"stroke\", d => d.color)\n\t\t.attr(\"stroke-width\", 3)\n\t\t.attr(\"stroke-dasharray\", d => (d.isTimeAxis ? \"10,5\" : null))\n\t\t.attr(\"marker-end\", d => (d.frame === \"original\" ? \"url(#arrowBlue)\" : \"url(#arrowGreen)\"))\n\t\t.style(\"cursor\", \"pointer\");\n\n\tif (withTransition) {\n\t\taxisLines\n\t\t\t.transition()\n\t\t\t.duration(600)\n\t\t\t.ease(easeCubicInOut)\n\t\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n\t} else {\n\t\taxisLines\n\t\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n\t}\n}\n\n/**\n * Render simultaneity and position lines\n */\nfunction renderSimultaneityLines(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdata: MinkowskiData,\n\twithTransition: boolean\n): void {\n\tconst ct = data.time * C;\n\tconst x = data.distance;\n\tconst extent = scales.maxCoord;\n\tconst beta = data.velocity;\n\tconst angle = Math.atan(beta);\n\tconst cosAngle = Math.cos(angle);\n\tconst sinAngle = Math.sin(angle);\n\n\tconst simGroup = svg.select(\"g.simultaneity-lines\");\n\n\tif (ct === 0 && x === 0) {\n\t\tsimGroup.selectAll(\"line\").remove();\n\t\treturn;\n\t}\n\n\tconst lineData = [\n\t\t// Original frame\n\t\t{\n\t\t\tx1: -extent,\n\t\t\ty1: ct,\n\t\t\tx2: extent,\n\t\t\ty2: ct,\n\t\t\tcolor: D3_COLORS.electricBlue,\n\t\t\tframe: \"original\",\n\t\t\tline: \"simultaneity\",\n\t\t},\n\t\t{\n\t\t\tx1: x,\n\t\t\ty1: -extent,\n\t\t\tx2: x,\n\t\t\ty2: extent,\n\t\t\tcolor: D3_COLORS.electricBlue,\n\t\t\tframe: \"original\",\n\t\t\tline: \"position\",\n\t\t},\n\t\t// Moving frame\n\t\t{\n\t\t\tx1: x - (extent / cosAngle) * cosAngle,\n\t\t\ty1: ct - (extent / cosAngle) * sinAngle,\n\t\t\tx2: x + (extent / cosAngle) * cosAngle,\n\t\t\ty2: ct + (extent / cosAngle) * sinAngle,\n\t\t\tcolor: D3_COLORS.quantumGreen,\n\t\t\tframe: \"moving\",\n\t\t\tline: \"simultaneity\",\n\t\t},\n\t\t{\n\t\t\tx1: x - (extent / cosAngle) * sinAngle,\n\t\t\ty1: ct - (extent / cosAngle) * cosAngle,\n\t\t\tx2: x + (extent / cosAngle) * sinAngle,\n\t\t\ty2: ct + (extent / cosAngle) * cosAngle,\n\t\t\tcolor: D3_COLORS.quantumGreen,\n\t\t\tframe: \"moving\",\n\t\t\tline: \"position\",\n\t\t},\n\t];\n\n\tconst lines = simGroup\n\t\t.selectAll(\"line\")\n\t\t.data(lineData)\n\t\t.join(\"line\")\n\t\t.attr(\"class\", d => `simultaneity-${d.frame}`)\n\t\t.attr(\"data-line\", d => d.line)\n\t\t.attr(\"stroke\", d => `${d.color}${D3_COLORS.simultaneity}`)\n\t\t.attr(\"stroke-width\", 1.5)\n\t\t.attr(\"stroke-dasharray\", \"3,3\");\n\n\tif (withTransition) {\n\t\tlines\n\t\t\t.transition()\n\t\t\t.duration(600)\n\t\t\t.ease(easeCubicInOut)\n\t\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n\t} else {\n\t\tlines\n\t\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n\t}\n}\n\n/**\n * Render events and interval line\n */\nfunction renderEvents(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdata: MinkowskiData,\n\twithTransition: boolean\n): void {\n\tconst ct = data.time * C;\n\tconst x = data.distance;\n\n\t// Interval line\n\tconst intervalGroup = svg.select(\"g.interval\");\n\tif (ct !== 0 || x !== 0) {\n\t\tconst intervalLine = intervalGroup\n\t\t\t.selectAll(\"line\")\n\t\t\t.data([{ x1: 0, y1: 0, x2: x, y2: ct }])\n\t\t\t.join(\"line\")\n\t\t\t.attr(\"stroke\", D3_COLORS.plasmaWhite)\n\t\t\t.attr(\"stroke-width\", 3);\n\n\t\tif (withTransition) {\n\t\t\tintervalLine\n\t\t\t\t.transition()\n\t\t\t\t.duration(600)\n\t\t\t\t.ease(easeCubicInOut)\n\t\t\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n\t\t} else {\n\t\t\tintervalLine\n\t\t\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t\t\t.attr(\"y2\", d => scales.yScale(d.y2));\n\t\t}\n\t} else {\n\t\tintervalGroup.selectAll(\"line\").remove();\n\t}\n\n\t// Event points\n\tconst eventsGroup = svg.select(\"g.events\");\n\n\t// Determine event color\n\tlet eventColor: string = D3_COLORS.plasmaWhite;\n\tif (data.intervalType === \"timelike\") {\n\t\teventColor = D3_COLORS.timelike;\n\t} else if (data.intervalType === \"spacelike\") {\n\t\teventColor = D3_COLORS.spacelike;\n\t} else if (data.intervalType === \"lightlike\") {\n\t\teventColor = D3_COLORS.lightlike;\n\t}\n\n\t// Decimal versions for tooltip display\n\tconst timeDecimal = data.timeDecimal; // seconds\n\tconst xDecimal = data.distanceDecimal; // km\n\n\tconst eventData = [\n\t\t{\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tcolor: D3_COLORS.plasmaWhite,\n\t\t\tradius: 8,\n\t\t\tlabel: \"Origin\",\n\t\t\ttimeDecimal: \"0\",\n\t\t\txDecimal: \"0\",\n\t\t},\n\t\t{\n\t\t\tx: x,\n\t\t\ty: ct,\n\t\t\tcolor: eventColor,\n\t\t\tradius: 8,\n\t\t\tlabel: \"Event\",\n\t\t\ttimeDecimal: timeDecimal.toString(),\n\t\t\txDecimal: xDecimal.toString(),\n\t\t},\n\t];\n\n\tconst events = eventsGroup\n\t\t.selectAll(\"circle\")\n\t\t.data(eventData)\n\t\t.join(\"circle\")\n\t\t.attr(\"data-label\", d => d.label)\n\t\t.attr(\"data-x\", d => d.x)\n\t\t.attr(\"data-y\", d => d.y)\n\t\t.attr(\"data-time-decimal\", d => d.timeDecimal)\n\t\t.attr(\"data-x-decimal\", d => d.xDecimal)\n\t\t.attr(\"r\", d => d.radius)\n\t\t.attr(\"fill\", d => d.color)\n\t\t.style(\"cursor\", \"pointer\");\n\n\tif (withTransition) {\n\t\tevents\n\t\t\t.transition()\n\t\t\t.duration(600)\n\t\t\t.ease(easeCubicInOut)\n\t\t\t.attr(\"cx\", d => scales.xScale(d.x))\n\t\t\t.attr(\"cy\", d => scales.yScale(d.y));\n\t} else {\n\t\tevents.attr(\"cx\", d => scales.xScale(d.x)).attr(\"cy\", d => scales.yScale(d.y));\n\t}\n}\n\n/**\n * Render labels\n */\nfunction renderLabels(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdata: MinkowskiData,\n\twithTransition: boolean\n): void {\n\t// Float versions for D3 positioning\n\tconst ct = data.time * C;\n\tconst x = data.distance;\n\n\t// Decimal versions for precise label text\n\tconst c_km_per_s = rl.c.div(1000); // Convert c from m/s to km/s\n\tconst ctDecimal = data.timeDecimal.mul(c_km_per_s); // ct in km\n\tconst xDecimal = data.distanceDecimal; // Already in km\n\tconst ctPrimeDecimal = data.deltaTPrimeDecimal.mul(c_km_per_s); // ct' in km\n\tconst xPrimeDecimal = data.deltaXPrimeDecimal; // Already in km\n\n\tconst labelsGroup = svg.select(\"g.labels\");\n\n\tconst labelData: Array<{\n\t\ttext: string;\n\t\tx: number;\n\t\ty: number;\n\t\tdx: number;\n\t\tdy: number;\n\t\tcolor: string;\n\t\tclass: string;\n\t}> = [\n\t\t{\n\t\t\ttext: \"Origin\",\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tdx: 10,\n\t\t\tdy: -10,\n\t\t\tcolor: D3_COLORS.plasmaWhite,\n\t\t\tclass: \"label\",\n\t\t},\n\t];\n\n\tif (ct !== 0 || x !== 0) {\n\t\tlabelData.push({\n\t\t\ttext: `(ct=${formatCoordinate(ctDecimal)}, x=${formatCoordinate(xDecimal)})`,\n\t\t\tx: x,\n\t\t\ty: ct,\n\t\t\tdx: 12,\n\t\t\tdy: -25,\n\t\t\tcolor: D3_COLORS.electricBlue,\n\t\t\tclass: \"label label-original\",\n\t\t});\n\t\tlabelData.push({\n\t\t\ttext: `(ct'=${formatCoordinate(ctPrimeDecimal)}, x'=${formatCoordinate(xPrimeDecimal)})`,\n\t\t\tx: x,\n\t\t\ty: ct,\n\t\t\tdx: 12,\n\t\t\tdy: -8,\n\t\t\tcolor: D3_COLORS.quantumGreen,\n\t\t\tclass: \"label label-moving\",\n\t\t});\n\t}\n\n\tconst labels = labelsGroup\n\t\t.selectAll(\"text\")\n\t\t.data(labelData)\n\t\t.join(\"text\")\n\t\t.attr(\"class\", d => d.class)\n\t\t.attr(\"fill\", d => d.color)\n\t\t.attr(\"text-anchor\", \"start\")\n\t\t.text(d => d.text);\n\n\tif (withTransition) {\n\t\tlabels\n\t\t\t.transition()\n\t\t\t.duration(600)\n\t\t\t.ease(easeCubicInOut)\n\t\t\t.attr(\"x\", d => scales.xScale(d.x) + d.dx)\n\t\t\t.attr(\"y\", d => scales.yScale(d.y) + d.dy);\n\t} else {\n\t\tlabels.attr(\"x\", d => scales.xScale(d.x) + d.dx).attr(\"y\", d => scales.yScale(d.y) + d.dy);\n\t}\n\n\t// Causal indicator (bottom of diagram)\n\tconst size = 900;\n\tconst causalData =\n\t\tct !== 0 || x !== 0\n\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: data.intervalType,\n\t\t\t\t\t\ty: size - 35,\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t: [];\n\n\tconst causalIndicator = labelsGroup\n\t\t.selectAll(\"text.causal\")\n\t\t.data(causalData)\n\t\t.join(\"text\")\n\t\t.attr(\"class\", \"causal header\")\n\t\t.attr(\"x\", 15)\n\t\t.attr(\"y\", d => d.y);\n\n\tcausalIndicator.each(function (d) {\n\t\tconst elem = select(this);\n\t\telem.selectAll(\"tspan\").remove();\n\n\t\tif (d.type === \"timelike\") {\n\t\t\telem.attr(\"fill\", D3_COLORS.timelike);\n\t\t\telem.append(\"tspan\").text(\" CAUSALLY CONNECTED\");\n\t\t\telem\n\t\t\t\t.append(\"tspan\")\n\t\t\t\t.attr(\"x\", 15)\n\t\t\t\t.attr(\"dy\", \"1.2em\")\n\t\t\t\t.attr(\"font-size\", \"13px\")\n\t\t\t\t.attr(\"font-weight\", \"normal\")\n\t\t\t\t.text(\"(Event inside light cone)\");\n\t\t} else if (d.type === \"spacelike\") {\n\t\t\telem.attr(\"fill\", D3_COLORS.spacelike);\n\t\t\telem.append(\"tspan\").text(\" NOT CAUSALLY CONNECTED\");\n\t\t\telem\n\t\t\t\t.append(\"tspan\")\n\t\t\t\t.attr(\"x\", 15)\n\t\t\t\t.attr(\"dy\", \"1.2em\")\n\t\t\t\t.attr(\"font-size\", \"13px\")\n\t\t\t\t.attr(\"font-weight\", \"normal\")\n\t\t\t\t.text(\"(Event outside light cone)\");\n\t\t} else {\n\t\t\telem.attr(\"fill\", D3_COLORS.lightlike);\n\t\t\telem.append(\"tspan\").text(\" ON LIGHT CONE\");\n\t\t\telem\n\t\t\t\t.append(\"tspan\")\n\t\t\t\t.attr(\"x\", 15)\n\t\t\t\t.attr(\"dy\", \"1.2em\")\n\t\t\t\t.attr(\"font-size\", \"13px\")\n\t\t\t\t.attr(\"font-weight\", \"normal\")\n\t\t\t\t.text(\"(Connected by light signal)\");\n\t\t}\n\t});\n\n\t// Velocity and separation labels (bottom-right corner) - use Decimal versions for display precision\n\tconst labelGroup = labelsGroup\n\t\t.selectAll(\"g.velocity-info\")\n\t\t.data([\n\t\t\t{\n\t\t\t\tvelocityDecimal: data.velocityDecimal,\n\t\t\t\tdeltaTPrimeDecimal: data.deltaTPrimeDecimal,\n\t\t\t\tdeltaXPrimeDecimal: data.deltaXPrimeDecimal,\n\t\t\t},\n\t\t])\n\t\t.join(\"g\")\n\t\t.attr(\"class\", \"velocity-info\");\n\n\tlabelGroup\n\t\t.selectAll(\"text.velocity-label\")\n\t\t.data(d => [d])\n\t\t.join(\"text\")\n\t\t.attr(\"class\", \"velocity-label header\")\n\t\t.attr(\"x\", size - 15)\n\t\t.attr(\"y\", size - 60)\n\t\t.attr(\"text-anchor\", \"end\")\n\t\t.attr(\"fill\", D3_COLORS.quantumGreen)\n\t\t.text(d => `Moving frame ${rl.formatSignificant(d.velocityDecimal, \"9\", 2, true)}c`);\n\n\tlabelGroup\n\t\t.selectAll(\"text.separation-time\")\n\t\t.data(d => [d])\n\t\t.join(\"text\")\n\t\t.attr(\"class\", \"separation-time header\")\n\t\t.attr(\"x\", size - 15)\n\t\t.attr(\"y\", size - 45)\n\t\t.attr(\"text-anchor\", \"end\")\n\t\t.attr(\"fill\", D3_COLORS.quantumGreen)\n\t\t.text(d => `${rl.formatSignificant(d.deltaTPrimeDecimal, \"\", 3, true)} sec`);\n\n\tlabelGroup\n\t\t.selectAll(\"text.separation-distance\")\n\t\t.data(d => [d])\n\t\t.join(\"text\")\n\t\t.attr(\"class\", \"separation-distance header\")\n\t\t.attr(\"x\", size - 15)\n\t\t.attr(\"y\", size - 30)\n\t\t.attr(\"text-anchor\", \"end\")\n\t\t.attr(\"fill\", D3_COLORS.quantumGreen)\n\t\t.text(d => `${rl.formatSignificant(d.deltaXPrimeDecimal, \"0\", 0)} km`);\n}\n\n/**\n * Setup tooltip system\n */\nfunction setupTooltips(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tcontainer: HTMLElement\n): TooltipController {\n\t// Create tooltip div\n\tconst tooltip = select(container)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"minkowski-tooltip\")\n\t\t.style(\"position\", \"fixed\")\n\t\t.style(\"background\", D3_COLORS.tooltipBg)\n\t\t.style(\"border\", `1px solid ${D3_COLORS.tooltipBorder}`)\n\t\t.style(\"padding\", \"8px 12px\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"12px\")\n\t\t.style(\"color\", D3_COLORS.plasmaWhite)\n\t\t.style(\"pointer-events\", \"none\")\n\t\t.style(\"opacity\", \"0\")\n\t\t.style(\"z-index\", \"10000\")\n\t\t.style(\"box-shadow\", `0 0 15px ${D3_COLORS.tooltipBorder}80`)\n\t\t.style(\"transition\", \"opacity 200ms\");\n\n\tlet hideTimeout: number | undefined;\n\n\t// Helper function to attach tooltip handlers to axes\n\tconst attachAxisTooltips = () => {\n\t\tsvg\n\t\t\t.selectAll(\"g.axes line\")\n\t\t\t.on(\"mouseenter\", function (event: MouseEvent) {\n\t\t\t\tconst axis = (this as SVGLineElement).getAttribute(\"data-axis\");\n\t\t\t\tconst axisName =\n\t\t\t\t\taxis === \"ct\"\n\t\t\t\t\t\t? \"ct axis - Original Frame (time)\"\n\t\t\t\t\t\t: axis === \"x\"\n\t\t\t\t\t\t\t? \"x axis - Original Frame (space)\"\n\t\t\t\t\t\t\t: axis === \"ct'\"\n\t\t\t\t\t\t\t\t? \"ct' axis - Moving Frame (time)\"\n\t\t\t\t\t\t\t\t: \"x' axis - Moving Frame (space)\";\n\n\t\t\t\ttooltip\n\t\t\t\t\t.html(axisName)\n\t\t\t\t\t.style(\"position\", \"fixed\")\n\t\t\t\t\t.style(\"left\", `${event.clientX + 10}px`)\n\t\t\t\t\t.style(\"top\", `${event.clientY + 10}px`)\n\t\t\t\t\t.style(\"opacity\", \"1\");\n\t\t\t})\n\t\t\t.on(\"mouseleave\", () => {\n\t\t\t\ttooltip.style(\"opacity\", \"0\");\n\t\t\t});\n\t};\n\n\t// Helper function to attach tooltip handlers to events\n\tconst attachEventTooltips = () => {\n\t\tsvg\n\t\t\t.selectAll(\"g.events circle\")\n\t\t\t.on(\"mouseenter\", function (event: MouseEvent) {\n\t\t\t\tconst label = (this as SVGCircleElement).getAttribute(\"data-label\");\n\t\t\t\tconst timeDecimalStr = (this as SVGCircleElement).getAttribute(\"data-time-decimal\") || \"0\";\n\t\t\t\tconst xDecimalStr = (this as SVGCircleElement).getAttribute(\"data-x-decimal\") || \"0\";\n\n\t\t\t\tconst content =\n\t\t\t\t\tlabel === \"Origin\"\n\t\t\t\t\t\t? \"Event 1: Origin (0, 0)\"\n\t\t\t\t\t\t: `Event 2: (${formatCoordinate(new Decimal(timeDecimalStr))}, ${formatCoordinate(new Decimal(xDecimalStr))})`;\n\n\t\t\t\ttooltip\n\t\t\t\t\t.html(content)\n\t\t\t\t\t.style(\"position\", \"fixed\")\n\t\t\t\t\t.style(\"left\", `${event.clientX + 10}px`)\n\t\t\t\t\t.style(\"top\", `${event.clientY + 10}px`)\n\t\t\t\t\t.style(\"opacity\", \"1\");\n\t\t\t})\n\t\t\t.on(\"mouseleave\", () => {\n\t\t\t\ttooltip.style(\"opacity\", \"0\");\n\t\t\t});\n\t};\n\n\t// Helper function to attach tooltip handlers to light cones\n\tconst attachLightConeTooltips = () => {\n\t\tsvg\n\t\t\t.selectAll(\"g.light-cones line\")\n\t\t\t.on(\"mouseenter\", function (event: MouseEvent) {\n\t\t\t\tconst from = (this as SVGLineElement).getAttribute(\"data-from\");\n\t\t\t\tconst content = from === \"origin\" ? \"Light cone from origin\" : \"Light cone from event\";\n\n\t\t\t\ttooltip\n\t\t\t\t\t.html(content)\n\t\t\t\t\t.style(\"position\", \"fixed\")\n\t\t\t\t\t.style(\"left\", `${event.clientX + 10}px`)\n\t\t\t\t\t.style(\"top\", `${event.clientY + 10}px`)\n\t\t\t\t\t.style(\"opacity\", \"1\");\n\t\t\t})\n\t\t\t.on(\"mouseleave\", () => {\n\t\t\t\ttooltip.style(\"opacity\", \"0\");\n\t\t\t});\n\t};\n\n\t// Attach initial tooltip handlers\n\tattachAxisTooltips();\n\tattachEventTooltips();\n\tattachLightConeTooltips();\n\n\t// Touch support for mobile\n\tlet touchedElement: any = null;\n\n\tsvg.on(\"touchstart\", function (event) {\n\t\tconst touch = event.touches[0];\n\t\tconst targetElement = event.target as SVGElement;\n\n\t\t// Check if touch is on an interactive element\n\t\tconst isInteractiveElement =\n\t\t\t(targetElement.tagName === \"line\" &&\n\t\t\t\ttargetElement.parentElement?.classList.contains(\"axes\")) ||\n\t\t\ttargetElement.tagName === \"circle\" ||\n\t\t\t(targetElement.tagName === \"line\" &&\n\t\t\t\ttargetElement.parentElement?.classList.contains(\"light-cones\"));\n\n\t\t// Only prevent default for interactive elements, allow scrolling otherwise\n\t\tif (!isInteractiveElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tif (touchedElement === event.target) {\n\t\t\t// Second tap - hide tooltip\n\t\t\ttooltip.style(\"opacity\", \"0\");\n\t\t\ttouchedElement = null;\n\t\t} else {\n\t\t\t// First tap - show tooltip\n\t\t\ttouchedElement = event.target;\n\n\t\t\tlet content = \"\";\n\t\t\tif (\n\t\t\t\ttargetElement.tagName === \"line\" &&\n\t\t\t\ttargetElement.parentElement?.classList.contains(\"axes\")\n\t\t\t) {\n\t\t\t\tconst axis = (targetElement as SVGLineElement).getAttribute(\"data-axis\");\n\t\t\t\tcontent =\n\t\t\t\t\taxis === \"ct\"\n\t\t\t\t\t\t? \"ct axis - Original Frame (time)\"\n\t\t\t\t\t\t: axis === \"x\"\n\t\t\t\t\t\t\t? \"x axis - Original Frame (space)\"\n\t\t\t\t\t\t\t: axis === \"ct'\"\n\t\t\t\t\t\t\t\t? \"ct' axis - Moving Frame (time)\"\n\t\t\t\t\t\t\t\t: \"x' axis - Moving Frame (space)\";\n\t\t\t} else if (targetElement.tagName === \"circle\") {\n\t\t\t\tconst label = (targetElement as SVGCircleElement).getAttribute(\"data-label\");\n\t\t\t\tconst timeDecimalStr =\n\t\t\t\t\t(targetElement as SVGCircleElement).getAttribute(\"data-time-decimal\") || \"0\";\n\t\t\t\tconst xDecimalStr =\n\t\t\t\t\t(targetElement as SVGCircleElement).getAttribute(\"data-x-decimal\") || \"0\";\n\t\t\t\tcontent =\n\t\t\t\t\tlabel === \"Origin\"\n\t\t\t\t\t\t? \"Event 1: Origin (0, 0)\"\n\t\t\t\t\t\t: `Event 2: (${formatCoordinate(new Decimal(timeDecimalStr))}, ${formatCoordinate(new Decimal(xDecimalStr))})`;\n\t\t\t} else if (\n\t\t\t\ttargetElement.tagName === \"line\" &&\n\t\t\t\ttargetElement.parentElement?.classList.contains(\"light-cones\")\n\t\t\t) {\n\t\t\t\tconst from = (targetElement as SVGLineElement).getAttribute(\"data-from\");\n\t\t\t\tcontent = from === \"origin\" ? \"Light cone from origin\" : \"Light cone from event\";\n\t\t\t}\n\n\t\t\tif (content) {\n\t\t\t\ttooltip\n\t\t\t\t\t.html(content)\n\t\t\t\t\t.style(\"position\", \"fixed\")\n\t\t\t\t\t.style(\"left\", `${touch.clientX + 10}px`)\n\t\t\t\t\t.style(\"top\", `${touch.clientY + 10}px`)\n\t\t\t\t\t.style(\"opacity\", \"1\");\n\n\t\t\t\t// Auto-hide after 3 seconds\n\t\t\t\tclearTimeout(hideTimeout);\n\t\t\t\thideTimeout = window.setTimeout(() => {\n\t\t\t\t\ttooltip.style(\"opacity\", \"0\");\n\t\t\t\t\ttouchedElement = null;\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tshow(content: string, x: number, y: number) {\n\t\t\ttooltip.html(content).style(\"left\", `${x}px`).style(\"top\", `${y}px`).style(\"opacity\", \"1\");\n\t\t},\n\t\thide() {\n\t\t\ttooltip.style(\"opacity\", \"0\");\n\t\t},\n\t\tdestroy() {\n\t\t\tclearTimeout(hideTimeout);\n\t\t\ttooltip.remove();\n\t\t},\n\t\treattach() {\n\t\t\tattachAxisTooltips();\n\t\t\tattachEventTooltips();\n\t\t\tattachLightConeTooltips();\n\t\t},\n\t};\n}\n\n/**\n * Start auto-play frame animation\n * Animates moving frame axes between orthogonal and tilted positions\n */\nfunction startFrameAnimation(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdata: MinkowskiData,\n\t_onUpdate: () => void\n): AnimationController {\n\tconst LOOP_DURATION = 16000; // 16 seconds total loop (slower for readable km indicator)\n\tlet startTime = Date.now();\n\tlet isPaused = false;\n\tlet totalPausedTime = 0;\n\tlet pauseStartTime = 0;\n\tlet manualPosition: number | null = null; // null = auto, 0-1 = manual\n\n\tconst ct = data.time * C;\n\tconst x = data.distance;\n\tconst extent = scales.maxCoord;\n\tconst beta = data.velocity;\n\tconst targetAngle = Math.atan(beta);\n\n\t// Function to update frame based on position t (0-1)\n\tconst updateFrame = (t: number) => {\n\t\t// Smooth interpolation: 0-0.5 = orthogonaltilted, 0.5-1 = tiltedorthogonal\n\t\tlet p: number;\n\t\tif (t < 0.5) {\n\t\t\t// First half: ease into moving frame (0  1)\n\t\t\tp = (1 - Math.cos(t * 2 * Math.PI)) / 2;\n\t\t} else {\n\t\t\t// Second half: ease back to original frame (1  0)\n\t\t\tp = (1 - Math.cos((t - 0.5) * 2 * Math.PI)) / 2;\n\t\t\tp = 1 - p;\n\t\t}\n\n\t\t// Interpolate angle from 0 (orthogonal) to targetAngle (tilted)\n\t\tconst currentAngle = targetAngle * p;\n\t\tconst cosCurrent = Math.cos(currentAngle);\n\t\tconst sinCurrent = Math.sin(currentAngle);\n\n\t\t// Animate ct' axis (interpolate between vertical and tilted)\n\t\tconst ctPrimeLength = extent / (cosCurrent || 0.01); // Avoid division by zero\n\t\tsvg\n\t\t\t.selectAll(\".axis-moving\")\n\t\t\t.filter(function () {\n\t\t\t\treturn (this as SVGLineElement).getAttribute(\"data-axis\") === \"ct'\";\n\t\t\t})\n\t\t\t.attr(\"x1\", scales.xScale(-ctPrimeLength * sinCurrent))\n\t\t\t.attr(\"y1\", scales.yScale(-ctPrimeLength * cosCurrent))\n\t\t\t.attr(\"x2\", scales.xScale(ctPrimeLength * sinCurrent))\n\t\t\t.attr(\"y2\", scales.yScale(ctPrimeLength * cosCurrent));\n\n\t\t// Animate x' axis (interpolate between horizontal and tilted)\n\t\tconst xPrimeLength = extent / (cosCurrent || 0.01);\n\t\tsvg\n\t\t\t.selectAll(\".axis-moving\")\n\t\t\t.filter(function () {\n\t\t\t\treturn (this as SVGLineElement).getAttribute(\"data-axis\") === \"x'\";\n\t\t\t})\n\t\t\t.attr(\"x1\", scales.xScale(-xPrimeLength * cosCurrent))\n\t\t\t.attr(\"y1\", scales.yScale(-xPrimeLength * sinCurrent))\n\t\t\t.attr(\"x2\", scales.xScale(xPrimeLength * cosCurrent))\n\t\t\t.attr(\"y2\", scales.yScale(xPrimeLength * sinCurrent));\n\n\t\t// Animate moving frame simultaneity lines if event exists\n\t\tif (ct !== 0 || x !== 0) {\n\t\t\tconst simLength = extent / (cosCurrent || 0.01);\n\n\t\t\t// Simultaneity line (parallel to x' axis)\n\t\t\tsvg\n\t\t\t\t.selectAll(\".simultaneity-moving\")\n\t\t\t\t.filter(function () {\n\t\t\t\t\treturn (this as SVGLineElement).getAttribute(\"data-line\") === \"simultaneity\";\n\t\t\t\t})\n\t\t\t\t.attr(\"x1\", scales.xScale(x - simLength * cosCurrent))\n\t\t\t\t.attr(\"y1\", scales.yScale(ct - simLength * sinCurrent))\n\t\t\t\t.attr(\"x2\", scales.xScale(x + simLength * cosCurrent))\n\t\t\t\t.attr(\"y2\", scales.yScale(ct + simLength * sinCurrent));\n\n\t\t\t// Position line (parallel to ct' axis)\n\t\t\tsvg\n\t\t\t\t.selectAll(\".simultaneity-moving\")\n\t\t\t\t.filter(function () {\n\t\t\t\t\treturn (this as SVGLineElement).getAttribute(\"data-line\") === \"position\";\n\t\t\t\t})\n\t\t\t\t.attr(\"x1\", scales.xScale(x - simLength * sinCurrent))\n\t\t\t\t.attr(\"y1\", scales.yScale(ct - simLength * cosCurrent))\n\t\t\t\t.attr(\"x2\", scales.xScale(x + simLength * sinCurrent))\n\t\t\t\t.attr(\"y2\", scales.yScale(ct + simLength * cosCurrent));\n\t\t}\n\n\t\t// Update velocity label with interpolated velocity and transformed coordinates\n\t\t// Use Decimal.js for display precision even during animation\n\t\tconst currentBeta = Math.tan(currentAngle);\n\t\tconst currentBetaDecimal = rl.ensure(currentBeta);\n\t\tconst currentGamma = 1 / Math.sqrt(1 - currentBeta * currentBeta);\n\t\tconst currentCtPrime = currentGamma * (ct - currentBeta * x);\n\t\tconst currentXPrime = currentGamma * (x - currentBeta * ct);\n\t\tconst currentCtPrimeDecimal = rl.ensure(currentCtPrime / C);\n\t\tconst currentXPrimeDecimal = rl.ensure(currentXPrime);\n\n\t\tsvg\n\t\t\t.select(\".velocity-label\")\n\t\t\t.text(`Moving frame ${rl.formatSignificant(currentBetaDecimal, \"9\", 2, true)}c`);\n\t\tsvg\n\t\t\t.select(\".separation-time\")\n\t\t\t.text(`${rl.formatSignificant(currentCtPrimeDecimal, \"\", 3, true)} sec`);\n\t\tsvg\n\t\t\t.select(\".separation-distance\")\n\t\t\t.text(`${rl.formatSignificant(currentXPrimeDecimal, \"0\", 0)} km`);\n\t};\n\n\tconst animationTimer = timer(() => {\n\t\tif (isPaused || manualPosition !== null) return;\n\n\t\tconst elapsed = Date.now() - startTime - totalPausedTime;\n\t\tconst t = (elapsed % LOOP_DURATION) / LOOP_DURATION; // 0 to 1\n\t\tupdateFrame(t);\n\t});\n\n\treturn {\n\t\tpause() {\n\t\t\tif (!isPaused) {\n\t\t\t\tisPaused = true;\n\t\t\t\tpauseStartTime = Date.now();\n\t\t\t}\n\t\t},\n\t\tplay() {\n\t\t\tif (isPaused) {\n\t\t\t\ttotalPausedTime += Date.now() - pauseStartTime;\n\t\t\t\tisPaused = false;\n\t\t\t\tmanualPosition = null;\n\t\t\t}\n\t\t},\n\t\tstop() {\n\t\t\tanimationTimer.stop();\n\t\t},\n\t\tsetPosition(t: number) {\n\t\t\tmanualPosition = t;\n\t\t\tupdateFrame(t);\n\t\t},\n\t};\n}\n\n/**\n * Main function: Draw Minkowski spacetime diagram (D3 version)\n *\n * @param container - HTML element to render into\n * @param data - Spacetime event data\n * @returns Controller for updates and animation control\n */\nexport function drawMinkowskiDiagramD3(\n\tcontainer: HTMLElement,\n\tdata: MinkowskiData\n): MinkowskiDiagramController {\n\tconst size = 900;\n\n\t// Setup SVG\n\tconst svg = setupSVG(container);\n\tlet scales = createScales(data, size);\n\n\t// Initial render\n\trenderLightCones(svg, scales, data, false);\n\trenderSimultaneityLines(svg, scales, data, false);\n\trenderAxes(svg, scales, data, false);\n\trenderEvents(svg, scales, data, false);\n\trenderLabels(svg, scales, data, false);\n\n\t// Setup tooltips\n\tconst tooltips = setupTooltips(svg, container);\n\n\t// Create control container\n\tconst controlContainer = select(container)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"minkowski-controls\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"bottom\", \"10px\")\n\t\t.style(\"left\", \"50%\")\n\t\t.style(\"transform\", \"translateX(-50%)\")\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"flex-direction\", \"column\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"gap\", \"8px\")\n\t\t.style(\"z-index\", \"1000\");\n\n\t// Create toggle button\n\tconst toggleButton = controlContainer\n\t\t.append(\"button\")\n\t\t.attr(\"class\", \"minkowski-toggle-button\")\n\t\t.style(\"background\", D3_COLORS.tooltipBg)\n\t\t.style(\"border\", `1px solid ${D3_COLORS.tooltipBorder}`)\n\t\t.style(\"color\", D3_COLORS.plasmaWhite)\n\t\t.style(\"padding\", \"8px 16px\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"12px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.style(\"box-shadow\", `0 0 10px ${D3_COLORS.tooltipBorder}60`)\n\t\t.style(\"transition\", \"all 200ms\")\n\t\t.text(\"Toggle Animation\")\n\t\t.on(\"mouseenter\", function () {\n\t\t\tselect(this)\n\t\t\t\t.style(\"background\", D3_COLORS.tooltipBorder)\n\t\t\t\t.style(\"box-shadow\", `0 0 15px ${D3_COLORS.tooltipBorder}80`);\n\t\t})\n\t\t.on(\"mouseleave\", function () {\n\t\t\tselect(this)\n\t\t\t\t.style(\"background\", D3_COLORS.tooltipBg)\n\t\t\t\t.style(\"box-shadow\", `0 0 10px ${D3_COLORS.tooltipBorder}60`);\n\t\t});\n\n\t// Create slider for manual position control (hidden initially)\n\tconst sliderContainer = controlContainer\n\t\t.append(\"div\")\n\t\t.style(\"display\", \"none\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"gap\", \"8px\");\n\n\tsliderContainer\n\t\t.append(\"label\")\n\t\t.style(\"color\", D3_COLORS.quantumGreen)\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.text(\"Position:\");\n\n\tsliderContainer\n\t\t.append(\"input\")\n\t\t.attr(\"type\", \"range\")\n\t\t.attr(\"min\", \"0\")\n\t\t.attr(\"max\", \"50\")\n\t\t.attr(\"value\", \"0\")\n\t\t.style(\"width\", \"200px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.on(\"input\", function () {\n\t\t\tconst value = parseFloat((this as HTMLInputElement).value) / 50;\n\t\t\tanimation.setPosition(value);\n\t\t});\n\n\t// Start auto-play frame animation\n\tlet animation = startFrameAnimation(svg, scales, data, () => {\n\t\t// Animation update callback (currently unused)\n\t});\n\tlet isPlaying = true;\n\n\t// Add click handler for toggle button\n\ttoggleButton.on(\"click\", () => {\n\t\tif (isPlaying) {\n\t\t\tanimation.pause();\n\t\t\tisPlaying = false;\n\t\t\tsliderContainer.style(\"display\", \"flex\");\n\t\t\t// Snap axes and simultaneity lines to their correct final positions\n\t\t\trenderAxes(svg, scales, data, false);\n\t\t\trenderSimultaneityLines(svg, scales, data, false);\n\t\t\t// Update labels to show target velocity and separations using Decimal for precision\n\t\t\tsvg\n\t\t\t\t.select(\".velocity-label\")\n\t\t\t\t.text(`Moving frame ${rl.formatSignificant(data.velocityDecimal, \"9\", 2, true)}c`);\n\t\t\tsvg\n\t\t\t\t.select(\".separation-time\")\n\t\t\t\t.text(`${rl.formatSignificant(data.deltaTPrimeDecimal, \"\", 3, true)} sec`);\n\t\t\tsvg\n\t\t\t\t.select(\".separation-distance\")\n\t\t\t\t.text(`${rl.formatSignificant(data.deltaXPrimeDecimal, \"0\", 0)} km`);\n\t\t\ttooltips.reattach();\n\t\t} else {\n\t\t\tanimation.play();\n\t\t\tisPlaying = true;\n\t\t\tsliderContainer.style(\"display\", \"none\");\n\t\t}\n\t});\n\n\t// Pause animation when tab is hidden\n\tconst visibilityChangeHandler = () => {\n\t\tif (document.hidden) {\n\t\t\tanimation.pause();\n\t\t} else if (isPlaying) {\n\t\t\tanimation.play();\n\t\t}\n\t};\n\tdocument.addEventListener(\"visibilitychange\", visibilityChangeHandler);\n\n\t// Resize handler\n\tlet lastInnerWidth = window.innerWidth;\n\tconst resizeHandler = debounce(() => {\n\t\t// iOS Safari fires resize during scroll (height-only visual viewport changes)\n\t\tif (window.innerWidth === lastInnerWidth) return;\n\t\tlastInnerWidth = window.innerWidth;\n\n\t\tscales = createScales(data, size);\n\t\trenderLightCones(svg, scales, data, false);\n\t\trenderSimultaneityLines(svg, scales, data, false);\n\t\trenderAxes(svg, scales, data, false);\n\t\trenderEvents(svg, scales, data, false);\n\t\trenderLabels(svg, scales, data, false);\n\n\t\t// Reattach tooltip handlers to re-rendered elements\n\t\ttooltips.reattach();\n\t}, 150);\n\n\twindow.addEventListener(\"resize\", resizeHandler);\n\n\t// Public controller API\n\tconst controller: MinkowskiDiagramController = {\n\t\tupdate(newData: MinkowskiData) {\n\t\t\tdata = newData;\n\t\t\tscales = createScales(data, size);\n\n\t\t\tconst wasPlaying = isPlaying;\n\n\t\t\t// Stop old animation and restart with new data to prevent glitches\n\t\t\tanimation.stop();\n\t\t\tanimation = startFrameAnimation(svg, scales, data, () => {\n\t\t\t\t// Animation update callback (currently unused)\n\t\t\t});\n\n\t\t\t// If animation was paused, pause the new animation too and show slider\n\t\t\tif (!wasPlaying) {\n\t\t\t\tanimation.pause();\n\t\t\t\tsliderContainer.style(\"display\", \"flex\");\n\t\t\t} else {\n\t\t\t\tsliderContainer.style(\"display\", \"none\");\n\t\t\t}\n\n\t\t\trenderLightCones(svg, scales, data, true);\n\t\t\trenderSimultaneityLines(svg, scales, data, true);\n\t\t\trenderAxes(svg, scales, data, true);\n\t\t\trenderEvents(svg, scales, data, true);\n\t\t\trenderLabels(svg, scales, data, true);\n\n\t\t\t// Reattach tooltip handlers to updated elements\n\t\t\ttooltips.reattach();\n\t\t},\n\n\t\tpause() {\n\t\t\tif (isPlaying) {\n\t\t\t\tisPlaying = false;\n\t\t\t\tanimation.pause();\n\t\t\t\tsliderContainer.style(\"display\", \"flex\");\n\t\t\t\t// Snap axes and simultaneity lines to their correct final positions\n\t\t\t\trenderAxes(svg, scales, data, false);\n\t\t\t\trenderSimultaneityLines(svg, scales, data, false);\n\t\t\t\t// Update labels to show target velocity and separations using Decimal for precision\n\t\t\t\tsvg\n\t\t\t\t\t.select(\".velocity-label\")\n\t\t\t\t\t.text(`Moving frame ${rl.formatSignificant(data.velocityDecimal, \"9\", 2, true)}c`);\n\t\t\t\tsvg\n\t\t\t\t\t.select(\".separation-time\")\n\t\t\t\t\t.text(`${rl.formatSignificant(data.deltaTPrimeDecimal, \"\", 3, true)} sec`);\n\t\t\t\tsvg\n\t\t\t\t\t.select(\".separation-distance\")\n\t\t\t\t\t.text(`${rl.formatSignificant(data.deltaXPrimeDecimal, \"0\", 0)} km`);\n\t\t\t\ttooltips.reattach();\n\t\t\t}\n\t\t},\n\n\t\tplay() {\n\t\t\tif (!isPlaying) {\n\t\t\t\tisPlaying = true;\n\t\t\t\tanimation.play();\n\t\t\t\tsliderContainer.style(\"display\", \"none\");\n\t\t\t}\n\t\t},\n\n\t\tdestroy() {\n\t\t\twindow.removeEventListener(\"resize\", resizeHandler);\n\t\t\tdocument.removeEventListener(\"visibilitychange\", visibilityChangeHandler);\n\t\t\ttooltips.destroy();\n\t\t\tanimation.stop();\n\t\t\tcontrolContainer.remove();\n\t\t\tsvg.remove();\n\t\t},\n\t};\n\n\treturn controller;\n}\n","// Twin Paradox Minkowski Diagram - Shows dual reference frames and simultaneity jump\nimport Decimal from \"decimal.js\";\nimport { select, Selection } from \"d3-selection\";\nimport \"d3-transition\";\nimport { easeCubicInOut } from \"d3-ease\";\nimport { timer } from \"d3-timer\";\nimport { COLORS as D3_COLORS } from \"./minkowski-colors\";\nimport type { BaseController, ScaleSet, AnimationController } from \"./minkowski-types\";\nimport {\n\tC,\n\tdebounce,\n\tcreateScaleSet,\n\tsetupSVG,\n\tcreateAxisDefinitions,\n\tcreateLayerGroups,\n\trenderStandardAxes,\n\trenderTransformedAxes,\n\tcreateTooltip,\n} from \"./minkowski-core\";\nimport * as rl from \"../relativity_lib\";\n\n/**\n * Format velocity in m/s using Decimal.js precision\n */\nfunction formatVelocityMs(velocityC: number): string {\n\tconst velocityMs = rl.c.mul(velocityC); // c is in m/s\n\treturn rl.formatSignificant(velocityMs, \"9\", 2);\n}\n\nexport interface TwinParadoxMinkowskiData {\n\tvelocityC: number; // Velocity as fraction of c\n\tproperTimeYears: number; // Proper time in years\n\tearthTimeYears: number; // Coordinate time in years\n\tdistanceLY: number; // One-way distance in light years\n\tgamma: number; // Lorentz factor\n\t// Decimal versions for display formatting\n\tvelocityCDecimal: Decimal;\n\tproperTimeYearsDecimal: Decimal;\n\tearthTimeYearsDecimal: Decimal;\n\tdistanceLYDecimal: Decimal;\n\tgammaDecimal: Decimal;\n}\n\n/**\n * Controller for Twin Paradox Minkowski diagram with velocity slider\n */\nexport interface TwinParadoxController extends BaseController {\n\tupdate(data: TwinParadoxMinkowskiData): void;\n\tupdateSlider(velocityC: number): void;\n}\n\n/**\n * Calculate key events in spacetime for Twin Paradox\n */\nfunction calculateEvents(data: TwinParadoxMinkowskiData): {\n\tdeparture: { ct: number; x: number };\n\tturnaround: { ct: number; x: number };\n\tarrival: { ct: number; x: number };\n\tmaxCoord: number;\n} {\n\t// Convert to SI units (km and km for ct)\n\tconst earthTimeSec = data.earthTimeYears * 365.25 * 24 * 3600;\n\tconst distanceKm = data.distanceLY * 9.4607e12; // Light years to km\n\n\t// Key events\n\tconst departure = { ct: 0, x: 0 };\n\tconst turnaround = {\n\t\tct: (earthTimeSec / 2) * C, // Convert to ct in km\n\t\tx: distanceKm,\n\t};\n\tconst arrival = {\n\t\tct: earthTimeSec * C,\n\t\tx: 0,\n\t};\n\n\t// Calculate extent with padding - include all events\n\tconst maxCoord =\n\t\tMath.max(\n\t\t\tMath.abs(turnaround.ct),\n\t\t\tMath.abs(turnaround.x),\n\t\t\tMath.abs(arrival.ct),\n\t\t\tMath.abs(arrival.x)\n\t\t) * 1.3;\n\n\treturn { departure, turnaround, arrival, maxCoord };\n}\n\n/**\n * Render the V-shaped worldline for traveling twin\n */\nfunction renderWorldline(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdeparture: { ct: number; x: number },\n\tturnaround: { ct: number; x: number },\n\tarrival: { ct: number; x: number },\n\twithTransition: boolean\n): void {\n\tconst worldlinesGroup = svg.select(\"g.worldlines\");\n\n\t// Earth twin's worldline (vertical line at x=0)\n\tconst earthPath = [\n\t\t{ x: departure.x, y: departure.ct },\n\t\t{ x: arrival.x, y: arrival.ct },\n\t];\n\n\tconst earthLine = worldlinesGroup\n\t\t.selectAll(\"line.earth-worldline\")\n\t\t.data([earthPath])\n\t\t.join(\"line\")\n\t\t.attr(\"class\", \"earth-worldline\")\n\t\t.attr(\"stroke\", D3_COLORS.electricBlue)\n\t\t.attr(\"stroke-width\", 3);\n\n\tif (withTransition) {\n\t\tearthLine\n\t\t\t.transition()\n\t\t\t.duration(600)\n\t\t\t.ease(easeCubicInOut)\n\t\t\t.attr(\"x1\", d => scales.xScale(d[0].x))\n\t\t\t.attr(\"y1\", d => scales.yScale(d[0].y))\n\t\t\t.attr(\"x2\", d => scales.xScale(d[1].x))\n\t\t\t.attr(\"y2\", d => scales.yScale(d[1].y));\n\t} else {\n\t\tearthLine\n\t\t\t.attr(\"x1\", d => scales.xScale(d[0].x))\n\t\t\t.attr(\"y1\", d => scales.yScale(d[0].y))\n\t\t\t.attr(\"x2\", d => scales.xScale(d[1].x))\n\t\t\t.attr(\"y2\", d => scales.yScale(d[1].y));\n\t}\n\n\t// Traveling twin's worldline (V-shape)\n\tconst travelPath = [departure, turnaround, arrival];\n\tconst pathString = travelPath\n\t\t.map((p, i) => `${i === 0 ? \"M\" : \"L\"} ${scales.xScale(p.x)},${scales.yScale(p.ct)}`)\n\t\t.join(\" \");\n\n\tconst travelLine = worldlinesGroup\n\t\t.selectAll(\"path.travel-worldline\")\n\t\t.data([pathString])\n\t\t.join(\"path\")\n\t\t.attr(\"class\", \"travel-worldline\")\n\t\t.attr(\"stroke\", D3_COLORS.plasmaWhite)\n\t\t.attr(\"stroke-width\", 4)\n\t\t.attr(\"fill\", \"none\");\n\n\tif (withTransition) {\n\t\ttravelLine\n\t\t\t.transition()\n\t\t\t.duration(600)\n\t\t\t.ease(easeCubicInOut)\n\t\t\t.attr(\"d\", d => d);\n\t} else {\n\t\ttravelLine.attr(\"d\", d => d);\n\t}\n}\n\n/**\n * Render simultaneity lines for all three reference frames\n */\nfunction renderSimultaneityLines(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tturnaround: { ct: number; x: number },\n\tbeta: number,\n\textent: number\n): void {\n\tconst simGroup = svg.select(\"g.simultaneity-lines\");\n\tconst angle = Math.atan(beta);\n\tconst cosAngle = Math.cos(angle);\n\tconst sinAngle = Math.sin(angle);\n\tconst simLength = extent / cosAngle;\n\n\tconst lineData = [\n\t\t// Earth frame simultaneity at turnaround (horizontal)\n\t\t{\n\t\t\tx1: -extent,\n\t\t\ty1: turnaround.ct,\n\t\t\tx2: extent,\n\t\t\ty2: turnaround.ct,\n\t\t\tcolor: D3_COLORS.electricBlue,\n\t\t\tclass: \"sim-earth\",\n\t\t\tlabel: \"Earth simultaneity\",\n\t\t},\n\t\t// Outbound frame simultaneity at turnaround (tilted positive slope)\n\t\t{\n\t\t\tx1: turnaround.x - simLength * cosAngle,\n\t\t\ty1: turnaround.ct - simLength * sinAngle,\n\t\t\tx2: turnaround.x + simLength * cosAngle,\n\t\t\ty2: turnaround.ct + simLength * sinAngle,\n\t\t\tcolor: D3_COLORS.quantumGreen,\n\t\t\tclass: \"sim-outbound\",\n\t\t\tlabel: \"Outbound simultaneity\",\n\t\t},\n\t\t// Inbound frame simultaneity at turnaround (tilted negative slope)\n\t\t{\n\t\t\tx1: turnaround.x - simLength * cosAngle,\n\t\t\ty1: turnaround.ct + simLength * sinAngle,\n\t\t\tx2: turnaround.x + simLength * cosAngle,\n\t\t\ty2: turnaround.ct - simLength * sinAngle,\n\t\t\tcolor: D3_COLORS.photonGold,\n\t\t\tclass: \"sim-inbound\",\n\t\t\tlabel: \"Inbound simultaneity\",\n\t\t},\n\t];\n\n\tsimGroup\n\t\t.selectAll(\"line.simultaneity\")\n\t\t.data(lineData)\n\t\t.join(\"line\")\n\t\t.attr(\"class\", d => `simultaneity ${d.class}`)\n\t\t.attr(\"data-label\", d => d.label)\n\t\t.attr(\"stroke\", d => `${d.color}${D3_COLORS.simultaneity}`)\n\t\t.attr(\"stroke-width\", 2)\n\t\t.attr(\"x1\", d => scales.xScale(d.x1))\n\t\t.attr(\"y1\", d => scales.yScale(d.y1))\n\t\t.attr(\"x2\", d => scales.xScale(d.x2))\n\t\t.attr(\"y2\", d => scales.yScale(d.y2))\n\t\t.style(\"cursor\", \"pointer\");\n}\n\n/**\n * Render event markers at key points\n */\nfunction renderEvents(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdeparture: { ct: number; x: number },\n\tturnaround: { ct: number; x: number },\n\tarrival: { ct: number; x: number }\n): void {\n\tconst eventsGroup = svg.select(\"g.events\");\n\n\tconst eventData = [\n\t\t{ x: departure.x, y: departure.ct, label: \"Departure\", color: D3_COLORS.plasmaWhite },\n\t\t{ x: turnaround.x, y: turnaround.ct, label: \"Turnaround\", color: D3_COLORS.photonGold },\n\t\t{ x: arrival.x, y: arrival.ct, label: \"Arrival\", color: D3_COLORS.plasmaWhite },\n\t];\n\n\teventsGroup\n\t\t.selectAll(\"circle.event\")\n\t\t.data(eventData)\n\t\t.join(\"circle\")\n\t\t.attr(\"class\", \"event\")\n\t\t.attr(\"data-label\", d => d.label)\n\t\t.attr(\"cx\", d => scales.xScale(d.x))\n\t\t.attr(\"cy\", d => scales.yScale(d.y))\n\t\t.attr(\"r\", 7)\n\t\t.attr(\"fill\", d => d.color)\n\t\t.attr(\"stroke\", \"rgba(0, 0, 0, 0.5)\")\n\t\t.attr(\"stroke-width\", 2)\n\t\t.style(\"cursor\", \"pointer\");\n}\n\n/**\n * Render labels for events and coordinate info\n */\nfunction renderLabels(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdata: TwinParadoxMinkowskiData,\n\tdeparture: { ct: number; x: number },\n\tturnaround: { ct: number; x: number },\n\tarrival: { ct: number; x: number },\n\tsize: number\n): void {\n\tconst labelsGroup = svg.select(\"g.labels\");\n\n\t// Event labels\n\tconst eventLabels = [\n\t\t{ text: \"Departure\", x: departure.x, y: departure.ct, dx: -60, dy: 15 },\n\t\t{ text: \"Turnaround\", x: turnaround.x, y: turnaround.ct, dx: 10, dy: -15 },\n\t\t{ text: \"Arrival\", x: arrival.x, y: arrival.ct, dx: -50, dy: -15 },\n\t];\n\n\tlabelsGroup\n\t\t.selectAll(\"text.event-label\")\n\t\t.data(eventLabels)\n\t\t.join(\"text\")\n\t\t.attr(\"class\", \"event-label label\")\n\t\t.attr(\"x\", d => scales.xScale(d.x) + d.dx)\n\t\t.attr(\"y\", d => scales.yScale(d.y) + d.dy)\n\t\t.attr(\"fill\", D3_COLORS.plasmaWhite)\n\t\t.attr(\"text-anchor\", \"start\")\n\t\t.text(d => d.text);\n\n\t// Frame info (bottom right) - use Decimal versions for display precision\n\tconst infoData = [\n\t\t{\n\t\t\ttext: `Velocity: ${formatVelocityMs(data.velocityC)} m/s`,\n\t\t\ty: size - 75,\n\t\t\tcolor: D3_COLORS.plasmaWhite,\n\t\t},\n\t\t{\n\t\t\ttext: ` = ${rl.formatSignificant(data.gammaDecimal, \"0\", 3)}`,\n\t\t\ty: size - 60,\n\t\t\tcolor: D3_COLORS.plasmaWhite,\n\t\t},\n\t\t{\n\t\t\ttext: `Proper time: ${rl.formatSignificant(data.properTimeYearsDecimal, \"\", 2, true)} years`,\n\t\t\ty: size - 45,\n\t\t\tcolor: D3_COLORS.quantumGreen,\n\t\t},\n\t\t{\n\t\t\ttext: `Earth time: ${rl.formatSignificant(data.earthTimeYearsDecimal, \"\", 2, true)} years`,\n\t\t\ty: size - 30,\n\t\t\tcolor: D3_COLORS.electricBlue,\n\t\t},\n\t];\n\n\tlabelsGroup\n\t\t.selectAll(\"text.info-label\")\n\t\t.data(infoData)\n\t\t.join(\"text\")\n\t\t.attr(\"class\", \"info-label header\")\n\t\t.attr(\"x\", size - 15)\n\t\t.attr(\"y\", d => d.y)\n\t\t.attr(\"text-anchor\", \"end\")\n\t\t.attr(\"fill\", d => d.color)\n\t\t.text(d => d.text);\n\n\t// Legend for simultaneity jump (top right) - calculate from Decimal for precision\n\tconst ageDifferenceDecimal = data.earthTimeYearsDecimal.minus(data.properTimeYearsDecimal);\n\tlabelsGroup\n\t\t.selectAll(\"text.legend\")\n\t\t.data([{ text: `Age difference: ${rl.formatSignificant(ageDifferenceDecimal, \"0\", 2)} years` }])\n\t\t.join(\"text\")\n\t\t.attr(\"class\", \"legend header\")\n\t\t.attr(\"x\", size - 15)\n\t\t.attr(\"y\", 25)\n\t\t.attr(\"text-anchor\", \"end\")\n\t\t.attr(\"fill\", D3_COLORS.photonGold)\n\t\t.text(d => d.text);\n}\n\n/**\n * Render legend explaining diagram elements (below the SVG)\n */\nfunction renderLegend(container: HTMLElement): void {\n\t// Remove existing legend if present\n\tselect(container).select(\".twins-legend\").remove();\n\n\t// Create legend container\n\tconst legend = select(container)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"twins-legend\")\n\t\t.style(\"margin-top\", \"1rem\")\n\t\t.style(\"padding\", \"1rem\")\n\t\t.style(\"background\", \"rgba(0, 0, 0, 0.5)\")\n\t\t.style(\"border\", \"1px solid rgba(0, 217, 255, 0.2)\");\n\n\t// Legend title\n\tlegend\n\t\t.append(\"div\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-weight\", \"bold\")\n\t\t.style(\"font-size\", \"12px\")\n\t\t.style(\"color\", \"#e8f1f5\")\n\t\t.style(\"margin-bottom\", \"0.5rem\")\n\t\t.text(\"LEGEND\");\n\n\t// Legend grid\n\tconst grid = legend\n\t\t.append(\"div\")\n\t\t.style(\"display\", \"grid\")\n\t\t.style(\"grid-template-columns\", \"repeat(auto-fit, minmax(200px, 1fr))\")\n\t\t.style(\"gap\", \"0.5rem\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\");\n\n\t// Legend items\n\tconst legendItems = [\n\t\t{ color: \"#00d9ff\", text: \"Earth frame (ct, x)\", type: \"solid\" },\n\t\t{ color: \"#00ff9f\", text: \"Outbound frame (ct', x')\", type: \"solid\" },\n\t\t{ color: \"#ffaa00\", text: \"Inbound frame (ct', x')\", type: \"solid\" },\n\t\t{ color: \"#e8f1f5\", text: \"Traveling twin worldline\", type: \"solid-thick\" },\n\t\t{ color: \"#00d9ff\", text: \"Earth twin (stationary)\", type: \"solid\" },\n\t\t{ color: \"#ffaa00\", text: \"Light cones (c)\", type: \"dashed\" },\n\t\t{ color: \"rgba(0, 217, 255, 0.5)\", text: \"Simultaneity lines\", type: \"solid\" },\n\t\t{ color: \"#e8f1f5\", text: \"Departure/Arrival events\", type: \"circle\" },\n\t\t{ color: \"#ffaa00\", text: \"Turnaround event\", type: \"circle\" },\n\t];\n\n\tlegendItems.forEach(item => {\n\t\tconst itemDiv = grid\n\t\t\t.append(\"div\")\n\t\t\t.style(\"display\", \"flex\")\n\t\t\t.style(\"align-items\", \"center\")\n\t\t\t.style(\"gap\", \"0.5rem\");\n\n\t\t// Visual indicator\n\t\tconst indicator = itemDiv.append(\"div\").style(\"flex-shrink\", \"0\");\n\n\t\tif (item.type === \"solid\" || item.type === \"solid-thick\") {\n\t\t\tindicator\n\t\t\t\t.style(\"width\", \"35px\")\n\t\t\t\t.style(\"height\", item.type === \"solid-thick\" ? \"4px\" : \"3px\")\n\t\t\t\t.style(\"background\", item.color);\n\t\t} else if (item.type === \"dashed\") {\n\t\t\tindicator\n\t\t\t\t.style(\"width\", \"35px\")\n\t\t\t\t.style(\"height\", \"2px\")\n\t\t\t\t.style(\n\t\t\t\t\t\"background-image\",\n\t\t\t\t\t`repeating-linear-gradient(90deg, ${item.color} 0px, ${item.color} 5px, transparent 5px, transparent 10px)`\n\t\t\t\t);\n\t\t} else if (item.type === \"circle\") {\n\t\t\tindicator\n\t\t\t\t.style(\"width\", \"12px\")\n\t\t\t\t.style(\"height\", \"12px\")\n\t\t\t\t.style(\"border-radius\", \"50%\")\n\t\t\t\t.style(\"background\", item.color)\n\t\t\t\t.style(\"border\", \"2px solid rgba(0, 0, 0, 0.5)\");\n\t\t}\n\n\t\t// Label\n\t\titemDiv.append(\"span\").style(\"color\", \"#e8f1f5\").text(item.text);\n\t});\n}\n\n/**\n * Setup tooltips for Twin Paradox diagram\n */\nfunction setupTooltips(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tcontainer: HTMLElement\n): void {\n\tconst tooltip = createTooltip(container);\n\n\t// Axis tooltips\n\tsvg\n\t\t.selectAll(\"g.axes line\")\n\t\t.on(\"mouseenter\", function (event: MouseEvent) {\n\t\t\tconst axis = (this as SVGLineElement).getAttribute(\"data-axis\");\n\t\t\tconst axisName =\n\t\t\t\taxis === \"ct\"\n\t\t\t\t\t? \"ct axis - Earth Frame (time)\"\n\t\t\t\t\t: axis === \"x\"\n\t\t\t\t\t\t? \"x axis - Earth Frame (space)\"\n\t\t\t\t\t\t: axis === \"ct'\"\n\t\t\t\t\t\t\t? \"ct' axis - Outbound Frame (time)\"\n\t\t\t\t\t\t\t: axis === \"x'\"\n\t\t\t\t\t\t\t\t? \"x' axis - Outbound Frame (space)\"\n\t\t\t\t\t\t\t\t: axis === \"ct'\"\n\t\t\t\t\t\t\t\t\t? \"ct' axis - Inbound Frame (time)\"\n\t\t\t\t\t\t\t\t\t: \"x' axis - Inbound Frame (space)\";\n\n\t\t\ttooltip.show(axisName, event.clientX + 10, event.clientY + 10);\n\t\t})\n\t\t.on(\"mouseleave\", () => {\n\t\t\ttooltip.hide();\n\t\t});\n\n\t// Event tooltips\n\tsvg\n\t\t.selectAll(\"g.events circle\")\n\t\t.on(\"mouseenter\", function (event: MouseEvent) {\n\t\t\tconst label = (this as SVGCircleElement).getAttribute(\"data-label\");\n\t\t\ttooltip.show(label || \"\", event.clientX + 10, event.clientY + 10);\n\t\t})\n\t\t.on(\"mouseleave\", () => {\n\t\t\ttooltip.hide();\n\t\t});\n\n\t// Simultaneity line tooltips\n\tsvg\n\t\t.selectAll(\"g.simultaneity-lines line\")\n\t\t.on(\"mouseenter\", function (event: MouseEvent) {\n\t\t\tconst label = (this as SVGLineElement).getAttribute(\"data-label\");\n\t\t\ttooltip.show(label || \"\", event.clientX + 10, event.clientY + 10);\n\t\t})\n\t\t.on(\"mouseleave\", () => {\n\t\t\ttooltip.hide();\n\t\t});\n\n\t// Light cone tooltips\n\tsvg\n\t\t.selectAll(\"g.light-cones line\")\n\t\t.on(\"mouseenter\", function (event: MouseEvent) {\n\t\t\ttooltip.show(\"Light cone boundary (c)\", event.clientX + 10, event.clientY + 10);\n\t\t})\n\t\t.on(\"mouseleave\", () => {\n\t\t\ttooltip.hide();\n\t\t});\n}\n\n/**\n * Start animation showing the journey along the worldline\n * Animates a marker along the path with light cone at current position\n */\nfunction startJourneyAnimation(\n\tsvg: Selection<SVGSVGElement, unknown, null, undefined>,\n\tscales: ScaleSet,\n\tdata: TwinParadoxMinkowskiData,\n\tdeparture: { ct: number; x: number },\n\tturnaround: { ct: number; x: number },\n\tarrival: { ct: number; x: number },\n\t_onUpdate: () => void\n): AnimationController {\n\tconst LOOP_DURATION = 12000; // 12 seconds for complete journey\n\tlet startTime = Date.now();\n\tlet isPaused = false;\n\tlet totalPausedTime = 0;\n\tlet pauseStartTime = 0;\n\tlet manualPosition: number | null = null;\n\n\t// Create animated marker group\n\tconst animatedGroup = svg.append(\"g\").attr(\"class\", \"animated-journey\");\n\n\tconst updateFrame = (t: number) => {\n\t\t// t goes from 0 to 1\n\t\t// First half (0-0.5): outbound journey from departure to turnaround\n\t\t// Second half (0.5-1.0): return journey from turnaround to arrival\n\t\tlet currentPos: { ct: number; x: number };\n\t\tlet properTime: number;\n\n\t\tif (t < 0.5) {\n\t\t\t// Outbound: interpolate between departure and turnaround\n\t\t\tconst segmentT = t * 2; // 0 to 1 within this segment\n\t\t\tcurrentPos = {\n\t\t\t\tct: departure.ct + (turnaround.ct - departure.ct) * segmentT,\n\t\t\t\tx: departure.x + (turnaround.x - departure.x) * segmentT,\n\t\t\t};\n\t\t\tproperTime = (data.properTimeYears * segmentT) / 2;\n\t\t} else {\n\t\t\t// Inbound: interpolate between turnaround and arrival\n\t\t\tconst segmentT = (t - 0.5) * 2; // 0 to 1 within this segment\n\t\t\tcurrentPos = {\n\t\t\t\tct: turnaround.ct + (arrival.ct - turnaround.ct) * segmentT,\n\t\t\t\tx: turnaround.x + (arrival.x - turnaround.x) * segmentT,\n\t\t\t};\n\t\t\tproperTime = data.properTimeYears * (0.5 + segmentT / 2);\n\t\t}\n\n\t\tconst earthTime = currentPos.ct / C / (365.25 * 24 * 3600);\n\n\t\t// Clear previous animated elements\n\t\tanimatedGroup.selectAll(\"*\").remove();\n\n\t\t// Draw light cone at current position\n\t\tconst extent = scales.maxCoord;\n\t\tconst largeExtent = extent * 2;\n\n\t\t// Light cone fill polygons (future and past)\n\t\tconst coneFillData = [\n\t\t\t{\n\t\t\t\tpoints: [\n\t\t\t\t\t[currentPos.x, currentPos.ct],\n\t\t\t\t\t[currentPos.x + largeExtent, currentPos.ct + largeExtent],\n\t\t\t\t\t[currentPos.x + largeExtent, currentPos.ct - largeExtent],\n\t\t\t\t],\n\t\t\t\tclass: \"future\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpoints: [\n\t\t\t\t\t[currentPos.x, currentPos.ct],\n\t\t\t\t\t[currentPos.x - largeExtent, currentPos.ct - largeExtent],\n\t\t\t\t\t[currentPos.x - largeExtent, currentPos.ct + largeExtent],\n\t\t\t\t],\n\t\t\t\tclass: \"past\",\n\t\t\t},\n\t\t];\n\n\t\tanimatedGroup\n\t\t\t.selectAll(\"polygon.cone-fill\")\n\t\t\t.data(coneFillData)\n\t\t\t.join(\"polygon\")\n\t\t\t.attr(\"class\", \"cone-fill\")\n\t\t\t.attr(\"points\", d =>\n\t\t\t\td.points.map(p => `${scales.xScale(p[0])},${scales.yScale(p[1])}`).join(\" \")\n\t\t\t)\n\t\t\t.attr(\"fill\", `${D3_COLORS.electricBlue}${D3_COLORS.lightConeFill}`)\n\t\t\t.attr(\"stroke\", \"none\");\n\n\t\t// Light cone boundary lines\n\t\tconst coneExtent = Math.min(extent, currentPos.ct); // Don't extend before t=0\n\n\t\tanimatedGroup\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", scales.xScale(currentPos.x - coneExtent))\n\t\t\t.attr(\"y1\", scales.yScale(currentPos.ct - coneExtent))\n\t\t\t.attr(\"x2\", scales.xScale(currentPos.x + coneExtent))\n\t\t\t.attr(\"y2\", scales.yScale(currentPos.ct + coneExtent))\n\t\t\t.attr(\"stroke\", `${D3_COLORS.photonGold}80`)\n\t\t\t.attr(\"stroke-width\", 2)\n\t\t\t.attr(\"stroke-dasharray\", \"8,4\");\n\n\t\tanimatedGroup\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", scales.xScale(currentPos.x - coneExtent))\n\t\t\t.attr(\"y1\", scales.yScale(currentPos.ct + coneExtent))\n\t\t\t.attr(\"x2\", scales.xScale(currentPos.x + coneExtent))\n\t\t\t.attr(\"y2\", scales.yScale(currentPos.ct - coneExtent))\n\t\t\t.attr(\"stroke\", `${D3_COLORS.photonGold}80`)\n\t\t\t.attr(\"stroke-width\", 2)\n\t\t\t.attr(\"stroke-dasharray\", \"8,4\");\n\n\t\t// Draw position marker\n\t\tanimatedGroup\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"cx\", scales.xScale(currentPos.x))\n\t\t\t.attr(\"cy\", scales.yScale(currentPos.ct))\n\t\t\t.attr(\"r\", 10)\n\t\t\t.attr(\"fill\", D3_COLORS.quantumGreen)\n\t\t\t.attr(\"stroke\", D3_COLORS.plasmaWhite)\n\t\t\t.attr(\"stroke-width\", 3)\n\t\t\t.style(\"filter\", \"drop-shadow(0 0 8px \" + D3_COLORS.quantumGreen + \")\");\n\n\t\t// Update time labels at bottom right - use Decimal for consistent precision\n\t\tconst properTimeDecimal = rl.ensure(properTime);\n\t\tconst earthTimeDecimal = rl.ensure(earthTime);\n\t\tsvg\n\t\t\t.select(\"g.labels\")\n\t\t\t.selectAll(\"text.info-label\")\n\t\t\t.filter((_, i) => i === 2)\n\t\t\t.text(`Proper time: ${rl.formatSignificant(properTimeDecimal, \"\", 2, true)} years`);\n\n\t\tsvg\n\t\t\t.select(\"g.labels\")\n\t\t\t.selectAll(\"text.info-label\")\n\t\t\t.filter((_, i) => i === 3)\n\t\t\t.text(`Earth time: ${rl.formatSignificant(earthTimeDecimal, \"\", 2, true)} years`);\n\t};\n\n\tconst animationTimer = timer(() => {\n\t\tif (isPaused || manualPosition !== null) return;\n\n\t\tconst elapsed = Date.now() - startTime - totalPausedTime;\n\t\tconst t = (elapsed % LOOP_DURATION) / LOOP_DURATION;\n\t\tupdateFrame(t);\n\t});\n\n\treturn {\n\t\tpause() {\n\t\t\tif (!isPaused) {\n\t\t\t\tisPaused = true;\n\t\t\t\tpauseStartTime = Date.now();\n\t\t\t}\n\t\t},\n\t\tplay() {\n\t\t\tif (isPaused) {\n\t\t\t\ttotalPausedTime += Date.now() - pauseStartTime;\n\t\t\t\tisPaused = false;\n\t\t\t\tmanualPosition = null;\n\t\t\t}\n\t\t},\n\t\tstop() {\n\t\t\tanimationTimer.stop();\n\t\t\tanimatedGroup.remove();\n\t\t},\n\t\tsetPosition(t: number) {\n\t\t\tmanualPosition = t;\n\t\t\tupdateFrame(t);\n\t\t},\n\t};\n}\n\n/**\n * Main function: Draw Twin Paradox Minkowski diagram\n */\nexport function drawTwinParadoxMinkowski(\n\tcontainer: HTMLElement,\n\tdata: TwinParadoxMinkowskiData,\n\tonVelocityChange?: (velocityC: number) => void\n): TwinParadoxController {\n\tconst size = 900;\n\tlet isSliderUpdate = false;\n\n\t// Calculate key events\n\tlet events = calculateEvents(data);\n\tlet scales = createScaleSet(events.maxCoord, size);\n\n\t// Setup SVG\n\tconst svg = setupSVG(container, size);\n\tcreateAxisDefinitions(svg);\n\tcreateLayerGroups(svg);\n\n\t// Initial render\n\trenderStandardAxes(svg, scales, { ctLabel: \"ct (Earth)\", xLabel: \"x\" });\n\tconst beta = data.velocityC;\n\n\t// Render outbound frame axes (green)\n\trenderTransformedAxes(\n\t\tsvg,\n\t\tscales,\n\t\tbeta,\n\t\t{ ctLabel: \"ct'\", xLabel: \"x'\" },\n\t\tD3_COLORS.quantumGreen,\n\t\t\"url(#arrowGreen)\",\n\t\t\"axis-outbound\"\n\t);\n\n\t// Render inbound frame axes (amber) - negative velocity, centered at turnaround\n\trenderTransformedAxes(\n\t\tsvg,\n\t\tscales,\n\t\t-beta,\n\t\t{ ctLabel: \"ct'\", xLabel: \"x'\" },\n\t\tD3_COLORS.photonGold,\n\t\t\"url(#arrowAmber)\",\n\t\t\"axis-inbound\",\n\t\tevents.turnaround\n\t);\n\n\t// Render simultaneity lines\n\trenderSimultaneityLines(svg, scales, events.turnaround, beta, events.maxCoord);\n\n\t// Render worldlines\n\trenderWorldline(svg, scales, events.departure, events.turnaround, events.arrival, false);\n\n\t// Render events\n\trenderEvents(svg, scales, events.departure, events.turnaround, events.arrival);\n\n\t// Render labels\n\trenderLabels(svg, scales, data, events.departure, events.turnaround, events.arrival, size);\n\n\t// Render legend (below SVG)\n\trenderLegend(container);\n\n\t// Setup tooltips\n\tsetupTooltips(svg, container);\n\n\t// Create animation controls container (bottom-middle of diagram)\n\tconst controlContainer = select(container)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"minkowski-controls\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"bottom\", \"220px\")\n\t\t.style(\"left\", \"50%\")\n\t\t.style(\"transform\", \"translateX(-50%)\")\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"flex-direction\", \"column\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"gap\", \"8px\")\n\t\t.style(\"z-index\", \"1000\");\n\n\t// Create toggle button for play/pause\n\tconst toggleButton = controlContainer\n\t\t.append(\"button\")\n\t\t.attr(\"class\", \"minkowski-toggle-button\")\n\t\t.text(\"Toggle Animation\")\n\t\t.style(\"padding\", \"8px 16px\")\n\t\t.style(\"background\", D3_COLORS.tooltipBg)\n\t\t.style(\"border\", `1px solid ${D3_COLORS.tooltipBorder}`)\n\t\t.style(\"color\", D3_COLORS.plasmaWhite)\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"12px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"box-shadow\", `0 0 10px ${D3_COLORS.tooltipBorder}60`)\n\t\t.style(\"transition\", \"all 200ms\")\n\t\t.on(\"mouseenter\", function () {\n\t\t\tselect(this)\n\t\t\t\t.style(\"background\", D3_COLORS.tooltipBorder)\n\t\t\t\t.style(\"box-shadow\", `0 0 15px ${D3_COLORS.tooltipBorder}80`);\n\t\t})\n\t\t.on(\"mouseleave\", function () {\n\t\t\tselect(this)\n\t\t\t\t.style(\"background\", D3_COLORS.tooltipBg)\n\t\t\t\t.style(\"box-shadow\", `0 0 10px ${D3_COLORS.tooltipBorder}60`);\n\t\t});\n\n\t// Create slider for manual position control (hidden initially)\n\tconst sliderContainer = controlContainer\n\t\t.append(\"div\")\n\t\t.style(\"display\", \"none\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"gap\", \"8px\");\n\n\tsliderContainer\n\t\t.append(\"label\")\n\t\t.style(\"color\", D3_COLORS.quantumGreen)\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.text(\"Position:\");\n\n\tsliderContainer\n\t\t.append(\"input\")\n\t\t.attr(\"type\", \"range\")\n\t\t.attr(\"min\", \"0\")\n\t\t.attr(\"max\", \"50\")\n\t\t.attr(\"value\", \"0\")\n\t\t.style(\"width\", \"200px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.on(\"input\", function () {\n\t\t\tconst value = parseFloat((this as HTMLInputElement).value) / 50;\n\t\t\tanimation.setPosition(value);\n\t\t});\n\n\t// Start journey animation\n\tlet animation = startJourneyAnimation(\n\t\tsvg,\n\t\tscales,\n\t\tdata,\n\t\tevents.departure,\n\t\tevents.turnaround,\n\t\tevents.arrival,\n\t\t() => {\n\t\t\t// Animation update callback (currently unused)\n\t\t}\n\t);\n\tlet isPlaying = true;\n\n\t// Add click handler for toggle button\n\ttoggleButton.on(\"click\", () => {\n\t\tif (isPlaying) {\n\t\t\tanimation.pause();\n\t\t\tisPlaying = false;\n\t\t\tsliderContainer.style(\"display\", \"flex\");\n\t\t} else {\n\t\t\tanimation.play();\n\t\t\tisPlaying = true;\n\t\t\tsliderContainer.style(\"display\", \"none\");\n\t\t}\n\t});\n\n\t// Debounce timer for velocity slider updates\n\tlet velocityUpdateTimeout: number | null = null;\n\n\t// Create velocity slider control (top of diagram, below title)\n\tconst velocitySliderContainer = select(container)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"minkowski-velocity-slider\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"top\", \"50px\")\n\t\t.style(\"left\", \"20px\")\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"gap\", \"8px\")\n\t\t.style(\"padding\", \"6px 8px\")\n\t\t.style(\"background\", D3_COLORS.tooltipBg)\n\t\t.style(\"border\", `1px solid ${D3_COLORS.tooltipBorder}`)\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"box-shadow\", `0 0 10px ${D3_COLORS.tooltipBorder}60`)\n\t\t.style(\"z-index\", \"1000\");\n\n\t// Value display\n\tconst velocityValueDisplay = velocitySliderContainer\n\t\t.append(\"span\")\n\t\t.attr(\"class\", \"velocity-value-display\")\n\t\t.style(\"color\", D3_COLORS.plasmaWhite)\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.style(\"font-weight\", \"600\")\n\t\t.style(\"min-width\", \"70px\")\n\t\t.style(\"text-align\", \"right\")\n\t\t.text(`v = ${rl.formatSignificant(data.velocityCDecimal, \"9\", 3)}c`);\n\n\t// Slider input\n\tconst velocitySlider = velocitySliderContainer\n\t\t.append(\"input\")\n\t\t.attr(\"type\", \"range\")\n\t\t.attr(\"min\", \"0.001\")\n\t\t.attr(\"max\", \"0.999\")\n\t\t.attr(\"step\", \"0.001\")\n\t\t.attr(\"value\", data.velocityC.toString())\n\t\t.attr(\"class\", \"velocity-slider-input\")\n\t\t.style(\"width\", \"200px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.on(\"input\", function () {\n\t\t\tconst newVelocityC = parseFloat((this as HTMLInputElement).value);\n\t\t\t// Update display immediately for responsive feedback\n\t\t\tvelocityValueDisplay.text(`v = ${rl.formatSignificant(rl.ensure(newVelocityC), \"9\", 3)}c`);\n\n\t\t\t// Clear existing timeout\n\t\t\tif (velocityUpdateTimeout !== null) {\n\t\t\t\twindow.clearTimeout(velocityUpdateTimeout);\n\t\t\t}\n\n\t\t\t// Debounce diagram update - only update after 300ms pause\n\t\t\tvelocityUpdateTimeout = window.setTimeout(() => {\n\t\t\t\tif (onVelocityChange) {\n\t\t\t\t\tisSliderUpdate = true;\n\t\t\t\t\tonVelocityChange(newVelocityC);\n\t\t\t\t}\n\t\t\t\tvelocityUpdateTimeout = null;\n\t\t\t}, 300);\n\t\t});\n\n\t// Pause animation when tab is hidden\n\tconst visibilityChangeHandler = () => {\n\t\tif (document.hidden) {\n\t\t\tanimation.pause();\n\t\t} else if (isPlaying) {\n\t\t\tanimation.play();\n\t\t}\n\t};\n\tdocument.addEventListener(\"visibilitychange\", visibilityChangeHandler);\n\n\t// Resize handler\n\tlet lastInnerWidth = window.innerWidth;\n\tconst resizeHandler = debounce(() => {\n\t\t// iOS Safari fires resize during scroll (height-only visual viewport changes)\n\t\tif (window.innerWidth === lastInnerWidth) return;\n\t\tlastInnerWidth = window.innerWidth;\n\n\t\tevents = calculateEvents(data);\n\t\tscales = createScaleSet(events.maxCoord, size);\n\t\tconst beta = data.velocityC;\n\n\t\t// Re-render everything\n\t\tsvg.select(\"g.axes\").selectAll(\"*\").remove();\n\t\tsvg.select(\"g.light-cones\").selectAll(\"*\").remove();\n\t\tsvg.select(\"g.simultaneity-lines\").selectAll(\"*\").remove();\n\t\tsvg.select(\"g.worldlines\").selectAll(\"*\").remove();\n\t\tsvg.select(\"g.events\").selectAll(\"*\").remove();\n\t\tsvg.select(\"g.labels\").selectAll(\"*\").remove();\n\n\t\trenderStandardAxes(svg, scales, { ctLabel: \"ct (Earth)\", xLabel: \"x\" });\n\t\trenderTransformedAxes(\n\t\t\tsvg,\n\t\t\tscales,\n\t\t\tbeta,\n\t\t\t{ ctLabel: \"ct'\", xLabel: \"x'\" },\n\t\t\tD3_COLORS.quantumGreen,\n\t\t\t\"url(#arrowGreen)\",\n\t\t\t\"axis-outbound\"\n\t\t);\n\t\trenderTransformedAxes(\n\t\t\tsvg,\n\t\t\tscales,\n\t\t\t-beta,\n\t\t\t{ ctLabel: \"ct'\", xLabel: \"x'\" },\n\t\t\tD3_COLORS.photonGold,\n\t\t\t\"url(#arrowAmber)\",\n\t\t\t\"axis-inbound\",\n\t\t\tevents.turnaround\n\t\t);\n\t\trenderSimultaneityLines(svg, scales, events.turnaround, beta, events.maxCoord);\n\t\trenderWorldline(svg, scales, events.departure, events.turnaround, events.arrival, false);\n\t\trenderEvents(svg, scales, events.departure, events.turnaround, events.arrival);\n\t\trenderLabels(svg, scales, data, events.departure, events.turnaround, events.arrival, size);\n\t\trenderLegend(container);\n\t\tsetupTooltips(svg, container);\n\t}, 150);\n\n\twindow.addEventListener(\"resize\", resizeHandler);\n\n\t// Public controller API\n\tconst controller: TwinParadoxController = {\n\t\tupdate(newData: TwinParadoxMinkowskiData) {\n\t\t\tdata = newData;\n\t\t\tconst twinsData = data;\n\t\t\t// Re-calculate and re-render with new data\n\t\t\tevents = calculateEvents(twinsData);\n\t\t\tscales = createScaleSet(events.maxCoord, size);\n\n\t\t\t// Stop old animation and start new one with updated data\n\t\t\tconst wasPlaying = isPlaying;\n\t\t\tanimation.stop();\n\t\t\tanimation = startJourneyAnimation(\n\t\t\t\tsvg,\n\t\t\t\tscales,\n\t\t\t\ttwinsData,\n\t\t\t\tevents.departure,\n\t\t\t\tevents.turnaround,\n\t\t\t\tevents.arrival,\n\t\t\t\t() => {\n\t\t\t\t\t// Animation update callback (currently unused)\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (!wasPlaying) {\n\t\t\t\tanimation.pause();\n\t\t\t\tisPlaying = false;\n\t\t\t\tsliderContainer.style(\"display\", \"flex\");\n\t\t\t}\n\n\t\t\t// Clear and re-render\n\t\t\tsvg.select(\"g.axes\").selectAll(\"*\").remove();\n\t\t\tsvg.select(\"g.light-cones\").selectAll(\"*\").remove();\n\t\t\tsvg.select(\"g.simultaneity-lines\").selectAll(\"*\").remove();\n\t\t\tsvg.select(\"g.worldlines\").selectAll(\"*\").remove();\n\t\t\tsvg.select(\"g.events\").selectAll(\"*\").remove();\n\t\t\tsvg.select(\"g.labels\").selectAll(\"*\").remove();\n\n\t\t\tconst beta = twinsData.velocityC;\n\t\t\trenderStandardAxes(svg, scales, { ctLabel: \"ct (Earth)\", xLabel: \"x\" });\n\t\t\trenderTransformedAxes(\n\t\t\t\tsvg,\n\t\t\t\tscales,\n\t\t\t\tbeta,\n\t\t\t\t{ ctLabel: \"ct'\", xLabel: \"x'\" },\n\t\t\t\tD3_COLORS.quantumGreen,\n\t\t\t\t\"url(#arrowGreen)\",\n\t\t\t\t\"axis-outbound\"\n\t\t\t);\n\t\t\trenderTransformedAxes(\n\t\t\t\tsvg,\n\t\t\t\tscales,\n\t\t\t\t-beta,\n\t\t\t\t{ ctLabel: \"ct'\", xLabel: \"x'\" },\n\t\t\t\tD3_COLORS.photonGold,\n\t\t\t\t\"url(#arrowAmber)\",\n\t\t\t\t\"axis-inbound\",\n\t\t\t\tevents.turnaround\n\t\t\t);\n\t\t\trenderSimultaneityLines(svg, scales, events.turnaround, beta, events.maxCoord);\n\t\t\trenderWorldline(svg, scales, events.departure, events.turnaround, events.arrival, true);\n\t\t\trenderEvents(svg, scales, events.departure, events.turnaround, events.arrival);\n\t\t\trenderLabels(\n\t\t\t\tsvg,\n\t\t\t\tscales,\n\t\t\t\ttwinsData,\n\t\t\t\tevents.departure,\n\t\t\t\tevents.turnaround,\n\t\t\t\tevents.arrival,\n\t\t\t\tsize\n\t\t\t);\n\t\t\trenderLegend(container);\n\t\t\tsetupTooltips(svg, container);\n\n\t\t\t// Update velocity slider to match new data (unless update came from slider)\n\t\t\tif (!isSliderUpdate) {\n\t\t\t\tvelocitySlider.property(\"value\", twinsData.velocityC);\n\t\t\t\tvelocityValueDisplay.text(\n\t\t\t\t\t`v = ${rl.formatSignificant(twinsData.velocityCDecimal, \"9\", 3)}c`\n\t\t\t\t);\n\t\t\t}\n\t\t\tisSliderUpdate = false;\n\t\t},\n\n\t\tupdateSlider(velocityC: number) {\n\t\t\tvelocitySlider.property(\"value\", velocityC);\n\t\t\tvelocityValueDisplay.text(`v = ${rl.formatSignificant(rl.ensure(velocityC), \"9\", 3)}c`);\n\t\t},\n\n\t\tpause() {\n\t\t\tanimation.pause();\n\t\t\tisPlaying = false;\n\t\t},\n\n\t\tplay() {\n\t\t\tanimation.play();\n\t\t\tisPlaying = true;\n\t\t},\n\n\t\tdestroy() {\n\t\t\tanimation.stop();\n\t\t\twindow.removeEventListener(\"resize\", resizeHandler);\n\t\t\tdocument.removeEventListener(\"visibilitychange\", visibilityChangeHandler);\n\t\t\tselect(container).selectAll(\"*\").remove();\n\t\t},\n\t};\n\n\treturn controller;\n}\n","/**\n * State management for simultaneity diagram events\n * Replaces global window pollution with proper module-level state\n */\n\nimport Decimal from \"decimal.js\";\n\nexport interface SimultaneityEventData {\n\tct: number;\n\tx: number;\n\tctDecimal: Decimal;\n\txDecimal: Decimal;\n}\n\ntype EventCallback = (events: SimultaneityEventData[]) => void;\n\n/**\n * Internal state\n */\nlet currentEvents: SimultaneityEventData[] = [];\nlet pendingEvents: SimultaneityEventData[] | null = null;\nconst subscribers = new Set<EventCallback>();\n\n/**\n * Get current events from the simultaneity diagram\n */\nexport function getEvents(): SimultaneityEventData[] {\n\treturn currentEvents;\n}\n\n/**\n * Update current events (called by simultaneity diagram)\n */\nexport function setEvents(events: SimultaneityEventData[]): void {\n\tcurrentEvents = events;\n\tnotifySubscribers();\n}\n\n/**\n * Store pending events (called when loading from URL before diagram initializes)\n */\nexport function setPendingEvents(events: SimultaneityEventData[]): void {\n\tpendingEvents = events;\n}\n\n/**\n * Get and clear pending events (called by diagram during initialization)\n */\nexport function consumePendingEvents(): SimultaneityEventData[] | null {\n\tconst events = pendingEvents;\n\tpendingEvents = null;\n\treturn events;\n}\n\n/**\n * Subscribe to event changes\n */\nexport function subscribe(callback: EventCallback): () => void {\n\tsubscribers.add(callback);\n\treturn () => subscribers.delete(callback);\n}\n\n/**\n * Notify all subscribers of event changes\n */\nfunction notifySubscribers(): void {\n\tsubscribers.forEach(cb => cb(currentEvents));\n}\n","/**\n * URL State Management for Special Relativity Calculator\n * Handles bidirectional synchronization between URL parameters and calculator inputs\n */\n\nimport * as simultaneityState from \"./charts/simultaneityState\";\nimport * as rl from \"./relativity_lib\";\nimport Decimal from \"decimal.js\";\nimport { distanceToSlider } from \"./ui/eventHandlers\";\n\n// Store pending slider values to apply after chart initialization\n// Note: No longer populated for motion/flip tabs, but kept for backward compatibility\nlet pendingSliderValues: Record<string, number> = {};\n\n// Parameter mapping: clean URL param name -> HTML input element ID\ntype ParamMap = Record<string, string>;\n\ninterface TabConfig {\n\tname: string;\n\tparams: ParamMap;\n\tbuttonId: string;\n\ttabId: string; // Bootstrap tab button ID\n}\n\n// Tab configurations mapping URL params to input IDs\nconst TAB_CONFIGS: Record<string, TabConfig> = {\n\tmotion: {\n\t\tname: \"motion\",\n\t\tparams: {\n\t\t\taccel: \"aAccelInput\",\n\t\t\ttime: \"aInput\",\n\t\t\tdry: \"aDryMassInput\",\n\t\t\teff: \"aEfficiencyInput\",\n\t\t},\n\t\tbuttonId: \"aButton\",\n\t\ttabId: \"motion-tab\",\n\t},\n\tflip: {\n\t\tname: \"flip\",\n\t\tparams: {\n\t\t\taccel: \"flipAccelInput\",\n\t\t\tdist: \"flipInput\",\n\t\t\tdry: \"flipDryMassInput\",\n\t\t\teff: \"flipEfficiencyInput\",\n\t\t},\n\t\tbuttonId: \"flipButton\",\n\t\ttabId: \"travel-tab\",\n\t},\n\ttwins: {\n\t\tname: \"twins\",\n\t\tparams: {\n\t\t\tvel: \"twinsVelocityInput\",\n\t\t\ttime: \"twinsTimeInput\",\n\t\t},\n\t\tbuttonId: \"twinsButton\",\n\t\ttabId: \"twins-tab\",\n\t},\n\tspacetime: {\n\t\tname: \"spacetime\",\n\t\tparams: {\n\t\t\ttime: \"spacetimeTime2\",\n\t\t\tdist: \"spacetimeX2\",\n\t\t\tvel: \"spacetimeVelocity\",\n\t\t},\n\t\tbuttonId: \"spacetimeButton\",\n\t\ttabId: \"spacetime-tab\",\n\t},\n\tsimultaneity: {\n\t\tname: \"simultaneity\",\n\t\tparams: {\n\t\t\tvel: \"simVelocityInput\",\n\t\t},\n\t\tbuttonId: \"\", // No button, input-driven\n\t\ttabId: \"simultaneity-tab\",\n\t},\n\tcalc: {\n\t\tname: \"calc\",\n\t\tparams: {\n\t\t\t// Handled separately - multiple calculators\n\t\t\tcalc: \"calcType\", // Which calculator to use\n\t\t\tvel: \"lorentzInput\", // Generic param names\n\t\t\tvel1: \"v1Input\",\n\t\t\tvel2: \"v2Input\",\n\t\t\trapidity: \"rapidityInput\",\n\t\t\tfuel: \"pionFuelMassInput\",\n\t\t\tdry: \"pionDryMassInput\",\n\t\t\teff: \"pionEfficiencyInput\",\n\t\t\tthrustTime: \"fuelFractionTimeInput\",\n\t\t\tthrustEff: \"fuelFractionEffInput\",\n\t\t\twarpDist: \"warpDistanceInput\",\n\t\t\twarpBoost: \"warpBoostInput\",\n\t\t\twarpTransit: \"warpTransitInput\",\n\t\t\twarpDuration: \"warpBoostDurationInput\",\n\t\t},\n\t\tbuttonId: \"\", // Determined by calc type\n\t\ttabId: \"conversions-tab\",\n\t},\n};\n\n// Calc sub-calculator mappings\nconst CALC_CONFIGS: Record<string, { params: string[]; buttonId: string }> = {\n\tlorentz: { params: [\"vel\"], buttonId: \"lorentzButton\" },\n\trapidity: { params: [\"rapidity\"], buttonId: \"rapidityButton\" },\n\tvelocity: { params: [\"vel\"], buttonId: \"velocityButton\" },\n\taddvel: { params: [\"vel1\", \"vel2\"], buttonId: \"addButton\" },\n\tpion: { params: [\"fuel\", \"dry\", \"eff\"], buttonId: \"pionAccelButton\" },\n\tfuelfrac: { params: [\"thrustTime\", \"thrustEff\"], buttonId: \"fuelFractionButton\" },\n\twarp: {\n\t\tparams: [\"warpDist\", \"warpBoost\", \"warpTransit\", \"warpDuration\"],\n\t\tbuttonId: \"warpButton\",\n\t},\n};\n\n/**\n * Get the default value for an input element from its HTML value attribute\n */\nfunction getDefaultValue(inputId: string): string {\n\tconst input = document.getElementById(inputId) as HTMLInputElement;\n\treturn input?.defaultValue || input?.value || \"\";\n}\n\n/**\n * Validate a numeric input value using Decimal.js for precision\n */\nfunction isValidNumber(value: string): boolean {\n\tif (!value || value.trim() === \"\") return false;\n\ttry {\n\t\tconst decimal = new Decimal(value);\n\t\treturn decimal.isFinite();\n\t} catch {\n\t\treturn false;\n\t}\n}\n\n/**\n * Get the currently active tab name\n */\nfunction getActiveTab(): string {\n\tconst activeTab = document.querySelector(\".nav-link.active\");\n\tif (!activeTab) return \"motion\";\n\n\tconst tabId = activeTab.getAttribute(\"id\");\n\tif (tabId === \"motion-tab\") return \"motion\";\n\tif (tabId === \"travel-tab\") return \"flip\";\n\tif (tabId === \"twins-tab\") return \"twins\";\n\tif (tabId === \"spacetime-tab\") return \"spacetime\";\n\tif (tabId === \"simultaneity-tab\") return \"simultaneity\";\n\tif (tabId === \"conversions-tab\") return \"calc\";\n\n\treturn \"motion\";\n}\n\n/**\n * Initialize page state from URL parameters on page load\n */\nexport function initializeFromURL(): void {\n\tconst urlParams = new URLSearchParams(window.location.search);\n\n\t// Get tab parameter\n\tconst tabParam = urlParams.get(\"tab\")?.toLowerCase();\n\tif (!tabParam || !TAB_CONFIGS[tabParam]) {\n\t\t// No valid tab in URL, use default behavior\n\t\treturn;\n\t}\n\n\tconst tabConfig = TAB_CONFIGS[tabParam];\n\n\t// Activate the specified tab\n\tconst tabButton = document.getElementById(tabConfig.tabId);\n\tif (tabButton) {\n\t\tconst tab = new (window as any).bootstrap.Tab(tabButton);\n\t\ttab.show();\n\t}\n\n\t// Handle calc tab separately due to multiple calculators\n\tif (tabParam === \"calc\") {\n\t\tinitializeCalcFromURL(urlParams);\n\t\treturn;\n\t}\n\n\t// Handle simultaneity tab separately due to events\n\tif (tabParam === \"simultaneity\") {\n\t\tinitializeSimultaneityFromURL(urlParams, tabConfig);\n\t\treturn;\n\t}\n\n\t// Populate input fields from URL params\n\tlet hasValidParams = false;\n\tfor (const [paramName, inputId] of Object.entries(tabConfig.params)) {\n\t\tconst paramValue = urlParams.get(paramName);\n\n\t\t// Skip chart time mode parameters - always default to proper time\n\t\tif (inputId.startsWith(\"__\")) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Skip slider parameters for motion and flip tabs - always default to maximum\n\t\tif (\n\t\t\t(tabParam === \"motion\" || tabParam === \"flip\") &&\n\t\t\t(paramName === \"massSlider\" || paramName === \"distSlider\")\n\t\t) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (paramValue && isValidNumber(paramValue)) {\n\t\t\tconst input = document.getElementById(inputId) as HTMLInputElement;\n\t\t\tif (input) {\n\t\t\t\tinput.value = paramValue;\n\t\t\t\thasValidParams = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Trigger calculation if we had valid parameters\n\tif (hasValidParams && tabConfig.buttonId) {\n\t\t// Wait for tab transition and rendering to complete\n\t\tsetTimeout(() => {\n\t\t\tconst calcButton = document.getElementById(tabConfig.buttonId);\n\t\t\tif (calcButton) {\n\t\t\t\tcalcButton.click();\n\t\t\t}\n\t\t}, 300);\n\t}\n}\n\n/**\n * Initialize calc tab from URL parameters\n */\nfunction initializeCalcFromURL(urlParams: URLSearchParams): void {\n\tconst tabConfig = TAB_CONFIGS.calc;\n\n\t// Try to infer which calculator based on params present\n\tlet calcType = urlParams.get(\"calc\")?.toLowerCase();\n\n\tif (!calcType) {\n\t\t// Infer calculator from parameters\n\t\tif (urlParams.has(\"vel1\") && urlParams.has(\"vel2\")) {\n\t\t\tcalcType = \"addvel\";\n\t\t} else if (urlParams.has(\"rapidity\")) {\n\t\t\tcalcType = \"rapidity\";\n\t\t} else if (urlParams.has(\"fuel\") || urlParams.has(\"dry\")) {\n\t\t\tcalcType = \"pion\";\n\t\t} else if (urlParams.has(\"thrustTime\")) {\n\t\t\tcalcType = \"fuelfrac\";\n\t\t} else if (urlParams.has(\"vel\")) {\n\t\t\t// Default to lorentz for single velocity parameter\n\t\t\tcalcType = \"lorentz\";\n\t\t}\n\t}\n\n\tif (!calcType || !CALC_CONFIGS[calcType]) return;\n\n\tconst calcConfig = CALC_CONFIGS[calcType];\n\n\t// Populate inputs for this calculator\n\tlet hasValidParams = false;\n\tfor (const paramName of calcConfig.params) {\n\t\tconst paramValue = urlParams.get(paramName);\n\t\tconst inputId = tabConfig.params[paramName];\n\n\t\tif (paramValue && inputId && isValidNumber(paramValue)) {\n\t\t\tconst input = document.getElementById(inputId) as HTMLInputElement;\n\t\t\tif (input) {\n\t\t\t\tinput.value = paramValue;\n\t\t\t\thasValidParams = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Trigger calculation\n\tif (hasValidParams) {\n\t\tsetTimeout(() => {\n\t\t\tconst calcButton = document.getElementById(calcConfig.buttonId);\n\t\t\tif (calcButton) {\n\t\t\t\tcalcButton.click();\n\t\t\t}\n\t\t}, 300);\n\t}\n}\n\n/**\n * Initialize simultaneity tab from URL parameters\n */\nfunction initializeSimultaneityFromURL(urlParams: URLSearchParams, tabConfig: TabConfig): void {\n\t// Populate velocity input\n\tfor (const [paramName, inputId] of Object.entries(tabConfig.params)) {\n\t\tconst paramValue = urlParams.get(paramName);\n\t\tif (paramValue && isValidNumber(paramValue)) {\n\t\t\tconst input = document.getElementById(inputId) as HTMLInputElement;\n\t\t\tif (input) {\n\t\t\t\tinput.value = paramValue;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Parse events from URL\n\tconst eventsParam = urlParams.get(\"events\");\n\tif (eventsParam) {\n\t\ttry {\n\t\t\t// Decode events from: ct1,x1;ct2,x2;...\n\t\t\tconst eventPairs = eventsParam.split(\";\");\n\t\t\tconst events = eventPairs\n\t\t\t\t.map(pair => {\n\t\t\t\t\tconst [ctStr, xStr] = pair.split(\",\");\n\t\t\t\t\tconst ctDecimal = rl.ensure(ctStr);\n\t\t\t\t\tconst xDecimal = rl.ensure(xStr);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tct: ctDecimal.toNumber(),\n\t\t\t\t\t\tx: xDecimal.toNumber(),\n\t\t\t\t\t\tctDecimal,\n\t\t\t\t\t\txDecimal,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t\t.filter(e => e.ctDecimal.isFinite() && e.xDecimal.isFinite());\n\n\t\t\tif (events.length > 0) {\n\t\t\t\t// Store events in state module for controller to pick up\n\t\t\t\tsimultaneityState.setPendingEvents(events);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to parse simultaneity events from URL:\", e);\n\t\t}\n\t}\n}\n\n/**\n * Update URL to reflect current application state\n */\nexport function updateURL(): void {\n\tconst activeTab = getActiveTab();\n\tconst tabConfig = TAB_CONFIGS[activeTab];\n\tif (!tabConfig) return;\n\n\tconst params = new URLSearchParams();\n\tparams.set(\"tab\", activeTab);\n\n\t// Handle calc tab separately\n\tif (activeTab === \"calc\") {\n\t\tupdateCalcURL(params);\n\t} else if (activeTab === \"simultaneity\") {\n\t\tupdateSimultaneityURL(params, tabConfig);\n\t} else {\n\t\t// Add non-default parameters\n\t\tfor (const [paramName, inputId] of Object.entries(tabConfig.params)) {\n\t\t\t// Skip chart time mode parameters - always default to proper time\n\t\t\tif (inputId.startsWith(\"__\")) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Skip slider parameters for motion and flip tabs - always default to maximum\n\t\t\tif (\n\t\t\t\t(activeTab === \"motion\" || activeTab === \"flip\") &&\n\t\t\t\t(paramName === \"massSlider\" || paramName === \"distSlider\")\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst input = document.getElementById(inputId) as HTMLInputElement;\n\t\t\tif (!input) continue;\n\n\t\t\tconst currentValue = input.value;\n\t\t\tconst defaultValue = getDefaultValue(inputId);\n\n\t\t\t// Only include if different from default and valid\n\t\t\tif (currentValue !== defaultValue && isValidNumber(currentValue)) {\n\t\t\t\tparams.set(paramName, currentValue);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Update URL without page reload\n\tconst newUrl = params.toString() ? `?${params.toString()}` : window.location.pathname;\n\twindow.history.replaceState({}, \"\", newUrl);\n}\n\n/**\n * Update URL for calc tab (needs to track which calculator is active)\n */\nfunction updateCalcURL(params: URLSearchParams): void {\n\tconst tabConfig = TAB_CONFIGS.calc;\n\n\t// Infer which calculator is active by checking which params have non-default values\n\tlet activeCalcType: string | null = null;\n\n\t// Check each calculator's parameters\n\tfor (const [calcType, calcConfig] of Object.entries(CALC_CONFIGS)) {\n\t\tlet hasNonDefault = false;\n\n\t\tfor (const paramName of calcConfig.params) {\n\t\t\tconst inputId = tabConfig.params[paramName];\n\t\t\tif (!inputId) continue;\n\n\t\t\tconst input = document.getElementById(inputId) as HTMLInputElement;\n\t\t\tif (!input) continue;\n\n\t\t\tconst currentValue = input.value;\n\t\t\tconst defaultValue = getDefaultValue(inputId);\n\n\t\t\tif (currentValue !== defaultValue && isValidNumber(currentValue)) {\n\t\t\t\thasNonDefault = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (hasNonDefault) {\n\t\t\tactiveCalcType = calcType;\n\t\t\tbreak; // Use first calculator with non-default values\n\t\t}\n\t}\n\n\t// If we found an active calculator, only include its parameters\n\tif (activeCalcType && CALC_CONFIGS[activeCalcType]) {\n\t\tparams.set(\"calc\", activeCalcType);\n\t\tconst calcConfig = CALC_CONFIGS[activeCalcType];\n\n\t\tfor (const paramName of calcConfig.params) {\n\t\t\tconst inputId = tabConfig.params[paramName];\n\t\t\tif (!inputId) continue;\n\n\t\t\tconst input = document.getElementById(inputId) as HTMLInputElement;\n\t\t\tif (!input) continue;\n\n\t\t\tconst currentValue = input.value;\n\t\t\tconst defaultValue = getDefaultValue(inputId);\n\n\t\t\tif (currentValue !== defaultValue && isValidNumber(currentValue)) {\n\t\t\t\tparams.set(paramName, currentValue);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Update URL for simultaneity tab (needs to encode events)\n */\nfunction updateSimultaneityURL(params: URLSearchParams, tabConfig: TabConfig): void {\n\t// Add velocity parameter\n\tfor (const [paramName, inputId] of Object.entries(tabConfig.params)) {\n\t\tconst input = document.getElementById(inputId) as HTMLInputElement;\n\t\tif (!input) continue;\n\n\t\tconst currentValue = input.value;\n\t\tconst defaultValue = getDefaultValue(inputId);\n\n\t\tif (currentValue !== defaultValue && isValidNumber(currentValue)) {\n\t\t\tparams.set(paramName, currentValue);\n\t\t}\n\t}\n\n\t// Encode events from the diagram\n\t// Access events via state module\n\tconst events = simultaneityState.getEvents();\n\tif (events && events.length > 0) {\n\t\t// Check if events match the default train example (don't encode defaults)\n\t\tconst isDefaultTrainExample =\n\t\t\tevents.length === 2 &&\n\t\t\tMath.abs(events[0].ct - 599584.92) < 1 &&\n\t\t\tMath.abs(events[0].x - -300000) < 1 &&\n\t\t\tMath.abs(events[1].ct - 599584.92) < 1 &&\n\t\t\tMath.abs(events[1].x - 300000) < 1;\n\n\t\tif (!isDefaultTrainExample) {\n\t\t\t// Encode events as: ct1,x1;ct2,x2;...\n\t\t\t// Use toString() to preserve full precision instead of toFixed\n\t\t\tconst encoded = events.map((e: any) => `${e.ct},${e.x}`).join(\";\");\n\t\t\tparams.set(\"events\", encoded);\n\t\t}\n\t}\n}\n\n/**\n * Apply pending slider values that were loaded from URL\n * Called after chart initialization to restore slider state\n */\nexport function applyPendingSliderValue(\n\tsliderId: string,\n\tvalueDisplayId: string,\n\tunit: \"days\" | \"years\",\n\tchartId: string,\n\tchartRegistry: { current: Map<string, any> }\n): void {\n\tconst pendingValue = pendingSliderValues[sliderId];\n\tif (pendingValue !== undefined) {\n\t\tconst slider = document.getElementById(sliderId) as HTMLInputElement;\n\t\tconst valueDisplay = document.getElementById(valueDisplayId);\n\n\t\tif (slider) {\n\t\t\t// Only apply if value is within current slider range\n\t\t\tconst min = parseFloat(slider.min || \"0\");\n\t\t\tconst max = parseFloat(slider.max || String(Number.MAX_SAFE_INTEGER));\n\t\t\tif (!isNaN(min) && !isNaN(max) && pendingValue >= min && pendingValue <= max) {\n\t\t\t\tslider.value = pendingValue.toString();\n\t\t\t\tif (valueDisplay) {\n\t\t\t\t\tvalueDisplay.textContent = `${pendingValue.toFixed(unit === \"days\" ? 0 : 1)} ${unit}`;\n\t\t\t\t}\n\n\t\t\t\t// Update the chart's x-axis max\n\t\t\t\ttry {\n\t\t\t\t\tconst chart = chartRegistry.current.get(chartId);\n\t\t\t\t\tif (chart && chart.options.scales?.x) {\n\t\t\t\t\t\tchart.options.scales.x.max = pendingValue;\n\t\t\t\t\t\tchart.update(\"none\"); // Update without animation\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(`Failed to update chart ${chartId} with slider value:`, error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Clear the pending value\n\t\tdelete pendingSliderValues[sliderId];\n\t}\n}\n\n/**\n * Apply pending distance slider values for position/velocity charts\n * Called after chart initialization to restore slider state\n */\nexport function applyPendingDistanceSliderValue(\n\tsliderId: string,\n\tvalueDisplayId: string,\n\tchartId: string,\n\tchartRegistry: { current: Map<string, any> }\n): void {\n\tconst pendingDistance = pendingSliderValues[sliderId];\n\tif (pendingDistance !== undefined) {\n\t\tconst slider = document.getElementById(sliderId) as HTMLInputElement;\n\t\tconst valueDisplay = document.getElementById(valueDisplayId);\n\n\t\tif (slider) {\n\t\t\t// Get max distance from data attribute (set by initializePositionVelocitySlider)\n\t\t\tconst maxDistance = parseFloat(slider.dataset.maxDistance || \"100\");\n\n\t\t\t// Only apply if distance is within range\n\t\t\tif (pendingDistance >= 0 && pendingDistance <= maxDistance) {\n\t\t\t\t// Convert actual distance to slider percentage\n\t\t\t\tconst sliderPercent = distanceToSlider(pendingDistance, maxDistance);\n\t\t\t\tslider.value = sliderPercent.toString();\n\n\t\t\t\t// Update display with appropriate precision\n\t\t\t\tconst displayValue =\n\t\t\t\t\tpendingDistance < 10 ? pendingDistance.toFixed(2) : pendingDistance.toFixed(1);\n\t\t\t\tif (valueDisplay) {\n\t\t\t\t\tvalueDisplay.textContent = `${displayValue} ly`;\n\t\t\t\t}\n\n\t\t\t\t// Update the chart's x-axis max\n\t\t\t\ttry {\n\t\t\t\t\tconst chart = chartRegistry.current.get(chartId);\n\t\t\t\t\tif (chart && chart.options.scales?.x) {\n\t\t\t\t\t\t// Ensure minimum chart range to prevent negative x-axis values\n\t\t\t\t\t\tchart.options.scales.x.max = Math.max(0.01, pendingDistance);\n\t\t\t\t\t\tchart.options.scales.x.min = 0; // Ensure axis starts at 0\n\t\t\t\t\t\tchart.update(\"none\"); // Update without animation\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(`Failed to update chart ${chartId} with slider value:`, error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Clear the pending value\n\t\tdelete pendingSliderValues[sliderId];\n\t}\n}\n\n/**\n * Set up bidirectional URL synchronization\n * Returns a cleanup function to remove all event listeners\n */\nexport function setupURLSync(): () => void {\n\tlet debounceTimer: number | undefined;\n\n\t// Store handlers for cleanup\n\tconst handlers = new Map<Element, Map<string, EventListener>>();\n\n\tconst addHandler = (element: Element, event: string, handler: EventListener) => {\n\t\telement.addEventListener(event, handler);\n\t\tif (!handlers.has(element)) {\n\t\t\thandlers.set(element, new Map());\n\t\t}\n\t\thandlers.get(element)!.set(event, handler);\n\t};\n\n\t// Update URL when inputs change (debounced to allow slider initialization)\n\tconst allInputs = document.querySelectorAll('input[type=\"number\"], input[type=\"range\"]');\n\tallInputs.forEach(input => {\n\t\tconst inputHandler = () => {\n\t\t\tclearTimeout(debounceTimer);\n\t\t\tdebounceTimer = window.setTimeout(() => {\n\t\t\t\tupdateURL();\n\t\t\t}, 500);\n\t\t};\n\t\taddHandler(input, \"input\", inputHandler);\n\n\t\tconst changeHandler = () => {\n\t\t\tclearTimeout(debounceTimer);\n\t\t\t// Delay to allow chart calculations and slider initialization to complete\n\t\t\tdebounceTimer = window.setTimeout(() => {\n\t\t\t\tupdateURL();\n\t\t\t}, 150);\n\t\t};\n\t\taddHandler(input, \"change\", changeHandler);\n\t});\n\n\t// Update URL when tab changes\n\tconst tabButtons = document.querySelectorAll('[data-bs-toggle=\"tab\"]');\n\ttabButtons.forEach(button => {\n\t\tconst tabHandler = () => {\n\t\t\tupdateURL();\n\t\t};\n\t\taddHandler(button, \"shown.bs.tab\", tabHandler);\n\t});\n\n\t// Update URL when calculate buttons are clicked\n\tconst calcButtons = document.querySelectorAll(\".btn-calculate\");\n\tcalcButtons.forEach(button => {\n\t\tconst clickHandler = () => {\n\t\t\t// Delay must be longer than slider initialization (100ms in main.ts)\n\t\t\t// to ensure data-chart-max is set before URL encoding check\n\t\t\tsetTimeout(() => {\n\t\t\t\tupdateURL();\n\t\t\t}, 200);\n\t\t};\n\t\taddHandler(button, \"click\", clickHandler);\n\t});\n\n\t// Return cleanup function\n\treturn () => {\n\t\tclearTimeout(debounceTimer);\n\t\thandlers.forEach((eventMap, element) => {\n\t\t\teventMap.forEach((handler, event) => {\n\t\t\t\telement.removeEventListener(event, handler);\n\t\t\t});\n\t\t});\n\t\thandlers.clear();\n\t};\n}\n","// Relativity of Simultaneity Interactive Visualization\nimport { select, Selection } from \"d3-selection\";\nimport { pointer } from \"d3-selection\";\nimport \"d3-transition\";\nimport Decimal from \"decimal.js\";\nimport { COLORS as D3_COLORS } from \"./minkowski-colors\";\nimport type { BaseController, ScaleSet } from \"./minkowski-types\";\nimport {\n\tC,\n\tcalculateGamma,\n\tlorentzTransform,\n\tcreateScaleSet,\n\tsetupSVG,\n\tcreateAxisDefinitions,\n\tdebounce,\n} from \"./minkowski-core\";\nimport { updateURL } from \"../urlState\";\nimport * as simultaneityState from \"./simultaneityState\";\nimport * as rl from \"../relativity_lib\";\n\n/**\n * Event data structure\n */\ninterface SimultaneityEvent {\n\tid: string;\n\tct: number;\n\tx: number;\n\tisReference: boolean;\n\ttemporalOrder: \"future\" | \"past\" | \"simultaneous\";\n}\n\n/**\n * Controller state\n */\ninterface SimultaneityState {\n\tevents: SimultaneityEvent[];\n\tvelocity: number;\n\tvelocityDecimal: Decimal;\n\tgamma: number;\n\treferenceEventId: string | null;\n\tisAnimating: boolean;\n\tanimationProgress: number; // 0 to 1\n\tshowLightCone: boolean;\n}\n\n/**\n * SVG layer groups\n */\ninterface LayerGroups {\n\tgrid: Selection<SVGGElement, unknown, null, undefined>;\n\taxes: Selection<SVGGElement, unknown, null, undefined>;\n\tlightCone: Selection<SVGGElement, unknown, null, undefined>;\n\tnowLine: Selection<SVGGElement, unknown, null, undefined>;\n\tevents: Selection<SVGGElement, unknown, null, undefined>;\n}\n\nconst MAX_EVENTS = 4;\nconst EVENT_LABELS = [\"A\", \"B\", \"C\", \"D\"];\nconst EVENT_RADIUS = 8;\nconst CLICK_TOLERANCE = 15;\n\n// Fixed scale for train example: ct = 2 * C  599584.916 km, with 1.3 multiplier\nconst TRAIN_EXAMPLE_SCALE = 2 * C * 1.3;\n\n/**\n * Create Einstein's train example\n */\nfunction createTrainExample(): SimultaneityEvent[] {\n\tconst time = 2; // seconds\n\tconst ct = time * C; // Convert to km\n\tconst separation = 300000; // km (1 light-second)\n\n\treturn [\n\t\t{\n\t\t\tid: \"A\",\n\t\t\tct,\n\t\t\tx: -separation,\n\t\t\tisReference: true,\n\t\t\ttemporalOrder: \"simultaneous\",\n\t\t},\n\t\t{\n\t\t\tid: \"B\",\n\t\t\tct,\n\t\t\tx: separation,\n\t\t\tisReference: false,\n\t\t\ttemporalOrder: \"simultaneous\",\n\t\t},\n\t];\n}\n\n/**\n * Sync internal state.events to the state module for URL encoding\n */\nfunction syncStateToModule(events: SimultaneityEvent[]): void {\n\tconst eventData = events.map(e => ({\n\t\tct: e.ct,\n\t\tx: e.x,\n\t\tctDecimal: rl.ensure(e.ct),\n\t\txDecimal: rl.ensure(e.x),\n\t}));\n\tsimultaneityState.setEvents(eventData);\n}\n\n/**\n * Calculate temporal ordering of event relative to reference\n */\nfunction calculateTemporalOrder(\n\teventCt: number,\n\teventX: number,\n\trefCt: number,\n\trefX: number,\n\tbeta: number\n): \"future\" | \"past\" | \"simultaneous\" {\n\t// Transform to moving frame\n\tconst eventPrime = lorentzTransform(eventCt, eventX, beta);\n\tconst refPrime = lorentzTransform(refCt, refX, beta);\n\n\tconst deltaCtPrime = eventPrime.ctPrime - refPrime.ctPrime;\n\n\t// Tolerance for floating point comparison (0.01 km  0.03 microseconds)\n\tif (Math.abs(deltaCtPrime) < 0.01) return \"simultaneous\";\n\treturn deltaCtPrime > 0 ? \"future\" : \"past\";\n}\n\n/**\n * Get color for event based on temporal order\n */\nfunction getEventColor(order: \"future\" | \"past\" | \"simultaneous\", isReference: boolean): string {\n\tif (isReference) return D3_COLORS.electricBlue;\n\tswitch (order) {\n\t\tcase \"future\":\n\t\t\treturn D3_COLORS.quantumGreen;\n\t\tcase \"past\":\n\t\t\treturn D3_COLORS.photonGold;\n\t\tcase \"simultaneous\":\n\t\t\treturn D3_COLORS.plasmaWhite;\n\t}\n}\n\n/**\n * Controller for simultaneity diagram with event placement and animation\n */\nexport interface SimultaneityController extends BaseController {\n\tupdate(): void;\n\tupdateSlider?(velocity: number): void;\n\treset(): void;\n\tclearAll(): void;\n}\n\n/**\n * Create simultaneity diagram controller\n */\nexport function createSimultaneityDiagram(container: HTMLElement): SimultaneityController {\n\tconst size = 900;\n\tlet scales: ScaleSet;\n\tlet state: SimultaneityState = {\n\t\tevents: createTrainExample(),\n\t\tvelocity: 0,\n\t\tvelocityDecimal: rl.ensure(0),\n\t\tgamma: 1,\n\t\treferenceEventId: \"A\",\n\t\tisAnimating: true,\n\t\tanimationProgress: 0,\n\t\tshowLightCone: false,\n\t};\n\tlet animationFrameId: number | null = null;\n\tlet lastTimestamp = 0;\n\n\t// Setup SVG\n\tconst svg = setupSVG(container, size);\n\tcreateAxisDefinitions(svg);\n\n\t// Create layer groups (back to front rendering order)\n\tconst layers: LayerGroups = {\n\t\tgrid: svg.append(\"g\").attr(\"class\", \"grid-layer\"),\n\t\taxes: svg.append(\"g\").attr(\"class\", \"axes-layer\"),\n\t\tlightCone: svg.append(\"g\").attr(\"class\", \"light-cone-layer\"),\n\t\tnowLine: svg.append(\"g\").attr(\"class\", \"now-line-layer\"),\n\t\tevents: svg.append(\"g\").attr(\"class\", \"events-layer\"),\n\t};\n\n\t// Calculate initial scales based on train example\n\tscales = createScaleSet(TRAIN_EXAMPLE_SCALE, size);\n\n\t// Initially hide light cone layer\n\tlayers.lightCone.style(\"display\", \"none\");\n\n\t/**\n\t * Render grid\n\t */\n\tfunction renderGrid(): void {\n\t\tconst gridSpacing = Math.pow(10, Math.floor(Math.log10(scales.maxCoord)) - 1);\n\t\tconst gridLines: Array<{ x1: number; y1: number; x2: number; y2: number }> = [];\n\n\t\t// Vertical lines\n\t\tfor (let x = -scales.maxCoord; x <= scales.maxCoord; x += gridSpacing) {\n\t\t\tgridLines.push({\n\t\t\t\tx1: scales.xScale(x),\n\t\t\t\ty1: scales.yScale(-scales.maxCoord),\n\t\t\t\tx2: scales.xScale(x),\n\t\t\t\ty2: scales.yScale(scales.maxCoord),\n\t\t\t});\n\t\t}\n\n\t\t// Horizontal lines\n\t\tfor (let ct = -scales.maxCoord; ct <= scales.maxCoord; ct += gridSpacing) {\n\t\t\tgridLines.push({\n\t\t\t\tx1: scales.xScale(-scales.maxCoord),\n\t\t\t\ty1: scales.yScale(ct),\n\t\t\t\tx2: scales.xScale(scales.maxCoord),\n\t\t\t\ty2: scales.yScale(ct),\n\t\t\t});\n\t\t}\n\n\t\tlayers.grid\n\t\t\t.selectAll(\"line\")\n\t\t\t.data(gridLines)\n\t\t\t.join(\"line\")\n\t\t\t.attr(\"x1\", d => d.x1)\n\t\t\t.attr(\"y1\", d => d.y1)\n\t\t\t.attr(\"x2\", d => d.x2)\n\t\t\t.attr(\"y2\", d => d.y2)\n\t\t\t.attr(\"stroke\", \"rgba(0, 217, 255, 0.15)\")\n\t\t\t.attr(\"stroke-width\", 1);\n\t}\n\n\t/**\n\t * Render reference frame axes\n\t */\n\tfunction renderAxes(): void {\n\t\tconst beta = state.velocity;\n\t\tconst centerX = size / 2;\n\t\tconst centerY = size / 2;\n\n\t\t// Clear existing axes\n\t\tlayers.axes.selectAll(\"*\").remove();\n\n\t\t// Original frame axes (stationary)\n\t\t// X axis (horizontal)\n\t\tlayers.axes\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", 0)\n\t\t\t.attr(\"y1\", centerY)\n\t\t\t.attr(\"x2\", size)\n\t\t\t.attr(\"y2\", centerY)\n\t\t\t.attr(\"stroke\", D3_COLORS.electricBlue)\n\t\t\t.attr(\"stroke-width\", 2)\n\t\t\t.attr(\"opacity\", 0.5);\n\n\t\t// CT axis (vertical)\n\t\tlayers.axes\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", centerX)\n\t\t\t.attr(\"y1\", 0)\n\t\t\t.attr(\"x2\", centerX)\n\t\t\t.attr(\"y2\", size)\n\t\t\t.attr(\"stroke\", D3_COLORS.electricBlue)\n\t\t\t.attr(\"stroke-width\", 2)\n\t\t\t.attr(\"opacity\", 0.5);\n\n\t\t// Moving frame axes (transformed)\n\t\tif (Math.abs(beta) > 0.001) {\n\t\t\t// For tilted axes, extend far enough to cover full diagram\n\t\t\t// Clamp beta to avoid excessive extent at low velocities\n\t\t\tconst minBeta = 0.1;\n\t\t\tconst axisExtent = scales.maxCoord / Math.max(Math.abs(beta), minBeta);\n\n\t\t\t// X' axis (tilted)\n\t\t\tconst x1Prime = -axisExtent;\n\t\t\tconst ct1Prime = -axisExtent * beta;\n\t\t\tconst x2Prime = axisExtent;\n\t\t\tconst ct2Prime = axisExtent * beta;\n\n\t\t\tlayers.axes\n\t\t\t\t.append(\"line\")\n\t\t\t\t.attr(\"x1\", scales.xScale(x1Prime))\n\t\t\t\t.attr(\"y1\", scales.yScale(ct1Prime))\n\t\t\t\t.attr(\"x2\", scales.xScale(x2Prime))\n\t\t\t\t.attr(\"y2\", scales.yScale(ct2Prime))\n\t\t\t\t.attr(\"stroke\", D3_COLORS.quantumGreen)\n\t\t\t\t.attr(\"stroke-width\", 2)\n\t\t\t\t.attr(\"stroke-dasharray\", \"5,5\")\n\t\t\t\t.attr(\"opacity\", 0.7);\n\n\t\t\t// CT' axis (tilted)\n\t\t\tconst ct1AxisPrime = -axisExtent;\n\t\t\tconst x1AxisPrime = -axisExtent * beta;\n\t\t\tconst ct2AxisPrime = axisExtent;\n\t\t\tconst x2AxisPrime = axisExtent * beta;\n\n\t\t\tlayers.axes\n\t\t\t\t.append(\"line\")\n\t\t\t\t.attr(\"x1\", scales.xScale(x1AxisPrime))\n\t\t\t\t.attr(\"y1\", scales.yScale(ct1AxisPrime))\n\t\t\t\t.attr(\"x2\", scales.xScale(x2AxisPrime))\n\t\t\t\t.attr(\"y2\", scales.yScale(ct2AxisPrime))\n\t\t\t\t.attr(\"stroke\", D3_COLORS.quantumGreen)\n\t\t\t\t.attr(\"stroke-width\", 2)\n\t\t\t\t.attr(\"stroke-dasharray\", \"5,5\")\n\t\t\t\t.attr(\"opacity\", 0.7);\n\n\t\t\t// Axis labels\n\t\t\tlayers.axes\n\t\t\t\t.append(\"text\")\n\t\t\t\t.attr(\"x\", scales.xScale(axisExtent * 0.9))\n\t\t\t\t.attr(\"y\", scales.yScale(axisExtent * beta * 0.9) - 10)\n\t\t\t\t.attr(\"fill\", D3_COLORS.quantumGreen)\n\t\t\t\t.attr(\"class\", \"label\")\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t.text(\"x'\");\n\n\t\t\tlayers.axes\n\t\t\t\t.append(\"text\")\n\t\t\t\t.attr(\"x\", scales.xScale(axisExtent * beta * 0.9) + 15)\n\t\t\t\t.attr(\"y\", scales.yScale(axisExtent * 0.9))\n\t\t\t\t.attr(\"fill\", D3_COLORS.quantumGreen)\n\t\t\t\t.attr(\"class\", \"label\")\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t.text(\"ct'\");\n\t\t}\n\n\t\t// Axis labels for original frame\n\t\tlayers.axes\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"x\", size - 20)\n\t\t\t.attr(\"y\", centerY - 10)\n\t\t\t.attr(\"fill\", D3_COLORS.electricBlue)\n\t\t\t.attr(\"class\", \"label\")\n\t\t\t.attr(\"text-anchor\", \"end\")\n\t\t\t.text(\"x\");\n\n\t\tlayers.axes\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"x\", centerX + 15)\n\t\t\t.attr(\"y\", 20)\n\t\t\t.attr(\"fill\", D3_COLORS.electricBlue)\n\t\t\t.attr(\"class\", \"label\")\n\t\t\t.text(\"ct\");\n\n\t\t// Velocity label\n\t\tlayers.axes\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"x\", centerX)\n\t\t\t.attr(\"y\", size - 20)\n\t\t\t.attr(\"fill\", D3_COLORS.plasmaWhite)\n\t\t\t.attr(\"class\", \"header\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.text(`v = ${rl.formatSignificant(state.velocityDecimal, \"9\", 2)}c`);\n\t}\n\n\t/**\n\t * Render animated \"now\" line and light cone at origin\n\t */\n\tfunction renderNowLine(): void {\n\t\tconst beta = state.velocity;\n\n\t\t// For tilted lines, extend far enough to cover full diagram height\n\t\t// extent = maxCoord / |beta| ensures vertical span = 2 * maxCoord\n\t\t// Clamp beta to avoid excessive extent at low velocities\n\t\tconst minBeta = 0.1;\n\t\tconst extent =\n\t\t\tMath.abs(beta) > 0.001\n\t\t\t\t? scales.maxCoord / Math.max(Math.abs(beta), minBeta)\n\t\t\t\t: scales.maxCoord;\n\n\t\t// Calculate current \"now\" position based on animation progress\n\t\t// Animation range must expand by (1 + |beta|) for tilted lines to sweep all corners\n\t\tconst animationRange = scales.maxCoord * (1 + Math.abs(beta));\n\t\tconst currentCt = -animationRange + state.animationProgress * 2 * animationRange;\n\n\t\t// Toggle light cone visibility\n\t\tif (state.showLightCone) {\n\t\t\tlayers.lightCone.style(\"display\", null);\n\t\t} else {\n\t\t\tlayers.lightCone.style(\"display\", \"none\");\n\t\t}\n\n\t\t// Render light cone at origin of moving frame (x'=0)\n\t\t// Find where \"now\" line intersects x'=0 worldline (x = beta*ct)\n\t\t// Now line: ct = currentCt + beta*x\n\t\t// Worldline: x = beta*ct\n\t\t// Solving: ct = currentCt + beta*(beta*ct) => ct = gamma^2 * currentCt\n\t\tlayers.lightCone.selectAll(\"*\").remove();\n\t\tconst gamma = state.gamma;\n\t\tconst intersectionCt = gamma * gamma * currentCt;\n\t\tconst intersectionX = beta * intersectionCt;\n\n\t\t// Extend light cone to edges of diagram (use large extent to ensure full coverage)\n\t\t// At high velocities, the intersection point moves far from origin due to gamma factor\n\t\t// Required: coneExtent  intersectionCt + maxCoord = gamma * maxCoord * (1 + |beta|) + maxCoord\n\t\t// Add 10% safety margin for floating point errors\n\t\tconst coneExtent = scales.maxCoord * (gamma * gamma * (1 + Math.abs(beta)) + 1) * 1.1;\n\n\t\t// Light cone centered at intersection point\n\t\tconst futureConeX1 = intersectionX - coneExtent;\n\t\tconst futureConeX2 = intersectionX + coneExtent;\n\t\tconst pastConeX1 = intersectionX - coneExtent;\n\t\tconst pastConeX2 = intersectionX + coneExtent;\n\n\t\t// Draw subtle light cone fill polygons (very subtle, more so than twins diagram)\n\t\tconst coneFillData = [\n\t\t\t{\n\t\t\t\tpoints: [\n\t\t\t\t\t[intersectionX, intersectionCt],\n\t\t\t\t\t[futureConeX2, intersectionCt + coneExtent],\n\t\t\t\t\t[futureConeX2, intersectionCt - coneExtent],\n\t\t\t\t],\n\t\t\t\tclass: \"future\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpoints: [\n\t\t\t\t\t[intersectionX, intersectionCt],\n\t\t\t\t\t[pastConeX1, intersectionCt - coneExtent],\n\t\t\t\t\t[pastConeX1, intersectionCt + coneExtent],\n\t\t\t\t],\n\t\t\t\tclass: \"past\",\n\t\t\t},\n\t\t];\n\n\t\tlayers.lightCone\n\t\t\t.selectAll(\"polygon.cone-fill\")\n\t\t\t.data(coneFillData)\n\t\t\t.join(\"polygon\")\n\t\t\t.attr(\"class\", \"cone-fill\")\n\t\t\t.attr(\"points\", d =>\n\t\t\t\td.points.map(p => `${scales.xScale(p[0])},${scales.yScale(p[1])}`).join(\" \")\n\t\t\t)\n\t\t\t.attr(\"fill\", `${D3_COLORS.photonGold}10`) // Very subtle fill (10 hex = ~6% opacity)\n\t\t\t.attr(\"stroke\", \"none\");\n\n\t\t// Draw light cone boundary lines with reduced opacity (less prominent than twins diagram)\n\t\tlayers.lightCone\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", scales.xScale(futureConeX1))\n\t\t\t.attr(\"y1\", scales.yScale(intersectionCt - coneExtent))\n\t\t\t.attr(\"x2\", scales.xScale(futureConeX2))\n\t\t\t.attr(\"y2\", scales.yScale(intersectionCt + coneExtent))\n\t\t\t.attr(\"stroke\", `${D3_COLORS.photonGold}40`) // Reduced opacity\n\t\t\t.attr(\"stroke-width\", 1.5)\n\t\t\t.attr(\"stroke-dasharray\", \"8,4\");\n\n\t\tlayers.lightCone\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", scales.xScale(pastConeX1))\n\t\t\t.attr(\"y1\", scales.yScale(intersectionCt + coneExtent))\n\t\t\t.attr(\"x2\", scales.xScale(pastConeX2))\n\t\t\t.attr(\"y2\", scales.yScale(intersectionCt - coneExtent))\n\t\t\t.attr(\"stroke\", `${D3_COLORS.photonGold}40`) // Reduced opacity\n\t\t\t.attr(\"stroke-width\", 1.5)\n\t\t\t.attr(\"stroke-dasharray\", \"8,4\");\n\n\t\t// Line parallel to simultaneity line (horizontal in moving frame)\n\t\tconst x1 = -extent;\n\t\tconst ct1 = currentCt + beta * x1;\n\t\tconst x2 = extent;\n\t\tconst ct2 = currentCt + beta * x2;\n\n\t\tlayers.nowLine.selectAll(\"*\").remove();\n\n\t\t// Draw glowing \"now\" line\n\t\tlayers.nowLine\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", scales.xScale(x1))\n\t\t\t.attr(\"y1\", scales.yScale(ct1))\n\t\t\t.attr(\"x2\", scales.xScale(x2))\n\t\t\t.attr(\"y2\", scales.yScale(ct2))\n\t\t\t.attr(\"stroke\", D3_COLORS.quantumGreen)\n\t\t\t.attr(\"stroke-width\", 3)\n\t\t\t.attr(\"stroke-opacity\", 0.8)\n\t\t\t.style(\"filter\", \"drop-shadow(0 0 10px rgba(6, 255, 165, 0.8))\");\n\n\t\t// Add \"NOW\" label\n\t\tconst labelX = scales.xScale(extent * 0.85);\n\t\tconst labelY = scales.yScale(currentCt + beta * extent * 0.85);\n\n\t\tlayers.nowLine\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"x\", labelX)\n\t\t\t.attr(\"y\", labelY - 10)\n\t\t\t.attr(\"fill\", D3_COLORS.quantumGreen)\n\t\t\t.attr(\"class\", \"label\")\n\t\t\t.attr(\"text-anchor\", \"end\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.text(\"NOW\");\n\t}\n\n\t/**\n\t * Check if now line is crossing an event and flash it\n\t */\n\tfunction checkEventFlashes(): void {\n\t\tconst beta = state.velocity;\n\t\t// Animation range must match renderNowLine calculation\n\t\tconst animationRange = scales.maxCoord * (1 + Math.abs(beta));\n\t\tconst currentCt = -animationRange + state.animationProgress * 2 * animationRange;\n\n\t\tstate.events.forEach(event => {\n\t\t\t// Calculate the ct coordinate of the now line at this event's x position\n\t\t\tconst nowCtAtEventX = currentCt + beta * event.x;\n\n\t\t\t// Check if we just crossed this event (within a small threshold)\n\t\t\tconst distance = Math.abs(nowCtAtEventX - event.ct);\n\t\t\tconst threshold = scales.maxCoord * 0.02; // 2% of max coord\n\n\t\t\tif (distance < threshold) {\n\t\t\t\t// Flash this event\n\t\t\t\tflashEvent(event.id);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Flash an event\n\t */\n\tfunction flashEvent(eventId: string): void {\n\t\tconst eventGroup = layers.events\n\t\t\t.selectAll<SVGGElement, SimultaneityEvent>(\"g.event\")\n\t\t\t.filter(d => d.id === eventId);\n\n\t\tif (eventGroup.empty()) return;\n\n\t\tconst circle = eventGroup.select(\"circle\");\n\n\t\t// Pulse animation\n\t\tcircle\n\t\t\t.transition()\n\t\t\t.duration(150)\n\t\t\t.attr(\"r\", EVENT_RADIUS * 2)\n\t\t\t.style(\"filter\", \"drop-shadow(0 0 20px currentColor)\")\n\t\t\t.transition()\n\t\t\t.duration(150)\n\t\t\t.attr(\"r\", EVENT_RADIUS)\n\t\t\t.style(\"filter\", d => {\n\t\t\t\tconst color = getEventColor(d.temporalOrder, d.isReference);\n\t\t\t\treturn `drop-shadow(0 0 8px ${color})`;\n\t\t\t});\n\t}\n\n\t/**\n\t * Animation loop\n\t */\n\tfunction animate(timestamp: number): void {\n\t\tif (!state.isAnimating) {\n\t\t\tanimationFrameId = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif (lastTimestamp === 0) {\n\t\t\tlastTimestamp = timestamp;\n\t\t}\n\n\t\tconst deltaTime = timestamp - lastTimestamp;\n\t\tlastTimestamp = timestamp;\n\n\t\t// Update progress (complete cycle in 5 seconds)\n\t\tconst speed = 1 / 5000; // 1 cycle per 5 seconds\n\t\tstate.animationProgress += deltaTime * speed;\n\n\t\tif (state.animationProgress >= 1) {\n\t\t\tstate.animationProgress = 0; // Loop back to start\n\t\t}\n\n\t\t// Render now line\n\t\trenderNowLine();\n\n\t\t// Check for event flashes\n\t\tcheckEventFlashes();\n\n\t\t// Continue animation\n\t\tanimationFrameId = requestAnimationFrame(animate);\n\t}\n\n\t/**\n\t * Start animation\n\t */\n\tfunction startAnimation(): void {\n\t\tif (animationFrameId === null) {\n\t\t\tstate.isAnimating = true;\n\t\t\tlastTimestamp = 0;\n\t\t\tanimationFrameId = requestAnimationFrame(animate);\n\t\t}\n\t}\n\n\t/**\n\t * Stop animation\n\t */\n\tfunction stopAnimation(): void {\n\t\tstate.isAnimating = false;\n\t\tif (animationFrameId !== null) {\n\t\t\tcancelAnimationFrame(animationFrameId);\n\t\t\tanimationFrameId = null;\n\t\t}\n\t}\n\n\t/**\n\t * Render events\n\t */\n\tfunction renderEvents(): void {\n\t\tlayers.events\n\t\t\t.selectAll(\"g.event\")\n\t\t\t.data(state.events, (d: any) => d.id)\n\t\t\t.join(\n\t\t\t\tenter => {\n\t\t\t\t\tconst g = enter\n\t\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t\t.attr(\"class\", \"event\")\n\t\t\t\t\t\t.attr(\"transform\", d => `translate(${scales.xScale(d.x)}, ${scales.yScale(d.ct)})`)\n\t\t\t\t\t\t.style(\"cursor\", \"pointer\")\n\t\t\t\t\t\t.style(\"opacity\", 0);\n\n\t\t\t\t\t// Event circle with glow\n\t\t\t\t\tg.append(\"circle\")\n\t\t\t\t\t\t.attr(\"r\", EVENT_RADIUS)\n\t\t\t\t\t\t.attr(\"fill\", d => getEventColor(d.temporalOrder, d.isReference))\n\t\t\t\t\t\t.attr(\"stroke\", d => (d.isReference ? D3_COLORS.electricBlue : \"none\"))\n\t\t\t\t\t\t.attr(\"stroke-width\", d => (d.isReference ? 3 : 0))\n\t\t\t\t\t\t.style(\"filter\", d => {\n\t\t\t\t\t\t\tconst color = getEventColor(d.temporalOrder, d.isReference);\n\t\t\t\t\t\t\treturn `drop-shadow(0 0 8px ${color})`;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t// Event label\n\t\t\t\t\tg.append(\"text\")\n\t\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t\t\t.attr(\"dominant-baseline\", \"middle\")\n\t\t\t\t\t\t.attr(\"fill\", \"#0a0e27\")\n\t\t\t\t\t\t.attr(\"class\", \"label\")\n\t\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t\t.text(d => d.id);\n\n\t\t\t\t\t// Animate in\n\t\t\t\t\tg.transition().duration(300).style(\"opacity\", 1);\n\n\t\t\t\t\treturn g;\n\t\t\t\t},\n\t\t\t\tupdate => {\n\t\t\t\t\t// Ensure opacity is 1 (in case enter transition hasn't completed)\n\t\t\t\t\tupdate.style(\"opacity\", 1);\n\n\t\t\t\t\t// Update position with transition\n\t\t\t\t\tupdate\n\t\t\t\t\t\t.transition()\n\t\t\t\t\t\t.duration(500)\n\t\t\t\t\t\t.attr(\"transform\", d => `translate(${scales.xScale(d.x)}, ${scales.yScale(d.ct)})`);\n\n\t\t\t\t\t// Update colors with transition\n\t\t\t\t\tupdate\n\t\t\t\t\t\t.select(\"circle\")\n\t\t\t\t\t\t.transition()\n\t\t\t\t\t\t.duration(500)\n\t\t\t\t\t\t.attr(\"fill\", d => getEventColor(d.temporalOrder, d.isReference))\n\t\t\t\t\t\t.attr(\"stroke\", d => (d.isReference ? D3_COLORS.electricBlue : \"none\"))\n\t\t\t\t\t\t.attr(\"stroke-width\", d => (d.isReference ? 3 : 0))\n\t\t\t\t\t\t.style(\"filter\", d => {\n\t\t\t\t\t\t\tconst color = getEventColor(d.temporalOrder, d.isReference);\n\t\t\t\t\t\t\treturn `drop-shadow(0 0 8px ${color})`;\n\t\t\t\t\t\t});\n\n\t\t\t\t\treturn update;\n\t\t\t\t},\n\t\t\t\texit => {\n\t\t\t\t\texit.transition().duration(200).style(\"opacity\", 0).remove();\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\t/**\n\t * Update all temporal orderings based on current velocity\n\t */\n\tfunction updateTemporalOrderings(): void {\n\t\tconst refEvent = state.events.find(e => e.isReference);\n\t\tif (!refEvent) return;\n\n\t\tstate.events.forEach(event => {\n\t\t\tif (event.isReference) {\n\t\t\t\tevent.temporalOrder = \"simultaneous\";\n\t\t\t} else {\n\t\t\t\tevent.temporalOrder = calculateTemporalOrder(\n\t\t\t\t\tevent.ct,\n\t\t\t\t\tevent.x,\n\t\t\t\t\trefEvent.ct,\n\t\t\t\t\trefEvent.x,\n\t\t\t\t\tstate.velocity\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Handle click on diagram\n\t */\n\tfunction handleClick(event: MouseEvent): void {\n\t\tconst [mouseX, mouseY] = pointer(event, svg.node());\n\n\t\t// Check if clicked on existing event\n\t\tfor (const evt of state.events) {\n\t\t\tconst evtScreenX = scales.xScale(evt.x);\n\t\t\tconst evtScreenY = scales.yScale(evt.ct);\n\t\t\tconst distance = Math.sqrt(\n\t\t\t\tMath.pow(mouseX - evtScreenX, 2) + Math.pow(mouseY - evtScreenY, 2)\n\t\t\t);\n\n\t\t\tif (distance <= CLICK_TOLERANCE) {\n\t\t\t\t// Remove event\n\t\t\t\tremoveEvent(evt.id);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Add new event if under limit\n\t\tif (state.events.length < MAX_EVENTS) {\n\t\t\tconst x = (mouseX - size / 2) / (size / 2 / scales.maxCoord);\n\t\t\tconst ct = -(mouseY - size / 2) / (size / 2 / scales.maxCoord);\n\t\t\taddEvent(ct, x);\n\t\t}\n\t}\n\n\t/**\n\t * Add new event\n\t */\n\tfunction addEvent(ct: number, x: number): void {\n\t\tconst nextLabel = EVENT_LABELS[state.events.length];\n\t\tconst isFirst = state.events.length === 0;\n\n\t\tconst newEvent: SimultaneityEvent = {\n\t\t\tid: nextLabel,\n\t\t\tct,\n\t\t\tx,\n\t\t\tisReference: isFirst,\n\t\t\ttemporalOrder: \"simultaneous\",\n\t\t};\n\n\t\tstate.events.push(newEvent);\n\t\tsyncStateToModule(state.events);\n\n\t\tif (isFirst) {\n\t\t\tstate.referenceEventId = nextLabel;\n\t\t}\n\n\t\tupdateTemporalOrderings();\n\t\trender();\n\t\tupdateTimeSeparations();\n\t\tupdateSpatialSeparations();\n\n\t\t// Update URL to persist events\n\t\tupdateURL();\n\t}\n\n\t/**\n\t * Remove event\n\t */\n\tfunction removeEvent(id: string): void {\n\t\tconst index = state.events.findIndex(e => e.id === id);\n\t\tif (index === -1) return;\n\n\t\tconst wasReference = state.events[index].isReference;\n\t\tstate.events.splice(index, 1);\n\t\tsyncStateToModule(state.events);\n\n\t\t// Reassign IDs\n\t\tstate.events.forEach((e, i) => {\n\t\t\te.id = EVENT_LABELS[i];\n\t\t});\n\n\t\t// If removed reference, make first event new reference\n\t\tif (wasReference && state.events.length > 0) {\n\t\t\tstate.events[0].isReference = true;\n\t\t\tstate.referenceEventId = state.events[0].id;\n\t\t} else if (state.events.length === 0) {\n\t\t\tstate.referenceEventId = null;\n\t\t}\n\n\t\tupdateTemporalOrderings();\n\t\trender();\n\t\tupdateTimeSeparations();\n\t\tupdateSpatialSeparations();\n\n\t\t// Update URL to persist events\n\t\tupdateURL();\n\t}\n\n\t/**\n\t * Update velocity\n\t */\n\tfunction updateVelocity(velocity: number): void {\n\t\tstate.velocity = velocity;\n\t\tstate.velocityDecimal = rl.ensure(velocity);\n\t\tstate.gamma = calculateGamma(velocity);\n\t\tupdateTemporalOrderings();\n\t\trender();\n\t\tupdateTimeSeparations();\n\t\tupdateSpatialSeparations();\n\n\t\t// When paused, manually render the now line since animation loop isn't running\n\t\tif (!state.isAnimating) {\n\t\t\trenderNowLine();\n\t\t}\n\n\t\t// Update velocity label on slider\n\t\tvelocityLabel.text(`${rl.formatSignificant(state.velocityDecimal, \"9\", 2)}c`);\n\t}\n\n\t/**\n\t * Reset to train example\n\t */\n\tfunction reset(): void {\n\t\tstate.events = createTrainExample();\n\t\tsyncStateToModule(state.events);\n\t\tstate.velocity = 0;\n\t\tstate.velocityDecimal = rl.ensure(0);\n\t\tstate.gamma = 1;\n\t\tstate.referenceEventId = \"A\";\n\n\t\t// Apply fixed scale for the train example\n\t\tscales = createScaleSet(TRAIN_EXAMPLE_SCALE, size);\n\n\t\trender();\n\t\tupdateTimeSeparations();\n\t\tupdateSpatialSeparations();\n\n\t\t// Update URL to persist events\n\t\tupdateURL();\n\t}\n\n\t/**\n\t * Clear all events\n\t */\n\tfunction clearAll(): void {\n\t\tstate.events = [];\n\t\tsyncStateToModule(state.events);\n\t\tstate.referenceEventId = null;\n\t\trender();\n\t\tupdateTimeSeparations();\n\t\tupdateSpatialSeparations();\n\n\t\t// Update URL to persist events\n\t\tupdateURL();\n\t}\n\n\t/**\n\t * Main render function\n\t */\n\tfunction render(): void {\n\t\trenderGrid();\n\t\trenderAxes();\n\t\trenderEvents();\n\t\t// Now line is rendered in animation loop\n\t}\n\n\t// Attach click handler\n\tsvg.on(\"click\", handleClick);\n\n\t// Initial render\n\trender();\n\n\t// Create animation controls container (bottom-center of diagram)\n\tconst controlContainer = select(container as any)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"simultaneity-controls\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"bottom\", \"220px\")\n\t\t.style(\"left\", \"50%\")\n\t\t.style(\"transform\", \"translateX(-50%)\")\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"flex-direction\", \"column\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"gap\", \"8px\")\n\t\t.style(\"z-index\", \"1000\");\n\n\t// Create velocity slider container\n\tconst sliderContainer = controlContainer\n\t\t.append(\"div\")\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"gap\", \"8px\")\n\t\t.style(\"padding\", \"8px 12px\")\n\t\t.style(\"background\", \"rgba(10, 14, 39, 0.9)\")\n\t\t.style(\"border\", \"1px solid rgba(0, 217, 255, 0.4)\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"box-shadow\", \"0 0 10px rgba(0, 217, 255, 0.3)\");\n\n\tsliderContainer\n\t\t.append(\"label\")\n\t\t.style(\"color\", \"#00d9ff\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.style(\"font-weight\", \"600\")\n\t\t.text(\"Velocity:\");\n\n\t// Debounce timer for URL updates\n\tlet urlUpdateTimer: number | undefined;\n\n\tconst velocitySlider = sliderContainer\n\t\t.append(\"input\")\n\t\t.attr(\"type\", \"range\")\n\t\t.attr(\"id\", \"simVelocitySlider\")\n\t\t.attr(\"min\", \"-0.99\")\n\t\t.attr(\"max\", \"0.99\")\n\t\t.attr(\"step\", \"0.01\")\n\t\t.attr(\"value\", \"0\")\n\t\t.style(\"width\", \"200px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.on(\"input\", function () {\n\t\t\tconst velocity = parseFloat((this as HTMLInputElement).value);\n\t\t\tupdateVelocity(velocity);\n\n\t\t\t// Update text input if it exists\n\t\t\tconst textInput = document.getElementById(\"simVelocityInput\") as HTMLInputElement;\n\t\t\tif (textInput) {\n\t\t\t\ttextInput.value = velocity.toString();\n\t\t\t}\n\n\t\t\t// Debounced URL update (wait 500ms after user stops moving slider)\n\t\t\tclearTimeout(urlUpdateTimer);\n\t\t\turlUpdateTimer = window.setTimeout(() => {\n\t\t\t\tupdateURL();\n\t\t\t}, 500);\n\t\t});\n\n\tconst velocityLabel = sliderContainer\n\t\t.append(\"span\")\n\t\t.style(\"color\", \"#e8f1f5\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.style(\"font-weight\", \"600\")\n\t\t.style(\"min-width\", \"50px\")\n\t\t.style(\"text-align\", \"right\")\n\t\t.text(\"0.00c\");\n\n\t// Create position slider container (hidden when animating)\n\tconst positionSliderContainer = controlContainer\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"simultaneity-position-slider-container\")\n\t\t.style(\"display\", \"none\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"gap\", \"8px\")\n\t\t.style(\"padding\", \"8px 12px\")\n\t\t.style(\"background\", \"rgba(10, 14, 39, 0.9)\")\n\t\t.style(\"border\", \"1px solid rgba(0, 217, 255, 0.4)\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"box-shadow\", \"0 0 10px rgba(0, 217, 255, 0.3)\");\n\n\tpositionSliderContainer\n\t\t.append(\"label\")\n\t\t.style(\"color\", \"#00d9ff\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.style(\"font-weight\", \"600\")\n\t\t.text(\"Position:\");\n\n\tconst positionSlider = positionSliderContainer\n\t\t.append(\"input\")\n\t\t.attr(\"type\", \"range\")\n\t\t.attr(\"id\", \"simPositionSlider\")\n\t\t.attr(\"min\", \"0\")\n\t\t.attr(\"max\", \"1\")\n\t\t.attr(\"step\", \"0.001\")\n\t\t.attr(\"value\", \"0\")\n\t\t.style(\"width\", \"200px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.on(\"input\", function () {\n\t\t\tconst progress = parseFloat((this as HTMLInputElement).value);\n\t\t\tstate.animationProgress = progress;\n\t\t\tpositionLabel.text(`${Math.round(progress * 100)}%`);\n\t\t\trenderNowLine();\n\t\t});\n\n\tconst positionLabel = positionSliderContainer\n\t\t.append(\"span\")\n\t\t.style(\"color\", \"#e8f1f5\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.style(\"font-weight\", \"600\")\n\t\t.style(\"min-width\", \"50px\")\n\t\t.style(\"text-align\", \"right\")\n\t\t.text(\"0%\");\n\n\t// Create button container for play/pause and light cone toggle\n\tconst buttonContainer = controlContainer\n\t\t.append(\"div\")\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"gap\", \"8px\");\n\n\t// Create Play/Pause button\n\tconst playPauseButton = buttonContainer\n\t\t.append(\"button\")\n\t\t.attr(\"class\", \"simultaneity-toggle-button\")\n\t\t.text(\" Pause\")\n\t\t.style(\"padding\", \"8px 16px\")\n\t\t.style(\"background\", \"rgba(10, 14, 39, 0.9)\")\n\t\t.style(\"border\", \"1px solid rgba(0, 217, 255, 0.4)\")\n\t\t.style(\"color\", \"#e8f1f5\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"12px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"box-shadow\", \"0 0 10px rgba(0, 217, 255, 0.3)\")\n\t\t.style(\"transition\", \"all 200ms\")\n\t\t.on(\"mouseenter\", function () {\n\t\t\tselect(this)\n\t\t\t\t.style(\"background\", \"rgba(0, 217, 255, 0.2)\")\n\t\t\t\t.style(\"box-shadow\", \"0 0 15px rgba(0, 217, 255, 0.5)\");\n\t\t})\n\t\t.on(\"mouseleave\", function () {\n\t\t\tselect(this)\n\t\t\t\t.style(\"background\", \"rgba(10, 14, 39, 0.9)\")\n\t\t\t\t.style(\"box-shadow\", \"0 0 10px rgba(0, 217, 255, 0.3)\");\n\t\t})\n\t\t.on(\"click\", () => {\n\t\t\tif (state.isAnimating) {\n\t\t\t\tstopAnimation();\n\t\t\t\tplayPauseButton.text(\" Play\");\n\t\t\t\t// Show position slider when paused\n\t\t\t\tpositionSliderContainer.style(\"display\", \"flex\");\n\t\t\t\t// Update position slider to current progress\n\t\t\t\tpositionSlider.property(\"value\", state.animationProgress);\n\t\t\t\tpositionLabel.text(`${Math.round(state.animationProgress * 100)}%`);\n\t\t\t\t// Ensure now line is rendered at current position\n\t\t\t\trenderNowLine();\n\t\t\t} else {\n\t\t\t\tstartAnimation();\n\t\t\t\tplayPauseButton.text(\" Pause\");\n\t\t\t\t// Hide position slider when animating\n\t\t\t\tpositionSliderContainer.style(\"display\", \"none\");\n\t\t\t}\n\t\t});\n\n\t// Create Light Cone toggle button\n\tvoid buttonContainer\n\t\t.append(\"button\")\n\t\t.attr(\"class\", \"simultaneity-toggle-button\")\n\t\t.text(\"Light cone\")\n\t\t.style(\"padding\", \"8px 16px\")\n\t\t.style(\"background\", \"rgba(10, 14, 39, 0.9)\")\n\t\t.style(\"border\", \"1px solid rgba(0, 217, 255, 0.4)\")\n\t\t.style(\"color\", \"#e8f1f5\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"12px\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"box-shadow\", \"0 0 10px rgba(0, 217, 255, 0.3)\")\n\t\t.style(\"transition\", \"all 200ms\")\n\t\t.on(\"mouseenter\", function () {\n\t\t\tselect(this)\n\t\t\t\t.style(\"background\", \"rgba(0, 217, 255, 0.2)\")\n\t\t\t\t.style(\"box-shadow\", \"0 0 15px rgba(0, 217, 255, 0.5)\");\n\t\t})\n\t\t.on(\"mouseleave\", function () {\n\t\t\tselect(this)\n\t\t\t\t.style(\"background\", \"rgba(10, 14, 39, 0.9)\")\n\t\t\t\t.style(\"box-shadow\", \"0 0 10px rgba(0, 217, 255, 0.3)\");\n\t\t})\n\t\t.on(\"click\", () => {\n\t\t\tstate.showLightCone = !state.showLightCone;\n\t\t\trenderNowLine();\n\t\t});\n\n\t// Create time separation display container (bottom-right of diagram)\n\tconst timeSeparationContainer = select(container as any)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"simultaneity-time-display\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"bottom\", \"50px\")\n\t\t.style(\"right\", \"20px\")\n\t\t.style(\"padding\", \"8px 12px\")\n\t\t.style(\"background\", \"rgba(10, 14, 39, 0.9)\")\n\t\t.style(\"border\", \"1px solid rgba(0, 217, 255, 0.4)\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"box-shadow\", \"0 0 10px rgba(0, 217, 255, 0.3)\")\n\t\t.style(\"z-index\", \"1000\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.style(\"color\", \"#e8f1f5\")\n\t\t.style(\"min-width\", \"180px\");\n\n\t// Create spatial separation display container (bottom-left of diagram)\n\tconst spatialSeparationContainer = select(container as any)\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"simultaneity-space-display\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"bottom\", \"50px\")\n\t\t.style(\"left\", \"20px\")\n\t\t.style(\"padding\", \"8px 12px\")\n\t\t.style(\"background\", \"rgba(10, 14, 39, 0.9)\")\n\t\t.style(\"border\", \"1px solid rgba(0, 217, 255, 0.4)\")\n\t\t.style(\"border-radius\", \"4px\")\n\t\t.style(\"box-shadow\", \"0 0 10px rgba(0, 217, 255, 0.3)\")\n\t\t.style(\"z-index\", \"1000\")\n\t\t.style(\"font-family\", \"'IBM Plex Mono', monospace\")\n\t\t.style(\"font-size\", \"11px\")\n\t\t.style(\"color\", \"#e8f1f5\")\n\t\t.style(\"min-width\", \"180px\");\n\n\t// Function to update time separation display\n\tfunction updateTimeSeparations(): void {\n\t\tif (state.events.length === 0) {\n\t\t\ttimeSeparationContainer.style(\"display\", \"none\");\n\t\t\treturn;\n\t\t}\n\n\t\ttimeSeparationContainer.style(\"display\", \"block\");\n\n\t\tconst refEvent = state.events.find(e => e.isReference);\n\t\tif (!refEvent) {\n\t\t\ttimeSeparationContainer.html('<div style=\"color: #ffaa00;\">No reference event</div>');\n\t\t\treturn;\n\t\t}\n\n\t\t// Calculate time separations in moving frame\n\t\tconst separations: string[] = [];\n\t\tseparations.push(\n\t\t\t`<div style=\"font-weight: bold; margin-bottom: 4px; color: #00d9ff;\">Time in frame (v=${rl.formatSignificant(state.velocityDecimal, \"9\", 2)}c):</div>`\n\t\t);\n\n\t\tstate.events.forEach(event => {\n\t\t\tif (event.id === refEvent.id) return; // Skip reference event\n\n\t\t\t// Transform both events to moving frame\n\t\t\tconst eventPrime = lorentzTransform(event.ct, event.x, state.velocity);\n\t\t\tconst refPrime = lorentzTransform(refEvent.ct, refEvent.x, state.velocity);\n\t\t\tconst deltaCtPrime = eventPrime.ctPrime - refPrime.ctPrime;\n\n\t\t\t// Convert to time (ct is in km, so divide by c to get seconds)\n\t\t\tconst deltaTime = deltaCtPrime / C;\n\n\t\t\t// Format with appropriate units using Decimal for consistent precision\n\t\t\tlet timeStr: string;\n\t\t\tconst deltaTimeDecimal = rl.ensure(deltaTime);\n\t\t\tconst tolerance = rl.ensure(0.001);\n\t\t\tif (deltaTimeDecimal.abs().lt(tolerance)) {\n\t\t\t\ttimeStr = \" 0 s (simultaneous)\";\n\t\t\t} else if (deltaTimeDecimal.abs().lt(rl.one)) {\n\t\t\t\tconst deltaTimeMs = deltaTimeDecimal.mul(1000);\n\t\t\t\ttimeStr = `${rl.formatSignificant(deltaTimeMs, \"0\", 2)} ms`;\n\t\t\t} else {\n\t\t\t\ttimeStr = `${rl.formatSignificant(deltaTimeDecimal, \"0\", 3)} s`;\n\t\t\t}\n\n\t\t\tconst color =\n\t\t\t\tevent.temporalOrder === \"future\"\n\t\t\t\t\t? \"#00ff9f\"\n\t\t\t\t\t: event.temporalOrder === \"past\"\n\t\t\t\t\t\t? \"#ffaa00\"\n\t\t\t\t\t\t: \"#e8f1f5\";\n\n\t\t\tconst sign = deltaTimeDecimal.gte(0) ? \"+\" : \"\";\n\t\t\tseparations.push(\n\t\t\t\t`<div style=\"color: ${color}; margin: 2px 0;\">Event ${event.id}: ${sign}${timeStr}</div>`\n\t\t\t);\n\t\t});\n\n\t\ttimeSeparationContainer.html(separations.join(\"\"));\n\t}\n\n\t// Function to update spatial separation display\n\tfunction updateSpatialSeparations(): void {\n\t\tif (state.events.length === 0) {\n\t\t\tspatialSeparationContainer.style(\"display\", \"none\");\n\t\t\treturn;\n\t\t}\n\n\t\tspatialSeparationContainer.style(\"display\", \"block\");\n\n\t\tconst refEvent = state.events.find(e => e.isReference);\n\t\tif (!refEvent) {\n\t\t\tspatialSeparationContainer.html('<div style=\"color: #ffaa00;\">No reference event</div>');\n\t\t\treturn;\n\t\t}\n\n\t\t// Calculate spatial separations in moving frame\n\t\tconst separations: string[] = [];\n\t\tseparations.push(\n\t\t\t`<div style=\"font-weight: bold; margin-bottom: 4px; color: #00d9ff;\">Space in frame (v=${rl.formatSignificant(state.velocityDecimal, \"9\", 2)}c):</div>`\n\t\t);\n\n\t\tstate.events.forEach(event => {\n\t\t\tif (event.id === refEvent.id) return; // Skip reference event\n\n\t\t\t// Transform both events to moving frame\n\t\t\tconst eventPrime = lorentzTransform(event.ct, event.x, state.velocity);\n\t\t\tconst refPrime = lorentzTransform(refEvent.ct, refEvent.x, state.velocity);\n\t\t\tconst deltaXPrime = eventPrime.xPrime - refPrime.xPrime;\n\n\t\t\t// Format as whole number with thousands separator\n\t\t\tconst formattedDistance = Math.round(Math.abs(deltaXPrime)).toLocaleString(\"en-US\");\n\n\t\t\tconst color =\n\t\t\t\tevent.temporalOrder === \"future\"\n\t\t\t\t\t? \"#00ff9f\"\n\t\t\t\t\t: event.temporalOrder === \"past\"\n\t\t\t\t\t\t? \"#ffaa00\"\n\t\t\t\t\t\t: \"#e8f1f5\";\n\n\t\t\tconst sign = deltaXPrime >= 0 ? \"+\" : \"\";\n\t\t\tseparations.push(\n\t\t\t\t`<div style=\"color: ${color}; margin: 2px 0;\">Event ${event.id}: ${sign}${formattedDistance} km</div>`\n\t\t\t);\n\t\t});\n\n\t\tspatialSeparationContainer.html(separations.join(\"\"));\n\t}\n\n\t// Initial update\n\tupdateTimeSeparations();\n\tupdateSpatialSeparations();\n\n\t// Check for pending events from URL and restore them\n\tconst pendingEvents = simultaneityState.consumePendingEvents();\n\tif (pendingEvents && pendingEvents.length > 0) {\n\t\t// Restore events (limit to 4, assign IDs)\n\t\tstate.events = pendingEvents.slice(0, 4).map((e, i) => ({\n\t\t\tid: EVENT_LABELS[i],\n\t\t\tct: e.ct,\n\t\t\tx: e.x,\n\t\t\tisReference: i === 0,\n\t\t\ttemporalOrder: \"simultaneous\" as const,\n\t\t}));\n\t\tsyncStateToModule(state.events);\n\n\t\tif (state.events.length > 0) {\n\t\t\tstate.referenceEventId = state.events[0].id;\n\t\t}\n\n\t\t// Recalculate scales based on restored events\n\t\tconst maxCoord =\n\t\t\tMath.max(...state.events.map(e => Math.max(Math.abs(e.ct), Math.abs(e.x)))) * 1.3;\n\t\tscales = createScaleSet(maxCoord, size);\n\n\t\tupdateTemporalOrderings();\n\t\trender();\n\t\tupdateTimeSeparations();\n\t\tupdateSpatialSeparations();\n\n\t\t// Update URL to persist restored events\n\t\tupdateURL();\n\t}\n\n\t// Start animation\n\tstartAnimation();\n\n\t// Resize handler for orientation changes and window resizing\n\tlet lastInnerWidth = window.innerWidth;\n\tconst resizeHandler = debounce(() => {\n\t\t// iOS Safari fires resize during scroll (height-only visual viewport changes)\n\t\tif (window.innerWidth === lastInnerWidth) return;\n\t\tlastInnerWidth = window.innerWidth;\n\n\t\trender();\n\t}, 150);\n\n\twindow.addEventListener(\"resize\", resizeHandler);\n\n\t// Return controller interface with extended methods\n\treturn {\n\t\tupdate: () => render(),\n\t\tupdateSlider: (velocity: number) => {\n\t\t\t// Clamp velocity to valid range\n\t\t\tconst clampedVelocity = Math.max(-0.99, Math.min(0.99, velocity));\n\t\t\tconst clampedVelocityDecimal = rl.ensure(clampedVelocity);\n\t\t\tvelocitySlider.property(\"value\", clampedVelocity);\n\t\t\tvelocityLabel.text(`${rl.formatSignificant(clampedVelocityDecimal, \"9\", 2)}c`);\n\t\t\tupdateVelocity(clampedVelocity);\n\t\t},\n\t\tpause: () => {\n\t\t\tstopAnimation();\n\t\t\tplayPauseButton.text(\" Play\");\n\t\t},\n\t\tplay: () => {\n\t\t\tstartAnimation();\n\t\t\tplayPauseButton.text(\" Pause\");\n\t\t},\n\t\treset: () => {\n\t\t\treset();\n\t\t\t// Reset slider and label\n\t\t\tvelocitySlider.property(\"value\", 0);\n\t\t\tvelocityLabel.text(\"0.00c\");\n\t\t\t// Ensure animation is running after reset\n\t\t\tif (!state.isAnimating) {\n\t\t\t\tstartAnimation();\n\t\t\t}\n\t\t\tplayPauseButton.text(\" Pause\");\n\t\t\t// Hide position slider since animation is running\n\t\t\tpositionSliderContainer.style(\"display\", \"none\");\n\t\t},\n\t\tclearAll,\n\t\tdestroy: () => {\n\t\t\tstopAnimation();\n\t\t\twindow.removeEventListener(\"resize\", resizeHandler);\n\t\t\tsvg.selectAll(\"*\").remove();\n\t\t\tsvg.on(\"click\", null);\n\t\t},\n\t};\n}\n","import { Chart, registerables } from \"chart.js\";\nimport { getInputElement, getButtonElement, getResultElement } from \"./ui/domUtils\";\nimport {\n\tcreateLorentzHandler,\n\tcreateRapidityFromVelocityHandler,\n\tcreateVelocityFromRapidityHandler,\n\tcreateAccelHandler,\n\tcreateFlipBurnHandler,\n\tcreateTwinParadoxHandler,\n\tcreateAddVelocitiesHandler,\n\tcreateWarpDriveHandler,\n\tcreatePionAccelTimeHandler,\n\tcreatePionFuelFractionHandler,\n\tcreateSpacetimeIntervalHandler,\n\tcreateChartTimeModeHandler,\n\tcreateMassChartSliderHandler,\n\tinitializeMassChartSlider,\n\tcreatePositionVelocitySliderHandler,\n\tinitializePositionVelocitySlider,\n} from \"./ui/eventHandlers\";\nimport { type ChartRegistry } from \"./charts/charts\";\nimport {\n\tdrawMinkowskiDiagramD3,\n\ttype MinkowskiData,\n\ttype MinkowskiDiagramController,\n} from \"./charts/minkowski\";\nimport {\n\tdrawTwinParadoxMinkowski,\n\ttype TwinParadoxMinkowskiData,\n\ttype TwinParadoxController,\n} from \"./charts/minkowski-twins\";\nimport { createSimultaneityDiagram, type SimultaneityController } from \"./charts/simultaneity\";\nimport {\n\tinitializeFromURL,\n\tsetupURLSync,\n\tupdateURL,\n\tapplyPendingSliderValue,\n\tapplyPendingDistanceSliderValue,\n} from \"./urlState\";\n\n// Register Chart.js components\nChart.register(...registerables);\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\tconst chartRegistry: { current: ChartRegistry } = { current: new Map() };\n\n\t// Store Minkowski diagram controller and data for updates\n\tconst minkowskiState: {\n\t\tlastData: MinkowskiData | null;\n\t\tcontroller: MinkowskiDiagramController | null;\n\t} = {\n\t\tlastData: null,\n\t\tcontroller: null,\n\t};\n\n\t// Store Twin Paradox Minkowski diagram controller and data for updates\n\tconst twinsMinkowskiState: {\n\t\tlastData: TwinParadoxMinkowskiData | null;\n\t\tcontroller: TwinParadoxController | null;\n\t} = {\n\t\tlastData: null,\n\t\tcontroller: null,\n\t};\n\n\t// Store Simultaneity diagram controller\n\tconst simultaneityState: {\n\t\tcontroller: SimultaneityController | null;\n\t} = {\n\t\tcontroller: null,\n\t};\n\n\t// Store event handlers for cleanup\n\ttype EventHandler = EventListener | EventListenerObject;\n\tconst eventHandlers: Array<{ element: Element | Window; event: string; handler: EventHandler }> =\n\t\t[];\n\tconst addEventListener = (\n\t\telement: Element | Window | null,\n\t\tevent: string,\n\t\thandler: EventHandler\n\t) => {\n\t\tif (element) {\n\t\t\telement.addEventListener(event, handler);\n\t\t\teventHandlers.push({ element, event, handler });\n\t\t}\n\t};\n\n\t// Help button handlers - initialize Bootstrap modals\n\tdocument.querySelectorAll(\".help-btn\").forEach(btn => {\n\t\tbtn.addEventListener(\"click\", () => {\n\t\t\tconst targetId = btn.getAttribute(\"data-help-target\");\n\t\t\tif (targetId) {\n\t\t\t\tconst modalElement = document.getElementById(targetId);\n\t\t\t\tif (modalElement) {\n\t\t\t\t\t// Bootstrap 5 Modal API - requires bootstrap global\n\t\t\t\t\tconst Modal = (window as any).bootstrap.Modal;\n\t\t\t\t\tif (Modal) {\n\t\t\t\t\t\tconst modal = new Modal(modalElement);\n\t\t\t\t\t\tmodal.show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\t// Lorentz factor from velocity\n\taddEventListener(\n\t\tgetButtonElement(\"lorentzButton\"),\n\t\t\"click\",\n\t\tcreateLorentzHandler(\n\t\t\t() => getInputElement(\"lorentzInput\"),\n\t\t\t() => getResultElement(\"resultLorentz\")\n\t\t)\n\t);\n\n\t// Rapidity from velocity\n\taddEventListener(\n\t\tgetButtonElement(\"velocityButton\"),\n\t\t\"click\",\n\t\tcreateRapidityFromVelocityHandler(\n\t\t\t() => getInputElement(\"velocityInput\"),\n\t\t\t() => getResultElement(\"resultVelocity\")\n\t\t)\n\t);\n\n\t// Velocity from rapidity\n\taddEventListener(\n\t\tgetButtonElement(\"rapidityButton\"),\n\t\t\"click\",\n\t\tcreateVelocityFromRapidityHandler(\n\t\t\t() => getInputElement(\"rapidityInput\"),\n\t\t\t() => getResultElement(\"resultRapidity\")\n\t\t)\n\t);\n\n\t// Constant acceleration\n\tconst accelHandlerBase = createAccelHandler(\n\t\t() => getInputElement(\"aAccelInput\"),\n\t\t() => getInputElement(\"aInput\"),\n\t\t() => getInputElement(\"aDryMassInput\"),\n\t\t() => getInputElement(\"aEfficiencyInput\"),\n\t\t() => [\n\t\t\tgetResultElement(\"resultA1\"),\n\t\t\tgetResultElement(\"resultA2\"),\n\t\t\tgetResultElement(\"resultA1b\"),\n\t\t\tgetResultElement(\"resultA2b\"),\n\t\t\tgetResultElement(\"resultAFuel\"),\n\t\t\tgetResultElement(\"resultAFuelFraction\"),\n\t\t\tgetResultElement(\"resultAStars\"),\n\t\t\tgetResultElement(\"resultAGalaxyFraction\"),\n\t\t],\n\t\tchartRegistry\n\t);\n\n\t// Wrap handler to initialize sliders after chart update\n\tconst accelHandler = () => {\n\t\taccelHandlerBase();\n\t\t// Wait for chart to be updated before initializing sliders\n\t\t// Chart update uses RAF + setTimeout(0), so 100ms provides margin\n\t\tsetTimeout(() => {\n\t\t\tinitializeMassChartSlider(\n\t\t\t\t\"accelMassChart\",\n\t\t\t\t\"accelMassSlider\",\n\t\t\t\t\"accelMassSliderValue\",\n\t\t\t\t\"days\",\n\t\t\t\tchartRegistry\n\t\t\t);\n\t\t\tinitializePositionVelocitySlider(\n\t\t\t\t\"accelPositionVelocity\",\n\t\t\t\t\"accelPositionSlider\",\n\t\t\t\t\"accelPositionSliderValue\",\n\t\t\t\tchartRegistry\n\t\t\t);\n\t\t\t// Apply any pending slider values from URL after initialization\n\t\t\tapplyPendingSliderValue(\n\t\t\t\t\"accelMassSlider\",\n\t\t\t\t\"accelMassSliderValue\",\n\t\t\t\t\"days\",\n\t\t\t\t\"accelMassChart\",\n\t\t\t\tchartRegistry\n\t\t\t);\n\t\t\tapplyPendingDistanceSliderValue(\n\t\t\t\t\"accelPositionSlider\",\n\t\t\t\t\"accelPositionSliderValue\",\n\t\t\t\t\"accelPositionVelocity\",\n\t\t\t\tchartRegistry\n\t\t\t);\n\t\t}, 100);\n\t};\n\n\taddEventListener(getButtonElement(\"aButton\"), \"click\", accelHandler);\n\n\t// Flip-and-burn\n\tconst flipHandlerBase = createFlipBurnHandler(\n\t\t() => getInputElement(\"flipAccelInput\"),\n\t\t() => getInputElement(\"flipInput\"),\n\t\t() => getInputElement(\"flipDryMassInput\"),\n\t\t() => getInputElement(\"flipEfficiencyInput\"),\n\t\t() => [\n\t\t\tgetResultElement(\"resultFlip1\"),\n\t\t\tgetResultElement(\"resultFlip2\"),\n\t\t\tgetResultElement(\"resultFlip3\"),\n\t\t\tgetResultElement(\"resultFlip4\"),\n\t\t\tgetResultElement(\"resultFlip5\"),\n\t\t\tgetResultElement(\"resultFlip6\"),\n\t\t\tgetResultElement(\"resultFlipFuel\"),\n\t\t\tgetResultElement(\"resultFlipFuelFraction\"),\n\t\t\tgetResultElement(\"resultFlipStars\"),\n\t\t\tgetResultElement(\"resultFlipGalaxyFraction\"),\n\t\t],\n\t\tchartRegistry\n\t);\n\n\t// Wrap handler to initialize sliders after chart update\n\tconst flipHandler = () => {\n\t\tflipHandlerBase();\n\t\t// Wait for chart to be updated before initializing sliders\n\t\t// Chart update uses RAF + setTimeout(0), so 100ms provides margin\n\t\tsetTimeout(() => {\n\t\t\tinitializeMassChartSlider(\n\t\t\t\t\"flipMassChart\",\n\t\t\t\t\"flipMassSlider\",\n\t\t\t\t\"flipMassSliderValue\",\n\t\t\t\t\"years\",\n\t\t\t\tchartRegistry\n\t\t\t);\n\t\t\tinitializePositionVelocitySlider(\n\t\t\t\t\"flipPositionVelocity\",\n\t\t\t\t\"flipPositionSlider\",\n\t\t\t\t\"flipPositionSliderValue\",\n\t\t\t\tchartRegistry\n\t\t\t);\n\t\t\t// Apply any pending slider values from URL after initialization\n\t\t\tapplyPendingSliderValue(\n\t\t\t\t\"flipMassSlider\",\n\t\t\t\t\"flipMassSliderValue\",\n\t\t\t\t\"years\",\n\t\t\t\t\"flipMassChart\",\n\t\t\t\tchartRegistry\n\t\t\t);\n\t\t\tapplyPendingDistanceSliderValue(\n\t\t\t\t\"flipPositionSlider\",\n\t\t\t\t\"flipPositionSliderValue\",\n\t\t\t\t\"flipPositionVelocity\",\n\t\t\t\tchartRegistry\n\t\t\t);\n\t\t}, 100);\n\t};\n\n\taddEventListener(getButtonElement(\"flipButton\"), \"click\", flipHandler);\n\n\t// Setup time mode toggles for all charts\n\tconst chartIds = [\n\t\t\"accelVelocity\",\n\t\t\"accelLorentz\",\n\t\t\"accelRapidity\",\n\t\t\"flipVelocity\",\n\t\t\"flipLorentz\",\n\t\t\"flipRapidity\",\n\t];\n\n\tchartIds.forEach(chartId => {\n\t\tconst handler = createChartTimeModeHandler(chartId, chartRegistry);\n\n\t\t// Wire up both buttons for this chart\n\t\tdocument.querySelectorAll(`[data-chart=\"${chartId}\"]`).forEach(btn => {\n\t\t\tbtn.addEventListener(\"click\", e => {\n\t\t\t\tconst mode = (e.target as HTMLButtonElement).dataset.mode as \"proper\" | \"coordinate\";\n\t\t\t\thandler(mode);\n\t\t\t\tupdateURL(); // Persist to URL\n\t\t\t});\n\t\t});\n\t});\n\n\t// Setup mass chart sliders\n\tconst accelMassSliderHandler = createMassChartSliderHandler(\n\t\t\"accelMassChart\",\n\t\t() => getInputElement(\"accelMassSlider\"),\n\t\t() => getResultElement(\"accelMassSliderValue\"),\n\t\t\"days\",\n\t\tchartRegistry\n\t);\n\taddEventListener(getInputElement(\"accelMassSlider\"), \"input\", accelMassSliderHandler);\n\n\tconst flipMassSliderHandler = createMassChartSliderHandler(\n\t\t\"flipMassChart\",\n\t\t() => getInputElement(\"flipMassSlider\"),\n\t\t() => getResultElement(\"flipMassSliderValue\"),\n\t\t\"years\",\n\t\tchartRegistry\n\t);\n\taddEventListener(getInputElement(\"flipMassSlider\"), \"input\", flipMassSliderHandler);\n\n\t// Setup position/velocity chart sliders\n\tconst accelPositionSliderHandler = createPositionVelocitySliderHandler(\n\t\t\"accelPositionVelocity\",\n\t\t() => getInputElement(\"accelPositionSlider\"),\n\t\t() => getResultElement(\"accelPositionSliderValue\"),\n\t\tchartRegistry\n\t);\n\taddEventListener(getInputElement(\"accelPositionSlider\"), \"input\", accelPositionSliderHandler);\n\n\tconst flipPositionSliderHandler = createPositionVelocitySliderHandler(\n\t\t\"flipPositionVelocity\",\n\t\t() => getInputElement(\"flipPositionSlider\"),\n\t\t() => getResultElement(\"flipPositionSliderValue\"),\n\t\tchartRegistry\n\t);\n\taddEventListener(getInputElement(\"flipPositionSlider\"), \"input\", flipPositionSliderHandler);\n\n\t// Twin Paradox\n\tconst twinsCalculateHandler = createTwinParadoxHandler(\n\t\t() => getInputElement(\"twinsVelocityInput\"),\n\t\t() => getInputElement(\"twinsTimeInput\"),\n\t\t() => [\n\t\t\tgetResultElement(\"resultTwins1\"),\n\t\t\tgetResultElement(\"resultTwins2\"),\n\t\t\tgetResultElement(\"resultTwins3\"),\n\t\t\tgetResultElement(\"resultTwins4\"),\n\t\t\tgetResultElement(\"resultTwins5\"),\n\t\t\tgetResultElement(\"resultTwins6\"),\n\t\t\tgetResultElement(\"resultTwins7\"),\n\t\t\tgetResultElement(\"resultTwins8\"),\n\t\t],\n\t\tchartRegistry,\n\t\t(container, data, _controller) => {\n\t\t\tif (twinsMinkowskiState.controller) {\n\t\t\t\t// Update existing diagram\n\t\t\t\ttwinsMinkowskiState.controller.update(data);\n\t\t\t} else {\n\t\t\t\t// Create new diagram with velocity change callback\n\t\t\t\ttwinsMinkowskiState.controller = drawTwinParadoxMinkowski(container, data, newVelocityC => {\n\t\t\t\t\t// Update input field\n\t\t\t\t\tconst velocityInput = getInputElement(\"twinsVelocityInput\");\n\t\t\t\t\tif (velocityInput) {\n\t\t\t\t\t\tvelocityInput.value = newVelocityC.toString();\n\t\t\t\t\t\t// Trigger calculation with new velocity (silent mode to avoid flicker)\n\t\t\t\t\t\ttwinsCalculateHandler(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\ttwinsMinkowskiState.lastData = data;\n\t\t}\n\t);\n\n\taddEventListener(getButtonElement(\"twinsButton\"), \"click\", () => twinsCalculateHandler());\n\n\t// Bidirectional sync: input field -> slider\n\tconst twinsInputHandler = (event: Event) => {\n\t\tconst velocityInput = event.target as HTMLInputElement;\n\t\tconst newVelocityC = parseFloat(velocityInput.value);\n\t\tif (!isNaN(newVelocityC) && twinsMinkowskiState.controller?.updateSlider) {\n\t\t\ttwinsMinkowskiState.controller.updateSlider(newVelocityC);\n\t\t}\n\t};\n\taddEventListener(getInputElement(\"twinsVelocityInput\"), \"input\", twinsInputHandler);\n\n\t// Handle twins tab - pre-calculate when first shown\n\tconst twinsTab = document.getElementById(\"twins-tab\");\n\tconst twinsTabHandler = () => {\n\t\t// Check if the diagram hasn't been generated yet\n\t\tif (!twinsMinkowskiState.controller) {\n\t\t\t// Trigger the twins paradox calculation\n\t\t\tconst twinsButton = getButtonElement(\"twinsButton\");\n\t\t\ttwinsButton?.click();\n\t\t}\n\t};\n\taddEventListener(twinsTab, \"shown.bs.tab\", twinsTabHandler);\n\n\t// Add velocities\n\taddEventListener(\n\t\tgetButtonElement(\"addButton\"),\n\t\t\"click\",\n\t\tcreateAddVelocitiesHandler(\n\t\t\t() => getInputElement(\"v1Input\"),\n\t\t\t() => getInputElement(\"v2Input\"),\n\t\t\t() => getResultElement(\"resultAdd\")\n\t\t)\n\t);\n\n\t// Warp drive time travel\n\taddEventListener(\n\t\tgetButtonElement(\"warpButton\"),\n\t\t\"click\",\n\t\tcreateWarpDriveHandler(\n\t\t\t() => getInputElement(\"warpDistanceInput\"),\n\t\t\t() => getInputElement(\"warpBoostInput\"),\n\t\t\t() => getInputElement(\"warpTransitInput\"),\n\t\t\t() => getInputElement(\"warpBoostDurationInput\"),\n\t\t\t() => [\n\t\t\t\tgetResultElement(\"resultWarpDisplacement\"),\n\t\t\t\tgetResultElement(\"resultWarpSimultaneity\"),\n\t\t\t\tgetResultElement(\"resultWarpEarthTime\"),\n\t\t\t\tgetResultElement(\"resultWarpTravelerTime\"),\n\t\t\t]\n\t\t)\n\t);\n\n\t// Pion rocket acceleration time\n\taddEventListener(\n\t\tgetButtonElement(\"pionAccelButton\"),\n\t\t\"click\",\n\t\tcreatePionAccelTimeHandler(\n\t\t\t() => getInputElement(\"pionFuelMassInput\"),\n\t\t\t() => getInputElement(\"pionDryMassInput\"),\n\t\t\t() => getInputElement(\"pionEfficiencyInput\"),\n\t\t\t() => getResultElement(\"resultPionAccel\")\n\t\t)\n\t);\n\n\t// Pion rocket fuel fraction\n\taddEventListener(\n\t\tgetButtonElement(\"fuelFractionButton\"),\n\t\t\"click\",\n\t\tcreatePionFuelFractionHandler(\n\t\t\t() => getInputElement(\"fuelFractionAccelInput\"),\n\t\t\t() => getInputElement(\"fuelFractionTimeInput\"),\n\t\t\t() => getInputElement(\"fuelFractionEffInput\"),\n\t\t\t() => getInputElement(\"fuelFractionDryMassInput\"),\n\t\t\t() => getResultElement(\"resultFuelFraction\"),\n\t\t\t() => getResultElement(\"resultFuelMass\")\n\t\t)\n\t);\n\n\t// Spacetime interval\n\taddEventListener(\n\t\tgetButtonElement(\"spacetimeButton\"),\n\t\t\"click\",\n\t\tcreateSpacetimeIntervalHandler(\n\t\t\t() => getInputElement(\"spacetimeTime2\"),\n\t\t\t() => getInputElement(\"spacetimeX2\"),\n\t\t\t() => getInputElement(\"spacetimeVelocity\"),\n\t\t\t() => getResultElement(\"resultSpacetimeSquared\"),\n\t\t\t() => getResultElement(\"resultSpacetimeType\"),\n\t\t\t() => getResultElement(\"resultSpacetimeDeltaT\"),\n\t\t\t() => getResultElement(\"resultSpacetimeDeltaX\"),\n\t\t\t() => getResultElement(\"resultSpacetimeMinSep\"),\n\t\t\t() => getResultElement(\"resultSpacetimeVelocity\"),\n\t\t\t(container, data, _controller) => {\n\t\t\t\tif (minkowskiState.controller) {\n\t\t\t\t\t// Update existing diagram\n\t\t\t\t\tminkowskiState.controller.update(data);\n\t\t\t\t} else {\n\t\t\t\t\t// Create new diagram\n\t\t\t\t\tminkowskiState.controller = drawMinkowskiDiagramD3(container, data);\n\t\t\t\t}\n\t\t\t\tminkowskiState.lastData = data;\n\t\t\t}\n\t\t)\n\t);\n\n\t// Handle orientation changes and window resize with debounce\n\tlet resizeTimeout: number | undefined;\n\tlet lastInnerWidth = window.innerWidth;\n\tconst handleResize = () => {\n\t\t// iOS Safari fires resize during scroll (height-only visual viewport changes)\n\t\tif (window.innerWidth === lastInnerWidth) return;\n\t\tlastInnerWidth = window.innerWidth;\n\n\t\tclearTimeout(resizeTimeout);\n\t\tresizeTimeout = window.setTimeout(() => {\n\t\t\t// Resize all Chart.js charts in the registry\n\t\t\tchartRegistry.current.forEach(chart => {\n\t\t\t\tchart.resize();\n\t\t\t});\n\n\t\t\t// Update Minkowski diagram if it exists\n\t\t\tif (minkowskiState.controller && minkowskiState.lastData) {\n\t\t\t\tminkowskiState.controller.update(minkowskiState.lastData);\n\t\t\t}\n\n\t\t\t// Update Twin Paradox Minkowski diagram if it exists\n\t\t\tif (twinsMinkowskiState.controller && twinsMinkowskiState.lastData) {\n\t\t\t\ttwinsMinkowskiState.controller.update(twinsMinkowskiState.lastData);\n\t\t\t}\n\t\t}, 700);\n\t};\n\n\taddEventListener(window, \"resize\", handleResize);\n\taddEventListener(window, \"orientationchange\", handleResize);\n\n\t// Handle tab changes - trigger calculation when spacetime tab is opened\n\tconst spacetimeTab = document.getElementById(\"spacetime-tab\");\n\tconst spacetimeTabHandler = () => {\n\t\t// Check if the diagram hasn't been generated yet\n\t\tif (!minkowskiState.controller) {\n\t\t\t// Trigger the spacetime calculation\n\t\t\tconst spacetimeButton = getButtonElement(\"spacetimeButton\");\n\t\t\tspacetimeButton?.click();\n\t\t}\n\t};\n\taddEventListener(spacetimeTab, \"shown.bs.tab\", spacetimeTabHandler);\n\n\t// Handle simultaneity tab - initialize diagram when opened\n\tconst simultaneityTab = document.getElementById(\"simultaneity-tab\");\n\tconst simultaneityTabHandler = () => {\n\t\t// Add body class to hide the scanline effect (prevents confusion with diagram's \"now\" line)\n\t\tdocument.body.classList.add(\"simultaneity-active\");\n\n\t\tif (!simultaneityState.controller) {\n\t\t\tconst container = document.getElementById(\"simultaneityContainer\");\n\t\t\tif (container) {\n\t\t\t\t// Small delay to ensure tab is fully visible\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsimultaneityState.controller = createSimultaneityDiagram(container);\n\t\t\t\t\t// Restore velocity from text input if set\n\t\t\t\t\tconst input = document.getElementById(\"simVelocityInput\") as HTMLInputElement;\n\t\t\t\t\tif (input && parseFloat(input.value) !== 0) {\n\t\t\t\t\t\tsimultaneityState.controller?.updateSlider?.(parseFloat(input.value));\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n\t};\n\taddEventListener(simultaneityTab, \"shown.bs.tab\", simultaneityTabHandler);\n\n\t// Remove simultaneity-active class when switching away from simultaneity tab\n\tconst allTabs = document.querySelectorAll('[data-bs-toggle=\"tab\"]');\n\tallTabs.forEach(tab => {\n\t\tif (tab.id !== \"simultaneity-tab\") {\n\t\t\taddEventListener(tab, \"shown.bs.tab\", () => {\n\t\t\t\tdocument.body.classList.remove(\"simultaneity-active\");\n\t\t\t});\n\t\t}\n\t});\n\n\t// Simultaneity controls\n\tconst simVelocityInput = document.getElementById(\"simVelocityInput\") as HTMLInputElement;\n\tconst simCalculateButton = document.getElementById(\"simCalculateButton\");\n\tconst simResetButton = document.getElementById(\"simResetButton\");\n\tconst simClearButton = document.getElementById(\"simClearButton\");\n\n\t// Function to update velocity from text input\n\tconst updateVelocityFromInput = () => {\n\t\tif (!simVelocityInput) return;\n\n\t\tlet velocity = parseFloat(simVelocityInput.value);\n\n\t\t// Validate and clamp velocity\n\t\tif (isNaN(velocity)) {\n\t\t\tvelocity = 0;\n\t\t} else {\n\t\t\tvelocity = Math.max(-0.99, Math.min(0.99, velocity));\n\t\t}\n\n\t\t// Update input field with clamped value\n\t\tsimVelocityInput.value = velocity.toString();\n\n\t\tif (simultaneityState.controller?.updateSlider) {\n\t\t\tsimultaneityState.controller.updateSlider(velocity);\n\t\t}\n\t};\n\n\t// Calculate button click handler\n\taddEventListener(simCalculateButton, \"click\", updateVelocityFromInput);\n\n\t// Allow Enter key to trigger calculation\n\tconst simKeypressHandler = (event: KeyboardEvent) => {\n\t\tif (event.key === \"Enter\") {\n\t\t\tupdateVelocityFromInput();\n\t\t}\n\t};\n\taddEventListener(simVelocityInput, \"keypress\", simKeypressHandler as EventListener);\n\n\tconst simResetHandler = () => {\n\t\tif (simultaneityState.controller) {\n\t\t\tsimultaneityState.controller.reset();\n\t\t\t// Reset text input\n\t\t\tif (simVelocityInput) {\n\t\t\t\tsimVelocityInput.value = \"0\";\n\t\t\t}\n\t\t}\n\t};\n\taddEventListener(simResetButton, \"click\", simResetHandler);\n\n\tconst simClearHandler = () => {\n\t\tif (simultaneityState.controller) {\n\t\t\tsimultaneityState.controller.clearAll();\n\t\t}\n\t};\n\taddEventListener(simClearButton, \"click\", simClearHandler);\n\n\t// Initialize from URL parameters and set up bidirectional sync\n\tinitializeFromURL();\n\tconst cleanupURLSync = setupURLSync();\n\n\t// Cleanup function to remove all event listeners\n\tconst cleanup = () => {\n\t\t// Clear any pending resize timeout\n\t\tclearTimeout(resizeTimeout);\n\n\t\t// Remove all tracked event listeners\n\t\teventHandlers.forEach(({ element, event, handler }) => {\n\t\t\telement.removeEventListener(event, handler);\n\t\t});\n\n\t\t// Cleanup URL sync listeners\n\t\tcleanupURLSync();\n\n\t\t// Destroy chart controllers\n\t\tminkowskiState.controller?.destroy();\n\t\ttwinsMinkowskiState.controller?.destroy();\n\t\tsimultaneityState.controller?.destroy();\n\t};\n\n\t// Register cleanup on page unload\n\taddEventListener(window, \"beforeunload\", cleanup);\n});\n"],"names":["round","v","lim","l","h","p2b","n2b","b2n","n2p","map$1","hex","h1","b","h2","eq","isShort","hexParse","str","len","ret","alpha","a","f","hexString","HUE_RE","hsl2rgbn","s","n","k","hsv2rgbn","hwb2rgbn","w","rgb","i","hueValue","r","g","d","max","rgb2hsl","min","calln","c","hsl2rgb","hwb2rgb","hsv2rgb","hue","hueParse","m","p1","p2","rotate","deg","hslString","map","names$1","unpack","unpacked","keys","tkeys","j","ok","nk","names","nameParse","RGB_RE","rgbParse","rgbString","to","from","interpolate","rgb1","rgb2","t","modHSL","ratio","tmp","clone","proto","fromObject","input","functionParse","Color$1","Color","type","obj","color","weight","c1","c2","w2","p","w1","val","noop","uid","id","isNullOrUndef","value","isArray","isObject","isNumberFinite","finiteOrDefault","defaultValue","valueOrDefault","toPercentage","dimension","toDimension","callback","fn","args","thisArg","each","loopable","reverse","_elementsEqual","a0","a1","ilen","v0","v1","source","target","klen","isValidKey","key","_merger","options","tval","sval","merge","sources","merger","current","mergeIf","_mergerIf","keyResolvers","o","_splitKey","parts","part","_getKeyResolver","resolveObjectKey","_capitalize","defined","isFunction","setsEqual","item","_isClickEvent","PI","TAU","PITAU","INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","sign","almostEquals","x","y","epsilon","niceNum","range","roundedRange","niceRange","fraction","_factorize","result","sqrt","isNonPrimitive","isNumber","almostWhole","rounded","_setMinAndMaxByKey","array","property","toRadians","degrees","toDegrees","radians","_decimalPlaces","e","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","angle","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","start","end","sameAngleIsFullCircle","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_int16Range","_isBetween","_lookup","table","cmp","index","hi","lo","mid","_lookupByKey","last","ti","_rlookupByKey","_filterBetween","values","arrayEvents","listenArrayEvents","listener","method","base","res","object","unlistenArrayEvents","stub","listeners","_arrayUnique","items","set","requestAnimFrame","throttled","argsToUse","ticking","debounce","delay","timeout","_toLeftRightCenter","align","_alignStartEnd","_textX","left","right","rtl","_getStartAndCountOfVisiblePoints","meta","points","animationsDisabled","pointCount","count","iScale","vScale","_parsed","spanGaps","axis","minDefined","maxDefined","distanceToDefinedLo","point","distanceToDefinedHi","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","changed","atEdge","elasticIn","elasticOut","effects","isPatternOrGradient","getHoverColor","numbers","colors","applyAnimationsDefaults","defaults","name","applyLayoutsDefaults","intlCache","getNumberFormat","locale","cacheKey","formatter","formatNumber","num","formatters","tickValue","ticks","notation","delta","maxTick","calculateDelta","logDelta","numDecimal","remain","Ticks","applyScaleDefaults","_ctx","overrides","descriptors","getScope$1","node","root","scope","Defaults","_descriptors","_appliers","context","ctx","targetScope","targetName","scopeObject","targetScopeObject","privateName","local","appliers","apply","toFontString","font","_measureText","data","gc","longest","string","textWidth","_longestText","arrayOfThings","cache","jlen","thing","nestedThing","gcLen","_alignPixel","chart","pixel","width","devicePixelRatio","halfWidth","clearCanvas","canvas","drawPoint","drawPointLegend","xOffset","yOffset","size","cornerRadius","xOffsetW","yOffsetW","style","rotation","radius","rad","_isPointInArea","area","margin","clipArea","unclipArea","_steppedLineTo","previous","flip","mode","midpoint","_bezierCurveTo","setRenderOpts","opts","decorateText","line","metrics","top","bottom","yDecoration","drawBackdrop","oldColor","renderText","text","lines","stroke","addRoundedRectPath","rect","LINE_HEIGHT","FONT_STYLE","toLineHeight","matches","numberOrZero","_readValueToProps","props","objProps","read","prop","toTRBL","toTRBLCorners","toPadding","toFont","fallback","resolve","inputs","info","_addGrace","minmax","grace","beginAtZero","change","keepZero","add","createContext","parentContext","_createResolver","scopes","prefixes","rootScopes","getTarget","finalRootScopes","_resolve","_cached","_resolveWithPrefixes","getKeysFromAllScopes","storage","_attachContext","proxy","subProxy","descriptorDefaults","receiver","_resolveWithContext","_scriptable","_indexable","_allKeys","readKey","prefix","needsSubResolver","_proxy","_context","_subProxy","_resolveScriptable","_resolveArray","getValue","_stack","createSubResolver","isIndexable","arr","resolver","resolveFallback","getScope","parent","addScopes","parentScopes","parentFallback","allScopes","addScopesFromKey","subGetTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","parsed","EPSILON","getPoint","getValueAxis","indexAxis","splineCurve","firstPoint","middlePoint","afterPoint","next","d01","d12","s01","s12","fa","fb","monotoneAdjust","deltaK","mK","pointsLen","alphaK","betaK","tauK","squaredMagnitude","pointCurrent","pointAfter","monotoneCompute","valueAxis","pointBefore","iPixel","vPixel","splineCurveMonotone","slopeDelta","capControlPoint","pt","capBezierPoints","inArea","inAreaPrev","inAreaNext","_updateBezierControlPoints","loop","controlPoints","prev","_isDomSupported","_getParentNode","domNode","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","element","getStyle","el","positions","getPositionedStyle","styles","suffix","pos","useOffsetPos","getCanvasPosition","touches","offsetX","offsetY","box","getRelativePosition","event","currentDevicePixelRatio","borderBox","paddings","borders","height","getContainerSize","maxWidth","maxHeight","container","containerStyle","containerBorder","containerPadding","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","containerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","supportsEventListenerOptions","passiveSupported","readUsedSize","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","getRightToLeftAdapter","rectX","itemWidth","getLeftToRightAdapter","_itemWidth","getRtlAdapter","overrideTextDirection","direction","original","restoreTextDirection","propertyFn","normalizeSegment","getSegment","segment","bounds","startBound","endBound","between","normalize","_boundSegment","compare","inside","subStart","prevValue","startIsBefore","endIsBefore","shouldStart","shouldStop","_boundSegments","segments","sub","findStartAndEnd","solidSegments","cur","_computeSegments","segmentOptions","splitByStyles","completeLoop","doSplitByStyles","chartContext","baseStyle","readStyle","datasetIndex","prevStyle","addStyle","st","dir","styleChanged","replacer","getSizeForArea","scale","chartArea","field","getDatasetArea","getDatasetClipArea","clip","Animator","anims","date","callbacks","numSteps","remaining","draw","charts","cb","acc","animator","transparent","interpolators","factor","c0","Animation","cfg","currentValue","elapsed","duration","promises","rej","resolved","Animations","config","animationOptions","animatedProps","option","newOptions","resolveTargetOptions","animations","awaitAll","running","animation","properties","anim","scaleClip","allowedOverflow","defaultClip","toClip","getSortedDatasetIndices","filterVisible","metasets","applyStack","stack","dsIndex","singleMode","otherValue","found","convertObjectDataToArray","iAxisKey","vAxisKey","adata","isStacked","stacked","getStackKey","indexScale","valueScale","getUserBounds","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","positive","updateStacks","controller","iAxis","vAxis","itemStacks","visualValues","getFirstScaleId","scales","createDatasetContext","createDataContext","clearStacks","isDirectUpdateMode","cloneIfNotShared","cached","shared","createStack","canStack","DatasetController","dataset","chooseId","xid","yid","rid","iid","vid","scaleID","_data","resetNewElements","stackChanged","oldStacked","scopeKeys","_stacked","sorted","isNotInOrderComparedToPrev","labels","singleScale","xAxisKey","yAxisKey","parsedValue","otherScale","otherMin","otherMax","_skip","elements","active","drawActiveElementsOnTop","elementType","sharing","transition","sharedOptions","firstOpts","previouslySharedOptions","includeOptions","arg1","arg2","numMeta","numData","move","removed","newCount","getAllScaleValues","visibleMetas","computeMinSampleSize","curr","updateMinAndPrev","computeFitCategoryTraits","ruler","stackCount","thickness","computeFlexCategoryTraits","pixels","percent","parseFloatBar","entry","startValue","endValue","barStart","barEnd","parseValue","parseArrayOrPrimitive","isFloatBar","custom","barSign","actualBase","borderProps","setBorderSkipped","edge","parseEdge","swap","startEnd","orig","v2","setInflateAmount","inflateAmount","BarController","bars","reset","horizontal","vpixels","ipixels","dataIndex","currentParsed","iScaleValue","skipNull","indexScaleId","firstScaleAxisId","barThickness","baseValue","minBarLength","floating","length","head","startPixel","endPixel","halfGrid","maxBarThickness","center","axisCount","axisID","axisNumber","stackIndex","rects","BubbleController","getRatioAndOffset","circumference","cutout","ratioX","ratioY","startAngle","endAngle","startX","startY","endX","endY","calcMax","calcMin","maxX","maxY","minX","minY","DoughnutController","pointStyle","textAlign","useBorderRadius","borderRadius","label","legendItem","legend","getter","arcs","spacing","maxSize","chartWeight","maxRadius","outerRadius","innerRadius","radiusLength","animationOpts","centerX","centerY","animateScale","arc","metaData","total","ringWeightOffset","LineController","_dataset","maxGapLength","directUpdate","pointsCount","prevParsed","nullData","border","lastPoint","PolarAreaController","minSize","datasetStartAngle","defaultAngle","PieController","RadarController","pointPosition","ScatterController","showLine","controllers","abstract","DateAdapterBase","members","adapters","binarySearch","metaset","intersect","_sorted","lookupMethod","evaluateInteractionItems","position","handler","getDistanceMetricForAxis","useX","useY","deltaX","deltaY","getIntersectItems","useFinalPosition","includeInvisible","getNearestRadialItems","evaluationFunc","getNearestCartesianItems","distanceMetric","minDistance","inRange","distance","getNearestItems","getAxisItems","rangeMethod","intersectsItem","Interaction","STATIC_POSITIONS","filterByPosition","filterDynamicPositionByAxis","sortByWeight","wrapBoxes","boxes","layoutBoxes","stackWeight","buildStacks","layouts","wrap","setLayoutDims","params","vBoxMaxWidth","hBoxMaxHeight","layout","fullSize","buildLayoutBoxes","centerHorizontal","centerVertical","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","newWidth","newHeight","widthChanged","heightChanged","handleMaxPadding","updatePos","getMargins","marginForPositions","fitBoxes","refitBoxes","refit","same","other","setBoxDims","placeBoxes","userPadding","layoutItem","minPadding","padding","availableWidth","availableHeight","verticalBoxes","horizontalBoxes","visibleVerticalBoxCount","BasePlatform","BasicPlatform","EXPANDO_KEY","EVENT_TYPES","isNullOrEmpty","initCanvas","renderHeight","renderWidth","displayWidth","displayHeight","eventListenerOptions","addListener","removeListener","fromNativeEvent","nodeListContains","nodeList","createAttachObserver","observer","entries","trigger","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","resize","listenDevicePixelRatioChanges","unlistenDevicePixelRatioChanges","createResizeObserver","releaseObserver","createProxyAndListen","DomPlatform","initial","proxies","_detectPlatform","Element","final","autoSkip","tickOpts","determinedMaxTicks","determineMaxTicks","ticksLimit","majorIndices","getMajorIndices","numMajorIndices","first","newTicks","skipMajors","calculateSpacing","avgMajorSpacing","skip","offset","tickLength","maxScale","maxChart","evenMajorSpacing","getEvenSpacing","factors","majorStart","majorEnd","diff","reverseAlign","offsetFromEdge","getTicksLimit","ticksLength","maxTicksLimit","sample","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","lineValue","garbageCollect","caches","getTickMarkLength","getTitleHeight","createScaleContext","createTickContext","tick","titleAlign","titleArgs","titleX","titleY","positionAxisID","Scale","raw","_userMin","_userMax","_suggestedMin","_suggestedMax","metas","sampleSize","samplingEnabled","reversePixels","numTicks","minRotation","maxRotation","labelRotation","tickWidth","maxLabelDiagonal","labelSizes","maxLabelWidth","maxLabelHeight","titleOpts","gridOpts","display","isHorizontal","titleHeight","widest","highest","tickPadding","angleRadians","cos","sin","labelHeight","labelWidth","isRotated","labelsBelowTicks","offsetLeft","offsetRight","paddingLeft","paddingRight","paddingTop","paddingBottom","widths","heights","widestLabelSize","highestLabelSize","tickFont","fontString","lineHeight","nestedLabel","valueAt","idx","decimal","optionTicks","rot","grid","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","x1","y1","x2","y2","limit","step","optsAtIndex","optsAtIndexBorder","lineWidth","lineColor","borderDash","borderDashOffset","tickColor","tickBorderDash","tickBorderDashOffset","crossAlign","mirror","tickAndPadding","hTickAndPadding","lineCount","textOffset","textBaseline","halfCount","strokeColor","strokeWidth","tickTextAlign","backdrop","labelPadding","backgroundColor","drawLine","lastLineWidth","renderTextOptions","title","tz","gz","bz","fontSize","TypedRegistry","override","parentScope","isIChartComponent","registerDefaults","itemDefaults","routeDefaults","routes","propertyParts","sourceName","sourceScope","Registry","typedRegistry","arg","reg","itemReg","registry","component","camelMethod","PluginService","hook","filter","descriptor","plugin","all","plugins","allPlugins","createDescriptors","previousDescriptors","localIds","getOpts","pluginOpts","getIndexAxis","datasetDefaults","getAxisFromDefaultScaleID","getDefaultScaleIDFromAxis","idMatchesAxis","axisFromPosition","determineAxis","scaleOptions","getAxisFromDataset","retrieveAxisFromDatasets","boundDs","mergeScaleConfig","chartDefaults","configScales","chartIndexAxis","scaleConf","defaultId","defaultScaleOptions","defaultID","initOptions","initData","initConfig","keyCache","keysCached","cachedKeys","generate","addIfFound","Config","datasetType","mainScope","resetCache","_scopeCache","keyLists","subPrefixes","getResolver","needContext","subResolver","resolverCache","hasFunction","isScriptable","scriptable","indexable","version","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l1","l2","onAnimationsComplete","onAnimationProgress","getCanvas","instances","getChart","moveNumericKeys","intKey","determineLastEvent","lastEvent","inChartArea","isClick","Chart","invalidatePlugins","userConfig","initialCanvas","existingChart","maintainAspectRatio","_aspectRatio","newSize","newRatio","scalesOptions","axisOptions","scaleOpts","updated","isRadial","scaleType","scaleClass","hasUpdated","datasets","newControllers","ControllerClass","datasetElementType","dataElementType","animsDisabled","_active","_lastEvent","existingEvents","newEvents","_hiddenIndices","changes","_dataChanges","datasetCount","makeSet","changeSet","noArea","layers","visible","platform","_add","_remove","detached","attached","enabled","activeElements","lastActive","pluginId","replay","hoverOptions","deactivated","activated","eventFilter","clipSelf","borderWidth","borderJoinStyle","outerAngleClip","innerAngleClip","clipWidth","clipArc","pixelMargin","angleMargin","toRadiusCorners","parseBorderRadius$1","angleDelta","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","rThetaToXY","theta","pathArc","circular","innerR","spacingOffset","noSpacingInnerRadius","noSpacingOuterRadius","avNogSpacingRadius","adjustedAngle","beta","angleOffset","outerStart","outerEnd","innerStart","innerEnd","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","outerMidAdjustedAngle","pCenter","p4","innerMidAdjustedAngle","p8","outerStartX","outerStartY","outerEndX","outerEndY","drawArc","fullCircles","drawBorder","inner","ArcElement","chartX","chartY","rAdjust","_circumference","nonZeroBetween","betweenAngles","withinRadius","halfAngle","halfRadius","fix","radiusOffset","setStyle","lineTo","getLineMethod","pathVars","paramsStart","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","lineMethod","fastPathSegment","avgX","countX","prevX","lastY","pointIndex","drawX","truncX","_getSegmentMethod","_getInterpolationMethod","strokePathWithCache","path","strokePathDirect","segmentMethod","usePath2D","LineElement","_interpolate","interpolated","inRange$1","PointElement","mouseX","mouseY","getBarBounds","bar","half","skipOrLimit","parseBorderWidth","maxW","maxH","parseBorderRadius","enableBorderRadius","maxR","enableBorder","boundingRects","skipX","skipY","hasRadius","addNormalRectPath","inflateRect","amount","refRect","BarElement","borderColor","outer","addRectPath","BORDER_COLORS","BACKGROUND_COLORS","getBorderColor","getBackgroundColor","colorizeDefaultDataset","colorizeDoughnutDataset","colorizePolarAreaDataset","getColorizer","containsColorsDefinitions","containsColorsDefinition","containsDefaultColorsDefenitions","plugin_colors","_args","chartOptions","containsColorDefenition","colorizer","lttbDecimation","samples","decimated","bucketWidth","sampledIndex","endIndex","maxAreaPoint","maxArea","nextA","avgY","avgRangeStart","avgRangeEnd","avgRangeLength","rangeOffs","rangeTo","pointAx","pointAy","minMaxDecimation","minIndex","maxIndex","startIndex","xMin","dx","lastIndex","intermediateIndex1","intermediateIndex2","cleanDecimatedDataset","cleanDecimatedData","getStartAndCountOfVisiblePointsSimplified","plugin_decimation","xAxis","threshold","_segments","tpoints","_findSegmentEnd","_getBounds","targetSegments","tgt","subBounds","fillSources","fillSource","_getEdge","_pointsFromSegments","boundary","linePoints","_createBoundaryLine","_loop","_shouldApplyFill","_resolveTarget","propagate","fill","visited","_decodeFill","parseFillOption","decodeTargetIndex","firstCh","_getTargetPixel","_getTargetValue","fillOption","_buildStackLine","sourcePoints","linesBelow","getLinesBelow","addPointsBelow","below","sourcePoint","postponed","findPoint","pointValue","firstValue","lastValue","simpleArc","_getTarget","getLineByIndex","computeBoundary","computeCircularBoundary","computeLinearBoundary","_drawfill","lineOpts","above","doFill","fillColor","clipVertical","clipHorizontal","clipY","lineLoop","clipX","src","notShape","clipBounds","interpolatedLineTo","targetLoop","interpolatedPoint","getBoxSize","labelOpts","boxHeight","boxWidth","itemsEqual","Legend","legendItems","labelFont","itemHeight","hitboxes","lineWidths","totalHeight","row","_itemHeight","columnSizes","heightLimit","totalWidth","currentColWidth","currentColHeight","col","calculateItemSize","rtlHelper","hitbox","defaultColor","halfFontSize","cursor","drawLegendBox","drawOptions","yBoxTop","xBoxLeft","fillText","realX","fontLineHeight","calculateLegendItemHeight","titleFont","titlePadding","topPaddingPlusHalfFontSize","hitBox","lh","isListened","hoveredItem","sameItem","calculateItemWidth","calculateItemHeight","legendItemText","plugin_legend","ci","usePointStyle","Title","textSize","fontOpts","createTitle","plugin_title","titleBlock","plugin_subtitle","positioners","xSet","eventPosition","nearestElement","tp","pushOrConcat","toPush","splitNewlines","createTooltipItem","getTooltipSize","tooltip","body","footer","bodyFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","bodyLineHeight","widthPadding","maxLineWidth","determineYAlign","doesNotFitWithAlign","xAlign","caret","determineXAlign","yAlign","chartWidth","determineAlignment","alignX","alignY","paddingAndSize","getBackgroundPoint","alignment","caretSize","caretPadding","topLeft","topRight","bottomLeft","bottomRight","getAlignedX","getBeforeAfterBodyLines","createTooltipContext","tooltipItems","overrideCallbacks","defaultCallbacks","labelCount","tooltipItem","invokeCallbackWithFallback","Tooltip","beforeTitle","afterTitle","bodyItems","scoped","beforeFooter","afterFooter","labelColors","labelPointStyles","labelTextColors","positionAndSize","backgroundPoint","tooltipPoint","caretPosition","ptX","ptY","x3","y3","titleSpacing","labelColor","labelPointStyle","colorX","rtlColorX","yOffSet","colorY","outerX","innerX","bodySpacing","bodyAlign","displayColors","xLinePadding","fillLineOfText","bodyAlignForCalculation","textColor","tooltipSize","animX","animY","opacity","hasTooltipContent","positionChanged","caretX","caretY","plugin_tooltip","addIfString","addedLabels","findOrAddLabel","_getLabelForValue","CategoryScale","added","generateTicks$1","generationOptions","dataRange","precision","maxTicks","maxDigits","includeBounds","unit","maxSpaces","rmin","rmax","countDefined","minSpacing","niceMin","niceMax","numSpaces","decimalPlaces","relativeLabelSize","LinearScaleBase","setMin","setMax","minSign","maxSign","stepSize","numericGeneratorOptions","LinearScale","log10Floor","changeExponent","isMajor","tickVal","steps","rangeExp","rangeStep","startExp","generateTicks","minExp","exp","significand","lastTick","LogarithmicScale","getTickBackdropHeight","measureLabelSize","determineLimits","fitWithPointLabels","limits","valueCount","pointLabelOpts","additionalAngle","plFont","hLimits","vLimits","updateLimits","buildPointLabelItems","createPointLabelItem","itemOpts","outerDistance","extra","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","isNotOverlapped","centerPointLabels","drawPointLabelBox","backdropColor","backdropLeft","backdropTop","backdropWidth","backdropHeight","drawPointLabels","pointLabels","pathRadiusLine","drawRadiusLine","gridLineOpts","createPointLabelContext","RadialLinearScale","leftMovement","rightMovement","topMovement","bottomMovement","angleMultiplier","scalingFactor","scaledDistance","pointLabel","distanceFromCenter","angleLines","INTERVALS","UNITS","sorter","parse","adapter","parser","isoWeekday","determineUnitForAutoTicks","minUnit","capacity","interval","determineUnitForFormatting","determineMajorUnit","addTick","time","timestamps","timestamp","setMajorTicks","majorUnit","major","ticksFromTimestamps","TimeScale","_applyBounds","timeOpts","minor","weekday","hasWeekday","format","formats","fmt","minorFormat","majorFormat","offsets","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","displayFormats","exampleLabel","prevSource","nextSource","prevTarget","nextTarget","span","TimeSeriesScale","registerables","setElement","units","getInputElement","getResultElement","getButtonElement","EXP_LIMIT","MAX_DIGITS","NUMERALS","LN10","DEFAULTS","inexact","quadrant","external","decimalError","invalidArgument","precisionLimitExceeded","cryptoUnavailable","tag","mathfloor","mathpow","isBinary","isHex","isOctal","isDecimal","BASE","LOG_BASE","MAX_SAFE_INTEGER","LN10_PRECISION","PI_PRECISION","P","finalise","Ctor","xdL","ydL","xd","yd","xs","ys","pr","rm","cosine","toLessThanHalfPi","rep","sd","t3","t3plusx","digitsToString","divide","one","tinyPow","taylorSeries","cosh2_x","d8","sinh2_x","d5","d16","d20","getPi","wpr","xsd","halfPi","px","isBase10","denominator","inf","guard","naturalLogarithm","getLn10","checkRoundingDigits","xe","xLTy","getBase10Exponent","q","naturalExponential","carry","z","getPrecision","sine","rL","toStringBinary","dp","checkInt32","finiteToString","maxD","d0","d1","d2","n0","n1","yn","intPow","ws","indexOfLastWord","getZeroString","repeating","di","rd","convertBase","baseIn","baseOut","arrL","strL","cos2x","multiplyInteger","temp","aL","bL","subtract","logBase","more","prod","prodL","qd","rem","remL","rem0","xi","xL","yd0","yL","yz","isTruncated","digits","roundUp","xdi","out","isExp","nonFiniteToString","zs","truncate","isOdd","maxOrMin","pow","sum","numerator","parseDecimal","parseOther","divisor","isFloat","Decimal","sin2_x","isHyperbolic","u","isNeg","pi","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","clamp","useDefaults","ps","cosh","isDecimalInstance","div","floor","hypot","ln","log","log2","mod","mul","random","sinh","tan","tanh","trunc","DecimalNaN","lightYear","secondsPerYear","everestMass","moonMass","earthMass","solarMass","milkyWayMass","superclusterMass","observableUniverseMass","cSquared","precisionConfigured","configure","ensure","check","msg","checkVelocity","velocity","relativisticVelocity","accel","tau","aD","tauD","relativisticDistance","relativisticTimeForDistance","dist","distD","flipAndBurn","accelD","halfDist","timeToHalfProper","timeToHalfCoord","coordinateTime","peakVelocity","lorentz","lorentzFactor","twinParadox","properTime","vel","properTimeS","gamma","earthTimeS","ageDiff","oneWayDist","totalDist","warpDriveTimeTravel","distanceMeters","boostVelocityC","transitTimeSeconds","boostDurationSeconds","boostC","transitTime","boostDuration","boostVelocity","simultaneityShift","earthTime","travelerTime","rapidityFromVelocity","velocityFromRapidity","rapidity","addVelocitiesC","v1D","v2D","pionRocketAccelTime","fuelMass","dryMass","nozzleEfficiency","chargedFraction","fuelD","dryD","nozzleEffD","chargedFractionD","veEffective","m0","mf","pionRocketFuelFraction","thrustTime","timeD","massRatio","formatSignificant","ignoreChar","significantDecimalPlaces","preserveTrailingZeros","needsFullPrecision","maxDecimalPlaces","integerPart","zeros","decOutput","remainingPlaces","sigPart","digit","formatMassWithUnit","fuelMassScientific","everestMasses","tons","moonMasses","earthMasses","solarMasses","milkyWayMasses","superclusterMasses","observableUniverseMasses","formatDistanceAutoUnit","distanceInLightYears","distanceInKm","formatTimeWithUnit","timeInMinutes","absTime","timeInHours","timeInDays","timeInYears","global","module","define","Alea","seed","me","mash","Mash","copy","impl","xg","state","prng","this","XorGen","strseed","bot","X","init","__viteBrowserExternal","pool","math","chunks","rngname","startdenom","significance","overflow","mask","nodecrypto","seedrandom","shortseed","mixkey","flatten","tostring","autoseed","arc4","ARC4","is_math_call","keylen","depth","typ","stringseed","smear","browser","require$$0","alea","xor128","require$$1","xorwow","require$$2","xorshift7","require$$3","xor4096","require$$4","tychei","require$$5","sr","require$$6","_modelTotalStars","estimateStarsInSphere","radiusLy","nShells","samplesPerShell","rhoLocal","hR","hZ","rhoBulgeCenter","rBulge","rhoHaloNorm","rHalo","rCore","rSun","rhoDiskCenter","SHELL_WIDTH_LY","nActualShells","totalStars","rng","rInner","rOuter","densities","costheta","phi","rGal","zGal","rGalSph","diskDensity","bulgeDensity","haloDensity","rhoTotal","shellVolume","shellStars","_computeStarsWithoutNormalization","formatStarCount","stars","generateAccelChartData","accelG","durationDays","rl.g","durationSeconds","numPoints","properTimeVelocity","coordTimeVelocity","properTimeRapidity","coordTimeRapidity","properTimeTimeDilation","coordTimeTimeDilation","properTimeMassRemaining","positionVelocity","spacetimeWorldline","tauDecimal","rl.ensure","tauDaysDecimal","tauDays","rl.relativisticVelocity","velocityCDecimal","rl.c","velocityC","rapidityDecimal","rl.rapidityFromVelocity","rl.lorentzFactor","timeDilationDecimal","rl.one","timeDilation","tDaysDecimal","rl.coordinateTime","tDays","fuelFraction","rl.pionRocketFuelFraction","massRemainingDecimal","massRemaining","distanceLyDecimal","rl.relativisticDistance","rl.lightYear","distanceLy","tYearsDecimal","tYears","generateFlipBurnChartData","distanceLightYears","rl.flipAndBurn","halfProperTimeSeconds","numPointsPerPhase","properTimeLorentz","coordTimeLorentz","positionVelocityAccel","positionVelocityDecel","tauYearsDecimal","rl.secondsPerYear","tauYears","tauAccel","decelThrust","totalThrustTime","tAccel","remainingAccelDistance","currentDistanceLyDecimal","currentDistanceLy","generateTwinParadoxChartData","properTimeYears","halfTimeDecimal","velocityDecimal","gammaDecimal","velocityProfile","travelingTwinAging","earthTwinAging","distanceProfile","properTimeDistance","coordTimeDistance","earthTimeDecimal","distanceDecimal","negativeVelocityCDecimal","negativeVelocityC","tauSinceTurnaroundDecimal","createVelocityGradient","gradient","createArrowIndicators","arrowIndices","arrowSet","indexMap","pointRadii","_","pointStyles","pointRotations","nextArrowIdx","dy","createMassRemainingDatasets","createDualTimeDatasets","properTimeData","coordTimeData","properLabel","coordLabel","createChartOptions","baseOptions","updateChart","canvasId","newRegistry","updateAccelCharts","timeModes","maxProperTime","maxCoordTime","velocityXMax","lorentzXMax","rapidityXMax","posVelCanvas","createPositionVelocityChart","spacetimeCanvas","createSpacetimeChart","updateFlipBurnCharts","maxMassProperTime","velocityChartXMax","lorentzChartXMax","rapidityChartXMax","createPositionVelocityFlipBurnChart","accelData","decelData","accelGradient","decelGradient","accelPointRadii","accelPointStyles","accelPointRotations","decelPointRadii","decelPointStyles","decelPointRotations","maxTime","updateTwinParadoxCharts","maxEarthTime","chartTimeModes","createLorentzHandler","getInput","getResult","rl.checkVelocity","rl.formatSignificant","createRapidityFromVelocityHandler","createVelocityFromRapidityHandler","rl.velocityFromRapidity","createAddVelocitiesHandler","getV1Input","getV2Input","v1Input","v2Input","rl.addVelocitiesC","createWarpDriveHandler","getDistanceInput","getBoostInput","getTransitInput","getBoostDurationInput","getResults","distanceInput","boostInput","transitInput","boostDurationInput","results","distanceMetres","transitSeconds","rl.warpDriveTimeTravel","boostVelocityMs","displacementMinutes","simultaneityMinutes","travelerTimeMinutes","dispResult","simResult","lorentzResult","travelerResult","dispFormatted","rl.formatTimeWithUnit","simFormatted","travelerFormatted","createAccelHandler","getAccelInput","getTimeInput","getDryMassInput","getEfficiencyInput","chartRegistry","pendingRAF","pendingCalculation","accelInput","timeInput","dryMassInput","efficiencyInput","resultA1","resultA2","resultA1b","resultA2b","resultAFuel","resultAFuelFraction","resultAStars","resultAGalaxyFraction","accelGStr","accelGDec","timeStr","timeDaysDec","dryMassStr","dryMassDec","efficiencyStr","efficiencyDec","secs","relVel","relDist","relVelC","relDistC","relDistKm","coordTimeDays","efficiency","fuelPercent","coordTimeYears","distanceFormatted","rl.formatDistanceAutoUnit","rl.formatMassWithUnit","starEstimate","extra.estimateStarsInSphere","starsFormatted","extra.formatStarCount","fractionPercent","efficiencyNum","createFlipBurnHandler","resultFlip1","resultFlip2","resultFlip3","resultFlip4","resultFlip5","resultFlip6","resultFlipFuel","resultFlipFuelFraction","resultFlipStars","resultFlipGalaxyFraction","distanceLightYearsStr","distanceLYDec","coordTime","peak","metre","sec","createTwinParadoxHandler","getVelocityInput","onDiagramDrawn","silent","velocityInput","resultTwins1","resultTwins2","resultTwins3","resultTwins4","resultTwins5","resultTwins6","resultTwins7","resultTwins8","velocityCStr","velocityCDec","properTimeYearsStr","properTimeYearsDec","execute","rl.twinParadox","travelingAge","earthAge","velocityMs","oneWayLy","totalLy","rapidityValue","velocityCNum","properTimeYearsNum","minkowskiData","createPionAccelTimeHandler","getFuelMassInput","fuelMassInput","accelTimeDays","rl.pionRocketAccelTime","createPionFuelFractionHandler","getThrustTimeInput","getResultFraction","getResultMass","thrustTimeInput","resultFraction","resultMass","thrustTimeSeconds","fuelFractionPercent","createSpacetimeIntervalHandler","getTime2Input","getX2Input","getResultSquared","getResultType","getResultDeltaT","getResultDeltaX","getResultMinSep","getResultVelocity","time2Input","x2Input","resultSquared","resultType","resultDeltaT","resultDeltaX","resultMinSep","resultVelocity","t2Str","t2Dec","x2KmStr","x2KmDec","t1","t2","x2Km","deltaT","intervalSquared","intervalSquaredKm","tolerance","requiredVelC","properDistanceKm","deltaTprime","deltaXprimeKm","intervalType","diagramData","createChartTimeModeHandler","chartId","btn","btnElement","chartName","newXMax","createMassChartSliderHandler","getSlider","getValueDisplay","slider","valueDisplay","newMax","initializeMassChartSlider","sliderId","valueDisplayId","dataMax","maxValue","getDistanceExponent","maxDistance","logMin","logMax","sliderToDistance","percentage","exponent","distanceToSlider","createPositionVelocitySliderHandler","sliderPercent","chartDistance","displayValue","initializePositionVelocitySlider","xhtml","namespaces","namespace","creatorInherit","document","uri","creatorFixed","fullname","creator","none","selector","selection_select","select","groups","subgroups","group","subgroup","subnode","Selection","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","find","childFind","match","childFirst","selection_selectChild","children","childrenFilter","selection_selectChildren","selection_filter","sparse","update","selection_enter","EnterNode","datum","child","constant$1","bindIndex","enter","exit","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","selection","groups0","groups1","m1","merges","group0","group1","selection_order","selection_sort","ascending","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","priority","styleFunction","selection_style","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","classList","ClassList","classedAdd","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","parseTypenames","typenames","onRemove","typename","on","onAdd","selection_on","dispatchEvent","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","selection_selection","sourceEvent","pointer","svg","dispatch","Dispatch","types","T","get","that","frame","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","sleep","timerFlush","wake","nap","poke","t0","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","timing","schedules","self","tween","stop","interrupt","selection_interrupt","constructor","factory","prototype","extend","definition","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","rgbn","Rgb","rgba","hsla","rgbConvert","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","Hsl","hsl","m2","clamph","clampt","linear","exponential","nogamma","interpolateRgb","rgbGamma","colorRgb","interpolateNumber","reA","reB","zero","interpolateString","bi","am","bm","bs","number","identity","decompose","scaleX","scaleY","skewX","svgNode","parseCss","parseSvg","interpolateTransform","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","interpolateTransformCss","interpolateTransformSvg","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","value1","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","reject","cancel","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","COLORS","C","func","wait","formatCoordinate","calculateGamma","lorentzTransform","ct","createScaleSet","maxCoord","xCoord","ctCoord","setupSVG","createAxisDefinitions","defs","D3_COLORS","feMerge","createLayerGroups","renderStandardAxes","extent","axesGroup","axesData","renderTransformedAxes","markerUrl","cssClass","origin","cosAngle","sinAngle","ctPrimeLength","xPrimeLength","createTooltip","content","createScales","renderLightCones","withTransition","largeExtent","lightConesGroup","backgroundGroup","mainFillData","eventFillData","lineData","renderAxes","originalAxes","movingAxes","allAxes","axisLines","renderSimultaneityLines","simGroup","renderEvents","intervalGroup","intervalLine","eventsGroup","eventColor","timeDecimal","xDecimal","eventData","events","renderLabels","c_km_per_s","ctDecimal","ctPrimeDecimal","xPrimeDecimal","labelsGroup","labelData","causalData","elem","labelGroup","setupTooltips","hideTimeout","attachAxisTooltips","axisName","attachEventTooltips","timeDecimalStr","xDecimalStr","attachLightConeTooltips","touchedElement","touch","targetElement","startFrameAnimation","_onUpdate","startTime","isPaused","totalPausedTime","pauseStartTime","manualPosition","targetAngle","updateFrame","currentAngle","cosCurrent","sinCurrent","simLength","currentBeta","currentBetaDecimal","currentGamma","currentCtPrime","currentXPrime","currentCtPrimeDecimal","currentXPrimeDecimal","animationTimer","drawMinkowskiDiagramD3","tooltips","controlContainer","toggleButton","sliderContainer","isPlaying","visibilityChangeHandler","lastInnerWidth","resizeHandler","newData","wasPlaying","formatVelocityMs","calculateEvents","earthTimeSec","distanceKm","departure","turnaround","arrival","renderWorldline","worldlinesGroup","earthPath","earthLine","pathString","travelLine","eventLabels","infoData","ageDifferenceDecimal","renderLegend","itemDiv","indicator","startJourneyAnimation","animatedGroup","currentPos","segmentT","coneFillData","coneExtent","properTimeDecimal","drawTwinParadoxMinkowski","onVelocityChange","isSliderUpdate","velocityUpdateTimeout","velocitySliderContainer","velocityValueDisplay","velocitySlider","newVelocityC","twinsData","currentEvents","pendingEvents","subscribers","getEvents","setEvents","notifySubscribers","setPendingEvents","consumePendingEvents","pendingSliderValues","TAB_CONFIGS","CALC_CONFIGS","getDefaultValue","inputId","isValidNumber","getActiveTab","activeTab","tabId","initializeFromURL","urlParams","tabParam","tabConfig","tabButton","initializeCalcFromURL","initializeSimultaneityFromURL","hasValidParams","paramName","paramValue","calcButton","calcType","calcConfig","eventsParam","pair","ctStr","xStr","simultaneityState.setPendingEvents","updateURL","updateCalcURL","updateSimultaneityURL","newUrl","activeCalcType","hasNonDefault","simultaneityState.getEvents","encoded","applyPendingSliderValue","pendingValue","error","applyPendingDistanceSliderValue","pendingDistance","setupURLSync","debounceTimer","handlers","addHandler","button","eventMap","MAX_EVENTS","EVENT_LABELS","EVENT_RADIUS","CLICK_TOLERANCE","TRAIN_EXAMPLE_SCALE","createTrainExample","separation","syncStateToModule","simultaneityState.setEvents","calculateTemporalOrder","eventCt","eventX","refCt","refX","eventPrime","refPrime","deltaCtPrime","getEventColor","order","isReference","createSimultaneityDiagram","animationFrameId","lastTimestamp","renderGrid","gridSpacing","gridLines","axisExtent","x1Prime","ct1Prime","x2Prime","ct2Prime","ct1AxisPrime","x1AxisPrime","ct2AxisPrime","x2AxisPrime","renderNowLine","animationRange","currentCt","intersectionCt","intersectionX","futureConeX1","futureConeX2","pastConeX1","pastConeX2","ct1","ct2","labelX","labelY","checkEventFlashes","nowCtAtEventX","flashEvent","eventId","eventGroup","animate","deltaTime","speed","startAnimation","stopAnimation","updateTemporalOrderings","refEvent","handleClick","evt","evtScreenX","evtScreenY","removeEvent","addEvent","nextLabel","isFirst","newEvent","render","updateTimeSeparations","updateSpatialSeparations","wasReference","updateVelocity","velocityLabel","clearAll","urlUpdateTimer","textInput","positionSliderContainer","positionSlider","progress","positionLabel","buttonContainer","playPauseButton","timeSeparationContainer","spatialSeparationContainer","separations","deltaTimeDecimal","deltaTimeMs","deltaXPrime","formattedDistance","simultaneityState.consumePendingEvents","clampedVelocity","clampedVelocityDecimal","minkowskiState","twinsMinkowskiState","simultaneityState","eventHandlers","addEventListener","targetId","modalElement","Modal","accelHandlerBase","accelHandler","flipHandlerBase","flipHandler","accelMassSliderHandler","flipMassSliderHandler","accelPositionSliderHandler","flipPositionSliderHandler","twinsCalculateHandler","_controller","twinsInputHandler","twinsTab","resizeTimeout","handleResize","spacetimeTab","simultaneityTab","tab","simVelocityInput","simCalculateButton","simResetButton","simClearButton","updateVelocityFromInput","cleanupURLSync"],"mappings":"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","x_google_ignoreList":[0,1,2,4,6,7,8,9,10,11,13,14,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107]}